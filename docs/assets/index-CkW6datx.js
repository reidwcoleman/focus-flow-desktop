var sI=Object.defineProperty;var Lk=n=>{throw TypeError(n)};var aI=(n,e,t)=>e in n?sI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ve=(n,e,t)=>aI(n,typeof e!="symbol"?e+"":e,t),Lw=(n,e,t)=>e.has(n)||Lk("Cannot "+t);var u=(n,e,t)=>(Lw(n,e,"read from private field"),t?t.call(n):e.get(n)),U=(n,e,t)=>e.has(n)?Lk("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),T=(n,e,t,i)=>(Lw(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),O=(n,e,t)=>(Lw(n,e,"access private method"),t);var Tn=(n,e,t,i)=>({set _(r){T(n,e,r,t)},get _(){return u(n,e,i)}});function oI(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var ze=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function c4(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function pg(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var l4={exports:{}},p1={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cI=Symbol.for("react.transitional.element"),lI=Symbol.for("react.fragment");function u4(n,e,t){var i=null;if(t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),"key"in e){t={};for(var r in e)r!=="key"&&(t[r]=e[r])}else t=e;return e=t.ref,{$$typeof:cI,type:n,key:i,ref:e!==void 0?e:null,props:t}}p1.Fragment=lI;p1.jsx=u4;p1.jsxs=u4;l4.exports=p1;var p=l4.exports,d4={exports:{}},We={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WS=Symbol.for("react.transitional.element"),uI=Symbol.for("react.portal"),dI=Symbol.for("react.fragment"),hI=Symbol.for("react.strict_mode"),fI=Symbol.for("react.profiler"),pI=Symbol.for("react.consumer"),gI=Symbol.for("react.context"),mI=Symbol.for("react.forward_ref"),yI=Symbol.for("react.suspense"),bI=Symbol.for("react.memo"),h4=Symbol.for("react.lazy"),vI=Symbol.for("react.activity"),Ik=Symbol.iterator;function xI(n){return n===null||typeof n!="object"?null:(n=Ik&&n[Ik]||n["@@iterator"],typeof n=="function"?n:null)}var f4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p4=Object.assign,g4={};function gg(n,e,t){this.props=n,this.context=e,this.refs=g4,this.updater=t||f4}gg.prototype.isReactComponent={};gg.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};gg.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function m4(){}m4.prototype=gg.prototype;function qS(n,e,t){this.props=n,this.context=e,this.refs=g4,this.updater=t||f4}var $S=qS.prototype=new m4;$S.constructor=qS;p4($S,gg.prototype);$S.isPureReactComponent=!0;var Pk=Array.isArray;function XD(){}var Ht={H:null,A:null,T:null,S:null},y4=Object.prototype.hasOwnProperty;function HS(n,e,t){var i=t.ref;return{$$typeof:WS,type:n,key:e,ref:i!==void 0?i:null,props:t}}function wI(n,e){return HS(n.type,e,n.props)}function VS(n){return typeof n=="object"&&n!==null&&n.$$typeof===WS}function _I(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var zk=/\/+/g;function Iw(n,e){return typeof n=="object"&&n!==null&&n.key!=null?_I(""+n.key):e.toString(36)}function DI(n){switch(n.status){case"fulfilled":return n.value;case"rejected":throw n.reason;default:switch(typeof n.status=="string"?n.then(XD,XD):(n.status="pending",n.then(function(e){n.status==="pending"&&(n.status="fulfilled",n.value=e)},function(e){n.status==="pending"&&(n.status="rejected",n.reason=e)})),n.status){case"fulfilled":return n.value;case"rejected":throw n.reason}}throw n}function Uh(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case WS:case uI:a=!0;break;case h4:return a=n._init,Uh(a(n._payload),e,t,i,r)}}if(a)return r=r(n),a=i===""?"."+Iw(n,0):i,Pk(r)?(t="",a!=null&&(t=a.replace(zk,"$&/")+"/"),Uh(r,e,t,"",function(l){return l})):r!=null&&(VS(r)&&(r=wI(r,t+(r.key==null||n&&n.key===r.key?"":(""+r.key).replace(zk,"$&/")+"/")+a)),e.push(r)),1;a=0;var o=i===""?".":i+":";if(Pk(n))for(var c=0;c<n.length;c++)i=n[c],s=o+Iw(i,c),a+=Uh(i,e,t,s,r);else if(c=xI(n),typeof c=="function")for(n=c.call(n),c=0;!(i=n.next()).done;)i=i.value,s=o+Iw(i,c++),a+=Uh(i,e,t,s,r);else if(s==="object"){if(typeof n.then=="function")return Uh(DI(n),e,t,i,r);throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function H0(n,e,t){if(n==null)return n;var i=[],r=0;return Uh(n,i,"","",function(s){return e.call(t,s,r++)}),i}function AI(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Wk=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},EI={map:H0,forEach:function(n,e,t){H0(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return H0(n,function(){e++}),e},toArray:function(n){return H0(n,function(e){return e})||[]},only:function(n){if(!VS(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};We.Activity=vI;We.Children=EI;We.Component=gg;We.Fragment=dI;We.Profiler=fI;We.PureComponent=qS;We.StrictMode=hI;We.Suspense=yI;We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ht;We.__COMPILER_RUNTIME={__proto__:null,c:function(n){return Ht.H.useMemoCache(n)}};We.cache=function(n){return function(){return n.apply(null,arguments)}};We.cacheSignal=function(){return null};We.cloneElement=function(n,e,t){if(n==null)throw Error("The argument must be a React element, but you passed "+n+".");var i=p4({},n.props),r=n.key;if(e!=null)for(s in e.key!==void 0&&(r=""+e.key),e)!y4.call(e,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&e.ref===void 0||(i[s]=e[s]);var s=arguments.length-2;if(s===1)i.children=t;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];i.children=a}return HS(n.type,r,i)};We.createContext=function(n){return n={$$typeof:gI,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null},n.Provider=n,n.Consumer={$$typeof:pI,_context:n},n};We.createElement=function(n,e,t){var i,r={},s=null;if(e!=null)for(i in e.key!==void 0&&(s=""+e.key),e)y4.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var o=Array(a),c=0;c<a;c++)o[c]=arguments[c+2];r.children=o}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return HS(n,s,r)};We.createRef=function(){return{current:null}};We.forwardRef=function(n){return{$$typeof:mI,render:n}};We.isValidElement=VS;We.lazy=function(n){return{$$typeof:h4,_payload:{_status:-1,_result:n},_init:AI}};We.memo=function(n,e){return{$$typeof:bI,type:n,compare:e===void 0?null:e}};We.startTransition=function(n){var e=Ht.T,t={};Ht.T=t;try{var i=n(),r=Ht.S;r!==null&&r(t,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(XD,Wk)}catch(s){Wk(s)}finally{e!==null&&t.types!==null&&(e.types=t.types),Ht.T=e}};We.unstable_useCacheRefresh=function(){return Ht.H.useCacheRefresh()};We.use=function(n){return Ht.H.use(n)};We.useActionState=function(n,e,t){return Ht.H.useActionState(n,e,t)};We.useCallback=function(n,e){return Ht.H.useCallback(n,e)};We.useContext=function(n){return Ht.H.useContext(n)};We.useDebugValue=function(){};We.useDeferredValue=function(n,e){return Ht.H.useDeferredValue(n,e)};We.useEffect=function(n,e){return Ht.H.useEffect(n,e)};We.useEffectEvent=function(n){return Ht.H.useEffectEvent(n)};We.useId=function(){return Ht.H.useId()};We.useImperativeHandle=function(n,e,t){return Ht.H.useImperativeHandle(n,e,t)};We.useInsertionEffect=function(n,e){return Ht.H.useInsertionEffect(n,e)};We.useLayoutEffect=function(n,e){return Ht.H.useLayoutEffect(n,e)};We.useMemo=function(n,e){return Ht.H.useMemo(n,e)};We.useOptimistic=function(n,e){return Ht.H.useOptimistic(n,e)};We.useReducer=function(n,e,t){return Ht.H.useReducer(n,e,t)};We.useRef=function(n){return Ht.H.useRef(n)};We.useState=function(n){return Ht.H.useState(n)};We.useSyncExternalStore=function(n,e,t){return Ht.H.useSyncExternalStore(n,e,t)};We.useTransition=function(){return Ht.H.useTransition()};We.version="19.2.1";d4.exports=We;var ee=d4.exports;const qk=c4(ee);var b4={exports:{}},g1={},v4={exports:{}},x4={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(j,M){var R=j.length;j.push(M);e:for(;0<R;){var N=R-1>>>1,B=j[N];if(0<r(B,M))j[N]=M,j[R]=B,R=N;else break e}}function t(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var M=j[0],R=j.pop();if(R!==M){j[0]=R;e:for(var N=0,B=j.length,L=B>>>1;N<L;){var P=2*(N+1)-1,q=j[P],Q=P+1,se=j[Q];if(0>r(q,R))Q<B&&0>r(se,q)?(j[N]=se,j[Q]=R,N=Q):(j[N]=q,j[P]=R,N=P);else if(Q<B&&0>r(se,R))j[N]=se,j[Q]=R,N=Q;else break e}}return M}function r(j,M){var R=j.sortIndex-M.sortIndex;return R!==0?R:j.id-M.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var c=[],l=[],d=1,h=null,f=3,g=!1,v=!1,y=!1,x=!1,m=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function _(j){for(var M=t(l);M!==null;){if(M.callback===null)i(l);else if(M.startTime<=j)i(l),M.sortIndex=M.expirationTime,e(c,M);else break;M=t(l)}}function D(j){if(y=!1,_(j),!v)if(t(c)!==null)v=!0,A||(A=!0,k());else{var M=t(l);M!==null&&G(D,M.startTime-j)}}var A=!1,E=-1,F=5,I=-1;function z(){return x?!0:!(n.unstable_now()-I<F)}function H(){if(x=!1,A){var j=n.unstable_now();I=j;var M=!0;try{e:{v=!1,y&&(y=!1,b(E),E=-1),g=!0;var R=f;try{t:{for(_(j),h=t(c);h!==null&&!(h.expirationTime>j&&z());){var N=h.callback;if(typeof N=="function"){h.callback=null,f=h.priorityLevel;var B=N(h.expirationTime<=j);if(j=n.unstable_now(),typeof B=="function"){h.callback=B,_(j),M=!0;break t}h===t(c)&&i(c),_(j)}else i(c);h=t(c)}if(h!==null)M=!0;else{var L=t(l);L!==null&&G(D,L.startTime-j),M=!1}}break e}finally{h=null,f=R,g=!1}M=void 0}}finally{M?k():A=!1}}}var k;if(typeof w=="function")k=function(){w(H)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,S=W.port2;W.port1.onmessage=H,k=function(){S.postMessage(null)}}else k=function(){m(H,0)};function G(j,M){E=m(function(){j(n.unstable_now())},M)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_next=function(j){switch(f){case 1:case 2:case 3:var M=3;break;default:M=f}var R=f;f=M;try{return j()}finally{f=R}},n.unstable_requestPaint=function(){x=!0},n.unstable_runWithPriority=function(j,M){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var R=f;f=j;try{return M()}finally{f=R}},n.unstable_scheduleCallback=function(j,M,R){var N=n.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?N+R:N):R=N,j){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=R+B,j={id:d++,callback:M,priorityLevel:j,startTime:R,expirationTime:B,sortIndex:-1},R>N?(j.sortIndex=R,e(l,j),t(c)===null&&j===t(l)&&(y?(b(E),E=-1):y=!0,G(D,R-N))):(j.sortIndex=B,e(c,j),v||g||(v=!0,A||(A=!0,k()))),j},n.unstable_shouldYield=z,n.unstable_wrapCallback=function(j){var M=f;return function(){var R=f;f=M;try{return j.apply(this,arguments)}finally{f=R}}}})(x4);v4.exports=x4;var SI=v4.exports,w4={exports:{}},$i={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TI=ee;function _4(n){var e="https://react.dev/errors/"+n;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var t=2;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t])}return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function xc(){}var Pi={d:{f:xc,r:function(){throw Error(_4(522))},D:xc,C:xc,L:xc,m:xc,X:xc,S:xc,M:xc},p:0,findDOMNode:null},CI=Symbol.for("react.portal");function kI(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:CI,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}var km=TI.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m1(n,e){if(n==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}$i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Pi;$i.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(_4(299));return kI(n,e,null,t)};$i.flushSync=function(n){var e=km.T,t=Pi.p;try{if(km.T=null,Pi.p=2,n)return n()}finally{km.T=e,Pi.p=t,Pi.d.f()}};$i.preconnect=function(n,e){typeof n=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Pi.d.C(n,e))};$i.prefetchDNS=function(n){typeof n=="string"&&Pi.d.D(n)};$i.preinit=function(n,e){if(typeof n=="string"&&e&&typeof e.as=="string"){var t=e.as,i=m1(t,e.crossOrigin),r=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;t==="style"?Pi.d.S(n,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):t==="script"&&Pi.d.X(n,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};$i.preinitModule=function(n,e){if(typeof n=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var t=m1(e.as,e.crossOrigin);Pi.d.M(n,{crossOrigin:t,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Pi.d.M(n)};$i.preload=function(n,e){if(typeof n=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var t=e.as,i=m1(t,e.crossOrigin);Pi.d.L(n,t,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};$i.preloadModule=function(n,e){if(typeof n=="string")if(e){var t=m1(e.as,e.crossOrigin);Pi.d.m(n,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:t,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Pi.d.m(n)};$i.requestFormReset=function(n){Pi.d.r(n)};$i.unstable_batchedUpdates=function(n,e){return n(e)};$i.useFormState=function(n,e,t){return km.H.useFormState(n,e,t)};$i.useFormStatus=function(){return km.H.useHostTransitionStatus()};$i.version="19.2.1";function D4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(D4)}catch(n){console.error(n)}}D4(),w4.exports=$i;var GS=w4.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fn=SI,A4=ee,UI=GS;function he(n){var e="https://react.dev/errors/"+n;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var t=2;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t])}return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function E4(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function f0(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function S4(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function T4(n){if(n.tag===31){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function $k(n){if(f0(n)!==n)throw Error(he(188))}function NI(n){var e=n.alternate;if(!e){if(e=f0(n),e===null)throw Error(he(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return $k(r),n;if(s===i)return $k(r),e;s=s.sibling}throw Error(he(188))}if(t.return!==i.return)t=r,i=s;else{for(var a=!1,o=r.child;o;){if(o===t){a=!0,t=r,i=s;break}if(o===i){a=!0,i=r,t=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===t){a=!0,t=s,i=r;break}if(o===i){a=!0,i=s,t=r;break}o=o.sibling}if(!a)throw Error(he(189))}}if(t.alternate!==i)throw Error(he(190))}if(t.tag!==3)throw Error(he(188));return t.stateNode.current===t?n:e}function C4(n){var e=n.tag;if(e===5||e===26||e===27||e===6)return n;for(n=n.child;n!==null;){if(e=C4(n),e!==null)return e;n=n.sibling}return null}var Vt=Object.assign,jI=Symbol.for("react.element"),V0=Symbol.for("react.transitional.element"),Zg=Symbol.for("react.portal"),qh=Symbol.for("react.fragment"),k4=Symbol.for("react.strict_mode"),YD=Symbol.for("react.profiler"),U4=Symbol.for("react.consumer"),Go=Symbol.for("react.context"),XS=Symbol.for("react.forward_ref"),KD=Symbol.for("react.suspense"),QD=Symbol.for("react.suspense_list"),YS=Symbol.for("react.memo"),Ac=Symbol.for("react.lazy"),JD=Symbol.for("react.activity"),RI=Symbol.for("react.memo_cache_sentinel"),Hk=Symbol.iterator;function Og(n){return n===null||typeof n!="object"?null:(n=Hk&&n[Hk]||n["@@iterator"],typeof n=="function"?n:null)}var FI=Symbol.for("react.client.reference");function ZD(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===FI?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case qh:return"Fragment";case YD:return"Profiler";case k4:return"StrictMode";case KD:return"Suspense";case QD:return"SuspenseList";case JD:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case Zg:return"Portal";case Go:return n.displayName||"Context";case U4:return(n._context.displayName||"Context")+".Consumer";case XS:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case YS:return e=n.displayName||null,e!==null?e:ZD(n.type)||"Memo";case Ac:e=n._payload,n=n._init;try{return ZD(n(e))}catch{}}return null}var em=Array.isArray,Me=A4.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ht=UI.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Id={pending:!1,data:null,method:null,action:null},eA=[],$h=-1;function Ha(n){return{current:n}}function Hn(n){0>$h||(n.current=eA[$h],eA[$h]=null,$h--)}function It(n,e){$h++,eA[$h]=n.current,n.current=e}var Ia=Ha(null),$m=Ha(null),Ul=Ha(null),Ix=Ha(null);function Px(n,e){switch(It(Ul,e),It($m,n),It(Ia,null),e.nodeType){case 9:case 11:n=(n=e.documentElement)&&(n=n.namespaceURI)?Q3(n):0;break;default:if(n=e.tagName,e=e.namespaceURI)e=Q3(e),n=K8(e,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Hn(Ia),It(Ia,n)}function Xp(){Hn(Ia),Hn($m),Hn(Ul)}function tA(n){n.memoizedState!==null&&It(Ix,n);var e=Ia.current,t=K8(e,n.type);e!==t&&(It($m,n),It(Ia,t))}function zx(n){$m.current===n&&(Hn(Ia),Hn($m)),Ix.current===n&&(Hn(Ix),ty._currentValue=Id)}var Pw,Vk;function cu(n){if(Pw===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Pw=e&&e[1]||"",Vk=-1<t.stack.indexOf(`
    at`)?" (<anonymous>)":-1<t.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pw+n+Vk}var zw=!1;function Ww(n,e){if(!n||zw)return"";zw=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var h=function(){throw Error()};if(Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(g){var f=g}Reflect.construct(n,[],h)}else{try{h.call()}catch(g){f=g}n.call(h.prototype)}}else{try{throw Error()}catch(g){f=g}(h=n())&&typeof h.catch=="function"&&h.catch(function(){})}}catch(g){if(g&&f&&typeof g.stack=="string")return[g.stack,f.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var c=a.split(`
`),l=o.split(`
`);for(r=i=0;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;for(;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;if(i===c.length||r===l.length)for(i=c.length-1,r=l.length-1;1<=i&&0<=r&&c[i]!==l[r];)r--;for(;1<=i&&0<=r;i--,r--)if(c[i]!==l[r]){if(i!==1||r!==1)do if(i--,r--,0>r||c[i]!==l[r]){var d=`
`+c[i].replace(" at new "," at ");return n.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",n.displayName)),d}while(1<=i&&0<=r);break}}}finally{zw=!1,Error.prepareStackTrace=t}return(t=n?n.displayName||n.name:"")?cu(t):""}function OI(n,e){switch(n.tag){case 26:case 27:case 5:return cu(n.type);case 16:return cu("Lazy");case 13:return n.child!==e&&e!==null?cu("Suspense Fallback"):cu("Suspense");case 19:return cu("SuspenseList");case 0:case 15:return Ww(n.type,!1);case 11:return Ww(n.type.render,!1);case 1:return Ww(n.type,!0);case 31:return cu("Activity");default:return""}}function Gk(n){try{var e="",t=null;do e+=OI(n,t),t=n,n=n.return;while(n);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var nA=Object.prototype.hasOwnProperty,KS=Fn.unstable_scheduleCallback,qw=Fn.unstable_cancelCallback,MI=Fn.unstable_shouldYield,BI=Fn.unstable_requestPaint,Xr=Fn.unstable_now,LI=Fn.unstable_getCurrentPriorityLevel,N4=Fn.unstable_ImmediatePriority,j4=Fn.unstable_UserBlockingPriority,Wx=Fn.unstable_NormalPriority,II=Fn.unstable_LowPriority,R4=Fn.unstable_IdlePriority,PI=Fn.log,zI=Fn.unstable_setDisableYieldValue,p0=null,Yr=null;function El(n){if(typeof PI=="function"&&zI(n),Yr&&typeof Yr.setStrictMode=="function")try{Yr.setStrictMode(p0,n)}catch{}}var Kr=Math.clz32?Math.clz32:$I,WI=Math.log,qI=Math.LN2;function $I(n){return n>>>=0,n===0?32:31-(WI(n)/qI|0)|0}var G0=256,X0=262144,Y0=4194304;function lu(n){var e=n&42;if(e!==0)return e;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function y1(n,e,t){var i=n.pendingLanes;if(i===0)return 0;var r=0,s=n.suspendedLanes,a=n.pingedLanes;n=n.warmLanes;var o=i&134217727;return o!==0?(i=o&~s,i!==0?r=lu(i):(a&=o,a!==0?r=lu(a):t||(t=o&~n,t!==0&&(r=lu(t))))):(o=i&~s,o!==0?r=lu(o):a!==0?r=lu(a):t||(t=i&~n,t!==0&&(r=lu(t)))),r===0?0:e!==0&&e!==r&&!(e&s)&&(s=r&-r,t=e&-e,s>=t||s===32&&(t&4194048)!==0)?e:r}function g0(n,e){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&e)===0}function HI(n,e){switch(n){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function F4(){var n=Y0;return Y0<<=1,!(Y0&62914560)&&(Y0=4194304),n}function $w(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function m0(n,e){n.pendingLanes|=e,e!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function VI(n,e,t,i,r,s){var a=n.pendingLanes;n.pendingLanes=t,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=t,n.entangledLanes&=t,n.errorRecoveryDisabledLanes&=t,n.shellSuspendCounter=0;var o=n.entanglements,c=n.expirationTimes,l=n.hiddenUpdates;for(t=a&~t;0<t;){var d=31-Kr(t),h=1<<d;o[d]=0,c[d]=-1;var f=l[d];if(f!==null)for(l[d]=null,d=0;d<f.length;d++){var g=f[d];g!==null&&(g.lane&=-536870913)}t&=~h}i!==0&&O4(n,i,0),s!==0&&r===0&&n.tag!==0&&(n.suspendedLanes|=s&~(a&~e))}function O4(n,e,t){n.pendingLanes|=e,n.suspendedLanes&=~e;var i=31-Kr(e);n.entangledLanes|=e,n.entanglements[i]=n.entanglements[i]|1073741824|t&261930}function M4(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Kr(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}function B4(n,e){var t=e&-e;return t=t&42?1:QS(t),t&(n.suspendedLanes|e)?0:t}function QS(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function JS(n){return n&=-n,2<n?8<n?n&134217727?32:268435456:8:2}function L4(){var n=ht.p;return n!==0?n:(n=window.event,n===void 0?32:oR(n.type))}function Xk(n,e){var t=ht.p;try{return ht.p=n,e()}finally{ht.p=t}}var Yl=Math.random().toString(36).slice(2),oi="__reactFiber$"+Yl,hr="__reactProps$"+Yl,mg="__reactContainer$"+Yl,iA="__reactEvents$"+Yl,GI="__reactListeners$"+Yl,XI="__reactHandles$"+Yl,Yk="__reactResources$"+Yl,y0="__reactMarker$"+Yl;function ZS(n){delete n[oi],delete n[hr],delete n[iA],delete n[GI],delete n[XI]}function Hh(n){var e=n[oi];if(e)return e;for(var t=n.parentNode;t;){if(e=t[mg]||t[oi]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=nU(n);n!==null;){if(t=n[oi])return t;n=nU(n)}return e}n=t,t=n.parentNode}return null}function yg(n){if(n=n[oi]||n[mg]){var e=n.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return n}return null}function tm(n){var e=n.tag;if(e===5||e===26||e===27||e===6)return n.stateNode;throw Error(he(33))}function uf(n){var e=n[Yk];return e||(e=n[Yk]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function $n(n){n[y0]=!0}var I4=new Set,P4={};function sh(n,e){Yp(n,e),Yp(n+"Capture",e)}function Yp(n,e){for(P4[n]=e,n=0;n<e.length;n++)I4.add(e[n])}var YI=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Kk={},Qk={};function KI(n){return nA.call(Qk,n)?!0:nA.call(Kk,n)?!1:YI.test(n)?Qk[n]=!0:(Kk[n]=!0,!1)}function Mv(n,e,t){if(KI(e))if(t===null)n.removeAttribute(e);else{switch(typeof t){case"undefined":case"function":case"symbol":n.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){n.removeAttribute(e);return}}n.setAttribute(e,""+t)}}function K0(n,e,t){if(t===null)n.removeAttribute(e);else{switch(typeof t){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(e);return}n.setAttribute(e,""+t)}}function Xa(n,e,t,i){if(i===null)n.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(t);return}n.setAttributeNS(e,t,""+i)}}function ws(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function z4(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function QI(n,e,t){var i=Object.getOwnPropertyDescriptor(n.constructor.prototype,e);if(!n.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,s=i.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){t=""+a,s.call(this,a)}}),Object.defineProperty(n,e,{enumerable:i.enumerable}),{getValue:function(){return t},setValue:function(a){t=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function rA(n){if(!n._valueTracker){var e=z4(n)?"checked":"value";n._valueTracker=QI(n,e,""+n[e])}}function W4(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=z4(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function qx(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var JI=/[\n"\\]/g;function Es(n){return n.replace(JI,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function sA(n,e,t,i,r,s,a,o){n.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?n.type=a:n.removeAttribute("type"),e!=null?a==="number"?(e===0&&n.value===""||n.value!=e)&&(n.value=""+ws(e)):n.value!==""+ws(e)&&(n.value=""+ws(e)):a!=="submit"&&a!=="reset"||n.removeAttribute("value"),e!=null?aA(n,a,ws(e)):t!=null?aA(n,a,ws(t)):i!=null&&n.removeAttribute("value"),r==null&&s!=null&&(n.defaultChecked=!!s),r!=null&&(n.checked=r&&typeof r!="function"&&typeof r!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?n.name=""+ws(o):n.removeAttribute("name")}function q4(n,e,t,i,r,s,a,o){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(n.type=s),e!=null||t!=null){if(!(s!=="submit"&&s!=="reset"||e!=null)){rA(n);return}t=t!=null?""+ws(t):"",e=e!=null?""+ws(e):t,o||e===n.value||(n.value=e),n.defaultValue=e}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,n.checked=o?n.checked:!!i,n.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(n.name=a),rA(n)}function aA(n,e,t){e==="number"&&qx(n.ownerDocument)===n||n.defaultValue===""+t||(n.defaultValue=""+t)}function df(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+ws(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function $4(n,e,t){if(e!=null&&(e=""+ws(e),e!==n.value&&(n.value=e),t==null)){n.defaultValue!==e&&(n.defaultValue=e);return}n.defaultValue=t!=null?""+ws(t):""}function H4(n,e,t,i){if(e==null){if(i!=null){if(t!=null)throw Error(he(92));if(em(i)){if(1<i.length)throw Error(he(93));i=i[0]}t=i}t==null&&(t=""),e=t}t=ws(e),n.defaultValue=t,i=n.textContent,i===t&&i!==""&&i!==null&&(n.value=i),rA(n)}function Kp(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var ZI=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jk(n,e,t){var i=e.indexOf("--")===0;t==null||typeof t=="boolean"||t===""?i?n.setProperty(e,""):e==="float"?n.cssFloat="":n[e]="":i?n.setProperty(e,t):typeof t!="number"||t===0||ZI.has(e)?e==="float"?n.cssFloat=t:n[e]=(""+t).trim():n[e]=t+"px"}function V4(n,e,t){if(e!=null&&typeof e!="object")throw Error(he(62));if(n=n.style,t!=null){for(var i in t)!t.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="");for(var r in e)i=e[r],e.hasOwnProperty(r)&&t[r]!==i&&Jk(n,r,i)}else for(var s in e)e.hasOwnProperty(s)&&Jk(n,s,e[s])}function eT(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var e9=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),t9=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bv(n){return t9.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Xo(){}var oA=null;function tT(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Vh=null,hf=null;function Zk(n){var e=yg(n);if(e&&(n=e.stateNode)){var t=n[hr]||null;e:switch(n=e.stateNode,e.type){case"input":if(sA(n,t.value,t.defaultValue,t.defaultValue,t.checked,t.defaultChecked,t.type,t.name),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll('input[name="'+Es(""+e)+'"][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=i[hr]||null;if(!r)throw Error(he(90));sA(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<t.length;e++)i=t[e],i.form===n.form&&W4(i)}break e;case"textarea":$4(n,t.value,t.defaultValue);break e;case"select":e=t.value,e!=null&&df(n,!!t.multiple,e,!1)}}}var Hw=!1;function G4(n,e,t){if(Hw)return n(e,t);Hw=!0;try{var i=n(e);return i}finally{if(Hw=!1,(Vh!==null||hf!==null)&&(k1(),Vh&&(e=Vh,n=hf,hf=Vh=null,Zk(e),n)))for(e=0;e<n.length;e++)Zk(n[e])}}function Hm(n,e){var t=n.stateNode;if(t===null)return null;var i=t[hr]||null;if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(he(231,e,typeof t));return t}var ic=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cA=!1;if(ic)try{var Mg={};Object.defineProperty(Mg,"passive",{get:function(){cA=!0}}),window.addEventListener("test",Mg,Mg),window.removeEventListener("test",Mg,Mg)}catch{cA=!1}var Sl=null,nT=null,Lv=null;function X4(){if(Lv)return Lv;var n,e=nT,t=e.length,i,r="value"in Sl?Sl.value:Sl.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var a=t-n;for(i=1;i<=a&&e[t-i]===r[s-i];i++);return Lv=r.slice(n,1<i?1-i:void 0)}function Iv(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Q0(){return!0}function e3(){return!1}function gr(n){function e(t,i,r,s,a){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Q0:e3,this.isPropagationStopped=e3,this}return Vt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Q0)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Q0)},persist:function(){},isPersistent:Q0}),e}var ah={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},b1=gr(ah),b0=Vt({},ah,{view:0,detail:0}),n9=gr(b0),Vw,Gw,Bg,v1=Vt({},b0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:iT,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Bg&&(Bg&&n.type==="mousemove"?(Vw=n.screenX-Bg.screenX,Gw=n.screenY-Bg.screenY):Gw=Vw=0,Bg=n),Vw)},movementY:function(n){return"movementY"in n?n.movementY:Gw}}),t3=gr(v1),i9=Vt({},v1,{dataTransfer:0}),r9=gr(i9),s9=Vt({},b0,{relatedTarget:0}),Xw=gr(s9),a9=Vt({},ah,{animationName:0,elapsedTime:0,pseudoElement:0}),o9=gr(a9),c9=Vt({},ah,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),l9=gr(c9),u9=Vt({},ah,{data:0}),n3=gr(u9),d9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},h9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},f9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function p9(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=f9[n])?!!e[n]:!1}function iT(){return p9}var g9=Vt({},b0,{key:function(n){if(n.key){var e=d9[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Iv(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?h9[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:iT,charCode:function(n){return n.type==="keypress"?Iv(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Iv(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m9=gr(g9),y9=Vt({},v1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),i3=gr(y9),b9=Vt({},b0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:iT}),v9=gr(b9),x9=Vt({},ah,{propertyName:0,elapsedTime:0,pseudoElement:0}),w9=gr(x9),_9=Vt({},v1,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),D9=gr(_9),A9=Vt({},ah,{newState:0,oldState:0}),E9=gr(A9),S9=[9,13,27,32],rT=ic&&"CompositionEvent"in window,Um=null;ic&&"documentMode"in document&&(Um=document.documentMode);var T9=ic&&"TextEvent"in window&&!Um,Y4=ic&&(!rT||Um&&8<Um&&11>=Um),r3=" ",s3=!1;function K4(n,e){switch(n){case"keyup":return S9.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Q4(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Gh=!1;function C9(n,e){switch(n){case"compositionend":return Q4(e);case"keypress":return e.which!==32?null:(s3=!0,r3);case"textInput":return n=e.data,n===r3&&s3?null:n;default:return null}}function k9(n,e){if(Gh)return n==="compositionend"||!rT&&K4(n,e)?(n=X4(),Lv=nT=Sl=null,Gh=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Y4&&e.locale!=="ko"?null:e.data;default:return null}}var U9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function a3(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!U9[n.type]:e==="textarea"}function J4(n,e,t,i){Vh?hf?hf.push(i):hf=[i]:Vh=i,e=o2(e,"onChange"),0<e.length&&(t=new b1("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Nm=null,Vm=null;function N9(n){G8(n,0)}function x1(n){var e=tm(n);if(W4(e))return n}function o3(n,e){if(n==="change")return e}var Z4=!1;if(ic){var Yw;if(ic){var Kw="oninput"in document;if(!Kw){var c3=document.createElement("div");c3.setAttribute("oninput","return;"),Kw=typeof c3.oninput=="function"}Yw=Kw}else Yw=!1;Z4=Yw&&(!document.documentMode||9<document.documentMode)}function l3(){Nm&&(Nm.detachEvent("onpropertychange",ej),Vm=Nm=null)}function ej(n){if(n.propertyName==="value"&&x1(Vm)){var e=[];J4(e,Vm,n,tT(n)),G4(N9,e)}}function j9(n,e,t){n==="focusin"?(l3(),Nm=e,Vm=t,Nm.attachEvent("onpropertychange",ej)):n==="focusout"&&l3()}function R9(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return x1(Vm)}function F9(n,e){if(n==="click")return x1(e)}function O9(n,e){if(n==="input"||n==="change")return x1(e)}function M9(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Zr=typeof Object.is=="function"?Object.is:M9;function Gm(n,e){if(Zr(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!nA.call(e,r)||!Zr(n[r],e[r]))return!1}return!0}function u3(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function d3(n,e){var t=u3(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=u3(t)}}function tj(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?tj(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function nj(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var e=qx(n.document);e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=qx(n.document)}return e}function sT(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}var B9=ic&&"documentMode"in document&&11>=document.documentMode,Xh=null,lA=null,jm=null,uA=!1;function h3(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;uA||Xh==null||Xh!==qx(i)||(i=Xh,"selectionStart"in i&&sT(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),jm&&Gm(jm,i)||(jm=i,i=o2(lA,"onSelect"),0<i.length&&(e=new b1("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Xh)))}function iu(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Yh={animationend:iu("Animation","AnimationEnd"),animationiteration:iu("Animation","AnimationIteration"),animationstart:iu("Animation","AnimationStart"),transitionrun:iu("Transition","TransitionRun"),transitionstart:iu("Transition","TransitionStart"),transitioncancel:iu("Transition","TransitionCancel"),transitionend:iu("Transition","TransitionEnd")},Qw={},ij={};ic&&(ij=document.createElement("div").style,"AnimationEvent"in window||(delete Yh.animationend.animation,delete Yh.animationiteration.animation,delete Yh.animationstart.animation),"TransitionEvent"in window||delete Yh.transitionend.transition);function oh(n){if(Qw[n])return Qw[n];if(!Yh[n])return n;var e=Yh[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in ij)return Qw[n]=e[t];return n}var rj=oh("animationend"),sj=oh("animationiteration"),aj=oh("animationstart"),L9=oh("transitionrun"),I9=oh("transitionstart"),P9=oh("transitioncancel"),oj=oh("transitionend"),cj=new Map,dA="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dA.push("scrollEnd");function ra(n,e){cj.set(n,e),sh(e,[n])}var $x=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},vs=[],Kh=0,aT=0;function w1(){for(var n=Kh,e=aT=Kh=0;e<n;){var t=vs[e];vs[e++]=null;var i=vs[e];vs[e++]=null;var r=vs[e];vs[e++]=null;var s=vs[e];if(vs[e++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&lj(t,r,s)}}function _1(n,e,t,i){vs[Kh++]=n,vs[Kh++]=e,vs[Kh++]=t,vs[Kh++]=i,aT|=i,n.lanes|=i,n=n.alternate,n!==null&&(n.lanes|=i)}function oT(n,e,t,i){return _1(n,e,t,i),Hx(n)}function ch(n,e){return _1(n,null,null,e),Hx(n)}function lj(n,e,t){n.lanes|=t;var i=n.alternate;i!==null&&(i.lanes|=t);for(var r=!1,s=n.return;s!==null;)s.childLanes|=t,i=s.alternate,i!==null&&(i.childLanes|=t),s.tag===22&&(n=s.stateNode,n===null||n._visibility&1||(r=!0)),n=s,s=s.return;return n.tag===3?(s=n.stateNode,r&&e!==null&&(r=31-Kr(t),n=s.hiddenUpdates,i=n[r],i===null?n[r]=[e]:i.push(e),e.lane=t|536870912),s):null}function Hx(n){if(50<zm)throw zm=0,jA=null,Error(he(185));for(var e=n.return;e!==null;)n=e,e=n.return;return n.tag===3?n.stateNode:null}var Qh={};function z9(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hr(n,e,t,i){return new z9(n,e,t,i)}function cT(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ko(n,e){var t=n.alternate;return t===null?(t=Hr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&65011712,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t.refCleanup=n.refCleanup,t}function uj(n,e){n.flags&=65011714;var t=n.alternate;return t===null?(n.childLanes=0,n.lanes=e,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,n.type=t.type,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n}function Pv(n,e,t,i,r,s){var a=0;if(i=n,typeof n=="function")cT(n)&&(a=1);else if(typeof n=="string")a=V7(n,t,Ia.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case JD:return n=Hr(31,t,e,r),n.elementType=JD,n.lanes=s,n;case qh:return Pd(t.children,r,s,e);case k4:a=8,r|=24;break;case YD:return n=Hr(12,t,e,r|2),n.elementType=YD,n.lanes=s,n;case KD:return n=Hr(13,t,e,r),n.elementType=KD,n.lanes=s,n;case QD:return n=Hr(19,t,e,r),n.elementType=QD,n.lanes=s,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Go:a=10;break e;case U4:a=9;break e;case XS:a=11;break e;case YS:a=14;break e;case Ac:a=16,i=null;break e}a=29,t=Error(he(130,n===null?"null":typeof n,"")),i=null}return e=Hr(a,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Pd(n,e,t,i){return n=Hr(7,n,i,e),n.lanes=t,n}function Jw(n,e,t){return n=Hr(6,n,null,e),n.lanes=t,n}function dj(n){var e=Hr(18,null,null,0);return e.stateNode=n,e}function Zw(n,e,t){return e=Hr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}var f3=new WeakMap;function Ss(n,e){if(typeof n=="object"&&n!==null){var t=f3.get(n);return t!==void 0?t:(e={value:n,source:e,stack:Gk(e)},f3.set(n,e),e)}return{value:n,source:e,stack:Gk(e)}}var Jh=[],Zh=0,Vx=null,Xm=0,_s=[],Ds=0,Pl=null,Ma=1,Ba="";function co(n,e){Jh[Zh++]=Xm,Jh[Zh++]=Vx,Vx=n,Xm=e}function hj(n,e,t){_s[Ds++]=Ma,_s[Ds++]=Ba,_s[Ds++]=Pl,Pl=n;var i=Ma;n=Ba;var r=32-Kr(i)-1;i&=~(1<<r),t+=1;var s=32-Kr(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Ma=1<<32-Kr(e)+r|t<<r|i,Ba=s+n}else Ma=1<<s|t<<r|i,Ba=n}function lT(n){n.return!==null&&(co(n,1),hj(n,1,0))}function uT(n){for(;n===Vx;)Vx=Jh[--Zh],Jh[Zh]=null,Xm=Jh[--Zh],Jh[Zh]=null;for(;n===Pl;)Pl=_s[--Ds],_s[Ds]=null,Ba=_s[--Ds],_s[Ds]=null,Ma=_s[--Ds],_s[Ds]=null}function fj(n,e){_s[Ds++]=Ma,_s[Ds++]=Ba,_s[Ds++]=Pl,Ma=e.id,Ba=e.overflow,Pl=n}var ci=null,$t=null,at=!1,Nl=null,Ts=!1,hA=Error(he(519));function zl(n){var e=Error(he(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ym(Ss(e,n)),hA}function p3(n){var e=n.stateNode,t=n.type,i=n.memoizedProps;switch(e[oi]=n,e[hr]=i,t){case"dialog":Je("cancel",e),Je("close",e);break;case"iframe":case"object":case"embed":Je("load",e);break;case"video":case"audio":for(t=0;t<Zm.length;t++)Je(Zm[t],e);break;case"source":Je("error",e);break;case"img":case"image":case"link":Je("error",e),Je("load",e);break;case"details":Je("toggle",e);break;case"input":Je("invalid",e),q4(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":Je("invalid",e);break;case"textarea":Je("invalid",e),H4(e,i.value,i.defaultValue,i.children)}t=i.children,typeof t!="string"&&typeof t!="number"&&typeof t!="bigint"||e.textContent===""+t||i.suppressHydrationWarning===!0||Y8(e.textContent,t)?(i.popover!=null&&(Je("beforetoggle",e),Je("toggle",e)),i.onScroll!=null&&Je("scroll",e),i.onScrollEnd!=null&&Je("scrollend",e),i.onClick!=null&&(e.onclick=Xo),e=!0):e=!1,e||zl(n,!0)}function g3(n){for(ci=n.return;ci;)switch(ci.tag){case 5:case 31:case 13:Ts=!1;return;case 27:case 3:Ts=!0;return;default:ci=ci.return}}function mh(n){if(n!==ci)return!1;if(!at)return g3(n),at=!0,!1;var e=n.tag,t;if((t=e!==3&&e!==27)&&((t=e===5)&&(t=n.type,t=!(t!=="form"&&t!=="button")||BA(n.type,n.memoizedProps)),t=!t),t&&$t&&zl(n),g3(n),e===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(he(317));$t=tU(n)}else if(e===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(he(317));$t=tU(n)}else e===27?(e=$t,Kl(n.type)?(n=zA,zA=null,$t=n):$t=e):$t=ci?Us(n.stateNode.nextSibling):null;return!0}function Vd(){$t=ci=null,at=!1}function e_(){var n=Nl;return n!==null&&(or===null?or=n:or.push.apply(or,n),Nl=null),n}function Ym(n){Nl===null?Nl=[n]:Nl.push(n)}var fA=Ha(null),lh=null,Yo=null;function Tc(n,e,t){It(fA,e._currentValue),e._currentValue=t}function Qo(n){n._currentValue=fA.current,Hn(fA)}function pA(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function gA(n,e,t,i){var r=n.child;for(r!==null&&(r.return=n);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;e:for(;s!==null;){var o=s;s=r;for(var c=0;c<e.length;c++)if(o.context===e[c]){s.lanes|=t,o=s.alternate,o!==null&&(o.lanes|=t),pA(s.return,t,n),i||(a=null);break e}s=o.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(he(341));a.lanes|=t,s=a.alternate,s!==null&&(s.lanes|=t),pA(a,t,n),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===n){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function bg(n,e,t,i){n=null;for(var r=e,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(he(387));if(a=a.memoizedProps,a!==null){var o=r.type;Zr(r.pendingProps.value,a.value)||(n!==null?n.push(o):n=[o])}}else if(r===Ix.current){if(a=r.alternate,a===null)throw Error(he(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(n!==null?n.push(ty):n=[ty])}r=r.return}n!==null&&gA(e,n,t,i),e.flags|=262144}function Gx(n){for(n=n.firstContext;n!==null;){if(!Zr(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Gd(n){lh=n,Yo=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function ui(n){return pj(lh,n)}function J0(n,e){return lh===null&&Gd(n),pj(n,e)}function pj(n,e){var t=e._currentValue;if(e={context:e,memoizedValue:t,next:null},Yo===null){if(n===null)throw Error(he(308));Yo=e,n.dependencies={lanes:0,firstContext:e},n.flags|=524288}else Yo=Yo.next=e;return t}var W9=typeof AbortController<"u"?AbortController:function(){var n=[],e=this.signal={aborted:!1,addEventListener:function(t,i){n.push(i)}};this.abort=function(){e.aborted=!0,n.forEach(function(t){return t()})}},q9=Fn.unstable_scheduleCallback,$9=Fn.unstable_NormalPriority,An={$$typeof:Go,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dT(){return{controller:new W9,data:new Map,refCount:0}}function v0(n){n.refCount--,n.refCount===0&&q9($9,function(){n.controller.abort()})}var Rm=null,mA=0,Qp=0,ff=null;function H9(n,e){if(Rm===null){var t=Rm=[];mA=0,Qp=MT(),ff={status:"pending",value:void 0,then:function(i){t.push(i)}}}return mA++,e.then(m3,m3),e}function m3(){if(--mA===0&&Rm!==null){ff!==null&&(ff.status="fulfilled");var n=Rm;Rm=null,Qp=0,ff=null;for(var e=0;e<n.length;e++)(0,n[e])()}}function V9(n,e){var t=[],i={status:"pending",value:null,reason:null,then:function(r){t.push(r)}};return n.then(function(){i.status="fulfilled",i.value=e;for(var r=0;r<t.length;r++)(0,t[r])(e)},function(r){for(i.status="rejected",i.reason=r,r=0;r<t.length;r++)(0,t[r])(void 0)}),i}var y3=Me.S;Me.S=function(n,e){C8=Xr(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&H9(n,e),y3!==null&&y3(n,e)};var zd=Ha(null);function hT(){var n=zd.current;return n!==null?n:Ft.pooledCache}function zv(n,e){e===null?It(zd,zd.current):It(zd,e.pool)}function gj(){var n=hT();return n===null?null:{parent:An._currentValue,pool:n}}var vg=Error(he(460)),fT=Error(he(474)),D1=Error(he(542)),Xx={then:function(){}};function b3(n){return n=n.status,n==="fulfilled"||n==="rejected"}function mj(n,e,t){switch(t=n[t],t===void 0?n.push(e):t!==e&&(e.then(Xo,Xo),e=t),e.status){case"fulfilled":return e.value;case"rejected":throw n=e.reason,x3(n),n;default:if(typeof e.status=="string")e.then(Xo,Xo);else{if(n=Ft,n!==null&&100<n.shellSuspendCounter)throw Error(he(482));n=e,n.status="pending",n.then(function(i){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=i}},function(i){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw n=e.reason,x3(n),n}throw Wd=e,vg}}function uu(n){try{var e=n._init;return e(n._payload)}catch(t){throw t!==null&&typeof t=="object"&&typeof t.then=="function"?(Wd=t,vg):t}}var Wd=null;function v3(){if(Wd===null)throw Error(he(459));var n=Wd;return Wd=null,n}function x3(n){if(n===vg||n===D1)throw Error(he(483))}var pf=null,Km=0;function Z0(n){var e=Km;return Km+=1,pf===null&&(pf=[]),mj(pf,n,e)}function Lg(n,e){e=e.props.ref,n.ref=e!==void 0?e:null}function ev(n,e){throw e.$$typeof===jI?Error(he(525)):(n=Object.prototype.toString.call(e),Error(he(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n)))}function yj(n){function e(m,b){if(n){var w=m.deletions;w===null?(m.deletions=[b],m.flags|=16):w.push(b)}}function t(m,b){if(!n)return null;for(;b!==null;)e(m,b),b=b.sibling;return null}function i(m){for(var b=new Map;m!==null;)m.key!==null?b.set(m.key,m):b.set(m.index,m),m=m.sibling;return b}function r(m,b){return m=Ko(m,b),m.index=0,m.sibling=null,m}function s(m,b,w){return m.index=w,n?(w=m.alternate,w!==null?(w=w.index,w<b?(m.flags|=67108866,b):w):(m.flags|=67108866,b)):(m.flags|=1048576,b)}function a(m){return n&&m.alternate===null&&(m.flags|=67108866),m}function o(m,b,w,_){return b===null||b.tag!==6?(b=Jw(w,m.mode,_),b.return=m,b):(b=r(b,w),b.return=m,b)}function c(m,b,w,_){var D=w.type;return D===qh?d(m,b,w.props.children,_,w.key):b!==null&&(b.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Ac&&uu(D)===b.type)?(b=r(b,w.props),Lg(b,w),b.return=m,b):(b=Pv(w.type,w.key,w.props,null,m.mode,_),Lg(b,w),b.return=m,b)}function l(m,b,w,_){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=Zw(w,m.mode,_),b.return=m,b):(b=r(b,w.children||[]),b.return=m,b)}function d(m,b,w,_,D){return b===null||b.tag!==7?(b=Pd(w,m.mode,_,D),b.return=m,b):(b=r(b,w),b.return=m,b)}function h(m,b,w){if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return b=Jw(""+b,m.mode,w),b.return=m,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case V0:return w=Pv(b.type,b.key,b.props,null,m.mode,w),Lg(w,b),w.return=m,w;case Zg:return b=Zw(b,m.mode,w),b.return=m,b;case Ac:return b=uu(b),h(m,b,w)}if(em(b)||Og(b))return b=Pd(b,m.mode,w,null),b.return=m,b;if(typeof b.then=="function")return h(m,Z0(b),w);if(b.$$typeof===Go)return h(m,J0(m,b),w);ev(m,b)}return null}function f(m,b,w,_){var D=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return D!==null?null:o(m,b,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case V0:return w.key===D?c(m,b,w,_):null;case Zg:return w.key===D?l(m,b,w,_):null;case Ac:return w=uu(w),f(m,b,w,_)}if(em(w)||Og(w))return D!==null?null:d(m,b,w,_,null);if(typeof w.then=="function")return f(m,b,Z0(w),_);if(w.$$typeof===Go)return f(m,b,J0(m,w),_);ev(m,w)}return null}function g(m,b,w,_,D){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return m=m.get(w)||null,o(b,m,""+_,D);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case V0:return m=m.get(_.key===null?w:_.key)||null,c(b,m,_,D);case Zg:return m=m.get(_.key===null?w:_.key)||null,l(b,m,_,D);case Ac:return _=uu(_),g(m,b,w,_,D)}if(em(_)||Og(_))return m=m.get(w)||null,d(b,m,_,D,null);if(typeof _.then=="function")return g(m,b,w,Z0(_),D);if(_.$$typeof===Go)return g(m,b,w,J0(b,_),D);ev(b,_)}return null}function v(m,b,w,_){for(var D=null,A=null,E=b,F=b=0,I=null;E!==null&&F<w.length;F++){E.index>F?(I=E,E=null):I=E.sibling;var z=f(m,E,w[F],_);if(z===null){E===null&&(E=I);break}n&&E&&z.alternate===null&&e(m,E),b=s(z,b,F),A===null?D=z:A.sibling=z,A=z,E=I}if(F===w.length)return t(m,E),at&&co(m,F),D;if(E===null){for(;F<w.length;F++)E=h(m,w[F],_),E!==null&&(b=s(E,b,F),A===null?D=E:A.sibling=E,A=E);return at&&co(m,F),D}for(E=i(E);F<w.length;F++)I=g(E,m,F,w[F],_),I!==null&&(n&&I.alternate!==null&&E.delete(I.key===null?F:I.key),b=s(I,b,F),A===null?D=I:A.sibling=I,A=I);return n&&E.forEach(function(H){return e(m,H)}),at&&co(m,F),D}function y(m,b,w,_){if(w==null)throw Error(he(151));for(var D=null,A=null,E=b,F=b=0,I=null,z=w.next();E!==null&&!z.done;F++,z=w.next()){E.index>F?(I=E,E=null):I=E.sibling;var H=f(m,E,z.value,_);if(H===null){E===null&&(E=I);break}n&&E&&H.alternate===null&&e(m,E),b=s(H,b,F),A===null?D=H:A.sibling=H,A=H,E=I}if(z.done)return t(m,E),at&&co(m,F),D;if(E===null){for(;!z.done;F++,z=w.next())z=h(m,z.value,_),z!==null&&(b=s(z,b,F),A===null?D=z:A.sibling=z,A=z);return at&&co(m,F),D}for(E=i(E);!z.done;F++,z=w.next())z=g(E,m,F,z.value,_),z!==null&&(n&&z.alternate!==null&&E.delete(z.key===null?F:z.key),b=s(z,b,F),A===null?D=z:A.sibling=z,A=z);return n&&E.forEach(function(k){return e(m,k)}),at&&co(m,F),D}function x(m,b,w,_){if(typeof w=="object"&&w!==null&&w.type===qh&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case V0:e:{for(var D=w.key;b!==null;){if(b.key===D){if(D=w.type,D===qh){if(b.tag===7){t(m,b.sibling),_=r(b,w.props.children),_.return=m,m=_;break e}}else if(b.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Ac&&uu(D)===b.type){t(m,b.sibling),_=r(b,w.props),Lg(_,w),_.return=m,m=_;break e}t(m,b);break}else e(m,b);b=b.sibling}w.type===qh?(_=Pd(w.props.children,m.mode,_,w.key),_.return=m,m=_):(_=Pv(w.type,w.key,w.props,null,m.mode,_),Lg(_,w),_.return=m,m=_)}return a(m);case Zg:e:{for(D=w.key;b!==null;){if(b.key===D)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){t(m,b.sibling),_=r(b,w.children||[]),_.return=m,m=_;break e}else{t(m,b);break}else e(m,b);b=b.sibling}_=Zw(w,m.mode,_),_.return=m,m=_}return a(m);case Ac:return w=uu(w),x(m,b,w,_)}if(em(w))return v(m,b,w,_);if(Og(w)){if(D=Og(w),typeof D!="function")throw Error(he(150));return w=D.call(w),y(m,b,w,_)}if(typeof w.then=="function")return x(m,b,Z0(w),_);if(w.$$typeof===Go)return x(m,b,J0(m,w),_);ev(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint"?(w=""+w,b!==null&&b.tag===6?(t(m,b.sibling),_=r(b,w),_.return=m,m=_):(t(m,b),_=Jw(w,m.mode,_),_.return=m,m=_),a(m)):t(m,b)}return function(m,b,w,_){try{Km=0;var D=x(m,b,w,_);return pf=null,D}catch(E){if(E===vg||E===D1)throw E;var A=Hr(29,E,null,m.mode);return A.lanes=_,A.return=m,A}finally{}}}var Xd=yj(!0),bj=yj(!1),Ec=!1;function pT(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yA(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function jl(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Rl(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,dt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,e=Hx(n),lj(n,null,t),e}return _1(n,i,e,t),Hx(n)}function Fm(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194048)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,M4(n,t)}}function t_(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var a={lane:t.lane,tag:t.tag,payload:t.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}var bA=!1;function Om(){if(bA){var n=ff;if(n!==null)throw n}}function Mm(n,e,t,i){bA=!1;var r=n.updateQueue;Ec=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var c=o,l=c.next;c.next=null,a===null?s=l:a.next=l,a=c;var d=n.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=l:o.next=l,d.lastBaseUpdate=c))}if(s!==null){var h=r.baseState;a=0,d=l=c=null,o=s;do{var f=o.lane&-536870913,g=f!==o.lane;if(g?(tt&f)===f:(i&f)===f){f!==0&&f===Qp&&(bA=!0),d!==null&&(d=d.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var v=n,y=o;f=e;var x=t;switch(y.tag){case 1:if(v=y.payload,typeof v=="function"){h=v.call(x,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,f=typeof v=="function"?v.call(x,h,f):v,f==null)break e;h=Vt({},h,f);break e;case 2:Ec=!0}}f=o.callback,f!==null&&(n.flags|=64,g&&(n.flags|=8192),g=r.callbacks,g===null?r.callbacks=[f]:g.push(f))}else g={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(l=d=g,c=h):d=d.next=g,a|=f;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;g=o,o=g.next,g.next=null,r.lastBaseUpdate=g,r.shared.pending=null}}while(!0);d===null&&(c=h),r.baseState=c,r.firstBaseUpdate=l,r.lastBaseUpdate=d,s===null&&(r.shared.lanes=0),ql|=a,n.lanes=a,n.memoizedState=h}}function vj(n,e){if(typeof n!="function")throw Error(he(191,n));n.call(e)}function xj(n,e){var t=n.callbacks;if(t!==null)for(n.callbacks=null,n=0;n<t.length;n++)vj(t[n],e)}var Jp=Ha(null),Yx=Ha(0);function w3(n,e){n=oc,It(Yx,n),It(Jp,e),oc=n|e.baseLanes}function vA(){It(Yx,oc),It(Jp,Jp.current)}function gT(){oc=Yx.current,Hn(Jp),Hn(Yx)}var es=Ha(null),ks=null;function Cc(n){var e=n.alternate;It(pn,pn.current&1),It(es,n),ks===null&&(e===null||Jp.current!==null||e.memoizedState!==null)&&(ks=n)}function xA(n){It(pn,pn.current),It(es,n),ks===null&&(ks=n)}function wj(n){n.tag===22?(It(pn,pn.current),It(es,n),ks===null&&(ks=n)):kc()}function kc(){It(pn,pn.current),It(es,es.current)}function qr(n){Hn(es),ks===n&&(ks=null),Hn(pn)}var pn=Ha(0);function Kx(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||IA(t)||PA(t)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rc=0,$e=null,Ct=null,_n=null,Qx=!1,gf=!1,Yd=!1,Jx=0,Qm=0,mf=null,G9=0;function nn(){throw Error(he(321))}function mT(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Zr(n[t],e[t]))return!1;return!0}function yT(n,e,t,i,r,s){return rc=s,$e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Me.H=n===null||n.memoizedState===null?Jj:CT,Yd=!1,s=t(i,r),Yd=!1,gf&&(s=Dj(e,t,i,r)),_j(n),s}function _j(n){Me.H=Jm;var e=Ct!==null&&Ct.next!==null;if(rc=0,_n=Ct=$e=null,Qx=!1,Qm=0,mf=null,e)throw Error(he(300));n===null||En||(n=n.dependencies,n!==null&&Gx(n)&&(En=!0))}function Dj(n,e,t,i){$e=n;var r=0;do{if(gf&&(mf=null),Qm=0,gf=!1,25<=r)throw Error(he(301));if(r+=1,_n=Ct=null,n.updateQueue!=null){var s=n.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}Me.H=Zj,s=e(t,i)}while(gf);return s}function X9(){var n=Me.H,e=n.useState()[0];return e=typeof e.then=="function"?x0(e):e,n=n.useState()[0],(Ct!==null?Ct.memoizedState:null)!==n&&($e.flags|=1024),e}function bT(){var n=Jx!==0;return Jx=0,n}function vT(n,e,t){e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~t}function xT(n){if(Qx){for(n=n.memoizedState;n!==null;){var e=n.queue;e!==null&&(e.pending=null),n=n.next}Qx=!1}rc=0,_n=Ct=$e=null,gf=!1,Qm=Jx=0,mf=null}function Mi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?$e.memoizedState=_n=n:_n=_n.next=n,_n}function gn(){if(Ct===null){var n=$e.alternate;n=n!==null?n.memoizedState:null}else n=Ct.next;var e=_n===null?$e.memoizedState:_n.next;if(e!==null)_n=e,Ct=n;else{if(n===null)throw $e.alternate===null?Error(he(467)):Error(he(310));Ct=n,n={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},_n===null?$e.memoizedState=_n=n:_n=_n.next=n}return _n}function A1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function x0(n){var e=Qm;return Qm+=1,mf===null&&(mf=[]),n=mj(mf,n,e),e=$e,(_n===null?e.memoizedState:_n.next)===null&&(e=e.alternate,Me.H=e===null||e.memoizedState===null?Jj:CT),n}function E1(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return x0(n);if(n.$$typeof===Go)return ui(n)}throw Error(he(438,String(n)))}function wT(n){var e=null,t=$e.updateQueue;if(t!==null&&(e=t.memoCache),e==null){var i=$e.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),t===null&&(t=A1(),$e.updateQueue=t),t.memoCache=e,t=e.data[e.index],t===void 0)for(t=e.data[e.index]=Array(n),i=0;i<n;i++)t[i]=RI;return e.index++,t}function sc(n,e){return typeof e=="function"?e(n):e}function Wv(n){var e=gn();return _T(e,Ct,n)}function _T(n,e,t){var i=n.queue;if(i===null)throw Error(he(311));i.lastRenderedReducer=t;var r=n.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}e.baseQueue=r=s,i.pending=null}if(s=n.baseState,r===null)n.memoizedState=s;else{e=r.next;var o=a=null,c=null,l=e,d=!1;do{var h=l.lane&-536870913;if(h!==l.lane?(tt&h)===h:(rc&h)===h){var f=l.revertLane;if(f===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),h===Qp&&(d=!0);else if((rc&f)===f){l=l.next,f===Qp&&(d=!0);continue}else h={lane:0,revertLane:l.revertLane,gesture:null,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null},c===null?(o=c=h,a=s):c=c.next=h,$e.lanes|=f,ql|=f;h=l.action,Yd&&t(s,h),s=l.hasEagerState?l.eagerState:t(s,h)}else f={lane:h,revertLane:l.revertLane,gesture:l.gesture,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null},c===null?(o=c=f,a=s):c=c.next=f,$e.lanes|=h,ql|=h;l=l.next}while(l!==null&&l!==e);if(c===null?a=s:c.next=o,!Zr(s,n.memoizedState)&&(En=!0,d&&(t=ff,t!==null)))throw t;n.memoizedState=s,n.baseState=a,n.baseQueue=c,i.lastRenderedState=s}return r===null&&(i.lanes=0),[n.memoizedState,i.dispatch]}function n_(n){var e=gn(),t=e.queue;if(t===null)throw Error(he(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var a=r=r.next;do s=n(s,a.action),a=a.next;while(a!==r);Zr(s,e.memoizedState)||(En=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function Aj(n,e,t){var i=$e,r=gn(),s=at;if(s){if(t===void 0)throw Error(he(407));t=t()}else t=e();var a=!Zr((Ct||r).memoizedState,t);if(a&&(r.memoizedState=t,En=!0),r=r.queue,DT(Tj.bind(null,i,r,n),[n]),r.getSnapshot!==e||a||_n!==null&&_n.memoizedState.tag&1){if(i.flags|=2048,Zp(9,{destroy:void 0},Sj.bind(null,i,r,t,e),null),Ft===null)throw Error(he(349));s||rc&127||Ej(i,e,t)}return t}function Ej(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=$e.updateQueue,e===null?(e=A1(),$e.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Sj(n,e,t,i){e.value=t,e.getSnapshot=i,Cj(e)&&kj(n)}function Tj(n,e,t){return t(function(){Cj(e)&&kj(n)})}function Cj(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Zr(n,t)}catch{return!0}}function kj(n){var e=ch(n,2);e!==null&&dr(e,n,2)}function wA(n){var e=Mi();if(typeof n=="function"){var t=n;if(n=t(),Yd){El(!0);try{t()}finally{El(!1)}}}return e.memoizedState=e.baseState=n,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sc,lastRenderedState:n},e}function Uj(n,e,t,i){return n.baseState=t,_T(n,Ct,typeof i=="function"?i:sc)}function Y9(n,e,t,i,r){if(T1(n))throw Error(he(485));if(n=e.action,n!==null){var s={payload:r,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};Me.T!==null?t(!0):s.isTransition=!1,i(s),t=e.pending,t===null?(s.next=e.pending=s,Nj(e,s)):(s.next=t.next,e.pending=t.next=s)}}function Nj(n,e){var t=e.action,i=e.payload,r=n.state;if(e.isTransition){var s=Me.T,a={};Me.T=a;try{var o=t(r,i),c=Me.S;c!==null&&c(a,o),_3(n,e,o)}catch(l){_A(n,e,l)}finally{s!==null&&a.types!==null&&(s.types=a.types),Me.T=s}}else try{s=t(r,i),_3(n,e,s)}catch(l){_A(n,e,l)}}function _3(n,e,t){t!==null&&typeof t=="object"&&typeof t.then=="function"?t.then(function(i){D3(n,e,i)},function(i){return _A(n,e,i)}):D3(n,e,t)}function D3(n,e,t){e.status="fulfilled",e.value=t,jj(e),n.state=t,e=n.pending,e!==null&&(t=e.next,t===e?n.pending=null:(t=t.next,e.next=t,Nj(n,t)))}function _A(n,e,t){var i=n.pending;if(n.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=t,jj(e),e=e.next;while(e!==i)}n.action=null}function jj(n){n=n.listeners;for(var e=0;e<n.length;e++)(0,n[e])()}function Rj(n,e){return e}function A3(n,e){if(at){var t=Ft.formState;if(t!==null){e:{var i=$e;if(at){if($t){t:{for(var r=$t,s=Ts;r.nodeType!==8;){if(!s){r=null;break t}if(r=Us(r.nextSibling),r===null){r=null;break t}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){$t=Us(r.nextSibling),i=r.data==="F!";break e}}zl(i)}i=!1}i&&(e=t[0])}}return t=Mi(),t.memoizedState=t.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rj,lastRenderedState:e},t.queue=i,t=Yj.bind(null,$e,i),i.dispatch=t,i=wA(!1),s=TT.bind(null,$e,!1,i.queue),i=Mi(),r={state:e,dispatch:null,action:n,pending:null},i.queue=r,t=Y9.bind(null,$e,r,s,t),r.dispatch=t,i.memoizedState=n,[e,t,!1]}function E3(n){var e=gn();return Fj(e,Ct,n)}function Fj(n,e,t){if(e=_T(n,e,Rj)[0],n=Wv(sc)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=x0(e)}catch(a){throw a===vg?D1:a}else i=e;e=gn();var r=e.queue,s=r.dispatch;return t!==e.memoizedState&&($e.flags|=2048,Zp(9,{destroy:void 0},K9.bind(null,r,t),null)),[i,s,n]}function K9(n,e){n.action=e}function S3(n){var e=gn(),t=Ct;if(t!==null)return Fj(e,t,n);gn(),e=e.memoizedState,t=gn();var i=t.queue.dispatch;return t.memoizedState=n,[e,i,!1]}function Zp(n,e,t,i){return n={tag:n,create:t,deps:i,inst:e,next:null},e=$e.updateQueue,e===null&&(e=A1(),$e.updateQueue=e),t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n),n}function Oj(){return gn().memoizedState}function qv(n,e,t,i){var r=Mi();$e.flags|=n,r.memoizedState=Zp(1|e,{destroy:void 0},t,i===void 0?null:i)}function S1(n,e,t,i){var r=gn();i=i===void 0?null:i;var s=r.memoizedState.inst;Ct!==null&&i!==null&&mT(i,Ct.memoizedState.deps)?r.memoizedState=Zp(e,s,t,i):($e.flags|=n,r.memoizedState=Zp(1|e,s,t,i))}function T3(n,e){qv(8390656,8,n,e)}function DT(n,e){S1(2048,8,n,e)}function Q9(n){$e.flags|=4;var e=$e.updateQueue;if(e===null)e=A1(),$e.updateQueue=e,e.events=[n];else{var t=e.events;t===null?e.events=[n]:t.push(n)}}function Mj(n){var e=gn().memoizedState;return Q9({ref:e,nextImpl:n}),function(){if(dt&2)throw Error(he(440));return e.impl.apply(void 0,arguments)}}function Bj(n,e){return S1(4,2,n,e)}function Lj(n,e){return S1(4,4,n,e)}function Ij(n,e){if(typeof e=="function"){n=n();var t=e(n);return function(){typeof t=="function"?t():e(null)}}if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Pj(n,e,t){t=t!=null?t.concat([n]):null,S1(4,4,Ij.bind(null,e,n),t)}function AT(){}function zj(n,e){var t=gn();e=e===void 0?null:e;var i=t.memoizedState;return e!==null&&mT(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function Wj(n,e){var t=gn();e=e===void 0?null:e;var i=t.memoizedState;if(e!==null&&mT(e,i[1]))return i[0];if(i=n(),Yd){El(!0);try{n()}finally{El(!1)}}return t.memoizedState=[i,e],i}function ET(n,e,t){return t===void 0||rc&1073741824&&!(tt&261930)?n.memoizedState=e:(n.memoizedState=t,n=U8(),$e.lanes|=n,ql|=n,t)}function qj(n,e,t,i){return Zr(t,e)?t:Jp.current!==null?(n=ET(n,t,i),Zr(n,e)||(En=!0),n):!(rc&42)||rc&1073741824&&!(tt&261930)?(En=!0,n.memoizedState=t):(n=U8(),$e.lanes|=n,ql|=n,e)}function $j(n,e,t,i,r){var s=ht.p;ht.p=s!==0&&8>s?s:8;var a=Me.T,o={};Me.T=o,TT(n,!1,e,t);try{var c=r(),l=Me.S;if(l!==null&&l(o,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=V9(c,i);Bm(n,e,d,Qr(n))}else Bm(n,e,i,Qr(n))}catch(h){Bm(n,e,{then:function(){},status:"rejected",reason:h},Qr())}finally{ht.p=s,a!==null&&o.types!==null&&(a.types=o.types),Me.T=a}}function J9(){}function DA(n,e,t,i){if(n.tag!==5)throw Error(he(476));var r=Hj(n).queue;$j(n,r,e,Id,t===null?J9:function(){return Vj(n),t(i)})}function Hj(n){var e=n.memoizedState;if(e!==null)return e;e={memoizedState:Id,baseState:Id,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sc,lastRenderedState:Id},next:null};var t={};return e.next={memoizedState:t,baseState:t,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sc,lastRenderedState:t},next:null},n.memoizedState=e,n=n.alternate,n!==null&&(n.memoizedState=e),e}function Vj(n){var e=Hj(n);e.next===null&&(e=n.alternate.memoizedState),Bm(n,e.next.queue,{},Qr())}function ST(){return ui(ty)}function Gj(){return gn().memoizedState}function Xj(){return gn().memoizedState}function Z9(n){for(var e=n.return;e!==null;){switch(e.tag){case 24:case 3:var t=Qr();n=jl(t);var i=Rl(e,n,t);i!==null&&(dr(i,e,t),Fm(i,e,t)),e={cache:dT()},n.payload=e;return}e=e.return}}function e7(n,e,t){var i=Qr();t={lane:i,revertLane:0,gesture:null,action:t,hasEagerState:!1,eagerState:null,next:null},T1(n)?Kj(e,t):(t=oT(n,e,t,i),t!==null&&(dr(t,n,i),Qj(t,e,i)))}function Yj(n,e,t){var i=Qr();Bm(n,e,t,i)}function Bm(n,e,t,i){var r={lane:i,revertLane:0,gesture:null,action:t,hasEagerState:!1,eagerState:null,next:null};if(T1(n))Kj(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,t);if(r.hasEagerState=!0,r.eagerState=o,Zr(o,a))return _1(n,e,r,0),Ft===null&&w1(),!1}catch{}finally{}if(t=oT(n,e,r,i),t!==null)return dr(t,n,i),Qj(t,e,i),!0}return!1}function TT(n,e,t,i){if(i={lane:2,revertLane:MT(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},T1(n)){if(e)throw Error(he(479))}else e=oT(n,t,i,2),e!==null&&dr(e,n,2)}function T1(n){var e=n.alternate;return n===$e||e!==null&&e===$e}function Kj(n,e){gf=Qx=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Qj(n,e,t){if(t&4194048){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,M4(n,t)}}var Jm={readContext:ui,use:E1,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useLayoutEffect:nn,useInsertionEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useSyncExternalStore:nn,useId:nn,useHostTransitionStatus:nn,useFormState:nn,useActionState:nn,useOptimistic:nn,useMemoCache:nn,useCacheRefresh:nn};Jm.useEffectEvent=nn;var Jj={readContext:ui,use:E1,useCallback:function(n,e){return Mi().memoizedState=[n,e===void 0?null:e],n},useContext:ui,useEffect:T3,useImperativeHandle:function(n,e,t){t=t!=null?t.concat([n]):null,qv(4194308,4,Ij.bind(null,e,n),t)},useLayoutEffect:function(n,e){return qv(4194308,4,n,e)},useInsertionEffect:function(n,e){qv(4,2,n,e)},useMemo:function(n,e){var t=Mi();e=e===void 0?null:e;var i=n();if(Yd){El(!0);try{n()}finally{El(!1)}}return t.memoizedState=[i,e],i},useReducer:function(n,e,t){var i=Mi();if(t!==void 0){var r=t(e);if(Yd){El(!0);try{t(e)}finally{El(!1)}}}else r=e;return i.memoizedState=i.baseState=r,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},i.queue=n,n=n.dispatch=e7.bind(null,$e,n),[i.memoizedState,n]},useRef:function(n){var e=Mi();return n={current:n},e.memoizedState=n},useState:function(n){n=wA(n);var e=n.queue,t=Yj.bind(null,$e,e);return e.dispatch=t,[n.memoizedState,t]},useDebugValue:AT,useDeferredValue:function(n,e){var t=Mi();return ET(t,n,e)},useTransition:function(){var n=wA(!1);return n=$j.bind(null,$e,n.queue,!0,!1),Mi().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,e,t){var i=$e,r=Mi();if(at){if(t===void 0)throw Error(he(407));t=t()}else{if(t=e(),Ft===null)throw Error(he(349));tt&127||Ej(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,T3(Tj.bind(null,i,s,n),[n]),i.flags|=2048,Zp(9,{destroy:void 0},Sj.bind(null,i,s,t,e),null),t},useId:function(){var n=Mi(),e=Ft.identifierPrefix;if(at){var t=Ba,i=Ma;t=(i&~(1<<32-Kr(i)-1)).toString(32)+t,e="_"+e+"R_"+t,t=Jx++,0<t&&(e+="H"+t.toString(32)),e+="_"}else t=G9++,e="_"+e+"r_"+t.toString(32)+"_";return n.memoizedState=e},useHostTransitionStatus:ST,useFormState:A3,useActionState:A3,useOptimistic:function(n){var e=Mi();e.memoizedState=e.baseState=n;var t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=t,e=TT.bind(null,$e,!0,t),t.dispatch=e,[n,e]},useMemoCache:wT,useCacheRefresh:function(){return Mi().memoizedState=Z9.bind(null,$e)},useEffectEvent:function(n){var e=Mi(),t={impl:n};return e.memoizedState=t,function(){if(dt&2)throw Error(he(440));return t.impl.apply(void 0,arguments)}}},CT={readContext:ui,use:E1,useCallback:zj,useContext:ui,useEffect:DT,useImperativeHandle:Pj,useInsertionEffect:Bj,useLayoutEffect:Lj,useMemo:Wj,useReducer:Wv,useRef:Oj,useState:function(){return Wv(sc)},useDebugValue:AT,useDeferredValue:function(n,e){var t=gn();return qj(t,Ct.memoizedState,n,e)},useTransition:function(){var n=Wv(sc)[0],e=gn().memoizedState;return[typeof n=="boolean"?n:x0(n),e]},useSyncExternalStore:Aj,useId:Gj,useHostTransitionStatus:ST,useFormState:E3,useActionState:E3,useOptimistic:function(n,e){var t=gn();return Uj(t,Ct,n,e)},useMemoCache:wT,useCacheRefresh:Xj};CT.useEffectEvent=Mj;var Zj={readContext:ui,use:E1,useCallback:zj,useContext:ui,useEffect:DT,useImperativeHandle:Pj,useInsertionEffect:Bj,useLayoutEffect:Lj,useMemo:Wj,useReducer:n_,useRef:Oj,useState:function(){return n_(sc)},useDebugValue:AT,useDeferredValue:function(n,e){var t=gn();return Ct===null?ET(t,n,e):qj(t,Ct.memoizedState,n,e)},useTransition:function(){var n=n_(sc)[0],e=gn().memoizedState;return[typeof n=="boolean"?n:x0(n),e]},useSyncExternalStore:Aj,useId:Gj,useHostTransitionStatus:ST,useFormState:S3,useActionState:S3,useOptimistic:function(n,e){var t=gn();return Ct!==null?Uj(t,Ct,n,e):(t.baseState=n,[n,t.queue.dispatch])},useMemoCache:wT,useCacheRefresh:Xj};Zj.useEffectEvent=Mj;function i_(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Vt({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var AA={enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Qr(),r=jl(i);r.payload=e,t!=null&&(r.callback=t),e=Rl(n,r,i),e!==null&&(dr(e,n,i),Fm(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Qr(),r=jl(i);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=Rl(n,r,i),e!==null&&(dr(e,n,i),Fm(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Qr(),i=jl(t);i.tag=2,e!=null&&(i.callback=e),e=Rl(n,i,t),e!==null&&(dr(e,n,t),Fm(e,n,t))}};function C3(n,e,t,i,r,s,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!Gm(t,i)||!Gm(r,s):!0}function k3(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&AA.enqueueReplaceState(e,e.state,null)}function Kd(n,e){var t=e;if("ref"in e){t={};for(var i in e)i!=="ref"&&(t[i]=e[i])}if(n=n.defaultProps){t===e&&(t=Vt({},t));for(var r in n)t[r]===void 0&&(t[r]=n[r])}return t}function e8(n){$x(n)}function t8(n){console.error(n)}function n8(n){$x(n)}function Zx(n,e){try{var t=n.onUncaughtError;t(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function U3(n,e,t){try{var i=n.onCaughtError;i(t.value,{componentStack:t.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function EA(n,e,t){return t=jl(t),t.tag=3,t.payload={element:null},t.callback=function(){Zx(n,e)},t}function i8(n){return n=jl(n),n.tag=3,n}function r8(n,e,t,i){var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;n.payload=function(){return r(s)},n.callback=function(){U3(e,t,i)}}var a=t.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){U3(e,t,i),typeof r!="function"&&(Fl===null?Fl=new Set([this]):Fl.add(this));var o=i.stack;this.componentDidCatch(i.value,{componentStack:o!==null?o:""})})}function t7(n,e,t,i,r){if(t.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=t.alternate,e!==null&&bg(e,t,r,!0),t=es.current,t!==null){switch(t.tag){case 31:case 13:return ks===null?r2():t.alternate===null&&un===0&&(un=3),t.flags&=-257,t.flags|=65536,t.lanes=r,i===Xx?t.flags|=16384:(e=t.updateQueue,e===null?t.updateQueue=new Set([i]):e.add(i),p_(n,i,r)),!1;case 22:return t.flags|=65536,i===Xx?t.flags|=16384:(e=t.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},t.updateQueue=e):(t=e.retryQueue,t===null?e.retryQueue=new Set([i]):t.add(i)),p_(n,i,r)),!1}throw Error(he(435,t.tag))}return p_(n,i,r),r2(),!1}if(at)return e=es.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,i!==hA&&(n=Error(he(422),{cause:i}),Ym(Ss(n,t)))):(i!==hA&&(e=Error(he(423),{cause:i}),Ym(Ss(e,t))),n=n.current.alternate,n.flags|=65536,r&=-r,n.lanes|=r,i=Ss(i,t),r=EA(n.stateNode,i,r),t_(n,r),un!==4&&(un=2)),!1;var s=Error(he(520),{cause:i});if(s=Ss(s,t),Pm===null?Pm=[s]:Pm.push(s),un!==4&&(un=2),e===null)return!0;i=Ss(i,t),t=e;do{switch(t.tag){case 3:return t.flags|=65536,n=r&-r,t.lanes|=n,n=EA(t.stateNode,i,n),t_(t,n),!1;case 1:if(e=t.type,s=t.stateNode,(t.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Fl===null||!Fl.has(s))))return t.flags|=65536,r&=-r,t.lanes|=r,r=i8(r),r8(r,n,t,i),t_(t,r),!1}t=t.return}while(t!==null);return!1}var kT=Error(he(461)),En=!1;function ri(n,e,t,i){e.child=n===null?bj(e,null,t,i):Xd(e,n.child,t,i)}function N3(n,e,t,i,r){t=t.render;var s=e.ref;if("ref"in i){var a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}else a=i;return Gd(e),i=yT(n,e,t,a,s,r),o=bT(),n!==null&&!En?(vT(n,e,r),ac(n,e,r)):(at&&o&&lT(e),e.flags|=1,ri(n,e,i,r),e.child)}function j3(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!cT(s)&&s.defaultProps===void 0&&t.compare===null?(e.tag=15,e.type=s,s8(n,e,s,i,r)):(n=Pv(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!UT(n,r)){var a=s.memoizedProps;if(t=t.compare,t=t!==null?t:Gm,t(a,i)&&n.ref===e.ref)return ac(n,e,r)}return e.flags|=1,n=Ko(s,i),n.ref=e.ref,n.return=e,e.child=n}function s8(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(Gm(s,i)&&n.ref===e.ref)if(En=!1,e.pendingProps=i=s,UT(n,r))n.flags&131072&&(En=!0);else return e.lanes=n.lanes,ac(n,e,r)}return SA(n,e,t,i,r)}function a8(n,e,t,i){var r=i.children,s=n!==null?n.memoizedState:null;if(n===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(e.flags&128){if(s=s!==null?s.baseLanes|t:t,n!==null){for(i=e.child=n.child,r=0;i!==null;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~s}else i=0,e.child=null;return R3(n,e,s,t,i)}if(t&536870912)e.memoizedState={baseLanes:0,cachePool:null},n!==null&&zv(e,s!==null?s.cachePool:null),s!==null?w3(e,s):vA(),wj(e);else return i=e.lanes=536870912,R3(n,e,s!==null?s.baseLanes|t:t,t,i)}else s!==null?(zv(e,s.cachePool),w3(e,s),kc(),e.memoizedState=null):(n!==null&&zv(e,null),vA(),kc());return ri(n,e,r,t),e.child}function nm(n,e){return n!==null&&n.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function R3(n,e,t,i,r){var s=hT();return s=s===null?null:{parent:An._currentValue,pool:s},e.memoizedState={baseLanes:t,cachePool:s},n!==null&&zv(e,null),vA(),wj(e),n!==null&&bg(n,e,i,!0),e.childLanes=r,null}function $v(n,e){return e=e2({mode:e.mode,children:e.children},n.mode),e.ref=n.ref,n.child=e,e.return=n,e}function F3(n,e,t){return Xd(e,n.child,null,t),n=$v(e,e.pendingProps),n.flags|=2,qr(e),e.memoizedState=null,n}function n7(n,e,t){var i=e.pendingProps,r=(e.flags&128)!==0;if(e.flags&=-129,n===null){if(at){if(i.mode==="hidden")return n=$v(e,i),e.lanes=536870912,nm(null,n);if(xA(e),(n=$t)?(n=J8(n,Ts),n=n!==null&&n.data==="&"?n:null,n!==null&&(e.memoizedState={dehydrated:n,treeContext:Pl!==null?{id:Ma,overflow:Ba}:null,retryLane:536870912,hydrationErrors:null},t=dj(n),t.return=e,e.child=t,ci=e,$t=null)):n=null,n===null)throw zl(e);return e.lanes=536870912,null}return $v(e,i)}var s=n.memoizedState;if(s!==null){var a=s.dehydrated;if(xA(e),r)if(e.flags&256)e.flags&=-257,e=F3(n,e,t);else if(e.memoizedState!==null)e.child=n.child,e.flags|=128,e=null;else throw Error(he(558));else if(En||bg(n,e,t,!1),r=(t&n.childLanes)!==0,En||r){if(i=Ft,i!==null&&(a=B4(i,t),a!==0&&a!==s.retryLane))throw s.retryLane=a,ch(n,a),dr(i,n,a),kT;r2(),e=F3(n,e,t)}else n=s.treeContext,$t=Us(a.nextSibling),ci=e,at=!0,Nl=null,Ts=!1,n!==null&&fj(e,n),e=$v(e,i),e.flags|=4096;return e}return n=Ko(n.child,{mode:i.mode,children:i.children}),n.ref=e.ref,e.child=n,n.return=e,n}function Hv(n,e){var t=e.ref;if(t===null)n!==null&&n.ref!==null&&(e.flags|=4194816);else{if(typeof t!="function"&&typeof t!="object")throw Error(he(284));(n===null||n.ref!==t)&&(e.flags|=4194816)}}function SA(n,e,t,i,r){return Gd(e),t=yT(n,e,t,i,void 0,r),i=bT(),n!==null&&!En?(vT(n,e,r),ac(n,e,r)):(at&&i&&lT(e),e.flags|=1,ri(n,e,t,r),e.child)}function O3(n,e,t,i,r,s){return Gd(e),e.updateQueue=null,t=Dj(e,i,t,r),_j(n),i=bT(),n!==null&&!En?(vT(n,e,s),ac(n,e,s)):(at&&i&&lT(e),e.flags|=1,ri(n,e,t,s),e.child)}function M3(n,e,t,i,r){if(Gd(e),e.stateNode===null){var s=Qh,a=t.contextType;typeof a=="object"&&a!==null&&(s=ui(a)),s=new t(i,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=AA,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=i,s.state=e.memoizedState,s.refs={},pT(e),a=t.contextType,s.context=typeof a=="object"&&a!==null?ui(a):Qh,s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(i_(e,t,a,i),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&AA.enqueueReplaceState(s,s.state,null),Mm(e,i,s,r),Om(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(n===null){s=e.stateNode;var o=e.memoizedProps,c=Kd(t,o);s.props=c;var l=s.context,d=t.contextType;a=Qh,typeof d=="object"&&d!==null&&(a=ui(d));var h=t.getDerivedStateFromProps;d=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o||l!==a)&&k3(e,s,i,a),Ec=!1;var f=e.memoizedState;s.state=f,Mm(e,i,s,r),Om(),l=e.memoizedState,o||f!==l||Ec?(typeof h=="function"&&(i_(e,t,h,i),l=e.memoizedState),(c=Ec||C3(e,t,c,i,f,l,a))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),s.props=i,s.state=l,s.context=a,i=c):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,yA(n,e),a=e.memoizedProps,d=Kd(t,a),s.props=d,h=e.pendingProps,f=s.context,l=t.contextType,c=Qh,typeof l=="object"&&l!==null&&(c=ui(l)),o=t.getDerivedStateFromProps,(l=typeof o=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==h||f!==c)&&k3(e,s,i,c),Ec=!1,f=e.memoizedState,s.state=f,Mm(e,i,s,r),Om();var g=e.memoizedState;a!==h||f!==g||Ec||n!==null&&n.dependencies!==null&&Gx(n.dependencies)?(typeof o=="function"&&(i_(e,t,o,i),g=e.memoizedState),(d=Ec||C3(e,t,d,i,f,g,c)||n!==null&&n.dependencies!==null&&Gx(n.dependencies))?(l||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,g,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,g,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),s.props=i,s.state=g,s.context=c,i=d):(typeof s.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),i=!1)}return s=i,Hv(n,e),i=(e.flags&128)!==0,s||i?(s=e.stateNode,t=i&&typeof t.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,n!==null&&i?(e.child=Xd(e,n.child,null,r),e.child=Xd(e,null,t,r)):ri(n,e,t,r),e.memoizedState=s.state,n=e.child):n=ac(n,e,r),n}function B3(n,e,t,i){return Vd(),e.flags|=256,ri(n,e,t,i),e.child}var r_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function s_(n){return{baseLanes:n,cachePool:gj()}}function a_(n,e,t){return n=n!==null?n.childLanes&~t:0,e&&(n|=Gr),n}function o8(n,e,t){var i=e.pendingProps,r=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=n!==null&&n.memoizedState===null?!1:(pn.current&2)!==0),a&&(r=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,n===null){if(at){if(r?Cc(e):kc(),(n=$t)?(n=J8(n,Ts),n=n!==null&&n.data!=="&"?n:null,n!==null&&(e.memoizedState={dehydrated:n,treeContext:Pl!==null?{id:Ma,overflow:Ba}:null,retryLane:536870912,hydrationErrors:null},t=dj(n),t.return=e,e.child=t,ci=e,$t=null)):n=null,n===null)throw zl(e);return PA(n)?e.lanes=32:e.lanes=536870912,null}var o=i.children;return i=i.fallback,r?(kc(),r=e.mode,o=e2({mode:"hidden",children:o},r),i=Pd(i,r,t,null),o.return=e,i.return=e,o.sibling=i,e.child=o,i=e.child,i.memoizedState=s_(t),i.childLanes=a_(n,a,t),e.memoizedState=r_,nm(null,i)):(Cc(e),TA(e,o))}var c=n.memoizedState;if(c!==null&&(o=c.dehydrated,o!==null)){if(s)e.flags&256?(Cc(e),e.flags&=-257,e=o_(n,e,t)):e.memoizedState!==null?(kc(),e.child=n.child,e.flags|=128,e=null):(kc(),o=i.fallback,r=e.mode,i=e2({mode:"visible",children:i.children},r),o=Pd(o,r,t,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,Xd(e,n.child,null,t),i=e.child,i.memoizedState=s_(t),i.childLanes=a_(n,a,t),e.memoizedState=r_,e=nm(null,i));else if(Cc(e),PA(o)){if(a=o.nextSibling&&o.nextSibling.dataset,a)var l=a.dgst;a=l,i=Error(he(419)),i.stack="",i.digest=a,Ym({value:i,source:null,stack:null}),e=o_(n,e,t)}else if(En||bg(n,e,t,!1),a=(t&n.childLanes)!==0,En||a){if(a=Ft,a!==null&&(i=B4(a,t),i!==0&&i!==c.retryLane))throw c.retryLane=i,ch(n,i),dr(a,n,i),kT;IA(o)||r2(),e=o_(n,e,t)}else IA(o)?(e.flags|=192,e.child=n.child,e=null):(n=c.treeContext,$t=Us(o.nextSibling),ci=e,at=!0,Nl=null,Ts=!1,n!==null&&fj(e,n),e=TA(e,i.children),e.flags|=4096);return e}return r?(kc(),o=i.fallback,r=e.mode,c=n.child,l=c.sibling,i=Ko(c,{mode:"hidden",children:i.children}),i.subtreeFlags=c.subtreeFlags&65011712,l!==null?o=Ko(l,o):(o=Pd(o,r,t,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,nm(null,i),i=e.child,o=n.child.memoizedState,o===null?o=s_(t):(r=o.cachePool,r!==null?(c=An._currentValue,r=r.parent!==c?{parent:c,pool:c}:r):r=gj(),o={baseLanes:o.baseLanes|t,cachePool:r}),i.memoizedState=o,i.childLanes=a_(n,a,t),e.memoizedState=r_,nm(n.child,i)):(Cc(e),t=n.child,n=t.sibling,t=Ko(t,{mode:"visible",children:i.children}),t.return=e,t.sibling=null,n!==null&&(a=e.deletions,a===null?(e.deletions=[n],e.flags|=16):a.push(n)),e.child=t,e.memoizedState=null,t)}function TA(n,e){return e=e2({mode:"visible",children:e},n.mode),e.return=n,n.child=e}function e2(n,e){return n=Hr(22,n,null,e),n.lanes=0,n}function o_(n,e,t){return Xd(e,n.child,null,t),n=TA(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function L3(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),pA(n.return,e,t)}function c_(n,e,t,i,r,s){var a=n.memoizedState;a===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r,treeForkCount:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=t,a.tailMode=r,a.treeForkCount=s)}function c8(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;i=i.children;var a=pn.current,o=(a&2)!==0;if(o?(a=a&1|2,e.flags|=128):a&=1,It(pn,a),ri(n,e,i,t),i=at?Xm:0,!o&&n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&L3(n,t,e);else if(n.tag===19)L3(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Kx(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),c_(e,!1,r,t,s,i);break;case"backwards":case"unstable_legacy-backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Kx(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}c_(e,!0,t,null,s,i);break;case"together":c_(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function ac(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),ql|=e.lanes,!(t&e.childLanes))if(n!==null){if(bg(n,e,t,!1),(t&e.childLanes)===0)return null}else return null;if(n!==null&&e.child!==n.child)throw Error(he(153));if(e.child!==null){for(n=e.child,t=Ko(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ko(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function UT(n,e){return n.lanes&e?!0:(n=n.dependencies,!!(n!==null&&Gx(n)))}function i7(n,e,t){switch(e.tag){case 3:Px(e,e.stateNode.containerInfo),Tc(e,An,n.memoizedState.cache),Vd();break;case 27:case 5:tA(e);break;case 4:Px(e,e.stateNode.containerInfo);break;case 10:Tc(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,xA(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(Cc(e),e.flags|=128,null):t&e.child.childLanes?o8(n,e,t):(Cc(e),n=ac(n,e,t),n!==null?n.sibling:null);Cc(e);break;case 19:var r=(n.flags&128)!==0;if(i=(t&e.childLanes)!==0,i||(bg(n,e,t,!1),i=(t&e.childLanes)!==0),r){if(i)return c8(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),It(pn,pn.current),i)break;return null;case 22:return e.lanes=0,a8(n,e,t,e.pendingProps);case 24:Tc(e,An,n.memoizedState.cache)}return ac(n,e,t)}function l8(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps)En=!0;else{if(!UT(n,t)&&!(e.flags&128))return En=!1,i7(n,e,t);En=!!(n.flags&131072)}else En=!1,at&&e.flags&1048576&&hj(e,Xm,e.index);switch(e.lanes=0,e.tag){case 16:e:{var i=e.pendingProps;if(n=uu(e.elementType),e.type=n,typeof n=="function")cT(n)?(i=Kd(n,i),e.tag=1,e=M3(null,e,n,i,t)):(e.tag=0,e=SA(null,e,n,i,t));else{if(n!=null){var r=n.$$typeof;if(r===XS){e.tag=11,e=N3(null,e,n,i,t);break e}else if(r===YS){e.tag=14,e=j3(null,e,n,i,t);break e}}throw e=ZD(n)||n,Error(he(306,e,""))}}return e;case 0:return SA(n,e,e.type,e.pendingProps,t);case 1:return i=e.type,r=Kd(i,e.pendingProps),M3(n,e,i,r,t);case 3:e:{if(Px(e,e.stateNode.containerInfo),n===null)throw Error(he(387));i=e.pendingProps;var s=e.memoizedState;r=s.element,yA(n,e),Mm(e,i,null,t);var a=e.memoizedState;if(i=a.cache,Tc(e,An,i),i!==s.cache&&gA(e,[An],t,!0),Om(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=B3(n,e,i,t);break e}else if(i!==r){r=Ss(Error(he(424)),e),Ym(r),e=B3(n,e,i,t);break e}else{switch(n=e.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for($t=Us(n.firstChild),ci=e,at=!0,Nl=null,Ts=!0,t=bj(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling}else{if(Vd(),i===r){e=ac(n,e,t);break e}ri(n,e,i,t)}e=e.child}return e;case 26:return Hv(n,e),n===null?(t=rU(e.type,null,e.pendingProps,null))?e.memoizedState=t:at||(t=e.type,n=e.pendingProps,i=c2(Ul.current).createElement(t),i[oi]=e,i[hr]=n,di(i,t,n),$n(i),e.stateNode=i):e.memoizedState=rU(e.type,n.memoizedProps,e.pendingProps,n.memoizedState),null;case 27:return tA(e),n===null&&at&&(i=e.stateNode=Z8(e.type,e.pendingProps,Ul.current),ci=e,Ts=!0,r=$t,Kl(e.type)?(zA=r,$t=Us(i.firstChild)):$t=r),ri(n,e,e.pendingProps.children,t),Hv(n,e),n===null&&(e.flags|=4194304),e.child;case 5:return n===null&&at&&((r=i=$t)&&(i=R7(i,e.type,e.pendingProps,Ts),i!==null?(e.stateNode=i,ci=e,$t=Us(i.firstChild),Ts=!1,r=!0):r=!1),r||zl(e)),tA(e),r=e.type,s=e.pendingProps,a=n!==null?n.memoizedProps:null,i=s.children,BA(r,s)?i=null:a!==null&&BA(r,a)&&(e.flags|=32),e.memoizedState!==null&&(r=yT(n,e,X9,null,null,t),ty._currentValue=r),Hv(n,e),ri(n,e,i,t),e.child;case 6:return n===null&&at&&((n=t=$t)&&(t=F7(t,e.pendingProps,Ts),t!==null?(e.stateNode=t,ci=e,$t=null,n=!0):n=!1),n||zl(e)),null;case 13:return o8(n,e,t);case 4:return Px(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Xd(e,null,i,t):ri(n,e,i,t),e.child;case 11:return N3(n,e,e.type,e.pendingProps,t);case 7:return ri(n,e,e.pendingProps,t),e.child;case 8:return ri(n,e,e.pendingProps.children,t),e.child;case 12:return ri(n,e,e.pendingProps.children,t),e.child;case 10:return i=e.pendingProps,Tc(e,e.type,i.value),ri(n,e,i.children,t),e.child;case 9:return r=e.type._context,i=e.pendingProps.children,Gd(e),r=ui(r),i=i(r),e.flags|=1,ri(n,e,i,t),e.child;case 14:return j3(n,e,e.type,e.pendingProps,t);case 15:return s8(n,e,e.type,e.pendingProps,t);case 19:return c8(n,e,t);case 31:return n7(n,e,t);case 22:return a8(n,e,t,e.pendingProps);case 24:return Gd(e),i=ui(An),n===null?(r=hT(),r===null&&(r=Ft,s=dT(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=t),r=s),e.memoizedState={parent:i,cache:r},pT(e),Tc(e,An,r)):(n.lanes&t&&(yA(n,e),Mm(e,null,null,t),Om()),r=n.memoizedState,s=e.memoizedState,r.parent!==i?(r={parent:i,cache:i},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),Tc(e,An,i)):(i=s.cache,Tc(e,An,i),i!==r.cache&&gA(e,[An],t,!0))),ri(n,e,e.pendingProps.children,t),e.child;case 29:throw e.pendingProps}throw Error(he(156,e.tag))}function Ya(n){n.flags|=4}function l_(n,e,t,i,r){if((e=(n.mode&32)!==0)&&(e=!1),e){if(n.flags|=16777216,(r&335544128)===r)if(n.stateNode.complete)n.flags|=8192;else if(R8())n.flags|=8192;else throw Wd=Xx,fT}else n.flags&=-16777217}function I3(n,e){if(e.type!=="stylesheet"||e.state.loading&4)n.flags&=-16777217;else if(n.flags|=16777216,!nR(e))if(R8())n.flags|=8192;else throw Wd=Xx,fT}function tv(n,e){e!==null&&(n.flags|=4),n.flags&16384&&(e=n.tag!==22?F4():536870912,n.lanes|=e,eg|=e)}function Ig(n,e){if(!at)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function zt(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function r7(n,e,t){var i=e.pendingProps;switch(uT(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(e),null;case 1:return zt(e),null;case 3:return t=e.stateNode,i=null,n!==null&&(i=n.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),Qo(An),Xp(),t.pendingContext&&(t.context=t.pendingContext,t.pendingContext=null),(n===null||n.child===null)&&(mh(e)?Ya(e):n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,e_())),zt(e),null;case 26:var r=e.type,s=e.memoizedState;return n===null?(Ya(e),s!==null?(zt(e),I3(e,s)):(zt(e),l_(e,r,null,i,t))):s?s!==n.memoizedState?(Ya(e),zt(e),I3(e,s)):(zt(e),e.flags&=-16777217):(n=n.memoizedProps,n!==i&&Ya(e),zt(e),l_(e,r,n,i,t)),null;case 27:if(zx(e),t=Ul.current,r=e.type,n!==null&&e.stateNode!=null)n.memoizedProps!==i&&Ya(e);else{if(!i){if(e.stateNode===null)throw Error(he(166));return zt(e),null}n=Ia.current,mh(e)?p3(e):(n=Z8(r,i,t),e.stateNode=n,Ya(e))}return zt(e),null;case 5:if(zx(e),r=e.type,n!==null&&e.stateNode!=null)n.memoizedProps!==i&&Ya(e);else{if(!i){if(e.stateNode===null)throw Error(he(166));return zt(e),null}if(s=Ia.current,mh(e))p3(e);else{var a=c2(Ul.current);switch(s){case 1:s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":s=a.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof i.is=="string"?a.createElement("select",{is:i.is}):a.createElement("select"),i.multiple?s.multiple=!0:i.size&&(s.size=i.size);break;default:s=typeof i.is=="string"?a.createElement(r,{is:i.is}):a.createElement(r)}}s[oi]=e,s[hr]=i;e:for(a=e.child;a!==null;){if(a.tag===5||a.tag===6)s.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}e.stateNode=s;e:switch(di(s,r,i),r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Ya(e)}}return zt(e),l_(e,e.type,n===null?null:n.memoizedProps,e.pendingProps,t),null;case 6:if(n&&e.stateNode!=null)n.memoizedProps!==i&&Ya(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(he(166));if(n=Ul.current,mh(e)){if(n=e.stateNode,t=e.memoizedProps,i=null,r=ci,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}n[oi]=e,n=!!(n.nodeValue===t||i!==null&&i.suppressHydrationWarning===!0||Y8(n.nodeValue,t)),n||zl(e,!0)}else n=c2(n).createTextNode(i),n[oi]=e,e.stateNode=n}return zt(e),null;case 31:if(t=e.memoizedState,n===null||n.memoizedState!==null){if(i=mh(e),t!==null){if(n===null){if(!i)throw Error(he(318));if(n=e.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(he(557));n[oi]=e}else Vd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;zt(e),n=!1}else t=e_(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=t),n=!0;if(!n)return e.flags&256?(qr(e),e):(qr(e),null);if(e.flags&128)throw Error(he(558))}return zt(e),null;case 13:if(i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(r=mh(e),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(he(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(he(317));r[oi]=e}else Vd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;zt(e),r=!1}else r=e_(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(qr(e),e):(qr(e),null)}return qr(e),e.flags&128?(e.lanes=t,e):(t=i!==null,n=n!==null&&n.memoizedState!==null,t&&(i=e.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)),t!==n&&t&&(e.child.flags|=8192),tv(e,e.updateQueue),zt(e),null);case 4:return Xp(),n===null&&BT(e.stateNode.containerInfo),zt(e),null;case 10:return Qo(e.type),zt(e),null;case 19:if(Hn(pn),i=e.memoizedState,i===null)return zt(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)Ig(i,!1);else{if(un!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(s=Kx(n),s!==null){for(e.flags|=128,Ig(i,!1),n=s.updateQueue,e.updateQueue=n,tv(e,n),e.subtreeFlags=0,n=t,t=e.child;t!==null;)uj(t,n),t=t.sibling;return It(pn,pn.current&1|2),at&&co(e,i.treeForkCount),e.child}n=n.sibling}i.tail!==null&&Xr()>n2&&(e.flags|=128,r=!0,Ig(i,!1),e.lanes=4194304)}else{if(!r)if(n=Kx(s),n!==null){if(e.flags|=128,r=!0,n=n.updateQueue,e.updateQueue=n,tv(e,n),Ig(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!at)return zt(e),null}else 2*Xr()-i.renderingStartTime>n2&&t!==536870912&&(e.flags|=128,r=!0,Ig(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(n=i.last,n!==null?n.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(n=i.tail,i.rendering=n,i.tail=n.sibling,i.renderingStartTime=Xr(),n.sibling=null,t=pn.current,It(pn,r?t&1|2:t&1),at&&co(e,i.treeForkCount),n):(zt(e),null);case 22:case 23:return qr(e),gT(),i=e.memoizedState!==null,n!==null?n.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?t&536870912&&!(e.flags&128)&&(zt(e),e.subtreeFlags&6&&(e.flags|=8192)):zt(e),t=e.updateQueue,t!==null&&tv(e,t.retryQueue),t=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==t&&(e.flags|=2048),n!==null&&Hn(zd),null;case 24:return t=null,n!==null&&(t=n.memoizedState.cache),e.memoizedState.cache!==t&&(e.flags|=2048),Qo(An),zt(e),null;case 25:return null;case 30:return null}throw Error(he(156,e.tag))}function s7(n,e){switch(uT(e),e.tag){case 1:return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Qo(An),Xp(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 26:case 27:case 5:return zx(e),null;case 31:if(e.memoizedState!==null){if(qr(e),e.alternate===null)throw Error(he(340));Vd()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 13:if(qr(e),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(he(340));Vd()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Hn(pn),null;case 4:return Xp(),null;case 10:return Qo(e.type),null;case 22:case 23:return qr(e),gT(),n!==null&&Hn(zd),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 24:return Qo(An),null;case 25:return null;default:return null}}function u8(n,e){switch(uT(e),e.tag){case 3:Qo(An),Xp();break;case 26:case 27:case 5:zx(e);break;case 4:Xp();break;case 31:e.memoizedState!==null&&qr(e);break;case 13:qr(e);break;case 19:Hn(pn);break;case 10:Qo(e.type);break;case 22:case 23:qr(e),gT(),n!==null&&Hn(zd);break;case 24:Qo(An)}}function w0(n,e){try{var t=e.updateQueue,i=t!==null?t.lastEffect:null;if(i!==null){var r=i.next;t=r;do{if((t.tag&n)===n){i=void 0;var s=t.create,a=t.inst;i=s(),a.destroy=i}t=t.next}while(t!==r)}}catch(o){vt(e,e.return,o)}}function Wl(n,e,t){try{var i=e.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&n)===n){var a=i.inst,o=a.destroy;if(o!==void 0){a.destroy=void 0,r=e;var c=t,l=o;try{l()}catch(d){vt(r,c,d)}}}i=i.next}while(i!==s)}}catch(d){vt(e,e.return,d)}}function d8(n){var e=n.updateQueue;if(e!==null){var t=n.stateNode;try{xj(e,t)}catch(i){vt(n,n.return,i)}}}function h8(n,e,t){t.props=Kd(n.type,n.memoizedProps),t.state=n.memoizedState;try{t.componentWillUnmount()}catch(i){vt(n,e,i)}}function Lm(n,e){try{var t=n.ref;if(t!==null){switch(n.tag){case 26:case 27:case 5:var i=n.stateNode;break;case 30:i=n.stateNode;break;default:i=n.stateNode}typeof t=="function"?n.refCleanup=t(i):t.current=i}}catch(r){vt(n,e,r)}}function La(n,e){var t=n.ref,i=n.refCleanup;if(t!==null)if(typeof i=="function")try{i()}catch(r){vt(n,e,r)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof t=="function")try{t(null)}catch(r){vt(n,e,r)}else t.current=null}function f8(n){var e=n.type,t=n.memoizedProps,i=n.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":t.autoFocus&&i.focus();break e;case"img":t.src?i.src=t.src:t.srcSet&&(i.srcset=t.srcSet)}}catch(r){vt(n,n.return,r)}}function u_(n,e,t){try{var i=n.stateNode;T7(i,n.type,t,e),i[hr]=e}catch(r){vt(n,n.return,r)}}function p8(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Kl(n.type)||n.tag===4}function d_(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||p8(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Kl(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function CA(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t).insertBefore(n,e):(e=t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,e.appendChild(n),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Xo));else if(i!==4&&(i===27&&Kl(n.type)&&(t=n.stateNode,e=null),n=n.child,n!==null))for(CA(n,e,t),n=n.sibling;n!==null;)CA(n,e,t),n=n.sibling}function t2(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(i===27&&Kl(n.type)&&(t=n.stateNode),n=n.child,n!==null))for(t2(n,e,t),n=n.sibling;n!==null;)t2(n,e,t),n=n.sibling}function g8(n){var e=n.stateNode,t=n.memoizedProps;try{for(var i=n.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);di(e,i,t),e[oi]=n,e[hr]=t}catch(s){vt(n,n.return,s)}}var $o=!1,Dn=!1,h_=!1,P3=typeof WeakSet=="function"?WeakSet:Set,qn=null;function a7(n,e){if(n=n.containerInfo,OA=h2,n=nj(n),sT(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var a=0,o=-1,c=-1,l=0,d=0,h=n,f=null;t:for(;;){for(var g;h!==t||r!==0&&h.nodeType!==3||(o=a+r),h!==s||i!==0&&h.nodeType!==3||(c=a+i),h.nodeType===3&&(a+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===n)break t;if(f===t&&++l===r&&(o=a),f===s&&++d===i&&(c=a),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}t=o===-1||c===-1?null:{start:o,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(MA={focusedElem:n,selectionRange:t},h2=!1,qn=e;qn!==null;)if(e=qn,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,qn=n;else for(;qn!==null;){switch(e=qn,s=e.alternate,n=e.flags,e.tag){case 0:if(n&4&&(n=e.updateQueue,n=n!==null?n.events:null,n!==null))for(t=0;t<n.length;t++)r=n[t],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if(n&1024&&s!==null){n=void 0,t=e,r=s.memoizedProps,s=s.memoizedState,i=t.stateNode;try{var v=Kd(t.type,r);n=i.getSnapshotBeforeUpdate(v,s),i.__reactInternalSnapshotBeforeUpdate=n}catch(y){vt(t,t.return,y)}}break;case 3:if(n&1024){if(n=e.stateNode.containerInfo,t=n.nodeType,t===9)LA(n);else if(t===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":LA(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(n&1024)throw Error(he(163))}if(n=e.sibling,n!==null){n.return=e.return,qn=n;break}qn=e.return}}function m8(n,e,t){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Qa(n,t),i&4&&w0(5,t);break;case 1:if(Qa(n,t),i&4)if(n=t.stateNode,e===null)try{n.componentDidMount()}catch(a){vt(t,t.return,a)}else{var r=Kd(t.type,e.memoizedProps);e=e.memoizedState;try{n.componentDidUpdate(r,e,n.__reactInternalSnapshotBeforeUpdate)}catch(a){vt(t,t.return,a)}}i&64&&d8(t),i&512&&Lm(t,t.return);break;case 3:if(Qa(n,t),i&64&&(n=t.updateQueue,n!==null)){if(e=null,t.child!==null)switch(t.child.tag){case 27:case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}try{xj(n,e)}catch(a){vt(t,t.return,a)}}break;case 27:e===null&&i&4&&g8(t);case 26:case 5:Qa(n,t),e===null&&i&4&&f8(t),i&512&&Lm(t,t.return);break;case 12:Qa(n,t);break;case 31:Qa(n,t),i&4&&v8(n,t);break;case 13:Qa(n,t),i&4&&x8(n,t),i&64&&(n=t.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(t=g7.bind(null,t),O7(n,t))));break;case 22:if(i=t.memoizedState!==null||$o,!i){e=e!==null&&e.memoizedState!==null||Dn,r=$o;var s=Dn;$o=i,(Dn=e)&&!s?to(n,t,(t.subtreeFlags&8772)!==0):Qa(n,t),$o=r,Dn=s}break;case 30:break;default:Qa(n,t)}}function y8(n){var e=n.alternate;e!==null&&(n.alternate=null,y8(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&ZS(e)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Kt=null,sr=!1;function Ka(n,e,t){for(t=t.child;t!==null;)b8(n,e,t),t=t.sibling}function b8(n,e,t){if(Yr&&typeof Yr.onCommitFiberUnmount=="function")try{Yr.onCommitFiberUnmount(p0,t)}catch{}switch(t.tag){case 26:Dn||La(t,e),Ka(n,e,t),t.memoizedState?t.memoizedState.count--:t.stateNode&&(t=t.stateNode,t.parentNode.removeChild(t));break;case 27:Dn||La(t,e);var i=Kt,r=sr;Kl(t.type)&&(Kt=t.stateNode,sr=!1),Ka(n,e,t),Wm(t.stateNode),Kt=i,sr=r;break;case 5:Dn||La(t,e);case 6:if(i=Kt,r=sr,Kt=null,Ka(n,e,t),Kt=i,sr=r,Kt!==null)if(sr)try{(Kt.nodeType===9?Kt.body:Kt.nodeName==="HTML"?Kt.ownerDocument.body:Kt).removeChild(t.stateNode)}catch(s){vt(t,e,s)}else try{Kt.removeChild(t.stateNode)}catch(s){vt(t,e,s)}break;case 18:Kt!==null&&(sr?(n=Kt,Z3(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.stateNode),rg(n)):Z3(Kt,t.stateNode));break;case 4:i=Kt,r=sr,Kt=t.stateNode.containerInfo,sr=!0,Ka(n,e,t),Kt=i,sr=r;break;case 0:case 11:case 14:case 15:Wl(2,t,e),Dn||Wl(4,t,e),Ka(n,e,t);break;case 1:Dn||(La(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"&&h8(t,e,i)),Ka(n,e,t);break;case 21:Ka(n,e,t);break;case 22:Dn=(i=Dn)||t.memoizedState!==null,Ka(n,e,t),Dn=i;break;default:Ka(n,e,t)}}function v8(n,e){if(e.memoizedState===null&&(n=e.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{rg(n)}catch(t){vt(e,e.return,t)}}}function x8(n,e){if(e.memoizedState===null&&(n=e.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{rg(n)}catch(t){vt(e,e.return,t)}}function o7(n){switch(n.tag){case 31:case 13:case 19:var e=n.stateNode;return e===null&&(e=n.stateNode=new P3),e;case 22:return n=n.stateNode,e=n._retryCache,e===null&&(e=n._retryCache=new P3),e;default:throw Error(he(435,n.tag))}}function nv(n,e){var t=o7(n);e.forEach(function(i){if(!t.has(i)){t.add(i);var r=m7.bind(null,n,i);i.then(r,r)}})}function Gi(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i],s=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 27:if(Kl(o.type)){Kt=o.stateNode,sr=!1;break e}break;case 5:Kt=o.stateNode,sr=!1;break e;case 3:case 4:Kt=o.stateNode.containerInfo,sr=!0;break e}o=o.return}if(Kt===null)throw Error(he(160));b8(s,a,r),Kt=null,sr=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)w8(e,n),e=e.sibling}var Zs=null;function w8(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Gi(e,n),Xi(n),i&4&&(Wl(3,n,n.return),w0(3,n),Wl(5,n,n.return));break;case 1:Gi(e,n),Xi(n),i&512&&(Dn||t===null||La(t,t.return)),i&64&&$o&&(n=n.updateQueue,n!==null&&(i=n.callbacks,i!==null&&(t=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=t===null?i:t.concat(i))));break;case 26:var r=Zs;if(Gi(e,n),Xi(n),i&512&&(Dn||t===null||La(t,t.return)),i&4){var s=t!==null?t.memoizedState:null;if(i=n.memoizedState,t===null)if(i===null)if(n.stateNode===null){e:{i=n.type,t=n.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[y0]||s[oi]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),di(s,i,t),s[oi]=n,$n(s),i=s;break e;case"link":var a=aU("link","href",r).get(i+(t.href||""));if(a){for(var o=0;o<a.length;o++)if(s=a[o],s.getAttribute("href")===(t.href==null||t.href===""?null:t.href)&&s.getAttribute("rel")===(t.rel==null?null:t.rel)&&s.getAttribute("title")===(t.title==null?null:t.title)&&s.getAttribute("crossorigin")===(t.crossOrigin==null?null:t.crossOrigin)){a.splice(o,1);break t}}s=r.createElement(i),di(s,i,t),r.head.appendChild(s);break;case"meta":if(a=aU("meta","content",r).get(i+(t.content||""))){for(o=0;o<a.length;o++)if(s=a[o],s.getAttribute("content")===(t.content==null?null:""+t.content)&&s.getAttribute("name")===(t.name==null?null:t.name)&&s.getAttribute("property")===(t.property==null?null:t.property)&&s.getAttribute("http-equiv")===(t.httpEquiv==null?null:t.httpEquiv)&&s.getAttribute("charset")===(t.charSet==null?null:t.charSet)){a.splice(o,1);break t}}s=r.createElement(i),di(s,i,t),r.head.appendChild(s);break;default:throw Error(he(468,i))}s[oi]=n,$n(s),i=s}n.stateNode=i}else oU(r,n.type,n.stateNode);else n.stateNode=sU(r,i,n.memoizedProps);else s!==i?(s===null?t.stateNode!==null&&(t=t.stateNode,t.parentNode.removeChild(t)):s.count--,i===null?oU(r,n.type,n.stateNode):sU(r,i,n.memoizedProps)):i===null&&n.stateNode!==null&&u_(n,n.memoizedProps,t.memoizedProps)}break;case 27:Gi(e,n),Xi(n),i&512&&(Dn||t===null||La(t,t.return)),t!==null&&i&4&&u_(n,n.memoizedProps,t.memoizedProps);break;case 5:if(Gi(e,n),Xi(n),i&512&&(Dn||t===null||La(t,t.return)),n.flags&32){r=n.stateNode;try{Kp(r,"")}catch(v){vt(n,n.return,v)}}i&4&&n.stateNode!=null&&(r=n.memoizedProps,u_(n,r,t!==null?t.memoizedProps:r)),i&1024&&(h_=!0);break;case 6:if(Gi(e,n),Xi(n),i&4){if(n.stateNode===null)throw Error(he(162));i=n.memoizedProps,t=n.stateNode;try{t.nodeValue=i}catch(v){vt(n,n.return,v)}}break;case 3:if(Xv=null,r=Zs,Zs=l2(e.containerInfo),Gi(e,n),Zs=r,Xi(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{rg(e.containerInfo)}catch(v){vt(n,n.return,v)}h_&&(h_=!1,_8(n));break;case 4:i=Zs,Zs=l2(n.stateNode.containerInfo),Gi(e,n),Xi(n),Zs=i;break;case 12:Gi(e,n),Xi(n);break;case 31:Gi(e,n),Xi(n),i&4&&(i=n.updateQueue,i!==null&&(n.updateQueue=null,nv(n,i)));break;case 13:Gi(e,n),Xi(n),n.child.flags&8192&&n.memoizedState!==null!=(t!==null&&t.memoizedState!==null)&&(C1=Xr()),i&4&&(i=n.updateQueue,i!==null&&(n.updateQueue=null,nv(n,i)));break;case 22:r=n.memoizedState!==null;var c=t!==null&&t.memoizedState!==null,l=$o,d=Dn;if($o=l||r,Dn=d||c,Gi(e,n),Dn=d,$o=l,Xi(n),i&8192)e:for(e=n.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(t===null||c||$o||Dn||du(n)),t=null,e=n;;){if(e.tag===5||e.tag===26){if(t===null){c=t=e;try{if(s=c.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{o=c.stateNode;var h=c.memoizedProps.style,f=h!=null&&h.hasOwnProperty("display")?h.display:null;o.style.display=f==null||typeof f=="boolean"?"":(""+f).trim()}}catch(v){vt(c,c.return,v)}}}else if(e.tag===6){if(t===null){c=e;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(v){vt(c,c.return,v)}}}else if(e.tag===18){if(t===null){c=e;try{var g=c.stateNode;r?eU(g,!0):eU(c.stateNode,!1)}catch(v){vt(c,c.return,v)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===n)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;t===e&&(t=null),e=e.return}t===e&&(t=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=n.updateQueue,i!==null&&(t=i.retryQueue,t!==null&&(i.retryQueue=null,nv(n,t))));break;case 19:Gi(e,n),Xi(n),i&4&&(i=n.updateQueue,i!==null&&(n.updateQueue=null,nv(n,i)));break;case 30:break;case 21:break;default:Gi(e,n),Xi(n)}}function Xi(n){var e=n.flags;if(e&2){try{for(var t,i=n.return;i!==null;){if(p8(i)){t=i;break}i=i.return}if(t==null)throw Error(he(160));switch(t.tag){case 27:var r=t.stateNode,s=d_(n);t2(n,s,r);break;case 5:var a=t.stateNode;t.flags&32&&(Kp(a,""),t.flags&=-33);var o=d_(n);t2(n,o,a);break;case 3:case 4:var c=t.stateNode.containerInfo,l=d_(n);CA(n,l,c);break;default:throw Error(he(161))}}catch(d){vt(n,n.return,d)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function _8(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var e=n;_8(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),n=n.sibling}}function Qa(n,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)m8(n,e.alternate,e),e=e.sibling}function du(n){for(n=n.child;n!==null;){var e=n;switch(e.tag){case 0:case 11:case 14:case 15:Wl(4,e,e.return),du(e);break;case 1:La(e,e.return);var t=e.stateNode;typeof t.componentWillUnmount=="function"&&h8(e,e.return,t),du(e);break;case 27:Wm(e.stateNode);case 26:case 5:La(e,e.return),du(e);break;case 22:e.memoizedState===null&&du(e);break;case 30:du(e);break;default:du(e)}n=n.sibling}}function to(n,e,t){for(t=t&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,r=n,s=e,a=s.flags;switch(s.tag){case 0:case 11:case 15:to(r,s,t),w0(4,s);break;case 1:if(to(r,s,t),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(l){vt(i,i.return,l)}if(i=s,r=i.updateQueue,r!==null){var o=i.stateNode;try{var c=r.shared.hiddenCallbacks;if(c!==null)for(r.shared.hiddenCallbacks=null,r=0;r<c.length;r++)vj(c[r],o)}catch(l){vt(i,i.return,l)}}t&&a&64&&d8(s),Lm(s,s.return);break;case 27:g8(s);case 26:case 5:to(r,s,t),t&&i===null&&a&4&&f8(s),Lm(s,s.return);break;case 12:to(r,s,t);break;case 31:to(r,s,t),t&&a&4&&v8(r,s);break;case 13:to(r,s,t),t&&a&4&&x8(r,s);break;case 22:s.memoizedState===null&&to(r,s,t),Lm(s,s.return);break;case 30:break;default:to(r,s,t)}e=e.sibling}}function NT(n,e){var t=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),n=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),n!==t&&(n!=null&&n.refCount++,t!=null&&v0(t))}function jT(n,e){n=null,e.alternate!==null&&(n=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==n&&(e.refCount++,n!=null&&v0(n))}function Ms(n,e,t,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)D8(n,e,t,i),e=e.sibling}function D8(n,e,t,i){var r=e.flags;switch(e.tag){case 0:case 11:case 15:Ms(n,e,t,i),r&2048&&w0(9,e);break;case 1:Ms(n,e,t,i);break;case 3:Ms(n,e,t,i),r&2048&&(n=null,e.alternate!==null&&(n=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==n&&(e.refCount++,n!=null&&v0(n)));break;case 12:if(r&2048){Ms(n,e,t,i),n=e.stateNode;try{var s=e.memoizedProps,a=s.id,o=s.onPostCommit;typeof o=="function"&&o(a,e.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(c){vt(e,e.return,c)}}else Ms(n,e,t,i);break;case 31:Ms(n,e,t,i);break;case 13:Ms(n,e,t,i);break;case 23:break;case 22:s=e.stateNode,a=e.alternate,e.memoizedState!==null?s._visibility&2?Ms(n,e,t,i):Im(n,e):s._visibility&2?Ms(n,e,t,i):(s._visibility|=2,Nh(n,e,t,i,(e.subtreeFlags&10256)!==0||!1)),r&2048&&NT(a,e);break;case 24:Ms(n,e,t,i),r&2048&&jT(e.alternate,e);break;default:Ms(n,e,t,i)}}function Nh(n,e,t,i,r){for(r=r&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var s=n,a=e,o=t,c=i,l=a.flags;switch(a.tag){case 0:case 11:case 15:Nh(s,a,o,c,r),w0(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?Nh(s,a,o,c,r):Im(s,a):(d._visibility|=2,Nh(s,a,o,c,r)),r&&l&2048&&NT(a.alternate,a);break;case 24:Nh(s,a,o,c,r),r&&l&2048&&jT(a.alternate,a);break;default:Nh(s,a,o,c,r)}e=e.sibling}}function Im(n,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var t=n,i=e,r=i.flags;switch(i.tag){case 22:Im(t,i),r&2048&&NT(i.alternate,i);break;case 24:Im(t,i),r&2048&&jT(i.alternate,i);break;default:Im(t,i)}e=e.sibling}}var im=8192;function yh(n,e,t){if(n.subtreeFlags&im)for(n=n.child;n!==null;)A8(n,e,t),n=n.sibling}function A8(n,e,t){switch(n.tag){case 26:yh(n,e,t),n.flags&im&&n.memoizedState!==null&&G7(t,Zs,n.memoizedState,n.memoizedProps);break;case 5:yh(n,e,t);break;case 3:case 4:var i=Zs;Zs=l2(n.stateNode.containerInfo),yh(n,e,t),Zs=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=im,im=16777216,yh(n,e,t),im=i):yh(n,e,t));break;default:yh(n,e,t)}}function E8(n){var e=n.alternate;if(e!==null&&(n=e.child,n!==null)){e.child=null;do e=n.sibling,n.sibling=null,n=e;while(n!==null)}}function Pg(n){var e=n.deletions;if(n.flags&16){if(e!==null)for(var t=0;t<e.length;t++){var i=e[t];qn=i,T8(i,n)}E8(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)S8(n),n=n.sibling}function S8(n){switch(n.tag){case 0:case 11:case 15:Pg(n),n.flags&2048&&Wl(9,n,n.return);break;case 3:Pg(n);break;case 12:Pg(n);break;case 22:var e=n.stateNode;n.memoizedState!==null&&e._visibility&2&&(n.return===null||n.return.tag!==13)?(e._visibility&=-3,Vv(n)):Pg(n);break;default:Pg(n)}}function Vv(n){var e=n.deletions;if(n.flags&16){if(e!==null)for(var t=0;t<e.length;t++){var i=e[t];qn=i,T8(i,n)}E8(n)}for(n=n.child;n!==null;){switch(e=n,e.tag){case 0:case 11:case 15:Wl(8,e,e.return),Vv(e);break;case 22:t=e.stateNode,t._visibility&2&&(t._visibility&=-3,Vv(e));break;default:Vv(e)}n=n.sibling}}function T8(n,e){for(;qn!==null;){var t=qn;switch(t.tag){case 0:case 11:case 15:Wl(8,t,e);break;case 23:case 22:if(t.memoizedState!==null&&t.memoizedState.cachePool!==null){var i=t.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:v0(t.memoizedState.cache)}if(i=t.child,i!==null)i.return=t,qn=i;else e:for(t=n;qn!==null;){i=qn;var r=i.sibling,s=i.return;if(y8(i),i===t){qn=null;break e}if(r!==null){r.return=s,qn=r;break e}qn=s}}}var c7={getCacheForType:function(n){var e=ui(An),t=e.data.get(n);return t===void 0&&(t=n(),e.data.set(n,t)),t},cacheSignal:function(){return ui(An).controller.signal}},l7=typeof WeakMap=="function"?WeakMap:Map,dt=0,Ft=null,Ze=null,tt=0,bt=0,zr=null,Tl=!1,xg=!1,RT=!1,oc=0,un=0,ql=0,qd=0,FT=0,Gr=0,eg=0,Pm=null,or=null,kA=!1,C1=0,C8=0,n2=1/0,i2=null,Fl=null,jn=0,Ol=null,tg=null,Jo=0,UA=0,NA=null,k8=null,zm=0,jA=null;function Qr(){return dt&2&&tt!==0?tt&-tt:Me.T!==null?MT():L4()}function U8(){if(Gr===0)if(!(tt&536870912)||at){var n=X0;X0<<=1,!(X0&3932160)&&(X0=262144),Gr=n}else Gr=536870912;return n=es.current,n!==null&&(n.flags|=32),Gr}function dr(n,e,t){(n===Ft&&(bt===2||bt===9)||n.cancelPendingCommit!==null)&&(ng(n,0),Cl(n,tt,Gr,!1)),m0(n,t),(!(dt&2)||n!==Ft)&&(n===Ft&&(!(dt&2)&&(qd|=t),un===4&&Cl(n,tt,Gr,!1)),Va(n))}function N8(n,e,t){if(dt&6)throw Error(he(327));var i=!t&&(e&127)===0&&(e&n.expiredLanes)===0||g0(n,e),r=i?h7(n,e):f_(n,e,!0),s=i;do{if(r===0){xg&&!i&&Cl(n,e,0,!1);break}else{if(t=n.current.alternate,s&&!u7(t)){r=f_(n,e,!1),s=!1;continue}if(r===2){if(s=e,n.errorRecoveryDisabledLanes&s)var a=0;else a=n.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var o=n;r=Pm;var c=o.current.memoizedState.isDehydrated;if(c&&(ng(o,a).flags|=256),a=f_(o,a,!1),a!==2){if(RT&&!c){o.errorRecoveryDisabledLanes|=s,qd|=s,r=4;break e}s=or,or=r,s!==null&&(or===null?or=s:or.push.apply(or,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){ng(n,0),Cl(n,e,0,!0);break}e:{switch(i=n,s=r,s){case 0:case 1:throw Error(he(345));case 4:if((e&4194048)!==e)break;case 6:Cl(i,e,Gr,!Tl);break e;case 2:or=null;break;case 3:case 5:break;default:throw Error(he(329))}if((e&62914560)===e&&(r=C1+300-Xr(),10<r)){if(Cl(i,e,Gr,!Tl),y1(i,0,!0)!==0)break e;Jo=e,i.timeoutHandle=Q8(z3.bind(null,i,t,or,i2,kA,e,Gr,qd,eg,Tl,s,"Throttled",-0,0),r);break e}z3(i,t,or,i2,kA,e,Gr,qd,eg,Tl,s,null,-0,0)}}break}while(!0);Va(n)}function z3(n,e,t,i,r,s,a,o,c,l,d,h,f,g){if(n.timeoutHandle=-1,h=e.subtreeFlags,h&8192||(h&16785408)===16785408){h={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xo},A8(e,s,h);var v=(s&62914560)===s?C1-Xr():(s&4194048)===s?C8-Xr():0;if(v=X7(h,v),v!==null){Jo=s,n.cancelPendingCommit=v(q3.bind(null,n,e,s,t,i,r,a,o,c,d,h,null,f,g)),Cl(n,s,a,!l);return}}q3(n,e,s,t,i,r,a,o,c)}function u7(n){for(var e=n;;){var t=e.tag;if((t===0||t===11||t===15)&&e.flags&16384&&(t=e.updateQueue,t!==null&&(t=t.stores,t!==null)))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!Zr(s(),r))return!1}catch{return!1}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Cl(n,e,t,i){e&=~FT,e&=~qd,n.suspendedLanes|=e,n.pingedLanes&=~e,i&&(n.warmLanes|=e),i=n.expirationTimes;for(var r=e;0<r;){var s=31-Kr(r),a=1<<s;i[s]=-1,r&=~a}t!==0&&O4(n,t,e)}function k1(){return dt&6?!0:(_0(0),!1)}function OT(){if(Ze!==null){if(bt===0)var n=Ze.return;else n=Ze,Yo=lh=null,xT(n),pf=null,Km=0,n=Ze;for(;n!==null;)u8(n.alternate,n),n=n.return;Ze=null}}function ng(n,e){var t=n.timeoutHandle;t!==-1&&(n.timeoutHandle=-1,U7(t)),t=n.cancelPendingCommit,t!==null&&(n.cancelPendingCommit=null,t()),Jo=0,OT(),Ft=n,Ze=t=Ko(n.current,null),tt=e,bt=0,zr=null,Tl=!1,xg=g0(n,e),RT=!1,eg=Gr=FT=qd=ql=un=0,or=Pm=null,kA=!1,e&8&&(e|=e&32);var i=n.entangledLanes;if(i!==0)for(n=n.entanglements,i&=e;0<i;){var r=31-Kr(i),s=1<<r;e|=n[r],i&=~s}return oc=e,w1(),t}function j8(n,e){$e=null,Me.H=Jm,e===vg||e===D1?(e=v3(),bt=3):e===fT?(e=v3(),bt=4):bt=e===kT?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,zr=e,Ze===null&&(un=1,Zx(n,Ss(e,n.current)))}function R8(){var n=es.current;return n===null?!0:(tt&4194048)===tt?ks===null:(tt&62914560)===tt||tt&536870912?n===ks:!1}function F8(){var n=Me.H;return Me.H=Jm,n===null?Jm:n}function O8(){var n=Me.A;return Me.A=c7,n}function r2(){un=4,Tl||(tt&4194048)!==tt&&es.current!==null||(xg=!0),!(ql&134217727)&&!(qd&134217727)||Ft===null||Cl(Ft,tt,Gr,!1)}function f_(n,e,t){var i=dt;dt|=2;var r=F8(),s=O8();(Ft!==n||tt!==e)&&(i2=null,ng(n,e)),e=!1;var a=un;e:do try{if(bt!==0&&Ze!==null){var o=Ze,c=zr;switch(bt){case 8:OT(),a=6;break e;case 3:case 2:case 9:case 6:es.current===null&&(e=!0);var l=bt;if(bt=0,zr=null,ef(n,o,c,l),t&&xg){a=0;break e}break;default:l=bt,bt=0,zr=null,ef(n,o,c,l)}}d7(),a=un;break}catch(d){j8(n,d)}while(!0);return e&&n.shellSuspendCounter++,Yo=lh=null,dt=i,Me.H=r,Me.A=s,Ze===null&&(Ft=null,tt=0,w1()),a}function d7(){for(;Ze!==null;)M8(Ze)}function h7(n,e){var t=dt;dt|=2;var i=F8(),r=O8();Ft!==n||tt!==e?(i2=null,n2=Xr()+500,ng(n,e)):xg=g0(n,e);e:do try{if(bt!==0&&Ze!==null){e=Ze;var s=zr;t:switch(bt){case 1:bt=0,zr=null,ef(n,e,s,1);break;case 2:case 9:if(b3(s)){bt=0,zr=null,W3(e);break}e=function(){bt!==2&&bt!==9||Ft!==n||(bt=7),Va(n)},s.then(e,e);break e;case 3:bt=7;break e;case 4:bt=5;break e;case 7:b3(s)?(bt=0,zr=null,W3(e)):(bt=0,zr=null,ef(n,e,s,7));break;case 5:var a=null;switch(Ze.tag){case 26:a=Ze.memoizedState;case 5:case 27:var o=Ze;if(a?nR(a):o.stateNode.complete){bt=0,zr=null;var c=o.sibling;if(c!==null)Ze=c;else{var l=o.return;l!==null?(Ze=l,U1(l)):Ze=null}break t}}bt=0,zr=null,ef(n,e,s,5);break;case 6:bt=0,zr=null,ef(n,e,s,6);break;case 8:OT(),un=6;break e;default:throw Error(he(462))}}f7();break}catch(d){j8(n,d)}while(!0);return Yo=lh=null,Me.H=i,Me.A=r,dt=t,Ze!==null?0:(Ft=null,tt=0,w1(),un)}function f7(){for(;Ze!==null&&!MI();)M8(Ze)}function M8(n){var e=l8(n.alternate,n,oc);n.memoizedProps=n.pendingProps,e===null?U1(n):Ze=e}function W3(n){var e=n,t=e.alternate;switch(e.tag){case 15:case 0:e=O3(t,e,e.pendingProps,e.type,void 0,tt);break;case 11:e=O3(t,e,e.pendingProps,e.type.render,e.ref,tt);break;case 5:xT(e);default:u8(t,e),e=Ze=uj(e,oc),e=l8(t,e,oc)}n.memoizedProps=n.pendingProps,e===null?U1(n):Ze=e}function ef(n,e,t,i){Yo=lh=null,xT(e),pf=null,Km=0;var r=e.return;try{if(t7(n,r,e,t,tt)){un=1,Zx(n,Ss(t,n.current)),Ze=null;return}}catch(s){if(r!==null)throw Ze=r,s;un=1,Zx(n,Ss(t,n.current)),Ze=null;return}e.flags&32768?(at||i===1?n=!0:xg||tt&536870912?n=!1:(Tl=n=!0,(i===2||i===9||i===3||i===6)&&(i=es.current,i!==null&&i.tag===13&&(i.flags|=16384))),B8(e,n)):U1(e)}function U1(n){var e=n;do{if(e.flags&32768){B8(e,Tl);return}n=e.return;var t=r7(e.alternate,e,oc);if(t!==null){Ze=t;return}if(e=e.sibling,e!==null){Ze=e;return}Ze=e=n}while(e!==null);un===0&&(un=5)}function B8(n,e){do{var t=s7(n.alternate,n);if(t!==null){t.flags&=32767,Ze=t;return}if(t=n.return,t!==null&&(t.flags|=32768,t.subtreeFlags=0,t.deletions=null),!e&&(n=n.sibling,n!==null)){Ze=n;return}Ze=n=t}while(n!==null);un=6,Ze=null}function q3(n,e,t,i,r,s,a,o,c){n.cancelPendingCommit=null;do N1();while(jn!==0);if(dt&6)throw Error(he(327));if(e!==null){if(e===n.current)throw Error(he(177));if(s=e.lanes|e.childLanes,s|=aT,VI(n,t,s,a,o,c),n===Ft&&(Ze=Ft=null,tt=0),tg=e,Ol=n,Jo=t,UA=s,NA=r,k8=i,e.subtreeFlags&10256||e.flags&10256?(n.callbackNode=null,n.callbackPriority=0,y7(Wx,function(){return W8(),null})):(n.callbackNode=null,n.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=Me.T,Me.T=null,r=ht.p,ht.p=2,a=dt,dt|=4;try{a7(n,e,t)}finally{dt=a,ht.p=r,Me.T=i}}jn=1,L8(),I8(),P8()}}function L8(){if(jn===1){jn=0;var n=Ol,e=tg,t=(e.flags&13878)!==0;if(e.subtreeFlags&13878||t){t=Me.T,Me.T=null;var i=ht.p;ht.p=2;var r=dt;dt|=4;try{w8(e,n);var s=MA,a=nj(n.containerInfo),o=s.focusedElem,c=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&tj(o.ownerDocument.documentElement,o)){if(c!==null&&sT(o)){var l=c.start,d=c.end;if(d===void 0&&(d=l),"selectionStart"in o)o.selectionStart=l,o.selectionEnd=Math.min(d,o.value.length);else{var h=o.ownerDocument||document,f=h&&h.defaultView||window;if(f.getSelection){var g=f.getSelection(),v=o.textContent.length,y=Math.min(c.start,v),x=c.end===void 0?y:Math.min(c.end,v);!g.extend&&y>x&&(a=x,x=y,y=a);var m=d3(o,y),b=d3(o,x);if(m&&b&&(g.rangeCount!==1||g.anchorNode!==m.node||g.anchorOffset!==m.offset||g.focusNode!==b.node||g.focusOffset!==b.offset)){var w=h.createRange();w.setStart(m.node,m.offset),g.removeAllRanges(),y>x?(g.addRange(w),g.extend(b.node,b.offset)):(w.setEnd(b.node,b.offset),g.addRange(w))}}}}for(h=[],g=o;g=g.parentNode;)g.nodeType===1&&h.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<h.length;o++){var _=h[o];_.element.scrollLeft=_.left,_.element.scrollTop=_.top}}h2=!!OA,MA=OA=null}finally{dt=r,ht.p=i,Me.T=t}}n.current=e,jn=2}}function I8(){if(jn===2){jn=0;var n=Ol,e=tg,t=(e.flags&8772)!==0;if(e.subtreeFlags&8772||t){t=Me.T,Me.T=null;var i=ht.p;ht.p=2;var r=dt;dt|=4;try{m8(n,e.alternate,e)}finally{dt=r,ht.p=i,Me.T=t}}jn=3}}function P8(){if(jn===4||jn===3){jn=0,BI();var n=Ol,e=tg,t=Jo,i=k8;e.subtreeFlags&10256||e.flags&10256?jn=5:(jn=0,tg=Ol=null,z8(n,n.pendingLanes));var r=n.pendingLanes;if(r===0&&(Fl=null),JS(t),e=e.stateNode,Yr&&typeof Yr.onCommitFiberRoot=="function")try{Yr.onCommitFiberRoot(p0,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=Me.T,r=ht.p,ht.p=2,Me.T=null;try{for(var s=n.onRecoverableError,a=0;a<i.length;a++){var o=i[a];s(o.value,{componentStack:o.stack})}}finally{Me.T=e,ht.p=r}}Jo&3&&N1(),Va(n),r=n.pendingLanes,t&261930&&r&42?n===jA?zm++:(zm=0,jA=n):zm=0,_0(0)}}function z8(n,e){(n.pooledCacheLanes&=e)===0&&(e=n.pooledCache,e!=null&&(n.pooledCache=null,v0(e)))}function N1(){return L8(),I8(),P8(),W8()}function W8(){if(jn!==5)return!1;var n=Ol,e=UA;UA=0;var t=JS(Jo),i=Me.T,r=ht.p;try{ht.p=32>t?32:t,Me.T=null,t=NA,NA=null;var s=Ol,a=Jo;if(jn=0,tg=Ol=null,Jo=0,dt&6)throw Error(he(331));var o=dt;if(dt|=4,S8(s.current),D8(s,s.current,a,t),dt=o,_0(0,!1),Yr&&typeof Yr.onPostCommitFiberRoot=="function")try{Yr.onPostCommitFiberRoot(p0,s)}catch{}return!0}finally{ht.p=r,Me.T=i,z8(n,e)}}function $3(n,e,t){e=Ss(t,e),e=EA(n.stateNode,e,2),n=Rl(n,e,2),n!==null&&(m0(n,2),Va(n))}function vt(n,e,t){if(n.tag===3)$3(n,n,t);else for(;e!==null;){if(e.tag===3){$3(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Fl===null||!Fl.has(i))){n=Ss(t,n),t=i8(2),i=Rl(e,t,2),i!==null&&(r8(t,i,e,n),m0(i,2),Va(i));break}}e=e.return}}function p_(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new l7;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(RT=!0,r.add(t),n=p7.bind(null,n,e,t),e.then(n,n))}function p7(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),n.pingedLanes|=n.suspendedLanes&t,n.warmLanes&=~t,Ft===n&&(tt&t)===t&&(un===4||un===3&&(tt&62914560)===tt&&300>Xr()-C1?!(dt&2)&&ng(n,0):FT|=t,eg===tt&&(eg=0)),Va(n)}function q8(n,e){e===0&&(e=F4()),n=ch(n,e),n!==null&&(m0(n,e),Va(n))}function g7(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),q8(n,t)}function m7(n,e){var t=0;switch(n.tag){case 31:case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;case 22:i=n.stateNode._retryCache;break;default:throw Error(he(314))}i!==null&&i.delete(e),q8(n,t)}function y7(n,e){return KS(n,e)}var s2=null,jh=null,RA=!1,a2=!1,g_=!1,kl=0;function Va(n){n!==jh&&n.next===null&&(jh===null?s2=jh=n:jh=jh.next=n),a2=!0,RA||(RA=!0,v7())}function _0(n,e){if(!g_&&a2){g_=!0;do for(var t=!1,i=s2;i!==null;){if(n!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,o=i.pingedLanes;s=(1<<31-Kr(42|n)+1)-1,s&=r&~(a&~o),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(t=!0,H3(i,s))}else s=tt,s=y1(i,i===Ft?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||g0(i,s)||(t=!0,H3(i,s));i=i.next}while(t);g_=!1}}function b7(){$8()}function $8(){a2=RA=!1;var n=0;kl!==0&&k7()&&(n=kl);for(var e=Xr(),t=null,i=s2;i!==null;){var r=i.next,s=H8(i,e);s===0?(i.next=null,t===null?s2=r:t.next=r,r===null&&(jh=t)):(t=i,(n!==0||s&3)&&(a2=!0)),i=r}jn!==0&&jn!==5||_0(n),kl!==0&&(kl=0)}function H8(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes&-62914561;0<s;){var a=31-Kr(s),o=1<<a,c=r[a];c===-1?(!(o&t)||o&i)&&(r[a]=HI(o,e)):c<=e&&(n.expiredLanes|=o),s&=~o}if(e=Ft,t=tt,t=y1(n,n===e?t:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),i=n.callbackNode,t===0||n===e&&(bt===2||bt===9)||n.cancelPendingCommit!==null)return i!==null&&i!==null&&qw(i),n.callbackNode=null,n.callbackPriority=0;if(!(t&3)||g0(n,t)){if(e=t&-t,e===n.callbackPriority)return e;switch(i!==null&&qw(i),JS(t)){case 2:case 8:t=j4;break;case 32:t=Wx;break;case 268435456:t=R4;break;default:t=Wx}return i=V8.bind(null,n),t=KS(t,i),n.callbackPriority=e,n.callbackNode=t,e}return i!==null&&i!==null&&qw(i),n.callbackPriority=2,n.callbackNode=null,2}function V8(n,e){if(jn!==0&&jn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var t=n.callbackNode;if(N1()&&n.callbackNode!==t)return null;var i=tt;return i=y1(n,n===Ft?i:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),i===0?null:(N8(n,i,e),H8(n,Xr()),n.callbackNode!=null&&n.callbackNode===t?V8.bind(null,n):null)}function H3(n,e){if(N1())return null;N8(n,e,!0)}function v7(){N7(function(){dt&6?KS(N4,b7):$8()})}function MT(){if(kl===0){var n=Qp;n===0&&(n=G0,G0<<=1,!(G0&261888)&&(G0=256)),kl=n}return kl}function V3(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Bv(""+n)}function G3(n,e){var t=e.ownerDocument.createElement("input");return t.name=e.name,t.value=e.value,n.id&&t.setAttribute("form",n.id),e.parentNode.insertBefore(t,e),n=new FormData(n),t.parentNode.removeChild(t),n}function x7(n,e,t,i,r){if(e==="submit"&&t&&t.stateNode===r){var s=V3((r[hr]||null).action),a=i.submitter;a&&(e=(e=a[hr]||null)?V3(e.formAction):a.getAttribute("formAction"),e!==null&&(s=e,a=null));var o=new b1("action","action",null,i,r);n.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(kl!==0){var c=a?G3(r,a):new FormData(r);DA(t,{pending:!0,data:c,method:r.method,action:s},null,c)}}else typeof s=="function"&&(o.preventDefault(),c=a?G3(r,a):new FormData(r),DA(t,{pending:!0,data:c,method:r.method,action:s},s,c))},currentTarget:r}]})}}for(var m_=0;m_<dA.length;m_++){var y_=dA[m_],w7=y_.toLowerCase(),_7=y_[0].toUpperCase()+y_.slice(1);ra(w7,"on"+_7)}ra(rj,"onAnimationEnd");ra(sj,"onAnimationIteration");ra(aj,"onAnimationStart");ra("dblclick","onDoubleClick");ra("focusin","onFocus");ra("focusout","onBlur");ra(L9,"onTransitionRun");ra(I9,"onTransitionStart");ra(P9,"onTransitionCancel");ra(oj,"onTransitionEnd");Yp("onMouseEnter",["mouseout","mouseover"]);Yp("onMouseLeave",["mouseout","mouseover"]);Yp("onPointerEnter",["pointerout","pointerover"]);Yp("onPointerLeave",["pointerout","pointerover"]);sh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));sh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));sh("onBeforeInput",["compositionend","keypress","textInput","paste"]);sh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));sh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));sh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D7=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zm));function G8(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],c=o.instance,l=o.currentTarget;if(o=o.listener,c!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=l;try{s(r)}catch(d){$x(d)}r.currentTarget=null,s=c}else for(a=0;a<i.length;a++){if(o=i[a],c=o.instance,l=o.currentTarget,o=o.listener,c!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=l;try{s(r)}catch(d){$x(d)}r.currentTarget=null,s=c}}}}function Je(n,e){var t=e[iA];t===void 0&&(t=e[iA]=new Set);var i=n+"__bubble";t.has(i)||(X8(e,n,2,!1),t.add(i))}function b_(n,e,t){var i=0;e&&(i|=4),X8(t,n,i,e)}var iv="_reactListening"+Math.random().toString(36).slice(2);function BT(n){if(!n[iv]){n[iv]=!0,I4.forEach(function(t){t!=="selectionchange"&&(D7.has(t)||b_(t,!1,n),b_(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[iv]||(e[iv]=!0,b_("selectionchange",!1,e))}}function X8(n,e,t,i){switch(oR(e)){case 2:var r=Q7;break;case 8:r=J7;break;default:r=zT}t=r.bind(null,e,t,n),r=void 0,!cA||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function v_(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===r)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;o!==null;){if(a=Hh(o),a===null)return;if(c=a.tag,c===5||c===6||c===26||c===27){i=s=a;continue e}o=o.parentNode}}i=i.return}G4(function(){var l=s,d=tT(t),h=[];e:{var f=cj.get(n);if(f!==void 0){var g=b1,v=n;switch(n){case"keypress":if(Iv(t)===0)break e;case"keydown":case"keyup":g=m9;break;case"focusin":v="focus",g=Xw;break;case"focusout":v="blur",g=Xw;break;case"beforeblur":case"afterblur":g=Xw;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=t3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=r9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=v9;break;case rj:case sj:case aj:g=o9;break;case oj:g=w9;break;case"scroll":case"scrollend":g=n9;break;case"wheel":g=D9;break;case"copy":case"cut":case"paste":g=l9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=i3;break;case"toggle":case"beforetoggle":g=E9}var y=(e&4)!==0,x=!y&&(n==="scroll"||n==="scrollend"),m=y?f!==null?f+"Capture":null:f;y=[];for(var b=l,w;b!==null;){var _=b;if(w=_.stateNode,_=_.tag,_!==5&&_!==26&&_!==27||w===null||m===null||(_=Hm(b,m),_!=null&&y.push(ey(b,_,w))),x)break;b=b.return}0<y.length&&(f=new g(f,v,null,t,d),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",f&&t!==oA&&(v=t.relatedTarget||t.fromElement)&&(Hh(v)||v[mg]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(v=t.relatedTarget||t.toElement,g=l,v=v?Hh(v):null,v!==null&&(x=f0(v),y=v.tag,v!==x||y!==5&&y!==27&&y!==6)&&(v=null)):(g=null,v=l),g!==v)){if(y=t3,_="onMouseLeave",m="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(y=i3,_="onPointerLeave",m="onPointerEnter",b="pointer"),x=g==null?f:tm(g),w=v==null?f:tm(v),f=new y(_,b+"leave",g,t,d),f.target=x,f.relatedTarget=w,_=null,Hh(d)===l&&(y=new y(m,b+"enter",v,t,d),y.target=w,y.relatedTarget=x,_=y),x=_,g&&v)t:{for(y=A7,m=g,b=v,w=0,_=m;_;_=y(_))w++;_=0;for(var D=b;D;D=y(D))_++;for(;0<w-_;)m=y(m),w--;for(;0<_-w;)b=y(b),_--;for(;w--;){if(m===b||b!==null&&m===b.alternate){y=m;break t}m=y(m),b=y(b)}y=null}else y=null;g!==null&&X3(h,f,g,y,!1),v!==null&&x!==null&&X3(h,x,v,y,!0)}}e:{if(f=l?tm(l):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var A=o3;else if(a3(f))if(Z4)A=O9;else{A=R9;var E=j9}else g=f.nodeName,!g||g.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?l&&eT(l.elementType)&&(A=o3):A=F9;if(A&&(A=A(n,l))){J4(h,A,t,d);break e}E&&E(n,f,l),n==="focusout"&&l&&f.type==="number"&&l.memoizedProps.value!=null&&aA(f,"number",f.value)}switch(E=l?tm(l):window,n){case"focusin":(a3(E)||E.contentEditable==="true")&&(Xh=E,lA=l,jm=null);break;case"focusout":jm=lA=Xh=null;break;case"mousedown":uA=!0;break;case"contextmenu":case"mouseup":case"dragend":uA=!1,h3(h,t,d);break;case"selectionchange":if(B9)break;case"keydown":case"keyup":h3(h,t,d)}var F;if(rT)e:{switch(n){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Gh?K4(n,t)&&(I="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(I="onCompositionStart");I&&(Y4&&t.locale!=="ko"&&(Gh||I!=="onCompositionStart"?I==="onCompositionEnd"&&Gh&&(F=X4()):(Sl=d,nT="value"in Sl?Sl.value:Sl.textContent,Gh=!0)),E=o2(l,I),0<E.length&&(I=new n3(I,n,null,t,d),h.push({event:I,listeners:E}),F?I.data=F:(F=Q4(t),F!==null&&(I.data=F)))),(F=T9?C9(n,t):k9(n,t))&&(I=o2(l,"onBeforeInput"),0<I.length&&(E=new n3("onBeforeInput","beforeinput",null,t,d),h.push({event:E,listeners:I}),E.data=F)),x7(h,n,l,t,d)}G8(h,e)})}function ey(n,e,t){return{instance:n,listener:e,currentTarget:t}}function o2(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=Hm(n,t),r!=null&&i.unshift(ey(n,r,s)),r=Hm(n,e),r!=null&&i.push(ey(n,r,s))),n.tag===3)return i;n=n.return}return[]}function A7(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function X3(n,e,t,i,r){for(var s=e._reactName,a=[];t!==null&&t!==i;){var o=t,c=o.alternate,l=o.stateNode;if(o=o.tag,c!==null&&c===i)break;o!==5&&o!==26&&o!==27||l===null||(c=l,r?(l=Hm(t,s),l!=null&&a.unshift(ey(t,l,c))):r||(l=Hm(t,s),l!=null&&a.push(ey(t,l,c)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var E7=/\r\n?/g,S7=/\u0000|\uFFFD/g;function Y3(n){return(typeof n=="string"?n:""+n).replace(E7,`
`).replace(S7,"")}function Y8(n,e){return e=Y3(e),Y3(n)===e}function Tt(n,e,t,i,r,s){switch(t){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||Kp(n,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&Kp(n,""+i);break;case"className":K0(n,"class",i);break;case"tabIndex":K0(n,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":K0(n,t,i);break;case"style":V4(n,i,s);break;case"data":if(e!=="object"){K0(n,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||t!=="href")){n.removeAttribute(t);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){n.removeAttribute(t);break}i=Bv(""+i),n.setAttribute(t,i);break;case"action":case"formAction":if(typeof i=="function"){n.setAttribute(t,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(t==="formAction"?(e!=="input"&&Tt(n,e,"name",r.name,r,null),Tt(n,e,"formEncType",r.formEncType,r,null),Tt(n,e,"formMethod",r.formMethod,r,null),Tt(n,e,"formTarget",r.formTarget,r,null)):(Tt(n,e,"encType",r.encType,r,null),Tt(n,e,"method",r.method,r,null),Tt(n,e,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){n.removeAttribute(t);break}i=Bv(""+i),n.setAttribute(t,i);break;case"onClick":i!=null&&(n.onclick=Xo);break;case"onScroll":i!=null&&Je("scroll",n);break;case"onScrollEnd":i!=null&&Je("scrollend",n);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(he(61));if(t=i.__html,t!=null){if(r.children!=null)throw Error(he(60));n.innerHTML=t}}break;case"multiple":n.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":n.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){n.removeAttribute("xlink:href");break}t=Bv(""+i),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?n.setAttribute(t,""+i):n.removeAttribute(t);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?n.setAttribute(t,""):n.removeAttribute(t);break;case"capture":case"download":i===!0?n.setAttribute(t,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?n.setAttribute(t,i):n.removeAttribute(t);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?n.setAttribute(t,i):n.removeAttribute(t);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?n.removeAttribute(t):n.setAttribute(t,i);break;case"popover":Je("beforetoggle",n),Je("toggle",n),Mv(n,"popover",i);break;case"xlinkActuate":Xa(n,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Xa(n,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Xa(n,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Xa(n,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Xa(n,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Xa(n,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Xa(n,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Xa(n,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Xa(n,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Mv(n,"is",i);break;case"innerText":case"textContent":break;default:(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(t=e9.get(t)||t,Mv(n,t,i))}}function FA(n,e,t,i,r,s){switch(t){case"style":V4(n,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(he(61));if(t=i.__html,t!=null){if(r.children!=null)throw Error(he(60));n.innerHTML=t}}break;case"children":typeof i=="string"?Kp(n,i):(typeof i=="number"||typeof i=="bigint")&&Kp(n,""+i);break;case"onScroll":i!=null&&Je("scroll",n);break;case"onScrollEnd":i!=null&&Je("scrollend",n);break;case"onClick":i!=null&&(n.onclick=Xo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!P4.hasOwnProperty(t))e:{if(t[0]==="o"&&t[1]==="n"&&(r=t.endsWith("Capture"),e=t.slice(2,r?t.length-7:void 0),s=n[hr]||null,s=s!=null?s[t]:null,typeof s=="function"&&n.removeEventListener(e,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(t in n?n[t]=null:n.hasAttribute(t)&&n.removeAttribute(t)),n.addEventListener(e,i,r);break e}t in n?n[t]=i:i===!0?n.setAttribute(t,""):Mv(n,t,i)}}}function di(n,e,t){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",n),Je("load",n);var i=!1,r=!1,s;for(s in t)if(t.hasOwnProperty(s)){var a=t[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(he(137,e));default:Tt(n,e,s,a,t,null)}}r&&Tt(n,e,"srcSet",t.srcSet,t,null),i&&Tt(n,e,"src",t.src,t,null);return;case"input":Je("invalid",n);var o=s=a=r=null,c=null,l=null;for(i in t)if(t.hasOwnProperty(i)){var d=t[i];if(d!=null)switch(i){case"name":r=d;break;case"type":a=d;break;case"checked":c=d;break;case"defaultChecked":l=d;break;case"value":s=d;break;case"defaultValue":o=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(he(137,e));break;default:Tt(n,e,i,d,t,null)}}q4(n,s,o,c,l,a,r,!1);return;case"select":Je("invalid",n),i=a=s=null;for(r in t)if(t.hasOwnProperty(r)&&(o=t[r],o!=null))switch(r){case"value":s=o;break;case"defaultValue":a=o;break;case"multiple":i=o;default:Tt(n,e,r,o,t,null)}e=s,t=a,n.multiple=!!i,e!=null?df(n,!!i,e,!1):t!=null&&df(n,!!i,t,!0);return;case"textarea":Je("invalid",n),s=r=i=null;for(a in t)if(t.hasOwnProperty(a)&&(o=t[a],o!=null))switch(a){case"value":i=o;break;case"defaultValue":r=o;break;case"children":s=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(he(91));break;default:Tt(n,e,a,o,t,null)}H4(n,i,r,s);return;case"option":for(c in t)if(t.hasOwnProperty(c)&&(i=t[c],i!=null))switch(c){case"selected":n.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Tt(n,e,c,i,t,null)}return;case"dialog":Je("beforetoggle",n),Je("toggle",n),Je("cancel",n),Je("close",n);break;case"iframe":case"object":Je("load",n);break;case"video":case"audio":for(i=0;i<Zm.length;i++)Je(Zm[i],n);break;case"image":Je("error",n),Je("load",n);break;case"details":Je("toggle",n);break;case"embed":case"source":case"link":Je("error",n),Je("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(l in t)if(t.hasOwnProperty(l)&&(i=t[l],i!=null))switch(l){case"children":case"dangerouslySetInnerHTML":throw Error(he(137,e));default:Tt(n,e,l,i,t,null)}return;default:if(eT(e)){for(d in t)t.hasOwnProperty(d)&&(i=t[d],i!==void 0&&FA(n,e,d,i,t,void 0));return}}for(o in t)t.hasOwnProperty(o)&&(i=t[o],i!=null&&Tt(n,e,o,i,t,null))}function T7(n,e,t,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,o=null,c=null,l=null,d=null;for(g in t){var h=t[g];if(t.hasOwnProperty(g)&&h!=null)switch(g){case"checked":break;case"value":break;case"defaultValue":c=h;default:i.hasOwnProperty(g)||Tt(n,e,g,null,i,h)}}for(var f in i){var g=i[f];if(h=t[f],i.hasOwnProperty(f)&&(g!=null||h!=null))switch(f){case"type":s=g;break;case"name":r=g;break;case"checked":l=g;break;case"defaultChecked":d=g;break;case"value":a=g;break;case"defaultValue":o=g;break;case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(he(137,e));break;default:g!==h&&Tt(n,e,f,g,i,h)}}sA(n,a,o,c,l,d,s,r);return;case"select":g=a=o=f=null;for(s in t)if(c=t[s],t.hasOwnProperty(s)&&c!=null)switch(s){case"value":break;case"multiple":g=c;default:i.hasOwnProperty(s)||Tt(n,e,s,null,i,c)}for(r in i)if(s=i[r],c=t[r],i.hasOwnProperty(r)&&(s!=null||c!=null))switch(r){case"value":f=s;break;case"defaultValue":o=s;break;case"multiple":a=s;default:s!==c&&Tt(n,e,r,s,i,c)}e=o,t=a,i=g,f!=null?df(n,!!t,f,!1):!!i!=!!t&&(e!=null?df(n,!!t,e,!0):df(n,!!t,t?[]:"",!1));return;case"textarea":g=f=null;for(o in t)if(r=t[o],t.hasOwnProperty(o)&&r!=null&&!i.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:Tt(n,e,o,null,i,r)}for(a in i)if(r=i[a],s=t[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":f=r;break;case"defaultValue":g=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(he(91));break;default:r!==s&&Tt(n,e,a,r,i,s)}$4(n,f,g);return;case"option":for(var v in t)if(f=t[v],t.hasOwnProperty(v)&&f!=null&&!i.hasOwnProperty(v))switch(v){case"selected":n.selected=!1;break;default:Tt(n,e,v,null,i,f)}for(c in i)if(f=i[c],g=t[c],i.hasOwnProperty(c)&&f!==g&&(f!=null||g!=null))switch(c){case"selected":n.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Tt(n,e,c,f,i,g)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var y in t)f=t[y],t.hasOwnProperty(y)&&f!=null&&!i.hasOwnProperty(y)&&Tt(n,e,y,null,i,f);for(l in i)if(f=i[l],g=t[l],i.hasOwnProperty(l)&&f!==g&&(f!=null||g!=null))switch(l){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(he(137,e));break;default:Tt(n,e,l,f,i,g)}return;default:if(eT(e)){for(var x in t)f=t[x],t.hasOwnProperty(x)&&f!==void 0&&!i.hasOwnProperty(x)&&FA(n,e,x,void 0,i,f);for(d in i)f=i[d],g=t[d],!i.hasOwnProperty(d)||f===g||f===void 0&&g===void 0||FA(n,e,d,f,i,g);return}}for(var m in t)f=t[m],t.hasOwnProperty(m)&&f!=null&&!i.hasOwnProperty(m)&&Tt(n,e,m,null,i,f);for(h in i)f=i[h],g=t[h],!i.hasOwnProperty(h)||f===g||f==null&&g==null||Tt(n,e,h,f,i,g)}function K3(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function C7(){if(typeof performance.getEntriesByType=="function"){for(var n=0,e=0,t=performance.getEntriesByType("resource"),i=0;i<t.length;i++){var r=t[i],s=r.transferSize,a=r.initiatorType,o=r.duration;if(s&&o&&K3(a)){for(a=0,o=r.responseEnd,i+=1;i<t.length;i++){var c=t[i],l=c.startTime;if(l>o)break;var d=c.transferSize,h=c.initiatorType;d&&K3(h)&&(c=c.responseEnd,a+=d*(c<o?1:(o-l)/(c-l)))}if(--i,e+=8*(s+a)/(r.duration/1e3),n++,10<n)break}}if(0<n)return e/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var OA=null,MA=null;function c2(n){return n.nodeType===9?n:n.ownerDocument}function Q3(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function K8(n,e){if(n===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&e==="foreignObject"?0:n}function BA(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var x_=null;function k7(){var n=window.event;return n&&n.type==="popstate"?n===x_?!1:(x_=n,!0):(x_=null,!1)}var Q8=typeof setTimeout=="function"?setTimeout:void 0,U7=typeof clearTimeout=="function"?clearTimeout:void 0,J3=typeof Promise=="function"?Promise:void 0,N7=typeof queueMicrotask=="function"?queueMicrotask:typeof J3<"u"?function(n){return J3.resolve(null).then(n).catch(j7)}:Q8;function j7(n){setTimeout(function(){throw n})}function Kl(n){return n==="head"}function Z3(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"||t==="/&"){if(i===0){n.removeChild(r),rg(e);return}i--}else if(t==="$"||t==="$?"||t==="$~"||t==="$!"||t==="&")i++;else if(t==="html")Wm(n.ownerDocument.documentElement);else if(t==="head"){t=n.ownerDocument.head,Wm(t);for(var s=t.firstChild;s;){var a=s.nextSibling,o=s.nodeName;s[y0]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&s.rel.toLowerCase()==="stylesheet"||t.removeChild(s),s=a}}else t==="body"&&Wm(n.ownerDocument.body);t=r}while(t);rg(e)}function eU(n,e){var t=n;n=0;do{var i=t.nextSibling;if(t.nodeType===1?e?(t._stashedDisplay=t.style.display,t.style.display="none"):(t.style.display=t._stashedDisplay||"",t.getAttribute("style")===""&&t.removeAttribute("style")):t.nodeType===3&&(e?(t._stashedText=t.nodeValue,t.nodeValue=""):t.nodeValue=t._stashedText||""),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(n===0)break;n--}else t!=="$"&&t!=="$?"&&t!=="$~"&&t!=="$!"||n++;t=i}while(t)}function LA(n){var e=n.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var t=e;switch(e=e.nextSibling,t.nodeName){case"HTML":case"HEAD":case"BODY":LA(t),ZS(t);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(t.rel.toLowerCase()==="stylesheet")continue}n.removeChild(t)}}function R7(n,e,t,i){for(;n.nodeType===1;){var r=t;if(n.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(i){if(!n[y0])switch(e){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(s=n.getAttribute("rel"),s==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(s!==r.rel||n.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||n.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||n.getAttribute("title")!==(r.title==null?null:r.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(s=n.getAttribute("src"),(s!==(r.src==null?null:r.src)||n.getAttribute("type")!==(r.type==null?null:r.type)||n.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(e==="input"&&n.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&n.getAttribute("name")===s)return n}else return n;if(n=Us(n.nextSibling),n===null)break}return null}function F7(n,e,t){if(e==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!t||(n=Us(n.nextSibling),n===null))return null;return n}function J8(n,e){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!e||(n=Us(n.nextSibling),n===null))return null;return n}function IA(n){return n.data==="$?"||n.data==="$~"}function PA(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function O7(n,e){var t=n.ownerDocument;if(n.data==="$~")n._reactRetry=e;else if(n.data!=="$?"||t.readyState!=="loading")e();else{var i=function(){e(),t.removeEventListener("DOMContentLoaded",i)};t.addEventListener("DOMContentLoaded",i),n._reactRetry=i}}function Us(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return n}var zA=null;function tU(n){n=n.nextSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"||t==="/&"){if(e===0)return Us(n.nextSibling);e--}else t!=="$"&&t!=="$!"&&t!=="$?"&&t!=="$~"&&t!=="&"||e++}n=n.nextSibling}return null}function nU(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"){if(e===0)return n;e--}else t!=="/$"&&t!=="/&"||e++}n=n.previousSibling}return null}function Z8(n,e,t){switch(e=c2(t),n){case"html":if(n=e.documentElement,!n)throw Error(he(452));return n;case"head":if(n=e.head,!n)throw Error(he(453));return n;case"body":if(n=e.body,!n)throw Error(he(454));return n;default:throw Error(he(451))}}function Wm(n){for(var e=n.attributes;e.length;)n.removeAttributeNode(e[0]);ZS(n)}var Fs=new Map,iU=new Set;function l2(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var fc=ht.d;ht.d={f:M7,r:B7,D:L7,C:I7,L:P7,m:z7,X:q7,S:W7,M:$7};function M7(){var n=fc.f(),e=k1();return n||e}function B7(n){var e=yg(n);e!==null&&e.tag===5&&e.type==="form"?Vj(e):fc.r(n)}var wg=typeof document>"u"?null:document;function eR(n,e,t){var i=wg;if(i&&typeof e=="string"&&e){var r=Es(e);r='link[rel="'+n+'"][href="'+r+'"]',typeof t=="string"&&(r+='[crossorigin="'+t+'"]'),iU.has(r)||(iU.add(r),n={rel:n,crossOrigin:t,href:e},i.querySelector(r)===null&&(e=i.createElement("link"),di(e,"link",n),$n(e),i.head.appendChild(e)))}}function L7(n){fc.D(n),eR("dns-prefetch",n,null)}function I7(n,e){fc.C(n,e),eR("preconnect",n,e)}function P7(n,e,t){fc.L(n,e,t);var i=wg;if(i&&n&&e){var r='link[rel="preload"][as="'+Es(e)+'"]';e==="image"&&t&&t.imageSrcSet?(r+='[imagesrcset="'+Es(t.imageSrcSet)+'"]',typeof t.imageSizes=="string"&&(r+='[imagesizes="'+Es(t.imageSizes)+'"]')):r+='[href="'+Es(n)+'"]';var s=r;switch(e){case"style":s=ig(n);break;case"script":s=_g(n)}Fs.has(s)||(n=Vt({rel:"preload",href:e==="image"&&t&&t.imageSrcSet?void 0:n,as:e},t),Fs.set(s,n),i.querySelector(r)!==null||e==="style"&&i.querySelector(D0(s))||e==="script"&&i.querySelector(A0(s))||(e=i.createElement("link"),di(e,"link",n),$n(e),i.head.appendChild(e)))}}function z7(n,e){fc.m(n,e);var t=wg;if(t&&n){var i=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+Es(i)+'"][href="'+Es(n)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=_g(n)}if(!Fs.has(s)&&(n=Vt({rel:"modulepreload",href:n},e),Fs.set(s,n),t.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(t.querySelector(A0(s)))return}i=t.createElement("link"),di(i,"link",n),$n(i),t.head.appendChild(i)}}}function W7(n,e,t){fc.S(n,e,t);var i=wg;if(i&&n){var r=uf(i).hoistableStyles,s=ig(n);e=e||"default";var a=r.get(s);if(!a){var o={loading:0,preload:null};if(a=i.querySelector(D0(s)))o.loading=5;else{n=Vt({rel:"stylesheet",href:n,"data-precedence":e},t),(t=Fs.get(s))&&LT(n,t);var c=a=i.createElement("link");$n(c),di(c,"link",n),c._p=new Promise(function(l,d){c.onload=l,c.onerror=d}),c.addEventListener("load",function(){o.loading|=1}),c.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Gv(a,e,i)}a={type:"stylesheet",instance:a,count:1,state:o},r.set(s,a)}}}function q7(n,e){fc.X(n,e);var t=wg;if(t&&n){var i=uf(t).hoistableScripts,r=_g(n),s=i.get(r);s||(s=t.querySelector(A0(r)),s||(n=Vt({src:n,async:!0},e),(e=Fs.get(r))&&IT(n,e),s=t.createElement("script"),$n(s),di(s,"link",n),t.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function $7(n,e){fc.M(n,e);var t=wg;if(t&&n){var i=uf(t).hoistableScripts,r=_g(n),s=i.get(r);s||(s=t.querySelector(A0(r)),s||(n=Vt({src:n,async:!0,type:"module"},e),(e=Fs.get(r))&&IT(n,e),s=t.createElement("script"),$n(s),di(s,"link",n),t.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function rU(n,e,t,i){var r=(r=Ul.current)?l2(r):null;if(!r)throw Error(he(446));switch(n){case"meta":case"title":return null;case"style":return typeof t.precedence=="string"&&typeof t.href=="string"?(e=ig(t.href),t=uf(r).hoistableStyles,i=t.get(e),i||(i={type:"style",instance:null,count:0,state:null},t.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(t.rel==="stylesheet"&&typeof t.href=="string"&&typeof t.precedence=="string"){n=ig(t.href);var s=uf(r).hoistableStyles,a=s.get(n);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(n,a),(s=r.querySelector(D0(n)))&&!s._p&&(a.instance=s,a.state.loading=5),Fs.has(n)||(t={rel:"preload",as:"style",href:t.href,crossOrigin:t.crossOrigin,integrity:t.integrity,media:t.media,hrefLang:t.hrefLang,referrerPolicy:t.referrerPolicy},Fs.set(n,t),s||H7(r,n,t,a.state))),e&&i===null)throw Error(he(528,""));return a}if(e&&i!==null)throw Error(he(529,""));return null;case"script":return e=t.async,t=t.src,typeof t=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=_g(t),t=uf(r).hoistableScripts,i=t.get(e),i||(i={type:"script",instance:null,count:0,state:null},t.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(he(444,n))}}function ig(n){return'href="'+Es(n)+'"'}function D0(n){return'link[rel="stylesheet"]['+n+"]"}function tR(n){return Vt({},n,{"data-precedence":n.precedence,precedence:null})}function H7(n,e,t,i){n.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=n.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),di(e,"link",t),$n(e),n.head.appendChild(e))}function _g(n){return'[src="'+Es(n)+'"]'}function A0(n){return"script[async]"+n}function sU(n,e,t){if(e.count++,e.instance===null)switch(e.type){case"style":var i=n.querySelector('style[data-href~="'+Es(t.href)+'"]');if(i)return e.instance=i,$n(i),i;var r=Vt({},t,{"data-href":t.href,"data-precedence":t.precedence,href:null,precedence:null});return i=(n.ownerDocument||n).createElement("style"),$n(i),di(i,"style",r),Gv(i,t.precedence,n),e.instance=i;case"stylesheet":r=ig(t.href);var s=n.querySelector(D0(r));if(s)return e.state.loading|=4,e.instance=s,$n(s),s;i=tR(t),(r=Fs.get(r))&&LT(i,r),s=(n.ownerDocument||n).createElement("link"),$n(s);var a=s;return a._p=new Promise(function(o,c){a.onload=o,a.onerror=c}),di(s,"link",i),e.state.loading|=4,Gv(s,t.precedence,n),e.instance=s;case"script":return s=_g(t.src),(r=n.querySelector(A0(s)))?(e.instance=r,$n(r),r):(i=t,(r=Fs.get(s))&&(i=Vt({},t),IT(i,r)),n=n.ownerDocument||n,r=n.createElement("script"),$n(r),di(r,"link",i),n.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(he(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,Gv(i,t.precedence,n));return e.instance}function Gv(n,e,t){for(var i=t.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var o=i[a];if(o.dataset.precedence===e)s=o;else if(s!==r)break}s?s.parentNode.insertBefore(n,s.nextSibling):(e=t.nodeType===9?t.head:t,e.insertBefore(n,e.firstChild))}function LT(n,e){n.crossOrigin==null&&(n.crossOrigin=e.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=e.referrerPolicy),n.title==null&&(n.title=e.title)}function IT(n,e){n.crossOrigin==null&&(n.crossOrigin=e.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=e.referrerPolicy),n.integrity==null&&(n.integrity=e.integrity)}var Xv=null;function aU(n,e,t){if(Xv===null){var i=new Map,r=Xv=new Map;r.set(t,i)}else r=Xv,i=r.get(t),i||(i=new Map,r.set(t,i));if(i.has(n))return i;for(i.set(n,null),t=t.getElementsByTagName(n),r=0;r<t.length;r++){var s=t[r];if(!(s[y0]||s[oi]||n==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(e)||"";a=n+a;var o=i.get(a);o?o.push(s):i.set(a,[s])}}return i}function oU(n,e,t){n=n.ownerDocument||n,n.head.insertBefore(t,e==="title"?n.querySelector("head > title"):null)}function V7(n,e,t){if(t===1||e.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return n=e.disabled,typeof e.precedence=="string"&&n==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function nR(n){return!(n.type==="stylesheet"&&!(n.state.loading&3))}function G7(n,e,t,i){if(t.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=ig(i.href),s=e.querySelector(D0(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(n.count++,n=u2.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=s,$n(s);return}s=e.ownerDocument||e,i=tR(i),(r=Fs.get(r))&&LT(i,r),s=s.createElement("link"),$n(s);var a=s;a._p=new Promise(function(o,c){a.onload=o,a.onerror=c}),di(s,"link",i),t.instance=s}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(n.count++,t=u2.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}var w_=0;function X7(n,e){return n.stylesheets&&n.count===0&&Yv(n,n.stylesheets),0<n.count||0<n.imgCount?function(t){var i=setTimeout(function(){if(n.stylesheets&&Yv(n,n.stylesheets),n.unsuspend){var s=n.unsuspend;n.unsuspend=null,s()}},6e4+e);0<n.imgBytes&&w_===0&&(w_=62500*C7());var r=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Yv(n,n.stylesheets),n.unsuspend)){var s=n.unsuspend;n.unsuspend=null,s()}},(n.imgBytes>w_?50:800)+e);return n.unsuspend=t,function(){n.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}function u2(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Yv(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var d2=null;function Yv(n,e){n.stylesheets=null,n.unsuspend!==null&&(n.count++,d2=new Map,e.forEach(Y7,n),d2=null,u2.call(n))}function Y7(n,e){if(!(e.state.loading&4)){var t=d2.get(n);if(t)var i=t.get(null);else{t=new Map,d2.set(n,t);for(var r=n.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(t.set(a.dataset.precedence,a),i=a)}i&&t.set(null,i)}r=e.instance,a=r.getAttribute("data-precedence"),s=t.get(a)||i,s===i&&t.set(null,r),t.set(a,r),this.count++,i=u2.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(r,n.firstChild)),e.state.loading|=4}}var ty={$$typeof:Go,Provider:null,Consumer:null,_currentValue:Id,_currentValue2:Id,_threadCount:0};function K7(n,e,t,i,r,s,a,o,c){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$w(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$w(0),this.hiddenUpdates=$w(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function iR(n,e,t,i,r,s,a,o,c,l,d,h){return n=new K7(n,e,t,a,c,l,d,h,o),e=1,s===!0&&(e|=24),s=Hr(3,null,null,e),n.current=s,s.stateNode=n,e=dT(),e.refCount++,n.pooledCache=e,e.refCount++,s.memoizedState={element:i,isDehydrated:t,cache:e},pT(s),n}function rR(n){return n?(n=Qh,n):Qh}function sR(n,e,t,i,r,s){r=rR(r),i.context===null?i.context=r:i.pendingContext=r,i=jl(e),i.payload={element:t},s=s===void 0?null:s,s!==null&&(i.callback=s),t=Rl(n,i,e),t!==null&&(dr(t,n,e),Fm(t,n,e))}function cU(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function PT(n,e){cU(n,e),(n=n.alternate)&&cU(n,e)}function aR(n){if(n.tag===13||n.tag===31){var e=ch(n,67108864);e!==null&&dr(e,n,67108864),PT(n,67108864)}}function lU(n){if(n.tag===13||n.tag===31){var e=Qr();e=QS(e);var t=ch(n,e);t!==null&&dr(t,n,e),PT(n,e)}}var h2=!0;function Q7(n,e,t,i){var r=Me.T;Me.T=null;var s=ht.p;try{ht.p=2,zT(n,e,t,i)}finally{ht.p=s,Me.T=r}}function J7(n,e,t,i){var r=Me.T;Me.T=null;var s=ht.p;try{ht.p=8,zT(n,e,t,i)}finally{ht.p=s,Me.T=r}}function zT(n,e,t,i){if(h2){var r=WA(i);if(r===null)v_(n,e,i,f2,t),uU(n,i);else if(eP(r,n,e,t,i))i.stopPropagation();else if(uU(n,i),e&4&&-1<Z7.indexOf(n)){for(;r!==null;){var s=yg(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=lu(s.pendingLanes);if(a!==0){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var c=1<<31-Kr(a);o.entanglements[1]|=c,a&=~c}Va(s),!(dt&6)&&(n2=Xr()+500,_0(0))}}break;case 31:case 13:o=ch(s,2),o!==null&&dr(o,s,2),k1(),PT(s,2)}if(s=WA(i),s===null&&v_(n,e,i,f2,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else v_(n,e,i,null,t)}}function WA(n){return n=tT(n),WT(n)}var f2=null;function WT(n){if(f2=null,n=Hh(n),n!==null){var e=f0(n);if(e===null)n=null;else{var t=e.tag;if(t===13){if(n=S4(e),n!==null)return n;n=null}else if(t===31){if(n=T4(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null)}}return f2=n,null}function oR(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(LI()){case N4:return 2;case j4:return 8;case Wx:case II:return 32;case R4:return 268435456;default:return 32}default:return 32}}var qA=!1,Ml=null,Bl=null,Ll=null,ny=new Map,iy=new Map,Uc=[],Z7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function uU(n,e){switch(n){case"focusin":case"focusout":Ml=null;break;case"dragenter":case"dragleave":Bl=null;break;case"mouseover":case"mouseout":Ll=null;break;case"pointerover":case"pointerout":ny.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":iy.delete(e.pointerId)}}function zg(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=yg(e),e!==null&&aR(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function eP(n,e,t,i,r){switch(e){case"focusin":return Ml=zg(Ml,n,e,t,i,r),!0;case"dragenter":return Bl=zg(Bl,n,e,t,i,r),!0;case"mouseover":return Ll=zg(Ll,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return ny.set(s,zg(ny.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,iy.set(s,zg(iy.get(s)||null,n,e,t,i,r)),!0}return!1}function cR(n){var e=Hh(n.target);if(e!==null){var t=f0(e);if(t!==null){if(e=t.tag,e===13){if(e=S4(t),e!==null){n.blockedOn=e,Xk(n.priority,function(){lU(t)});return}}else if(e===31){if(e=T4(t),e!==null){n.blockedOn=e,Xk(n.priority,function(){lU(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Kv(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=WA(n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);oA=i,t.target.dispatchEvent(i),oA=null}else return e=yg(t),e!==null&&aR(e),n.blockedOn=t,!1;e.shift()}return!0}function dU(n,e,t){Kv(n)&&t.delete(e)}function tP(){qA=!1,Ml!==null&&Kv(Ml)&&(Ml=null),Bl!==null&&Kv(Bl)&&(Bl=null),Ll!==null&&Kv(Ll)&&(Ll=null),ny.forEach(dU),iy.forEach(dU)}function rv(n,e){n.blockedOn===e&&(n.blockedOn=null,qA||(qA=!0,Fn.unstable_scheduleCallback(Fn.unstable_NormalPriority,tP)))}var sv=null;function hU(n){sv!==n&&(sv=n,Fn.unstable_scheduleCallback(Fn.unstable_NormalPriority,function(){sv===n&&(sv=null);for(var e=0;e<n.length;e+=3){var t=n[e],i=n[e+1],r=n[e+2];if(typeof i!="function"){if(WT(i||t)===null)continue;break}var s=yg(t);s!==null&&(n.splice(e,3),e-=3,DA(s,{pending:!0,data:r,method:t.method,action:i},i,r))}}))}function rg(n){function e(c){return rv(c,n)}Ml!==null&&rv(Ml,n),Bl!==null&&rv(Bl,n),Ll!==null&&rv(Ll,n),ny.forEach(e),iy.forEach(e);for(var t=0;t<Uc.length;t++){var i=Uc[t];i.blockedOn===n&&(i.blockedOn=null)}for(;0<Uc.length&&(t=Uc[0],t.blockedOn===null);)cR(t),t.blockedOn===null&&Uc.shift();if(t=(n.ownerDocument||n).$$reactFormReplay,t!=null)for(i=0;i<t.length;i+=3){var r=t[i],s=t[i+1],a=r[hr]||null;if(typeof s=="function")a||hU(t);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[hr]||null)o=a.formAction;else if(WT(r)!==null)continue}else o=a.action;typeof o=="function"?t[i+1]=o:(t.splice(i,3),i-=3),hU(t)}}}function lR(){function n(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(a){return r=a})},focusReset:"manual",scroll:"manual"})}function e(){r!==null&&(r(),r=null),i||setTimeout(t,20)}function t(){if(!i&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,r=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(t,100),function(){i=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),r!==null&&(r(),r=null)}}}function qT(n){this._internalRoot=n}j1.prototype.render=qT.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(he(409));var t=e.current,i=Qr();sR(t,i,n,e,null,null)};j1.prototype.unmount=qT.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;sR(n.current,2,null,n,null,null),k1(),e[mg]=null}};function j1(n){this._internalRoot=n}j1.prototype.unstable_scheduleHydration=function(n){if(n){var e=L4();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Uc.length&&e!==0&&e<Uc[t].priority;t++);Uc.splice(t,0,n),t===0&&cR(n)}};var fU=A4.version;if(fU!=="19.2.1")throw Error(he(527,fU,"19.2.1"));ht.findDOMNode=function(n){var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(he(188)):(n=Object.keys(n).join(","),Error(he(268,n)));return n=NI(e),n=n!==null?C4(n):null,n=n===null?null:n.stateNode,n};var nP={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:Me,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var av=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!av.isDisabled&&av.supportsFiber)try{p0=av.inject(nP),Yr=av}catch{}}g1.createRoot=function(n,e){if(!E4(n))throw Error(he(299));var t=!1,i="",r=e8,s=t8,a=n8;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=iR(n,1,!1,null,null,t,i,null,r,s,a,lR),n[mg]=e.current,BT(n),new qT(e)};g1.hydrateRoot=function(n,e,t){if(!E4(n))throw Error(he(299));var i=!1,r="",s=e8,a=t8,o=n8,c=null;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(a=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError),t.formState!==void 0&&(c=t.formState)),e=iR(n,1,!0,e,t??null,i,r,c,s,a,o,lR),e.context=rR(null),t=e.current,i=Qr(),i=QS(i),r=jl(i),r.callback=null,Rl(t,r,i),t=i,e.current.lanes=t,m0(e,t),Va(e),n[mg]=e.current,BT(n),new j1(e)};g1.version="19.2.1";function uR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uR)}catch(n){console.error(n)}}uR(),b4.exports=g1;var iP=b4.exports,$T={},p2={},$A=function(n,e){return $A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])},$A(n,e)};function dR(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");$A(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var g2=function(){return g2=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},g2.apply(this,arguments)};function Dg(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function hR(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(e,t,s):a(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s}function fR(n,e){return function(t,i){e(t,i,n)}}function pR(n,e,t,i,r,s){function a(m){if(m!==void 0&&typeof m!="function")throw new TypeError("Function expected");return m}for(var o=i.kind,c=o==="getter"?"get":o==="setter"?"set":"value",l=!e&&n?i.static?n:n.prototype:null,d=e||(l?Object.getOwnPropertyDescriptor(l,i.name):{}),h,f=!1,g=t.length-1;g>=0;g--){var v={};for(var y in i)v[y]=y==="access"?{}:i[y];for(var y in i.access)v.access[y]=i.access[y];v.addInitializer=function(m){if(f)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(m||null))};var x=(0,t[g])(o==="accessor"?{get:d.get,set:d.set}:d[c],v);if(o==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(h=a(x.get))&&(d.get=h),(h=a(x.set))&&(d.set=h),(h=a(x.init))&&r.unshift(h)}else(h=a(x))&&(o==="field"?r.unshift(h):d[c]=h)}l&&Object.defineProperty(l,i.name,d),f=!0}function gR(n,e,t){for(var i=arguments.length>2,r=0;r<e.length;r++)t=i?e[r].call(n,t):e[r].call(n);return i?t:void 0}function mR(n){return typeof n=="symbol"?n:"".concat(n)}function yR(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function bR(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function Se(n,e,t,i){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(d){try{l(i.next(d))}catch(h){a(h)}}function c(d){try{l(i.throw(d))}catch(h){a(h)}}function l(d){d.done?s(d.value):r(d.value).then(o,c)}l((i=i.apply(n,e||[])).next())})}function vR(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(l){return function(d){return c([l,d])}}function c(l){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(t=0)),t;)try{if(i=1,r&&(s=l[0]&2?r.return:l[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,l[1])).done)return s;switch(r=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,r=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(d){l=[6,d],r=0}finally{i=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var R1=Object.create?function(n,e,t,i){i===void 0&&(i=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,i,r)}:function(n,e,t,i){i===void 0&&(i=t),n[i]=e[t]};function xR(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&R1(e,n,t)}function m2(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function HT(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,s=[],a;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}return s}function wR(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(HT(arguments[e]));return n}function _R(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var i=Array(n),r=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,r++)i[r]=s[a];return i}function DR(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return n.concat(s||Array.prototype.slice.call(e))}function sg(n){return this instanceof sg?(this.v=n,this):new sg(n)}function AR(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(g){return function(v){return Promise.resolve(v).then(g,h)}}function o(g,v){i[g]&&(r[g]=function(y){return new Promise(function(x,m){s.push([g,y,x,m])>1||c(g,y)})},v&&(r[g]=v(r[g])))}function c(g,v){try{l(i[g](v))}catch(y){f(s[0][3],y)}}function l(g){g.value instanceof sg?Promise.resolve(g.value.v).then(d,h):f(s[0][2],g)}function d(g){c("next",g)}function h(g){c("throw",g)}function f(g,v){g(v),s.shift(),s.length&&c(s[0][0],s[0][1])}}function ER(n){var e,t;return e={},i("next"),i("throw",function(r){throw r}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(r,s){e[r]=n[r]?function(a){return(t=!t)?{value:sg(n[r](a)),done:!1}:s?s(a):a}:s}}function SR(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof m2=="function"?m2(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(a){return new Promise(function(o,c){a=n[s](a),r(o,c,a.done,a.value)})}}function r(s,a,o,c){Promise.resolve(c).then(function(l){s({value:l,done:o})},a)}}function TR(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var rP=Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e},HA=function(n){return HA=Object.getOwnPropertyNames||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[t.length]=i);return t},HA(n)};function CR(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=HA(n),i=0;i<t.length;i++)t[i]!=="default"&&R1(e,n,t[i]);return rP(e,n),e}function kR(n){return n&&n.__esModule?n:{default:n}}function UR(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)}function NR(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t}function jR(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function RR(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var i,r;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=e[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=e[Symbol.dispose],t&&(r=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");r&&(i=function(){try{r.call(this)}catch(s){return Promise.reject(s)}}),n.stack.push({value:e,dispose:i,async:t})}else t&&n.stack.push({async:!0});return e}var sP=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var i=new Error(t);return i.name="SuppressedError",i.error=n,i.suppressed=e,i};function FR(n){function e(s){n.error=n.hasError?new sP(s,n.error,"An error was suppressed during disposal."):s,n.hasError=!0}var t,i=0;function r(){for(;t=n.stack.pop();)try{if(!t.async&&i===1)return i=0,n.stack.push(t),Promise.resolve().then(r);if(t.dispose){var s=t.dispose.call(t.value);if(t.async)return i|=2,Promise.resolve(s).then(r,function(a){return e(a),r()})}else i|=1}catch(a){e(a)}if(i===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return r()}function OR(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,i,r,s,a){return i?e?".jsx":".js":r&&(!s||!a)?t:r+s+"."+a.toLowerCase()+"js"}):n}const aP={__extends:dR,__assign:g2,__rest:Dg,__decorate:hR,__param:fR,__esDecorate:pR,__runInitializers:gR,__propKey:mR,__setFunctionName:yR,__metadata:bR,__awaiter:Se,__generator:vR,__createBinding:R1,__exportStar:xR,__values:m2,__read:HT,__spread:wR,__spreadArrays:_R,__spreadArray:DR,__await:sg,__asyncGenerator:AR,__asyncDelegator:ER,__asyncValues:SR,__makeTemplateObject:TR,__importStar:CR,__importDefault:kR,__classPrivateFieldGet:UR,__classPrivateFieldSet:NR,__classPrivateFieldIn:jR,__addDisposableResource:RR,__disposeResources:FR,__rewriteRelativeImportExtension:OR},oP=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:RR,get __assign(){return g2},__asyncDelegator:ER,__asyncGenerator:AR,__asyncValues:SR,__await:sg,__awaiter:Se,__classPrivateFieldGet:UR,__classPrivateFieldIn:jR,__classPrivateFieldSet:NR,__createBinding:R1,__decorate:hR,__disposeResources:FR,__esDecorate:pR,__exportStar:xR,__extends:dR,__generator:vR,__importDefault:kR,__importStar:CR,__makeTemplateObject:TR,__metadata:bR,__param:fR,__propKey:mR,__read:HT,__rest:Dg,__rewriteRelativeImportExtension:OR,__runInitializers:gR,__setFunctionName:yR,__spread:wR,__spreadArray:DR,__spreadArrays:_R,__values:m2,default:aP},Symbol.toStringTag,{value:"Module"})),cP=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);let F1=class extends Error{constructor(e,t="FunctionsError",i){super(e),this.name=t,this.context=i}},MR=class extends F1{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},VA=class extends F1{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},GA=class extends F1{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var y2;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(y2||(y2={}));class lP{constructor(e,{headers:t={},customFetch:i,region:r=y2.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=cP(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Se(this,arguments,void 0,function*(t,i={}){var r;let s,a;try{const{headers:o,method:c,body:l,signal:d,timeout:h}=i;let f={},{region:g}=i;g||(g=this.region);const v=new URL(`${this.url}/${t}`);g&&g!=="any"&&(f["x-region"]=g,v.searchParams.set("forceFunctionRegion",g));let y;l&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",y=l):typeof l=="string"?(f["Content-Type"]="text/plain",y=l):typeof FormData<"u"&&l instanceof FormData?y=l:(f["Content-Type"]="application/json",y=JSON.stringify(l)):y=l;let x=d;h&&(a=new AbortController,s=setTimeout(()=>a.abort(),h),d?(x=a.signal,d.addEventListener("abort",()=>a.abort())):x=a.signal);const m=yield this.fetch(v.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:y,signal:x}).catch(D=>{throw new MR(D)}),b=m.headers.get("x-relay-error");if(b&&b==="true")throw new VA(m);if(!m.ok)throw new GA(m);let w=((r=m.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),_;return w==="application/json"?_=yield m.json():w==="application/octet-stream"||w==="application/pdf"?_=yield m.blob():w==="text/event-stream"?_=m:w==="multipart/form-data"?_=yield m.formData():_=yield m.text(),{data:_,error:null,response:m}}catch(o){return{data:null,error:o,response:o instanceof GA||o instanceof VA?o.context:void 0}}finally{s&&clearTimeout(s)}})}}const uP=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return y2},FunctionsClient:lP,FunctionsError:F1,FunctionsFetchError:MR,FunctionsHttpError:GA,FunctionsRelayError:VA},Symbol.toStringTag,{value:"Module"})),BR=pg(uP);var Ei={};const Ag=pg(oP);var ov={},cv={},lv={},uv={},dv={},hv={},pU;function LR(){if(pU)return hv;pU=1,Object.defineProperty(hv,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return hv.default=n,hv}var gU;function IR(){if(gU)return dv;gU=1,Object.defineProperty(dv,"__esModule",{value:!0});const e=Ag.__importDefault(LR());let t=class{constructor(r){var s,a;this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=new Headers(r.headers),this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=(s=r.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=r.signal,this.isMaybeSingle=(a=r.isMaybeSingle)!==null&&a!==void 0?a:!1,r.fetch?this.fetch=r.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,s){return this.headers=new Headers(this.headers),this.headers.set(r,s),this}then(r,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let o=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var l,d,h,f;let g=null,v=null,y=null,x=c.status,m=c.statusText;if(c.ok){if(this.method!=="HEAD"){const D=await c.text();D===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((l=this.headers.get("Accept"))===null||l===void 0)&&l.includes("application/vnd.pgrst.plan+text"))?v=D:v=JSON.parse(D))}const w=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),_=(h=c.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");w&&_&&_.length>1&&(y=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(g={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,y=null,x=406,m="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const w=await c.text();try{g=JSON.parse(w),Array.isArray(g)&&c.status===404&&(v=[],g=null,x=200,m="OK")}catch{c.status===404&&w===""?(x=204,m="No Content"):g={message:w}}if(g&&this.isMaybeSingle&&(!((f=g==null?void 0:g.details)===null||f===void 0)&&f.includes("0 rows"))&&(g=null,x=200,m="OK"),g&&this.shouldThrowOnError)throw new e.default(g)}return{error:g,data:v,count:y,status:x,statusText:m}});return this.shouldThrowOnError||(o=o.catch(c=>{var l,d,h,f,g,v;let y="";const x=c==null?void 0:c.cause;if(x){const m=(l=x==null?void 0:x.message)!==null&&l!==void 0?l:"",b=(d=x==null?void 0:x.code)!==null&&d!==void 0?d:"";y=`${(h=c==null?void 0:c.name)!==null&&h!==void 0?h:"FetchError"}: ${c==null?void 0:c.message}`,y+=`

Caused by: ${(f=x==null?void 0:x.name)!==null&&f!==void 0?f:"Error"}: ${m}`,b&&(y+=` (${b})`),x!=null&&x.stack&&(y+=`
${x.stack}`)}else y=(g=c==null?void 0:c.stack)!==null&&g!==void 0?g:"";return{error:{message:`${(v=c==null?void 0:c.name)!==null&&v!==void 0?v:"FetchError"}: ${c==null?void 0:c.message}`,details:y,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(r,s)}returns(){return this}overrideTypes(){return this}};return dv.default=t,dv}var mU;function PR(){if(mU)return uv;mU=1,Object.defineProperty(uv,"__esModule",{value:!0});const e=Ag.__importDefault(IR());let t=class extends e.default{select(r){let s=!1;const a=(r??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:s=!0,nullsFirst:a,foreignTable:o,referencedTable:c=o}={}){const l=c?`${c}.order`:"order",d=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${d?`${d},`:""}${r}.${s?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:s,referencedTable:a=s}={}){const o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${r}`),this}range(r,s,{foreignTable:a,referencedTable:o=a}={}){const c=typeof o>"u"?"offset":`${o}.offset`,l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${r}`),this.url.searchParams.set(l,`${s-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:s=!1,settings:a=!1,buffers:o=!1,wal:c=!1,format:l="text"}={}){var d;const h=[r?"analyze":null,s?"verbose":null,a?"settings":null,o?"buffers":null,c?"wal":null].filter(Boolean).join("|"),f=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${f}"; options=${h};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}};return uv.default=t,uv}var yU;function VT(){if(yU)return lv;yU=1,Object.defineProperty(lv,"__esModule",{value:!0});const e=Ag.__importDefault(PR()),t=new RegExp("[,()]");let i=class extends e.default{eq(s,a){return this.url.searchParams.append(s,`eq.${a}`),this}neq(s,a){return this.url.searchParams.append(s,`neq.${a}`),this}gt(s,a){return this.url.searchParams.append(s,`gt.${a}`),this}gte(s,a){return this.url.searchParams.append(s,`gte.${a}`),this}lt(s,a){return this.url.searchParams.append(s,`lt.${a}`),this}lte(s,a){return this.url.searchParams.append(s,`lte.${a}`),this}like(s,a){return this.url.searchParams.append(s,`like.${a}`),this}likeAllOf(s,a){return this.url.searchParams.append(s,`like(all).{${a.join(",")}}`),this}likeAnyOf(s,a){return this.url.searchParams.append(s,`like(any).{${a.join(",")}}`),this}ilike(s,a){return this.url.searchParams.append(s,`ilike.${a}`),this}ilikeAllOf(s,a){return this.url.searchParams.append(s,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(s,a){return this.url.searchParams.append(s,`ilike(any).{${a.join(",")}}`),this}regexMatch(s,a){return this.url.searchParams.append(s,`match.${a}`),this}regexIMatch(s,a){return this.url.searchParams.append(s,`imatch.${a}`),this}is(s,a){return this.url.searchParams.append(s,`is.${a}`),this}isDistinct(s,a){return this.url.searchParams.append(s,`isdistinct.${a}`),this}in(s,a){const o=Array.from(new Set(a)).map(c=>typeof c=="string"&&t.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(s,`in.(${o})`),this}contains(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cs.{${a.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(a)}`),this}containedBy(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cd.{${a.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(a)}`),this}rangeGt(s,a){return this.url.searchParams.append(s,`sr.${a}`),this}rangeGte(s,a){return this.url.searchParams.append(s,`nxl.${a}`),this}rangeLt(s,a){return this.url.searchParams.append(s,`sl.${a}`),this}rangeLte(s,a){return this.url.searchParams.append(s,`nxr.${a}`),this}rangeAdjacent(s,a){return this.url.searchParams.append(s,`adj.${a}`),this}overlaps(s,a){return typeof a=="string"?this.url.searchParams.append(s,`ov.${a}`):this.url.searchParams.append(s,`ov.{${a.join(",")}}`),this}textSearch(s,a,{config:o,type:c}={}){let l="";c==="plain"?l="pl":c==="phrase"?l="ph":c==="websearch"&&(l="w");const d=o===void 0?"":`(${o})`;return this.url.searchParams.append(s,`${l}fts${d}.${a}`),this}match(s){return Object.entries(s).forEach(([a,o])=>{this.url.searchParams.append(a,`eq.${o}`)}),this}not(s,a,o){return this.url.searchParams.append(s,`not.${a}.${o}`),this}or(s,{foreignTable:a,referencedTable:o=a}={}){const c=o?`${o}.or`:"or";return this.url.searchParams.append(c,`(${s})`),this}filter(s,a,o){return this.url.searchParams.append(s,`${a}.${o}`),this}};return lv.default=i,lv}var bU;function zR(){if(bU)return cv;bU=1,Object.defineProperty(cv,"__esModule",{value:!0});const e=Ag.__importDefault(VT());let t=class{constructor(r,{headers:s={},schema:a,fetch:o}){this.url=r,this.headers=new Headers(s),this.schema=a,this.fetch=o}select(r,s){const{head:a=!1,count:o}=s??{},c=a?"HEAD":"GET";let l=!1;const d=(r??"*").split("").map(h=>/\s/.test(h)&&!l?"":(h==='"'&&(l=!l),h)).join("");return this.url.searchParams.set("select",d),o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(r,{count:s,defaultToNull:a=!0}={}){var o;const c="POST";if(s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const l=r.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(l.length>0){const d=[...new Set(l)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(r,{onConflict:s,ignoreDuplicates:a=!1,count:o,defaultToNull:c=!0}={}){var l;const d="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),o&&this.headers.append("Prefer",`count=${o}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const h=r.reduce((f,g)=>f.concat(Object.keys(g)),[]);if(h.length>0){const f=[...new Set(h)].map(g=>`"${g}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(r,{count:s}={}){var a;const o="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:r}={}){var s;const a="DELETE";return r&&this.headers.append("Prefer",`count=${r}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};return cv.default=t,cv}var vU;function dP(){if(vU)return ov;vU=1,Object.defineProperty(ov,"__esModule",{value:!0});const n=Ag,e=n.__importDefault(zR()),t=n.__importDefault(VT());let i=class WR{constructor(s,{headers:a={},schema:o,fetch:c}={}){this.url=s,this.headers=new Headers(a),this.schemaName=o,this.fetch=c}from(s){if(!s||typeof s!="string"||s.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const a=new URL(`${this.url}/${s}`);return new e.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new WR(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,a={},{head:o=!1,get:c=!1,count:l}={}){var d;let h;const f=new URL(`${this.url}/rpc/${s}`);let g;o||c?(h=o?"HEAD":"GET",Object.entries(a).filter(([y,x])=>x!==void 0).map(([y,x])=>[y,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([y,x])=>{f.searchParams.append(y,x)})):(h="POST",g=a);const v=new Headers(this.headers);return l&&v.set("Prefer",`count=${l}`),new t.default({method:h,url:f,headers:v,schema:this.schemaName,body:g,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}};return ov.default=i,ov}Object.defineProperty(Ei,"__esModule",{value:!0});Ei.PostgrestError=Ei.PostgrestBuilder=Ei.PostgrestTransformBuilder=Ei.PostgrestFilterBuilder=Ei.PostgrestQueryBuilder=Ei.PostgrestClient=void 0;const Eg=Ag,qR=Eg.__importDefault(dP());Ei.PostgrestClient=qR.default;const $R=Eg.__importDefault(zR());Ei.PostgrestQueryBuilder=$R.default;const HR=Eg.__importDefault(VT());Ei.PostgrestFilterBuilder=HR.default;const VR=Eg.__importDefault(PR());Ei.PostgrestTransformBuilder=VR.default;const GR=Eg.__importDefault(IR());Ei.PostgrestBuilder=GR.default;const XR=Eg.__importDefault(LR());Ei.PostgrestError=XR.default;Ei.default={PostgrestClient:qR.default,PostgrestQueryBuilder:$R.default,PostgrestFilterBuilder:HR.default,PostgrestTransformBuilder:VR.default,PostgrestBuilder:GR.default,PostgrestError:XR.default};class YR{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const i=t.node,r=parseInt(i.replace(/^v/,"").split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const i=this.getWebSocketConstructor();return new i(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const hP="2.87.1",fP=`realtime-js/${hP}`,KR="1.0.0",pP="2.0.0",xU=KR,XA=1e4,gP=1e3,mP=100;var bu;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(bu||(bu={}));var vn;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(vn||(vn={}));var ea;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(ea||(ea={}));var YA;(function(n){n.websocket="websocket"})(YA||(YA={}));var vu;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(vu||(vu={}));class yP{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,i;const r=(i=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(e){var t,i;const r=(i=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&i!==void 0?i:{},a=new TextEncoder().encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,t,i){var r,s;const a=e.topic,o=(r=e.ref)!==null&&r!==void 0?r:"",c=(s=e.join_ref)!==null&&s!==void 0?s:"",l=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`userEvent length ${l.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+o.length+a.length+l.length+h.length,g=new ArrayBuffer(this.HEADER_LENGTH+f);let v=new DataView(g),y=0;v.setUint8(y++,this.KINDS.userBroadcastPush),v.setUint8(y++,c.length),v.setUint8(y++,o.length),v.setUint8(y++,a.length),v.setUint8(y++,l.length),v.setUint8(y++,h.length),v.setUint8(y++,t),Array.from(c,m=>v.setUint8(y++,m.charCodeAt(0))),Array.from(o,m=>v.setUint8(y++,m.charCodeAt(0))),Array.from(a,m=>v.setUint8(y++,m.charCodeAt(0))),Array.from(l,m=>v.setUint8(y++,m.charCodeAt(0))),Array.from(h,m=>v.setUint8(y++,m.charCodeAt(0)));var x=new Uint8Array(g.byteLength+i.byteLength);return x.set(new Uint8Array(g),0),x.set(new Uint8Array(i),g.byteLength),x.buffer}decode(e,t){if(this._isArrayBuffer(e)){let i=this._binaryDecode(e);return t(i)}if(typeof e=="string"){const i=JSON.parse(e),[r,s,a,o,c]=i;return t({join_ref:r,ref:s,topic:a,event:o,payload:c})}return t({})}_binaryDecode(e){const t=new DataView(e),i=t.getUint8(0),r=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,r)}}_decodeUserBroadcast(e,t,i){const r=t.getUint8(1),s=t.getUint8(2),a=t.getUint8(3),o=t.getUint8(4);let c=this.HEADER_LENGTH+4;const l=i.decode(e.slice(c,c+r));c=c+r;const d=i.decode(e.slice(c,c+s));c=c+s;const h=i.decode(e.slice(c,c+a));c=c+a;const f=e.slice(c,e.byteLength),g=o===this.JSON_ENCODING?JSON.parse(i.decode(f)):f,v={type:this.BROADCAST_EVENT,event:d,payload:g};return a>0&&(v.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([i])=>t.includes(i)))}}class QR{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ot;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Ot||(Ot={}));const wU=(n,e,t={})=>{var i;const r=(i=t.skipTypes)!==null&&i!==void 0?i:[];return e?Object.keys(e).reduce((s,a)=>(s[a]=bP(a,n,e,r),s),{}):{}},bP=(n,e,t,i)=>{const r=e.find(o=>o.name===n),s=r==null?void 0:r.type,a=t[n];return s&&!i.includes(s)?JR(s,a):KA(a)},JR=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return _P(e,t)}switch(n){case Ot.bool:return vP(e);case Ot.float4:case Ot.float8:case Ot.int2:case Ot.int4:case Ot.int8:case Ot.numeric:case Ot.oid:return xP(e);case Ot.json:case Ot.jsonb:return wP(e);case Ot.timestamp:return DP(e);case Ot.abstime:case Ot.date:case Ot.daterange:case Ot.int4range:case Ot.int8range:case Ot.money:case Ot.reltime:case Ot.text:case Ot.time:case Ot.timestamptz:case Ot.timetz:case Ot.tsrange:case Ot.tstzrange:return KA(e);default:return KA(e)}},KA=n=>n,vP=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},xP=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},wP=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},_P=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,i=n[t];if(n[0]==="{"&&i==="}"){let s;const a=n.slice(1,t);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>JR(e,o))}return n},DP=n=>typeof n=="string"?n.replace(" ","T"):n,ZR=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class __{constructor(e,t,i={},r=XA){this.channel=e,this.event=t,this.payload=i,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var i;return this._hasReceived(e)&&t((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var QA;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(QA||(QA={}));let e6=class Qv{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},r=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Qv.syncState(this.state,r,s,a),this.pendingDiffs.forEach(c=>{this.state=Qv.syncDiff(this.state,c,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(i.diff,{},r=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Qv.syncDiff(this.state,r,s,a),o())}),this.onJoin((r,s,a)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:s,newPresences:a})}),this.onLeave((r,s,a)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,i,r){const s=this.cloneDeep(e),a=this.transformState(t),o={},c={};return this.map(s,(l,d)=>{a[l]||(c[l]=d)}),this.map(a,(l,d)=>{const h=s[l];if(h){const f=d.map(x=>x.presence_ref),g=h.map(x=>x.presence_ref),v=d.filter(x=>g.indexOf(x.presence_ref)<0),y=h.filter(x=>f.indexOf(x.presence_ref)<0);v.length>0&&(o[l]=v),y.length>0&&(c[l]=y)}else o[l]=d}),this.syncDiff(s,{joins:o,leaves:c},i,r)}static syncDiff(e,t,i,r){const{joins:s,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return i||(i=()=>{}),r||(r=()=>{}),this.map(s,(o,c)=>{var l;const d=(l=e[o])!==null&&l!==void 0?l:[];if(e[o]=this.cloneDeep(c),d.length>0){const h=e[o].map(g=>g.presence_ref),f=d.filter(g=>h.indexOf(g.presence_ref)<0);e[o].unshift(...f)}i(o,d,c)}),this.map(a,(o,c)=>{let l=e[o];if(!l)return;const d=c.map(h=>h.presence_ref);l=l.filter(h=>d.indexOf(h.presence_ref)<0),e[o]=l,r(o,l,c),l.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(i=>t(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,i)=>{const r=e[i];return"metas"in r?t[i]=r.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[i]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var JA;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(JA||(JA={}));var yf;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(yf||(yf={}));var da;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(da||(da={}));const AP=vn;let t6=class rm{constructor(e,t={config:{}},i){var r,s;if(this.topic=e,this.params=t,this.socket=i,this.bindings={},this.state=vn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new __(this,ea.join,this.params,this.timeout),this.rejoinTimer=new QR(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=vn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=vn.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=vn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=vn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=vn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ea.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new e6(this),this.broadcastEndpointURL=ZR(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(r=this.params.config)===null||r===void 0?void 0:r.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var i,r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==vn.closed){const{config:{broadcast:a,presence:o,private:c}}=this.params,l=(r=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(g=>g.filter))!==null&&r!==void 0?r:[],d=!!this.bindings[yf.PRESENCE]&&this.bindings[yf.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,h={},f={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:l,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(da.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(da.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),g===void 0){e==null||e(da.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,x=(v=y==null?void 0:y.length)!==null&&v!==void 0?v:0,m=[];for(let b=0;b<x;b++){const w=y[b],{filter:{event:_,schema:D,table:A,filter:E}}=w,F=g&&g[b];if(F&&F.event===_&&rm.isFilterValueEqual(F.schema,D)&&rm.isFilterValueEqual(F.table,A)&&rm.isFilterValueEqual(F.filter,E))m.push(Object.assign(Object.assign({},w),{id:F.id}));else{this.unsubscribe(),this.state=vn.errored,e==null||e(da.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(da.SUBSCRIBED);return}}).receive("error",g=>{this.state=vn.errored,e==null||e(da.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(da.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,i){return this.state===vn.joined&&e===yf.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,i)}async httpSend(e,t,i={}){var r;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(r=i.timeout)!==null&&r!==void 0?r:this.timeout);if(o.status===202)return{success:!0};let c=o.statusText;try{const l=await o.json();c=l.error||l.message||c}catch{}return Promise.reject(new Error(c))}async send(e,t={}){var i,r;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(i=t.timeout)!==null&&i!==void 0?i:this.timeout);return await((r=l.body)===null||r===void 0?void 0:r.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,c;const l=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),l.receive("ok",()=>s("ok")),l.receive("error",()=>s("error")),l.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=vn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ea.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(r=>{i=new __(this,ea.leave,{},e),i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=vn.closed,this.bindings={}}async _fetchWithTimeout(e,t,i){const r=new AbortController,s=setTimeout(()=>r.abort(),i),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(s),a}_push(e,t,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new __(this,e,t,i);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>mP){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,i){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,i){var r,s;const a=e.toLocaleLowerCase(),{close:o,error:c,leave:l,join:d}=ea;if(i&&[o,c,l,d].indexOf(a)>=0&&i!==this._joinRef())return;let f=this._onMessage(a,t,i);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(g=>{var v,y,x;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((x=(y=g.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===a}).map(g=>g.callback(f,i)):(s=this.bindings[a])===null||s===void 0||s.filter(g=>{var v,y,x,m,b,w;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const _=g.id,D=(v=g.filter)===null||v===void 0?void 0:v.event;return _&&((y=t.ids)===null||y===void 0?void 0:y.includes(_))&&(D==="*"||(D==null?void 0:D.toLocaleLowerCase())===((x=t.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const _=(b=(m=g==null?void 0:g.filter)===null||m===void 0?void 0:m.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return _==="*"||_===((w=t==null?void 0:t.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:y,table:x,commit_timestamp:m,type:b,errors:w}=v;f=Object.assign(Object.assign({},{schema:y,table:x,commit_timestamp:m,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(v))}g.callback(f,i)})}_isClosed(){return this.state===vn.closed}_isJoined(){return this.state===vn.joined}_isJoining(){return this.state===vn.joining}_isLeaving(){return this.state===vn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,i){const r=e.toLocaleLowerCase(),s={type:r,filter:t,callback:i};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(e,t){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(r=>{var s;return!(((s=r.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===i&&rm.isEqual(r.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(e[i]!==t[i])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ea.close,{},e)}_onError(e){this._on(ea.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=vn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=wU(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=wU(e.columns,e.old_record)),t}};const D_=()=>{},fv={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},EP=[1e3,2e3,5e3,1e4],SP=1e4,TP=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let CP=class{constructor(e,t){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=XA,this.transport=null,this.heartbeatIntervalMs=fv.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=D_,this.ref=0,this.reconnectTimer=null,this.vsn=xU,this.logger=D_,this.conn=null,this.sendBuffer=[],this.serializer=new yP,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=r=>r?(...s)=>r(...s):(...s)=>fetch(...s),!(!((i=t==null?void 0:t.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${YA.websocket}`,this.httpEndpoint=ZR(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=YR.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,i){this.logger(e,t,i)}connectionState(){switch(this.conn&&this.conn.readyState){case bu.connecting:return vu.Connecting;case bu.open:return vu.Open;case bu.closing:return vu.Closing;default:return vu.Closed}}isConnected(){return this.connectionState()===vu.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const i=`realtime:${e}`,r=this.getChannels().find(s=>s.topic===i);if(r)return r;{const s=new t6(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:i,payload:r,ref:s}=e,a=()=>{this.encode(e,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${t} ${i} (${s})`,r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(gP,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},fv.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(l){this.log("error","error in heartbeat callback",l)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:r,payload:s,ref:a}=t,o=a?`(${a})`:"",c=s.status||"";this.log("receive",`${c} ${i} ${r} ${o}`.trim(),s),this.channels.filter(l=>l._isMember(i)).forEach(l=>l._trigger(r,s,a)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===bu.open||this.conn.readyState===bu.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ea.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const i=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${i}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const i=new Blob([TP],{type:"application/javascript"});t=URL.createObjectURL(i)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,i=!1;if(e)t=e,i=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(r){this.log("error","Error fetching access token from callback",r),t=this.accessTokenValue}else t=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const s={access_token:t,version:fP};t&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(ea.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(t)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new QR(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},fv.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,i,r,s,a,o,c,l,d,h,f,g;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(i=e==null?void 0:e.timeout)!==null&&i!==void 0?i:XA,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:fv.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:D_,this.vsn=(c=e==null?void 0:e.vsn)!==null&&c!==void 0?c:xU,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:v=>EP[v-1]||SP,this.vsn){case KR:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(v,y)=>y(JSON.stringify(v)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:(v,y)=>y(JSON.parse(v));break;case pP:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}};const kP=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:AP,get REALTIME_LISTEN_TYPES(){return yf},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return JA},get REALTIME_PRESENCE_LISTEN_EVENTS(){return QA},get REALTIME_SUBSCRIBE_STATES(){return da},RealtimeChannel:t6,RealtimeClient:CP,RealtimePresence:e6,WebSocketFactory:YR},Symbol.toStringTag,{value:"Module"})),n6=pg(kP);class E0 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Qt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class i6 extends E0{constructor(e,t,i){super(e),this.name="StorageApiError",this.status=t,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class b2 extends E0{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const GT=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),UP=()=>Response,ZA=n=>{if(Array.isArray(n))return n.map(t=>ZA(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,i])=>{const r=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[r]=ZA(i)}),e},NP=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},jP=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n),A_=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},RP=(n,e,t)=>Se(void 0,void 0,void 0,function*(){const i=yield UP();n instanceof i&&!(t!=null&&t.noResolveJson)?n.json().then(r=>{const s=n.status||500,a=(r==null?void 0:r.statusCode)||s+"";e(new i6(A_(r),s,a))}).catch(r=>{e(new b2(A_(r),r))}):e(new b2(A_(n),n))}),FP=(n,e,t,i)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!i?r:(NP(i)?(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(i)):r.body=i,e!=null&&e.duplex&&(r.duplex=e.duplex),Object.assign(Object.assign({},r),t))};function S0(n,e,t,i,r,s){return Se(this,void 0,void 0,function*(){return new Promise((a,o)=>{n(t,FP(e,i,r,s)).then(c=>{if(!c.ok)throw c;return i!=null&&i.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>RP(c,o,i))})})}function ry(n,e,t,i){return Se(this,void 0,void 0,function*(){return S0(n,"GET",e,t,i)})}function Ps(n,e,t,i,r){return Se(this,void 0,void 0,function*(){return S0(n,"POST",e,i,r,t)})}function eE(n,e,t,i,r){return Se(this,void 0,void 0,function*(){return S0(n,"PUT",e,i,r,t)})}function OP(n,e,t,i){return Se(this,void 0,void 0,function*(){return S0(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),i)})}function XT(n,e,t,i,r){return Se(this,void 0,void 0,function*(){return S0(n,"DELETE",e,i,r,t)})}class MP{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return Se(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Qt(e))return{data:null,error:e};throw e}})}}var r6;class BP{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[r6]="BlobDownloadBuilder",this.promise=null}asStream(){return new MP(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Se(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Qt(e))return{data:null,error:e};throw e}})}}r6=Symbol.toStringTag;const LP={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_U={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class IP{constructor(e,t={},i,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=i,this.fetch=GT(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,i,r){return Se(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},_U),r);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&i instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",i)):typeof FormData<"u"&&i instanceof FormData?(s=i,s.has("cacheControl")||s.append("cacheControl",a.cacheControl),c&&!s.has("metadata")&&s.append("metadata",this.encodeMetadata(c))):(s=i,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!a.duplex&&(a.duplex="half")),r!=null&&r.headers&&(o=Object.assign(Object.assign({},o),r.headers));const l=this._removeEmptyFolders(t),d=this._getFinalPath(l),h=yield(e=="PUT"?eE:Ps)(this.fetch,`${this.url}/object/${d}`,s,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:l,id:h.Id,fullPath:h.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Qt(s))return{data:null,error:s};throw s}})}upload(e,t,i){return Se(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,i)})}uploadToSignedUrl(e,t,i,r){return Se(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let c;const l=Object.assign({upsert:_U.upsert},r),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&i instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",i)):typeof FormData<"u"&&i instanceof FormData?(c=i,c.append("cacheControl",l.cacheControl)):(c=i,d["cache-control"]=`max-age=${l.cacheControl}`,d["content-type"]=l.contentType);const h=yield eE(this.fetch,o.toString(),c,{headers:d});return{data:{path:s,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Qt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return Se(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const s=yield Ps(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:r}),a=new URL(this.url+s.url),o=a.searchParams.get("token");if(!o)throw new E0("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qt(i))return{data:null,error:i};throw i}})}update(e,t,i){return Se(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,i)})}move(e,t,i){return Se(this,void 0,void 0,function*(){try{return{data:yield Ps(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qt(r))return{data:null,error:r};throw r}})}copy(e,t,i){return Se(this,void 0,void 0,function*(){try{return{data:{path:(yield Ps(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qt(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,i){return Se(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),s=yield Ps(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const a=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qt(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,i){return Se(this,void 0,void 0,function*(){try{const r=yield Ps(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:r.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qt(r))return{data:null,error:r};throw r}})}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=s?`?${s}`:"",o=this._getFinalPath(e),c=()=>ry(this.fetch,`${this.url}/${r}/${o}${a}`,{headers:this.headers,noResolveJson:!0});return new BP(c,this.shouldThrowOnError)}info(e){return Se(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const i=yield ry(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:ZA(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qt(i))return{data:null,error:i};throw i}})}exists(e){return Se(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield OP(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qt(i)&&i instanceof b2){const r=i.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,t){const i=this._getFinalPath(e),r=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&r.push(s);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&r.push(c);let l=r.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${i}${l}`)}}}remove(e){return Se(this,void 0,void 0,function*(){try{return{data:yield XT(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qt(t))return{data:null,error:t};throw t}})}list(e,t,i){return Se(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},LP),t),{prefix:e||""});return{data:yield Ps(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},i),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qt(r))return{data:null,error:r};throw r}})}listV2(e,t){return Se(this,void 0,void 0,function*(){try{const i=Object.assign({},e);return{data:yield Ps(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},t),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qt(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const s6="2.87.1",a6={"X-Client-Info":`storage-js/${s6}`};class PP{constructor(e,t={},i,r){this.shouldThrowOnError=!1;const s=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},a6),t),this.fetch=GT(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Se(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield ry(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qt(t))return{data:null,error:t};throw t}})}getBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield ry(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qt(t))return{data:null,error:t};throw t}})}createBucket(e){return Se(this,arguments,void 0,function*(t,i={public:!1}){try{return{data:yield Ps(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qt(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Se(this,void 0,void 0,function*(){try{return{data:yield eE(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qt(i))return{data:null,error:i};throw i}})}emptyBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield Ps(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield XT(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qt(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}var sy=class extends Error{constructor(n,e){var t;super(n),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function zP(n,e,t){const i=new URL(e,n);if(t)for(const[r,s]of Object.entries(t))s!==void 0&&i.searchParams.set(r,s);return i.toString()}async function WP(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function qP(n){const e=n.fetchImpl??globalThis.fetch;return{async request({method:t,path:i,query:r,body:s,headers:a}){const o=zP(n.baseUrl,i,r),c=await WP(n.auth),l=await e(o,{method:t,headers:{...s?{"Content-Type":"application/json"}:{},...c,...a},body:s?JSON.stringify(s):void 0}),d=await l.text(),h=(l.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!l.ok){const g=h?f:void 0,v=g==null?void 0:g.error;throw new sy((v==null?void 0:v.message)??`Request failed with status ${l.status}`,{status:l.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:g})}return{status:l.status,headers:l.headers,data:f}}}}function pv(n){return n.join("")}var $P=class{constructor(n,e=""){this.client=n,this.prefix=e}async listNamespaces(n){const e=n?{parent:pv(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(n,e){const t={namespace:n.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${pv(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${pv(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${pv(n.namespace)}`}),!0}catch(e){if(e instanceof sy&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(n,e){try{return await this.createNamespace(n,e)}catch(t){if(t instanceof sy&&t.status===409)return;throw t}}};function bh(n){return n.join("")}var HP=class{constructor(n,e="",t){this.client=n,this.prefix=e,this.accessDelegation=t}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${bh(n.namespace)}/tables`})).data.identifiers}async createTable(n,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${bh(n.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(n,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${bh(n.namespace)}/tables/${n.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(n,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${bh(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(n){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${bh(n.namespace)}/tables/${n.name}`,headers:e})).data.metadata}async tableExists(n){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${bh(n.namespace)}/tables/${n.name}`,headers:e}),!0}catch(t){if(t instanceof sy&&t.status===404)return!1;throw t}}async createTableIfNotExists(n,e){try{return await this.createTable(n,e)}catch(t){if(t instanceof sy&&t.status===409)return await this.loadTable({namespace:n.namespace,name:e.name});throw t}}},VP=class{constructor(n){var i;let e="v1";n.catalogName&&(e+=`/${n.catalogName}`);const t=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=qP({baseUrl:t,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(i=n.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new $P(this.client,e),this.tableOps=new HP(this.client,e,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,e){return this.namespaceOps.createNamespace(n,e)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,e){return this.tableOps.createTable(n,e)}async updateTable(n,e){return this.tableOps.updateTable(n,e)}async dropTable(n,e){await this.tableOps.dropTable(n,e)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,e){return this.namespaceOps.createNamespaceIfNotExists(n,e)}async createTableIfNotExists(n,e){return this.tableOps.createTableIfNotExists(n,e)}};class o6{constructor(e,t={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},a6),t),this.fetch=GT(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield Ps(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qt(t))return{data:null,error:t};throw t}})}listBuckets(e){return Se(this,void 0,void 0,function*(){try{const t=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&t.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&t.set("sortOrder",e.sortOrder),e!=null&&e.search&&t.set("search",e.search);const i=t.toString(),r=i?`${this.url}/bucket?${i}`:`${this.url}/bucket`;return{data:yield ry(this.fetch,r,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield XT(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qt(t))return{data:null,error:t};throw t}})}from(e){if(!jP(e))throw new E0("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new VP({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>Se(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(t,{get(s,a){const o=s[a];return typeof o!="function"?o:(...c)=>Se(this,void 0,void 0,function*(){try{return{data:yield o.apply(s,c),error:null}}catch(l){if(i)throw l;return{data:null,error:l}}})}})}}const YT={"X-Client-Info":`storage-js/${s6}`,"Content-Type":"application/json"};class KT extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function ur(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class Jv extends KT{constructor(e,t,i){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class c6 extends KT{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var tE;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(tE||(tE={}));const O1=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),GP=()=>Response,l6=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},XP=n=>Array.from(new Float32Array(n)),YP=(n,e)=>{if(e!==void 0&&n.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${n.float32.length}`)},DU=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),KP=(n,e,t)=>Se(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(t!=null&&t.noResolveJson)){const r=n.status||500,s=n;if(typeof s.json=="function")s.json().then(a=>{const o=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||r+"";e(new Jv(DU(a),r,o))}).catch(()=>{const a=r+"",o=s.statusText||`HTTP ${r} error`;e(new Jv(o,r,a))});else{const a=r+"",o=s.statusText||`HTTP ${r} error`;e(new Jv(o,r,a))}}else e(new c6(DU(n),n))}),QP=(n,e,t,i)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return i?(l6(i)?(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(i)):r.body=i,Object.assign(Object.assign({},r),t)):r};function JP(n,e,t,i,r,s){return Se(this,void 0,void 0,function*(){return new Promise((a,o)=>{n(t,QP(e,i,r,s)).then(c=>{if(!c.ok)throw c;if(i!=null&&i.noResolveJson)return c;const l=c.headers.get("content-type");return!l||!l.includes("application/json")?{}:c.json()}).then(c=>a(c)).catch(c=>KP(c,o,i))})})}function Vr(n,e,t,i,r){return Se(this,void 0,void 0,function*(){return JP(n,"POST",e,i,r,t)})}class u6{constructor(e,t={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},YT),t),this.fetch=O1(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Se(this,void 0,void 0,function*(){try{return{data:(yield Vr(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ur(t))return{data:null,error:t};throw t}})}getIndex(e,t){return Se(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ur(i))return{data:null,error:i};throw i}})}listIndexes(e){return Se(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ur(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return Se(this,void 0,void 0,function*(){try{return{data:(yield Vr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ur(i))return{data:null,error:i};throw i}})}}class d6{constructor(e,t={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},YT),t),this.fetch=O1(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Se(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Vr(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ur(t))return{data:null,error:t};throw t}})}getVectors(e){return Se(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ur(t))return{data:null,error:t};throw t}})}listVectors(e){return Se(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Vr(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ur(t))return{data:null,error:t};throw t}})}queryVectors(e){return Se(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ur(t))return{data:null,error:t};throw t}})}deleteVectors(e){return Se(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Vr(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ur(t))return{data:null,error:t};throw t}})}}class h6{constructor(e,t={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},YT),t),this.fetch=O1(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:(yield Vr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ur(t))return{data:null,error:t};throw t}})}getBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ur(t))return{data:null,error:t};throw t}})}listBuckets(){return Se(this,arguments,void 0,function*(e={}){try{return{data:yield Vr(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ur(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:(yield Vr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ur(t))return{data:null,error:t};throw t}})}}class f6 extends h6{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new p6(this.url,this.headers,e,this.fetch)}createBucket(e){const t=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Se(this,void 0,void 0,function*(){return t.createBucket.call(this,e)})}getBucket(e){const t=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Se(this,void 0,void 0,function*(){return t.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Se(this,arguments,void 0,function*(t={}){return e.listBuckets.call(this,t)})}deleteBucket(e){const t=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Se(this,void 0,void 0,function*(){return t.deleteBucket.call(this,e)})}}class p6 extends u6{constructor(e,t,i,r){super(e,t,r),this.vectorBucketName=i}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Se(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Se(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Se(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Se(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new g6(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class g6 extends d6{constructor(e,t,i,r,s){super(e,t,s),this.vectorBucketName=i,this.indexName=r}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Se(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Se(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Se(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Se(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Se(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class ZP extends PP{constructor(e,t={},i,r){super(e,t,i,r)}from(e){return new IP(this.url,this.headers,e,this.fetch)}get vectors(){return new f6(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new o6(this.url+"/iceberg",this.headers,this.fetch)}}const ez=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:o6,StorageApiError:i6,StorageClient:ZP,StorageError:E0,StorageUnknownError:b2,StorageVectorsApiError:Jv,StorageVectorsClient:f6,StorageVectorsError:KT,get StorageVectorsErrorCode(){return tE},StorageVectorsUnknownError:c6,VectorBucketApi:h6,VectorBucketScope:p6,VectorDataApi:d6,VectorIndexApi:u6,VectorIndexScope:g6,isPlainObject:l6,isStorageError:Qt,isStorageVectorsError:ur,normalizeToFloat32:XP,resolveFetch:O1,resolveResponse:GP,validateVectorDimension:YP},Symbol.toStringTag,{value:"Module"})),tz=pg(ez);var m6={},M1={};Object.defineProperty(M1,"__esModule",{value:!0});M1.version=void 0;M1.version="2.87.1";(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.DEFAULT_REALTIME_OPTIONS=n.DEFAULT_AUTH_OPTIONS=n.DEFAULT_DB_OPTIONS=n.DEFAULT_GLOBAL_OPTIONS=n.DEFAULT_HEADERS=void 0;const e=M1;let t="";typeof Deno<"u"?t="deno":typeof document<"u"?t="web":typeof navigator<"u"&&navigator.product==="ReactNative"?t="react-native":t="node",n.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${t}/${e.version}`},n.DEFAULT_GLOBAL_OPTIONS={headers:n.DEFAULT_HEADERS},n.DEFAULT_DB_OPTIONS={schema:"public"},n.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},n.DEFAULT_REALTIME_OPTIONS={}})(m6);var y6={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.fetchWithAuth=n.resolveHeadersConstructor=n.resolveFetch=void 0;const e=r=>r?(...s)=>r(...s):(...s)=>fetch(...s);n.resolveFetch=e;const t=()=>Headers;n.resolveHeadersConstructor=t;const i=(r,s,a)=>{const o=(0,n.resolveFetch)(a),c=(0,n.resolveHeadersConstructor)();return async(l,d)=>{var h;const f=(h=await s())!==null&&h!==void 0?h:r;let g=new c(d==null?void 0:d.headers);return g.has("apikey")||g.set("apikey",r),g.has("Authorization")||g.set("Authorization",`Bearer ${f}`),o(l,Object.assign(Object.assign({},d),{headers:g}))}};n.fetchWithAuth=i})(y6);var Ql={};Object.defineProperty(Ql,"__esModule",{value:!0});Ql.isBrowser=void 0;Ql.uuid=nz;Ql.ensureTrailingSlash=b6;Ql.applySettingDefaults=rz;Ql.validateSupabaseUrl=sz;function nz(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var e=Math.random()*16|0,t=n=="x"?e:e&3|8;return t.toString(16)})}function b6(n){return n.endsWith("/")?n:n+"/"}const iz=()=>typeof window<"u";Ql.isBrowser=iz;function rz(n,e){var t,i;const{db:r,auth:s,realtime:a,global:o}=n,{db:c,auth:l,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},c),r),auth:Object.assign(Object.assign({},l),s),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),o),{headers:Object.assign(Object.assign({},(t=h==null?void 0:h.headers)!==null&&t!==void 0?t:{}),(i=o==null?void 0:o.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return n.accessToken?f.accessToken=n.accessToken:delete f.accessToken,f}function sz(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(b6(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var B1={};const v6="2.87.1",Rh=30*1e3,nE=3,E_=nE*Rh,az="http://localhost:9999",oz="supabase.auth.token",cz={"X-Client-Info":`gotrue-js/${v6}`},iE="X-Supabase-Api-Version",x6={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},lz=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,uz=10*60*1e3;let ag=class extends Error{constructor(e,t,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=i}};function ke(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}let w6=class extends ag{constructor(e,t,i){super(e,t,i),this.name="AuthApiError",this.status=t,this.code=i}};function _6(n){return ke(n)&&n.name==="AuthApiError"}let Nc=class extends ag{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}},pc=class extends ag{constructor(e,t,i,r){super(e,i,r),this.name=t,this.status=i}},Yi=class extends pc{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function D6(n){return ke(n)&&n.name==="AuthSessionMissingError"}let hu=class extends pc{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},sm=class extends pc{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},am=class extends pc{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function A6(n){return ke(n)&&n.name==="AuthImplicitGrantRedirectError"}let rE=class extends pc{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},v2=class extends pc{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}};function Zv(n){return ke(n)&&n.name==="AuthRetryableFetchError"}let sE=class extends pc{constructor(e,t,i){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=i}};function dz(n){return ke(n)&&n.name==="AuthWeakPasswordError"}let x2=class extends pc{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const w2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),AU=` 	
\r=`.split(""),hz=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<AU.length;e+=1)n[AU[e].charCodeAt(0)]=-2;for(let e=0;e<w2.length;e+=1)n[w2[e].charCodeAt(0)]=e;return n})();function EU(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(w2[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(w2[i]),e.queuedBits-=6}}function E6(n,e,t){const i=hz[n];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function SU(n){const e=[],t=a=>{e.push(String.fromCodePoint(a))},i={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},s=a=>{gz(a,i,t)};for(let a=0;a<n.length;a+=1)E6(n.charCodeAt(a),r,s);return e.join("")}function fz(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function pz(n,e){for(let t=0;t<n.length;t+=1){let i=n.charCodeAt(t);if(i>55295&&i<=56319){const r=(i-55296)*1024&65535;i=(n.charCodeAt(t+1)-56320&65535|r)+65536,t+=1}fz(i,e)}}function gz(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let i=1;i<6;i+=1)if(!(n>>7-i&1)){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function bf(n){const e=[],t={queue:0,queuedBits:0},i=r=>{e.push(r)};for(let r=0;r<n.length;r+=1)E6(n.charCodeAt(r),t,i);return new Uint8Array(e)}function mz(n){const e=[];return pz(n,t=>e.push(t)),new Uint8Array(e)}function Du(n){const e=[],t={queue:0,queuedBits:0},i=r=>{e.push(r)};return n.forEach(r=>EU(r,t,i)),EU(null,t,i),e.join("")}function yz(n){return Math.round(Date.now()/1e3)+n}function bz(){return Symbol("auth-callback")}const Jn=()=>typeof window<"u"&&typeof document<"u",ru={tested:!1,writable:!1},S6=()=>{if(!Jn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ru.tested)return ru.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),ru.tested=!0,ru.writable=!0}catch{ru.tested=!0,ru.writable=!1}return ru.writable};function vz(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,s)=>{e[s]=r})}catch{}return t.searchParams.forEach((i,r)=>{e[r]=i}),e}const T6=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),xz=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Fh=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},su=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Kn=async(n,e)=>{await n.removeItem(e)};class L1{constructor(){this.promise=new L1.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}L1.promiseConstructor=Promise;function S_(n){const e=n.split(".");if(e.length!==3)throw new x2("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!lz.test(e[i]))throw new x2("JWT not in base64url format");return{header:JSON.parse(SU(e[0])),payload:JSON.parse(SU(e[1])),signature:bf(e[2]),raw:{header:e[0],payload:e[1]}}}async function wz(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function _z(n,e){return new Promise((i,r)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await n(s);if(!e(s,null,a)){i(a);return}}catch(a){if(!e(s,a)){r(a);return}}})()})}function Dz(n){return("0"+n.toString(16)).substr(-2)}function Az(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=t.length;let r="";for(let s=0;s<56;s++)r+=t.charAt(Math.floor(Math.random()*i));return r}return crypto.getRandomValues(e),Array.from(e,Dz).join("")}async function Ez(n){const t=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(i);return Array.from(r).map(s=>String.fromCharCode(s)).join("")}async function Sz(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await Ez(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vh(n,e,t=!1){const i=Az();let r=i;t&&(r+="/PASSWORD_RECOVERY"),await Fh(n,`${e}-code-verifier`,r);const s=await Sz(i);return[s,i===s?"plain":"s256"]}const Tz=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Cz(n){const e=n.headers.get(iE);if(!e||!e.match(Tz))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function kz(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function Uz(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Nz=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function xh(n){if(!Nz.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function T_(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const i=t.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function jz(n,e){return new Proxy(n,{get:(t,i,r)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const s=i.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,i,r)}return!e.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,i,r)}})}function TU(n){return JSON.parse(JSON.stringify(n))}const fu=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Rz=[502,503,504];async function CU(n){var e;if(!xz(n))throw new v2(fu(n),0);if(Rz.includes(n.status))throw new v2(fu(n),n.status);let t;try{t=await n.json()}catch(s){throw new Nc(fu(s),s)}let i;const r=Cz(n);if(r&&r.getTime()>=x6["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?i=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(i=t.error_code),i){if(i==="weak_password")throw new sE(fu(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new Yi}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new sE(fu(t),n.status,t.weak_password.reasons);throw new w6(fu(t),n.status||500,i)}const Fz=(n,e,t,i)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),t))};async function Oe(n,e,t,i){var r;const s=Object.assign({},i==null?void 0:i.headers);s[iE]||(s[iE]=x6["2024-01-01"].name),i!=null&&i.jwt&&(s.Authorization=`Bearer ${i.jwt}`);const a=(r=i==null?void 0:i.query)!==null&&r!==void 0?r:{};i!=null&&i.redirectTo&&(a.redirect_to=i.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await Oz(n,e,t+o,{headers:s,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(c):{data:Object.assign({},c),error:null}}async function Oz(n,e,t,i,r,s){const a=Fz(e,i,r,s);let o;try{o=await n(t,Object.assign({},a))}catch(c){throw console.error(c),new v2(fu(c),0)}if(o.ok||await CU(o),i!=null&&i.noResolveJson)return o;try{return await o.json()}catch(c){await CU(c)}}function Bs(n){var e;let t=null;Lz(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=yz(n.expires_in)));const i=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:i},error:null}}function kU(n){const e=Bs(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,i)=>t&&typeof i=="string",!0)&&(e.data.weak_password=n.weak_password),e}function jc(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Mz(n){return{data:n,error:null}}function Bz(n){const{action_link:e,email_otp:t,hashed_token:i,redirect_to:r,verification_type:s}=n,a=Dg(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:i,redirect_to:r,verification_type:s},c=Object.assign({},a);return{data:{properties:o,user:c},error:null}}function UU(n){return n}function Lz(n){return n.access_token&&n.refresh_token&&n.expires_in}const ex=["global","local","others"];let QT=class{constructor({url:e="",headers:t={},fetch:i}){this.url=e,this.headers=t,this.fetch=T6(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=ex[0]){if(ex.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ex.join(", ")}`);try{return await Oe(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ke(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,t={}){try{return await Oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:jc})}catch(i){if(ke(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:t}=e,i=Dg(e,["options"]),r=Object.assign(Object.assign({},i),t);return"newEmail"in i&&(r.new_email=i==null?void 0:i.newEmail,delete r.newEmail),await Oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Bz,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ke(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Oe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:jc})}catch(t){if(ke(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,i,r,s,a,o,c;try{const l={nextPage:null,lastPage:0,total:0},d=await Oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(s=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:""},xform:UU});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(v.split(";")[1].split("=")[1]);l[`${x}Page`]=y}),l.total=parseInt(f)),{data:Object.assign(Object.assign({},h),l),error:null}}catch(l){if(ke(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){xh(e);try{return await Oe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:jc})}catch(t){if(ke(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){xh(e);try{return await Oe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:jc})}catch(i){if(ke(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,t=!1){xh(e);try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:jc})}catch(i){if(ke(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){xh(e.userId);try{const{data:t,error:i}=await Oe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:i}}catch(t){if(ke(t))return{data:null,error:t};throw t}}async _deleteFactor(e){xh(e.userId),xh(e.id);try{return{data:await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ke(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,i,r,s,a,o,c;try{const l={nextPage:null,lastPage:0,total:0},d=await Oe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(s=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:""},xform:UU});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(v.split(";")[1].split("=")[1]);l[`${x}Page`]=y}),l.total=parseInt(f)),{data:Object.assign(Object.assign({},h),l),error:null}}catch(l){if(ke(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await Oe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ke(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Oe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ke(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Oe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ke(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(e){try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(ke(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Oe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ke(t))return{data:null,error:t};throw t}}};function NU(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const pu={debug:!!(globalThis&&S6()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class JT extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let C6=class extends JT{};class Iz extends JT{}async function k6(n,e,t){pu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),pu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async r=>{if(r){pu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,r.name);try{return await t()}finally{pu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,r.name)}}else{if(e===0)throw pu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new C6(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(pu.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}const jU={};async function Pz(n,e,t){var i;const r=(i=jU[n])!==null&&i!==void 0?i:Promise.resolve(),s=Promise.race([r.catch(()=>null),e>=0?new Promise((a,o)=>{setTimeout(()=>{o(new Iz(`Acquring process lock with name "${n}" timed out`))},e)}):null].filter(a=>a)).catch(a=>{if(a&&a.isAcquireTimeout)throw a;return null}).then(async()=>await t());return jU[n]=s.catch(async a=>{if(a&&a.isAcquireTimeout)return await r,null;throw a}),await s}function zz(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function U6(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function Wz(n){return parseInt(n,16)}function qz(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function $z(n){var e;const{chainId:t,domain:i,expirationTime:r,issuedAt:s=new Date,nonce:a,notBefore:o,requestId:c,resources:l,scheme:d,uri:h,version:f}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const g=U6(n.address),v=d?`${d}://${i}`:i,y=n.statement?`${n.statement}
`:"",x=`${v} wants you to sign in with your Ethereum account:
${g}

${y}`;let m=`URI: ${h}
Version: ${f}
Chain ID: ${t}${a?`
Nonce: ${a}`:""}
Issued At: ${s.toISOString()}`;if(r&&(m+=`
Expiration Time: ${r.toISOString()}`),o&&(m+=`
Not Before: ${o.toISOString()}`),c&&(m+=`
Request ID: ${c}`),l){let b=`
Resources:`;for(const w of l){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);b+=`
- ${w}`}m+=b}return`${x}
${m}`}class wn extends Error{constructor({message:e,code:t,cause:i,name:r}){var s;super(e,{cause:i}),this.__isWebAuthnError=!0,this.name=(s=r??(i instanceof Error?i.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=t}}class _2 extends wn{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function Hz({error:n,options:e}){var t,i,r;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new wn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=s.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new wn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new wn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new wn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new wn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new wn({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return s.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new wn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new wn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const a=window.location.hostname;if(N6(a)){if(s.rp.id!==a)return new wn({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new wn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new wn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new wn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new wn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function Vz({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new wn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new wn({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const i=window.location.hostname;if(N6(i)){if(t.rpId!==i)return new wn({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new wn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new wn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new wn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class Gz{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Xz=new Gz;function Yz(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:i}=n,r=Dg(n,["challenge","user","excludeCredentials"]),s=bf(e).buffer,a=Object.assign(Object.assign({},t),{id:bf(t.id).buffer}),o=Object.assign(Object.assign({},r),{challenge:s,user:a});if(i&&i.length>0){o.excludeCredentials=new Array(i.length);for(let c=0;c<i.length;c++){const l=i[c];o.excludeCredentials[c]=Object.assign(Object.assign({},l),{id:bf(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return o}function Kz(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,i=Dg(n,["challenge","allowCredentials"]),r=bf(e).buffer,s=Object.assign(Object.assign({},i),{challenge:r});if(t&&t.length>0){s.allowCredentials=new Array(t.length);for(let a=0;a<t.length;a++){const o=t[a];s.allowCredentials[a]=Object.assign(Object.assign({},o),{id:bf(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return s}function Qz(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:Du(new Uint8Array(n.response.attestationObject)),clientDataJSON:Du(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Jz(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,i=n.getClientExtensionResults(),r=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Du(new Uint8Array(r.authenticatorData)),clientDataJSON:Du(new Uint8Array(r.clientDataJSON)),signature:Du(new Uint8Array(r.signature)),userHandle:r.userHandle?Du(new Uint8Array(r.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function N6(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function RU(){var n,e;return!!(Jn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Zz(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new _2("Browser returned unexpected credential type",e)}:{data:null,error:new _2("Empty credential response",e)}}catch(e){return{data:null,error:Hz({error:e,options:n})}}}async function eW(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new _2("Browser returned unexpected credential type",e)}:{data:null,error:new _2("Empty credential response",e)}}catch(e){return{data:null,error:Vz({error:e,options:n})}}}const tW={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},nW={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function D2(...n){const e=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),t=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),i={};for(const r of n)if(r)for(const s in r){const a=r[s];if(a!==void 0)if(Array.isArray(a))i[s]=a;else if(t(a))i[s]=a;else if(e(a)){const o=i[s];e(o)?i[s]=D2(o,a):i[s]=D2(a)}else i[s]=a}return i}function iW(n,e){return D2(tW,n,e||{})}function rW(n,e){return D2(nW,n,e||{})}class sW{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:i,signal:r},s){try{const{data:a,error:o}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!a)return{data:null,error:o};const c=r??Xz.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:l}=a.webauthn.credential_options.publicKey;l.name||(l.name=`${l.id}:${i}`),l.displayName||(l.displayName=l.name)}switch(a.webauthn.type){case"create":{const l=iW(a.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:d,error:h}=await Zz({publicKey:l,signal:c});return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const l=rW(a.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:d,error:h}=await eW(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:l,signal:c}));return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(a){return ke(a)?{data:null,error:a}:{data:null,error:new Nc("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:t,webauthn:i}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:i})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},s){if(!t)return{data:null,error:new ag("rpId is required for WebAuthn authentication")};try{if(!RU())return{data:null,error:new Nc("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:i},signal:r},{request:s});if(!a)return{data:null,error:o};const{webauthn:c}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:c.type,rpId:t,rpOrigins:i,credential_response:c.credential_response}})}catch(a){return ke(a)?{data:null,error:a}:{data:null,error:new Nc("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},s){if(!t)return{data:null,error:new ag("rpId is required for WebAuthn registration")};try{if(!RU())return{data:null,error:new Nc("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:o};const{data:c,error:l}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:t,rpOrigins:i},signal:r},{create:s});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:t,rpOrigins:i,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:l}}catch(a){return ke(a)?{data:null,error:a}:{data:null,error:new Nc("Unexpected error in register",a)}}}}zz();const aW={url:az,storageKey:oz,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:cz,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function FU(n,e,t){return await t()}const wh={};let ZT=class aE{get jwks(){var e,t;return(t=(e=wh[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){wh[this.storageKey]=Object.assign(Object.assign({},wh[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=wh[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){wh[this.storageKey]=Object.assign(Object.assign({},wh[this.storageKey]),{cachedAt:e})}constructor(e){var t,i,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},aW),e);if(this.storageKey=s.storageKey,this.instanceID=(t=aE.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,aE.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Jn()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new QT({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=T6(s.fetch),this.lock=s.lock||FU,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:this.persistSession&&Jn()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=k6:this.lock=FU,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new sW(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:S6()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=NU(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=NU(this.memoryStorage)),Jn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${v6}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},i="none";if(Jn()&&(t=vz(window.location.href),this._isImplicitGrantCallback(t)?i="implicit":await this._isPKCECallback(t)&&(i="pkce")),Jn()&&this.detectSessionInUrl&&i!=="none"){const{data:r,error:s}=await this._getSessionFromURL(t,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),A6(s)){const c=(e=s.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:o}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ke(t)?this._returnResult({error:t}):this._returnResult({error:new Nc("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,i,r;try{const s=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:Bs}),{data:a,error:o}=s;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const c=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:l,session:c},error:null})}catch(s){if(ke(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var t,i,r;try{let s;if("email"in e){const{email:d,password:h,options:f}=e;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await vh(this.storage,this.storageKey)),s=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:g,code_challenge_method:v},xform:Bs})}else if("phone"in e){const{phone:d,password:h,options:f}=e;s=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(i=f==null?void 0:f.data)!==null&&i!==void 0?i:{},channel:(r=f==null?void 0:f.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Bs})}else throw new sm("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return await Kn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const c=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:l,session:c},error:null})}catch(s){if(await Kn(this.storage,`${this.storageKey}-code-verifier`),ke(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:a,options:o}=e;t=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:kU})}else if("phone"in e){const{phone:s,password:a,options:o}=e;t=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:kU})}else throw new sm("You must provide either an email or phone number and a password");const{data:i,error:r}=t;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!i||!i.session||!i.user){const s=new hu;return this._returnResult({data:{user:null,session:null},error:s})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:r})}catch(t){if(ke(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,i,r,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,i,r,s,a,o,c,l,d,h,f;let g,v;if("message"in e)g=e.message,v=e.signature;else{const{chain:y,wallet:x,statement:m,options:b}=e;let w;if(Jn())if(typeof x=="object")w=x;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")w=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=x}const _=new URL((t=b==null?void 0:b.url)!==null&&t!==void 0?t:window.location.href),D=await w.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const A=U6(D[0]);let E=(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!E){const I=await w.request({method:"eth_chainId"});E=Wz(I)}const F={domain:_.host,address:A,statement:m,uri:_.href,version:"1",chainId:E,nonce:(r=b==null?void 0:b.signInWithEthereum)===null||r===void 0?void 0:r.nonce,issuedAt:(a=(s=b==null?void 0:b.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=b==null?void 0:b.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(c=b==null?void 0:b.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(l=b==null?void 0:b.signInWithEthereum)===null||l===void 0?void 0:l.requestId,resources:(d=b==null?void 0:b.signInWithEthereum)===null||d===void 0?void 0:d.resources};g=$z(F),v=await w.request({method:"personal_sign",params:[qz(g),A]})}try{const{data:y,error:x}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:v},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Bs});if(x)throw x;if(!y||!y.session||!y.user){const m=new hu;return this._returnResult({data:{user:null,session:null},error:m})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:x})}catch(y){if(ke(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(e){var t,i,r,s,a,o,c,l,d,h,f,g;let v,y;if("message"in e)v=e.message,y=e.signature;else{const{chain:x,wallet:m,statement:b,options:w}=e;let _;if(Jn())if(typeof m=="object")_=m;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))_=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=m}const D=new URL((t=w==null?void 0:w.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in _&&_.signIn){const A=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),b?{statement:b}:null));let E;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")E=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)E=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)v=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),y=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${D.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(r=(i=w==null?void 0:w.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((s=w==null?void 0:w.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const A=await _.signMessage(new TextEncoder().encode(v),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=A}}try{const{data:x,error:m}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Du(y)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Bs});if(m)throw m;if(!x||!x.session||!x.user){const b=new hu;return this._returnResult({data:{user:null,session:null},error:b})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:m})}catch(x){if(ke(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(e){const t=await su(this.storage,`${this.storageKey}-code-verifier`),[i,r]=(t??"").split("/");try{const{data:s,error:a}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:Bs});if(await Kn(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){const o=new hu;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:r??null}),error:a})}catch(s){if(await Kn(this.storage,`${this.storageKey}-code-verifier`),ke(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:t,provider:i,token:r,access_token:s,nonce:a}=e,o=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:r,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Bs}),{data:c,error:l}=o;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!c||!c.session||!c.user){const d=new hu;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:l})}catch(t){if(ke(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,i,r,s,a;try{if("email"in e){const{email:o,options:c}=e;let l=null,d=null;this.flowType==="pkce"&&([l,d]=await vh(this.storage,this.storageKey));const{error:h}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:o,options:c}=e,{data:l,error:d}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:d})}throw new sm("You must provide either an email or phone number.")}catch(o){if(await Kn(this.storage,`${this.storageKey}-code-verifier`),ke(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(e){var t,i;try{let r,s;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:a,error:o}=await Oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:Bs});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,l=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:l,session:c},error:null})}catch(r){if(ke(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(e){var t,i,r,s,a;try{let o=null,c=null;this.flowType==="pkce"&&([o,c]=await vh(this.storage,this.storageKey));const l=await Oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&i!==void 0?i:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:c}),headers:this.headers,xform:Mz});return!((s=l.data)===null||s===void 0)&&s.url&&Jn()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(o){if(await Kn(this.storage,`${this.storageKey}-code-verifier`),ke(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:i}=e;if(i)throw i;if(!t)throw new Yi;const{error:r}=await Oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(e){if(ke(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:i,type:r,options:s}=e,{error:a}=await Oe(this.fetch,"POST",t,{headers:this.headers,body:{email:i,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:i,type:r,options:s}=e,{data:a,error:o}=await Oe(this.fetch,"POST",t,{headers:this.headers,body:{phone:i,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o})}throw new sm("You must provide either an email or phone number and a type")}catch(t){if(ke(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await i,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=t();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await su(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<E_:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const a=await su(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=T_()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=jz(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(-1,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:jc}):await this._useSession(async t=>{var i,r,s;const{data:a,error:o}=t;if(o)throw o;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Yi}:await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0,xform:jc})})}catch(t){if(ke(t))return D6(t)&&(await this._removeSession(),await Kn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async i=>{const{data:r,error:s}=i;if(s)throw s;if(!r.session)throw new Yi;const a=r.session;let o=null,c=null;this.flowType==="pkce"&&e.email!=null&&([o,c]=await vh(this.storage,this.storageKey));const{data:l,error:d}=await Oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:c}),jwt:a.access_token,xform:jc});if(d)throw d;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(i){if(await Kn(this.storage,`${this.storageKey}-code-verifier`),ke(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Yi;const t=Date.now()/1e3;let i=t,r=!0,s=null;const{payload:a}=S_(e.access_token);if(a.exp&&(i=a.exp,r=i<=t),r){const{data:o,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:c}=await this._getUser(e.access_token);if(c)throw c;s={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:i-t,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(t){if(ke(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var i;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(i=a.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new Yi;const{data:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(ke(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Jn())throw new am("No browser detected.");if(e.error||e.error_description||e.error_code)throw new am(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new rE("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new am("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new rE("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:r,access_token:s,refresh_token:a,expires_in:o,expires_at:c,token_type:l}=e;if(!s||!o||!a||!l)throw new am("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(o);let f=d+h;c&&(f=parseInt(c));const g=f-d;g*1e3<=Rh&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const v=f-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,d);const{data:y,error:x}=await this._getUser(s);if(x)throw x;const m={provider_token:i,provider_refresh_token:r,access_token:s,expires_in:h,expires_at:f,refresh_token:a,token_type:l,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:m,redirectType:e.type},error:null})}catch(i){if(ke(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await su(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var i;const{data:r,error:s}=t;if(s)return this._returnResult({error:s});const a=(i=r.session)===null||i===void 0?void 0:i.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(_6(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return e!=="others"&&(await this._removeSession(),await Kn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=bz(),i={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async t=>{var i,r;try{const{data:{session:s},error:a}=t;if(a)throw a;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let i=null,r=null;this.flowType==="pkce"&&([i,r]=await vh(this.storage,this.storageKey,!0));try{return await Oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(await Kn(this.storage,`${this.storageKey}-code-verifier`),ke(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:t,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(ke(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:i,error:r}=await this._useSession(async s=>{var a,o,c,l,d;const{data:h,error:f}=s;if(f)throw f;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Oe(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&d!==void 0?d:void 0})});if(r)throw r;return Jn()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:e.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(ke(i))return this._returnResult({data:{provider:e.provider,url:null},error:i});throw i}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var i;try{const{error:r,data:{session:s}}=t;if(r)throw r;const{options:a,provider:o,token:c,access_token:l,nonce:d}=e,h=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=s==null?void 0:s.access_token)!==null&&i!==void 0?i:void 0,body:{provider:o,id_token:c,access_token:l,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Bs}),{data:f,error:g}=h;return g?this._returnResult({data:{user:null,session:null},error:g}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new hu}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:g}))}catch(r){if(await Kn(this.storage,`${this.storageKey}-code-verifier`),ke(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var i,r;const{data:s,error:a}=t;if(a)throw a;return await Oe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(ke(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await _z(async r=>(r>0&&await wz(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await Oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Bs})),(r,s)=>{const a=200*Math.pow(2,r);return s&&Zv(s)&&Date.now()+a-i<Rh})}catch(i){if(this._debug(t,"error",i),ke(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",i),Jn()&&!t.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,t;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const r=await su(this.storage,this.storageKey);if(r&&this.userStorage){let a=await su(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:r.user},await Fh(this.userStorage,this.storageKey+"-user",a)),r.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:T_()}else if(r&&!r.user&&!r.user){const a=await su(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(r.user=a.user,await Kn(this.storage,this.storageKey+"-user"),await Fh(this.storage,this.storageKey,r)):r.user=T_()}if(this._debug(i,"session from storage",r),!this._isValidSession(r)){this._debug(i,"session is not valid"),r!==null&&await this._removeSession();return}const s=((t=r.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<E_;if(this._debug(i,`session has${s?"":" not"} expired with margin of ${E_}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),Zv(a)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(r.access_token);!o&&(a!=null&&a.user)?(r.user=a.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(i,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(i,"error",r),console.error(r);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var t,i;if(!e)throw new Yi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new L1;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new Yi;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={data:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(r,"error",s),ke(s)){const a={data:null,error:s};return Zv(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,i=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(c){s.push(c)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Kn(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),i=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&t.user&&await Fh(this.userStorage,this.storageKey+"-user",{user:t.user});const r=Object.assign({},t);delete r.user;const s=TU(r);await Fh(this.storage,this.storageKey,s)}else{const r=TU(t);await Fh(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Kn(this.storage,this.storageKey),await Kn(this.storage,this.storageKey+"-code-verifier"),await Kn(this.storage,this.storageKey+"-user"),this.userStorage&&await Kn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Jn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Rh);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:i}}=t;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((i.expires_at*1e3-e)/Rh);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Rh}ms, refresh threshold is ${nE} ticks`),r<=nE&&await this._callRefreshToken(i.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof JT)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Jn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,i){const r=[`provider=${encodeURIComponent(t)}`];if(i!=null&&i.redirectTo&&r.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&r.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[s,a]=await vh(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});r.push(o.toString())}if(i!=null&&i.queryParams){const s=new URLSearchParams(i.queryParams);r.push(s.toString())}return i!=null&&i.skipBrowserRedirect&&r.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var i;const{data:r,error:s}=t;return s?this._returnResult({data:null,error:s}):await Oe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(ke(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var i,r;const{data:s,error:a}=t;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:l}=await Oe(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});return l?this._returnResult({data:null,error:l}):(e.factorType==="totp"&&c.type==="totp"&&(!((r=c==null?void 0:c.totp)===null||r===void 0)&&r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(t){if(ke(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:r,error:s}=t;if(s)return this._returnResult({data:null,error:s});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Qz(e.webauthn.credential_response):Jz(e.webauthn.credential_response)})}:{code:e.code}),{data:o,error:c}=await Oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:c}))})}catch(t){if(ke(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:r,error:s}=t;if(s)return this._returnResult({data:null,error:s});const a=await Oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});if(a.error)return a;const{data:o}=a;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Yz(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Kz(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(ke(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:i}=await this._challenge({factorId:e.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:i}=await this.getUser();if(i)return{data:null,error:i};const r={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])r.all.push(s),s.status==="verified"&&r[s.factor_type].push(s);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:i},error:r}=await this.getSession();if(r)return this._returnResult({data:null,error:r});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=S_(i.access_token);let a=null;s.aal&&(a=s.aal);let o=a;((t=(e=i.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(o="aal2");const l=s.amr||[];return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:l},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:i},error:r}=t;return r?this._returnResult({data:null,error:r}):i?await Oe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Yi})})}catch(t){if(ke(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async i=>{const{data:{session:r},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!r)return this._returnResult({data:null,error:new Yi});const a=await Oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&Jn()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(i){if(ke(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(e,t){try{return await this._useSession(async i=>{const{data:{session:r},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!r)return this._returnResult({data:null,error:new Yi});const a=await Oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&Jn()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(i){if(ke(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:i}=e;return i?this._returnResult({data:null,error:i}):t?await Oe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new Yi})})}catch(e){if(ke(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:i},error:r}=t;return r?this._returnResult({data:null,error:r}):i?(await Oe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Yi})})}catch(t){if(ke(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let i=t.keys.find(o=>o.kid===e);if(i)return i;const r=Date.now();if(i=this.jwks.keys.find(o=>o.kid===e),i&&this.jwks_cached_at+uz>r)return i;const{data:s,error:a}=await Oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=r,i=s.keys.find(o=>o.kid===e),!i)?null:i}async getClaims(e,t={}){try{let i=e;if(!i){const{data:g,error:v}=await this.getSession();if(v||!g.session)return this._returnResult({data:null,error:v});i=g.session.access_token}const{header:r,payload:s,signature:a,raw:{header:o,payload:c}}=S_(i);t!=null&&t.allowExpired||kz(s.exp);const l=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!l){const{error:g}=await this.getUser(i);if(g)throw g;return{data:{claims:s,header:r,signature:a},error:null}}const d=Uz(r.alg),h=await crypto.subtle.importKey("jwk",l,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,mz(`${o}.${c}`)))throw new x2("Invalid JWT signature");return{data:{claims:s,header:r,signature:a},error:null}}catch(i){if(ke(i))return this._returnResult({data:null,error:i});throw i}}};ZT.nextInstanceID={};const oW=QT,cW=ZT,lW=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:oW,AuthApiError:w6,AuthClient:cW,AuthError:ag,AuthImplicitGrantRedirectError:am,AuthInvalidCredentialsError:sm,AuthInvalidJwtError:x2,AuthInvalidTokenResponseError:hu,AuthPKCEGrantCodeExchangeError:rE,AuthRetryableFetchError:v2,AuthSessionMissingError:Yi,AuthUnknownError:Nc,AuthWeakPasswordError:sE,CustomAuthError:pc,GoTrueAdminApi:QT,GoTrueClient:ZT,NavigatorLockAcquireTimeoutError:C6,SIGN_OUT_SCOPES:ex,isAuthApiError:_6,isAuthError:ke,isAuthImplicitGrantRedirectError:A6,isAuthRetryableFetchError:Zv,isAuthSessionMissingError:D6,isAuthWeakPasswordError:dz,lockInternals:pu,navigatorLock:k6,processLock:Pz},Symbol.toStringTag,{value:"Module"})),j6=pg(lW);Object.defineProperty(B1,"__esModule",{value:!0});B1.SupabaseAuthClient=void 0;const uW=j6;class dW extends uW.AuthClient{constructor(e){super(e)}}B1.SupabaseAuthClient=dW;Object.defineProperty(p2,"__esModule",{value:!0});const hW=BR,fW=Ei,pW=n6,gW=tz,gv=m6,mW=y6,OU=Ql,yW=B1;let bW=class{constructor(e,t,i){var r,s,a;this.supabaseUrl=e,this.supabaseKey=t;const o=(0,OU.validateSupabaseUrl)(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,l={db:gv.DEFAULT_DB_OPTIONS,realtime:gv.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},gv.DEFAULT_AUTH_OPTIONS),{storageKey:c}),global:gv.DEFAULT_GLOBAL_OPTIONS},d=(0,OU.applySettingDefaults)(i??{},l);this.storageKey=(r=d.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=(0,mW.fetchWithAuth)(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new fW.PostgrestClient(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new gW.StorageClient(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new hW.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,i)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:i}=await this.auth.getSession();return(t=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:r,userStorage:s,storageKey:a,flowType:o,lock:c,debug:l,throwOnError:d},h,f){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new yW.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),h),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:r,userStorage:s,flowType:o,lock:c,debug:l,throwOnError:d,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new pW.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,i)=>{this._handleTokenChanged(t,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(e,t,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};p2.default=bW;(function(n){var e=ze&&ze.__createBinding||(Object.create?function(d,h,f,g){g===void 0&&(g=f);var v=Object.getOwnPropertyDescriptor(h,f);(!v||("get"in v?!h.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return h[f]}}),Object.defineProperty(d,g,v)}:function(d,h,f,g){g===void 0&&(g=f),d[g]=h[f]}),t=ze&&ze.__exportStar||function(d,h){for(var f in d)f!=="default"&&!Object.prototype.hasOwnProperty.call(h,f)&&e(h,d,f)},i=ze&&ze.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(n,"__esModule",{value:!0}),n.createClient=n.SupabaseClient=n.FunctionRegion=n.FunctionsError=n.FunctionsRelayError=n.FunctionsFetchError=n.FunctionsHttpError=n.PostgrestError=void 0;const r=i(p2);t(j6,n);var s=Ei;Object.defineProperty(n,"PostgrestError",{enumerable:!0,get:function(){return s.PostgrestError}});var a=BR;Object.defineProperty(n,"FunctionsHttpError",{enumerable:!0,get:function(){return a.FunctionsHttpError}}),Object.defineProperty(n,"FunctionsFetchError",{enumerable:!0,get:function(){return a.FunctionsFetchError}}),Object.defineProperty(n,"FunctionsRelayError",{enumerable:!0,get:function(){return a.FunctionsRelayError}}),Object.defineProperty(n,"FunctionsError",{enumerable:!0,get:function(){return a.FunctionsError}}),Object.defineProperty(n,"FunctionRegion",{enumerable:!0,get:function(){return a.FunctionRegion}}),t(n6,n);var o=p2;Object.defineProperty(n,"SupabaseClient",{enumerable:!0,get:function(){return i(o).default}});const c=(d,h,f)=>new r.default(d,h,f);n.createClient=c;function l(){if(typeof window<"u"||typeof process>"u")return!1;const d=process.version;if(d==null)return!1;const h=d.match(/^v(\d+)\./);return h?parseInt(h[1],10)<=18:!1}l()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})($T);const R6=c4($T),vW=oI({__proto__:null,default:R6},[$T]),{PostgrestError:LK,FunctionsHttpError:IK,FunctionsFetchError:PK,FunctionsRelayError:zK,FunctionsError:WK,FunctionRegion:qK,SupabaseClient:$K,createClient:xW,GoTrueAdminApi:HK,GoTrueClient:VK,AuthAdminApi:GK,AuthClient:XK,navigatorLock:YK,NavigatorLockAcquireTimeoutError:KK,lockInternals:QK,processLock:JK,SIGN_OUT_SCOPES:ZK,AuthError:eQ,AuthApiError:tQ,AuthUnknownError:nQ,CustomAuthError:iQ,AuthSessionMissingError:rQ,AuthInvalidTokenResponseError:sQ,AuthInvalidCredentialsError:aQ,AuthImplicitGrantRedirectError:oQ,AuthPKCEGrantCodeExchangeError:cQ,AuthRetryableFetchError:lQ,AuthWeakPasswordError:uQ,AuthInvalidJwtError:dQ,isAuthError:hQ,isAuthApiError:fQ,isAuthSessionMissingError:pQ,isAuthImplicitGrantRedirectError:gQ,isAuthRetryableFetchError:mQ,isAuthWeakPasswordError:yQ,RealtimePresence:bQ,RealtimeChannel:vQ,RealtimeClient:xQ,REALTIME_LISTEN_TYPES:wQ,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:_Q,REALTIME_PRESENCE_LISTEN_EVENTS:DQ,REALTIME_SUBSCRIBE_STATES:AQ,REALTIME_CHANNEL_STATES:EQ}=R6||vW,wW="https://uhlgppoylqeiirpfhhqm.supabase.co",_W="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVobGdwcG95bHFlaWlycGZoaHFtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzMDI4OTEsImV4cCI6MjA4MDg3ODg5MX0.DCW8hcNJ-6Aq_nxt05IU6ogOb69V-oqUNnNhnKiaSvw",de=xW(wW,_W,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}});class DW{constructor(){this.currentUser=null,this.session=null,this.userProfile=null,this._loadSession()}async _loadSession(){try{const{data:{session:e}}=await de.auth.getSession();this.session=e,this.currentUser=(e==null?void 0:e.user)||null,this.currentUser&&await this._loadUserProfile()}catch(e){console.error("Failed to load session:",e)}}async _loadUserProfile(){try{const{data:e,error:t}=await de.from("user_profiles").select("*").eq("id",this.currentUser.id).single();if(t&&t.code!=="PGRST116")throw t;if(t&&t.code==="PGRST116"){console.log("  User profile not found, will be created on first update"),this.userProfile=null;return}this.userProfile=e}catch(e){console.error("Failed to load user profile:",e),this.userProfile=null}}async signUp(e,t,i={}){try{const{data:r,error:s}=await de.auth.signUp({email:e,password:t});if(s)return{user:null,session:null,error:s};if(this.currentUser=r.user,this.session=r.session,r.user&&i)try{console.log(" Setting up user profile with data:",i),await new Promise(c=>setTimeout(c,500));const{data:a,error:o}=await de.from("user_profiles").select("id").eq("id",r.user.id).single();if(a){console.log(" Profile exists from trigger, updating with user data");const{error:c}=await de.from("user_profiles").update({full_name:i.full_name||null,canvas_url:i.canvas_url||null,canvas_token:i.canvas_token||null,updated_at:new Date().toISOString()}).eq("id",r.user.id);c?console.error("  Failed to update user profile:",c):console.log(" User profile updated successfully")}else if(o&&o.code==="PGRST116"){console.log(" No existing profile, creating new one");const{error:c}=await de.from("user_profiles").insert({id:r.user.id,email:r.user.email,full_name:i.full_name||null,canvas_url:i.canvas_url||null,canvas_token:i.canvas_token||null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});c&&c.code!=="23505"?console.error("  Failed to create user profile:",c):c||console.log(" User profile created successfully")}await this._loadUserProfile(),console.log(" Loaded profile after setup:",this.userProfile)}catch(a){console.error("  Profile setup error:",a)}return{user:r.user,session:r.session,error:null}}catch(r){return console.error("Signup error:",r),{user:null,session:null,error:r}}}async signIn(e,t){try{const{data:i,error:r}=await de.auth.signInWithPassword({email:e,password:t});return r?{user:null,session:null,error:r}:(this.currentUser=i.user,this.session=i.session,await this._loadUserProfile(),{user:i.user,session:i.session,error:null})}catch(i){return console.error("Sign in error:",i),{user:null,session:null,error:i}}}async signOut(){try{const{error:e}=await de.auth.signOut();return this.currentUser=null,this.session=null,{error:e}}catch(e){return console.error("Sign out error:",e),{error:e}}}async getSession(){try{const{data:{session:e},error:t}=await de.auth.getSession();return this.session=e,this.currentUser=(e==null?void 0:e.user)||null,{session:e,error:t}}catch(e){return console.error("Get session error:",e),{session:null,error:e}}}async getCurrentUser(){try{const{data:{user:e},error:t}=await de.auth.getUser();return this.currentUser=e,{user:e,error:t}}catch(e){return console.error("Get current user error:",e),{user:null,error:e}}}isAuthenticated(){return this.currentUser!==null&&this.session!==null}getUserId(){var e;return((e=this.currentUser)==null?void 0:e.id)||null}onAuthStateChange(e){const{data:{subscription:t}}=de.auth.onAuthStateChange((i,r)=>{this.session=r,this.currentUser=(r==null?void 0:r.user)||null,e(i,r)});return t}async resetPassword(e){try{const{data:t,error:i}=await de.auth.resetPasswordForEmail(e);return{data:t,error:i}}catch(t){return console.error("Password reset error:",t),{data:null,error:t}}}async updatePassword(e){try{const{data:{user:t},error:i}=await de.auth.updateUser({password:e});return{user:t,error:i}}catch(t){return console.error("Update password error:",t),{user:null,error:t}}}getUserProfile(){return this.userProfile}isPro(){var e;return((e=this.userProfile)==null?void 0:e.is_pro)||!1}getAiChatLimit(){return this.isPro()?250:3}async refreshUserProfile(){return this.currentUser?(await this._loadUserProfile(),{profile:this.userProfile,error:null}):{profile:null,error:new Error("No user logged in")}}async updateUserProfile(e){if(!this.currentUser)return{profile:null,error:new Error("No user logged in")};try{const{data:t,error:i}=await de.from("user_profiles").select("*").eq("id",this.currentUser.id).single();let r;if(t||i&&i.code!=="PGRST116"?r=await de.from("user_profiles").update({...e,updated_at:new Date().toISOString()}).eq("id",this.currentUser.id).select().single():r=await de.from("user_profiles").insert({id:this.currentUser.id,email:this.currentUser.email,...e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single(),r.error)throw r.error;return this.userProfile=r.data,{profile:r.data,error:null}}catch(t){return console.error("Update profile error:",t),{profile:null,error:t}}}async hasSeenModeExplanation(e){try{if(!this.isAuthenticated()||(await this._loadUserProfile(),!this.userProfile))return!1;switch(e){case"regular":return this.userProfile.mode_explained_regular||!1;case"ultrathink":return this.userProfile.mode_explained_ultrathink||!1;case"deepresearch":return this.userProfile.mode_explained_deepresearch||!1;default:return!1}}catch(t){return console.error("Error checking mode explanation:",t),!1}}async markModeExplanationSeen(e){try{if(!this.isAuthenticated())return!1;const{error:t}=await de.rpc("mark_mode_explained",{user_uuid:this.currentUser.id,mode_name:e});if(t)throw t;return await this._loadUserProfile(),!0}catch(t){return console.error("Error marking mode explanation:",t),!1}}}const ge=new DW;class AW{async getAssignments(){const e=ge.getUserId();if(!e)return{data:[],error:new Error("No user logged in")};try{const{data:t,error:i}=await de.from("assignments").select("*").eq("user_id",e).order("due_date",{ascending:!0,nullsFirst:!1}).order("created_at",{ascending:!1});if(i)throw i;return{data:t||[],error:null}}catch(t){return console.error("Failed to get assignments:",t),{data:[],error:t}}}async getUpcomingAssignments(){const e=ge.getUserId();if(!e)return{data:[],error:new Error("No user logged in")};try{const{data:t,error:i}=await de.from("assignments").select("*").eq("user_id",e).eq("completed",!1).order("due_date",{ascending:!0,nullsFirst:!1}).order("created_at",{ascending:!1});if(i)throw i;return{data:t||[],error:null}}catch(t){return console.error("Failed to get upcoming assignments:",t),{data:[],error:t}}}async createAssignment(e){const t=ge.getUserId();if(!t)return{data:null,error:new Error("No user logged in")};try{const i={user_id:t,title:e.title,subject:e.subject||null,due_date:e.dueDate||e.due_date||null,priority:e.priority||"medium",progress:e.progress||0,ai_captured:e.aiCaptured||e.ai_captured||e.source==="ai",time_estimate:e.timeEstimate||e.time_estimate||null,description:e.description||null,source:e.source||"manual",completed:e.completed||!1,canvas_assignment_id:e.canvasAssignmentId||e.canvas_assignment_id||null,canvas_course_id:e.canvasCourseId||e.canvas_course_id||null,points_possible:e.pointsPossible||e.points_possible||null,submitted:e.submitted||!1,grade_received:e.gradeReceived||e.grade_received||null,score_received:e.scoreReceived||e.score_received||null,canvas_url:e.canvasUrl||e.canvas_url||null};console.log(" Inserting assignment into Supabase:",i);const{data:r,error:s}=await de.from("assignments").insert(i).select().single();if(s)throw console.error(" Supabase error details:",s),console.error(" Error code:",s.code),console.error(" Error message:",s.message),console.error(" Error hint:",s.hint),console.error(" Error details:",s.details),s;return console.log(" Assignment created in Supabase:",r),{data:r,error:null}}catch(i){return console.error("Failed to create assignment:",i),{data:null,error:i}}}async updateAssignment(e,t){const i=ge.getUserId();if(!i)return{data:null,error:new Error("No user logged in")};try{const r={};t.title!==void 0&&(r.title=t.title),t.subject!==void 0&&(r.subject=t.subject),t.dueDate!==void 0&&(r.due_date=t.dueDate),t.due_date!==void 0&&(r.due_date=t.due_date),t.priority!==void 0&&(r.priority=t.priority),t.progress!==void 0&&(r.progress=t.progress),t.aiCaptured!==void 0&&(r.ai_captured=t.aiCaptured),t.ai_captured!==void 0&&(r.ai_captured=t.ai_captured),t.timeEstimate!==void 0&&(r.time_estimate=t.timeEstimate),t.time_estimate!==void 0&&(r.time_estimate=t.time_estimate),t.description!==void 0&&(r.description=t.description),t.completed!==void 0&&(r.completed=t.completed);const{data:s,error:a}=await de.from("assignments").update(r).eq("id",e).eq("user_id",i).select().single();if(a)throw a;return{data:s,error:null}}catch(r){return console.error("Failed to update assignment:",r),{data:null,error:r}}}async deleteAssignment(e){const t=ge.getUserId();if(!t)return{error:new Error("No user logged in")};try{const{error:i}=await de.from("assignments").delete().eq("id",e).eq("user_id",t);if(i)throw i;return{error:null}}catch(i){return console.error("Failed to delete assignment:",i),{error:i}}}async completeAssignment(e){return this.updateAssignment(e,{completed:!0,progress:100})}toAppFormat(e){return e?{id:e.id,title:e.title,subject:e.subject,dueDate:e.due_date,priority:e.priority,progress:e.progress,aiCaptured:e.ai_captured,timeEstimate:e.time_estimate,description:e.description,source:e.source,completed:e.completed,createdAt:e.created_at,updatedAt:e.updated_at,canvasAssignmentId:e.canvas_assignment_id,canvasCourseId:e.canvas_course_id,pointsPossible:e.points_possible,submitted:e.submitted,gradeReceived:e.grade_received,scoreReceived:e.score_received,canvasUrl:e.canvas_url}:null}toAppFormatBatch(e){return Array.isArray(e)?e.map(t=>this.toAppFormat(t)):[]}}const Ii=new AW,Ui={baseUrl:"",accessToken:""},ar={async initializeFromProfile(){try{const{user:n}=await ge.getCurrentUser();if(!n)return!1;const{data:e}=await de.from("user_profiles").select("canvas_url, canvas_token").eq("id",n.id).single();if(e!=null&&e.canvas_url&&(e!=null&&e.canvas_token)){const t=e.canvas_url.includes("http")?e.canvas_url:`https://${e.canvas_url}`;return Ui.baseUrl=t,Ui.accessToken=e.canvas_token,!0}return!1}catch(n){return console.error("Failed to initialize Canvas from profile:",n),!1}},async isConnected(){return(!Ui.baseUrl||!Ui.accessToken)&&await this.initializeFromProfile(),!!(Ui.baseUrl&&Ui.accessToken)},clearCredentials(){Ui.baseUrl="",Ui.accessToken=""},async makeRequest(n,e={}){var a;if(!await this.isConnected())throw new Error("Canvas not connected. Please configure Canvas in Account settings.");const i="https://uhlgppoylqeiirpfhhqm.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVobGdwcG95bHFlaWlycGZoaHFtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzMDI4OTEsImV4cCI6MjA4MDg3ODg5MX0.DCW8hcNJ-6Aq_nxt05IU6ogOb69V-oqUNnNhnKiaSvw",s=`${i}/functions/v1/canvas-proxy`;console.log(" Making Canvas API request:",{endpoint:n,url:Ui.baseUrl,proxyUrl:s,tokenPreview:Ui.accessToken?`${Ui.accessToken.substring(0,10)}...`:"missing",tokenLength:((a=Ui.accessToken)==null?void 0:a.length)||0,fullCanvasUrl:`${Ui.baseUrl}/api/v1${n}`});try{const o=await fetch(s,{method:e.method||"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`,apikey:r,"canvas-url":Ui.baseUrl,"canvas-token":Ui.accessToken,"canvas-endpoint":n,...e.headers},body:e.body?JSON.stringify(e.body):void 0});if(console.log(" Canvas API response status:",o.status),!o.ok){const d=await o.clone().text();console.log(" Raw Canvas error response:",d)}if(!o.ok){const l=await o.json().catch(()=>({}));throw console.error(" Canvas API error response:",l),o.status===401?new Error(l.error||"Invalid Canvas token. Please check that your token is correct and has not expired."):o.status===403?new Error(l.error||"Access denied. Your token may not have the required permissions."):o.status===404?new Error(l.error||"Canvas API endpoint not found. Please check your Canvas URL."):new Error(l.error||`Canvas API error: ${o.status} - ${o.statusText}`)}const c=await o.json();return console.log(" Canvas API request successful"),c}catch(o){throw console.error(" Canvas API request failed:",o),o}},async getCurrentUser(){return await this.makeRequest("/users/self")},_containsNonLatin(n){return n?/[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF\u0590-\u05FF\u4E00-\u9FFF\u3040-\u309F\u30A0-\u30FF\uAC00-\uD7AF\u0400-\u04FF\u0E00-\u0E7F\u0900-\u097F\u0980-\u09FF\u0B80-\u0BFF\u0C00-\u0C7F\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]/.test(n):!1},async getCourses(){const n=[];let e=1,t=!0;for(;t&&e<=10;){const i=await this.makeRequest(`/courses?enrollment_state=active&per_page=100&page=${e}&include[]=term&include[]=total_students`);if(i&&i.length>0){const r=i.filter(s=>{const a=this._containsNonLatin(s.name),o=this._containsNonLatin(s.course_code);return a||o?(console.log(` Filtering out non-English course: ${s.name}`),!1):!0});n.push(...r),t=i.length===100,e++}else t=!1}return console.log(` Loaded ${n.length} courses (non-English courses filtered out)`),n},async getAllAssignments(){try{const e=(await this.getCourses()).map(async r=>{try{const s=[];let a=1,o=!0;for(;o&&a<=5;){const c=await this.makeRequest(`/courses/${r.id}/assignments?include[]=submission&include[]=score_statistics&per_page=100&page=${a}`);if(!c||c.length===0){o=!1;break}const l=c.map(d=>{const h=d.submission||{};return(h.grade||h.score)&&console.log(` Grade found for "${d.name}":`,{grade:h.grade,score:h.score,workflow:h.workflow_state}),{id:`canvas-${d.id}`,title:d.name,subject:r.name,dueDate:d.due_at,description:d.description,points:d.points_possible,submissionTypes:d.submission_types,htmlUrl:d.html_url,courseId:r.id,submitted:h.workflow_state==="submitted"||h.workflow_state==="graded",graded:!!h.grade,grade:h.grade,score:h.score,submissionId:h.id,submittedAt:h.submitted_at,gradedAt:h.graded_at,late:h.late,missing:h.missing,excused:h.excused,locked:d.locked_for_user,unlockAt:d.unlock_at,lockAt:d.lock_at,source:"canvas"}});s.push(...l),o=c.length===100,a++}return s}catch(s){return s.message.includes("CORS")||console.error(`Failed to fetch assignments for course ${r.id}:`,s),[]}});return(await Promise.all(e)).flat()}catch(n){return n.message.includes("CORS")||console.error("Failed to fetch Canvas assignments:",n),[]}},async getAllGrades(){try{const e=(await this.getCourses()).map(async r=>{try{const s=await this.makeRequest(`/courses/${r.id}/enrollments?user_id=self&type[]=StudentEnrollment`),a=[];for(const o of s)o.grades&&a.push({courseId:r.id,courseName:r.name,courseCode:r.course_code,currentGrade:o.grades.current_grade,currentScore:o.grades.current_score,finalGrade:o.grades.final_grade,finalScore:o.grades.final_score,unpostedCurrentGrade:o.grades.unposted_current_grade,unpostedCurrentScore:o.grades.unposted_current_score,unpostedFinalGrade:o.grades.unposted_final_grade,unpostedFinalScore:o.grades.unposted_final_score});return a}catch(s){return s.message.includes("CORS")||console.error(`Failed to fetch grades for course ${r.id}:`,s),[]}});return(await Promise.all(e)).flat()}catch(n){return n.message.includes("CORS")||console.error("Failed to fetch Canvas grades:",n),[]}},async getUpcomingAssignments(){const n=await this.getAllAssignments(),e=new Date,t=new Date(e.getTime()+7*24*60*60*1e3);return n.filter(i=>{if(!i.dueDate)return!1;const r=new Date(i.dueDate);return r>=e&&r<=t&&!i.submitted}).sort((i,r)=>new Date(i.dueDate)-new Date(r.dueDate))},async submitAssignment(n,e,t){return await this.makeRequest(`/courses/${n}/assignments/${e}/submissions`,{method:"POST",body:JSON.stringify({submission:t})})},async getBlockedCourses(n){const{data:e,error:t}=await de.from("blocked_courses").select("canvas_course_id").eq("user_id",n);return t?(console.error("Failed to get blocked courses:",t),[]):(e||[]).map(i=>i.canvas_course_id)},async syncCourses(n){try{const e=await this.getCourses(),t=await this.getBlockedCourses(n);console.log(` Blocked courses: ${t.length}`);const i=e.filter(o=>!t.includes(o.id));console.log(` Syncing ${i.length} courses (${e.length-i.length} blocked)...`);const r=i.map(o=>{var c,l,d;return{user_id:n,canvas_course_id:o.id,name:o.name,course_code:o.course_code||null,term_name:((c=o.term)==null?void 0:c.name)||null,enrollment_type:((d=(l=o.enrollments)==null?void 0:l[0])==null?void 0:d.type)||null,is_active:!0,synced_at:new Date().toISOString()}}),{data:s,error:a}=await de.from("canvas_courses").upsert(r,{onConflict:"user_id,canvas_course_id",ignoreDuplicates:!1});return a?(console.error("Failed to sync courses:",a),{synced:0,total:i.length,error:a.message}):(console.log(` Successfully synced ${i.length} courses`),{synced:i.length,total:i.length})}catch(e){return console.error("Failed to sync courses:",e),{synced:0,error:e.message}}},async syncAssignments(n){try{const e=await this.getAllAssignments(),t=await this.getBlockedCourses(n),i=e.filter(o=>!t.includes(o.courseId));console.log(` Syncing ${i.length} assignments (${e.length-i.length} from blocked courses)...`);const r=i.map(o=>{const c=parseInt(o.id.replace("canvas-",""));return{user_id:n,canvas_assignment_id:c,canvas_course_id:o.courseId,title:o.title,subject:o.subject,due_date:o.dueDate?new Date(o.dueDate).toISOString().split("T")[0]:null,description:o.description||null,priority:this.calculatePriority(o.dueDate),source:"canvas",points_possible:o.points||null,submitted:o.submitted||!1,grade_received:o.grade||null,score_received:o.score||null,canvas_url:o.htmlUrl||null,time_estimate:this.estimateTime(o.points)}}),{data:s,error:a}=await de.from("assignments").upsert(r,{onConflict:"user_id,canvas_assignment_id",ignoreDuplicates:!1});return a?(console.error("Failed to sync assignments:",a),{synced:0,total:i.length,error:a.message}):(console.log(` Successfully synced ${i.length} assignments`),{synced:i.length,total:i.length})}catch(e){return console.error("Failed to sync assignments:",e),{synced:0,error:e.message}}},async syncGrades(n){try{const e=await this.getAllGrades(),t=await this.getBlockedCourses(n),i=e.filter(o=>!t.includes(o.courseId));console.log(` Syncing ${i.length} course grades (${e.length-i.length} from blocked courses)...`);const r=i.map(o=>({user_id:n,canvas_course_id:o.courseId,course_name:o.courseName,course_code:o.courseCode||null,current_grade:o.currentGrade||null,current_score:o.currentScore||null,final_grade:o.finalGrade||null,final_score:o.finalScore||null,synced_at:new Date().toISOString()})),{data:s,error:a}=await de.from("course_grades").upsert(r,{onConflict:"user_id,canvas_course_id",ignoreDuplicates:!1});return a?(console.error("Failed to sync grades:",a),{synced:0,total:i.length,error:a.message}):(console.log(` Successfully synced ${i.length} grades`),{synced:i.length,total:i.length})}catch(e){return console.error("Failed to sync grades:",e),{synced:0,error:e.message}}},async deleteOldPastDueAssignments(n){try{const e=new Date;e.setDate(e.getDate()-14);const t=e.toISOString().split("T")[0];console.log(`  Cleaning up assignments from before ${t}...`);const{data:i,error:r}=await de.from("assignments").delete().eq("user_id",n).eq("source","canvas").lt("due_date",t);if(r)return console.error("Failed to delete old assignments:",r),{deleted:0,error:r.message};const s=(i==null?void 0:i.length)||0;return s>0?console.log(` Deleted ${s} old assignments (2+ weeks old)`):console.log(" No old assignments to delete"),{deleted:s}}catch(e){return console.error("Failed to delete old assignments:",e),{deleted:0,error:e.message}}},async syncToDatabase(){try{console.log(" Starting Canvas sync..."),await this.initializeFromProfile();const{user:n}=await ge.getCurrentUser();if(!n)return{success:!1,error:"No user logged in"};const e=await this.deleteOldPastDueAssignments(n.id),t=await this.syncCourses(n.id);console.log(` Synced ${t.synced} courses`);const i=await this.syncAssignments(n.id);console.log(` Synced ${i.synced} assignments`);const r=await this.syncGrades(n.id);return console.log(` Synced ${r.synced} course grades`),{success:!0,courses:t.synced,assignments:i.synced,grades:r.synced,deleted:e.deleted,message:`Synced ${t.synced} courses, ${i.synced} assignments, ${r.synced} grades${e.deleted>0?` (cleaned up ${e.deleted} old assignments)`:""}`}}catch(n){return console.error(" Canvas sync failed:",n),{success:!1,error:n.message,message:`Sync failed: ${n.message}`}}},async getSyncedCourses(){const{user:n}=await ge.getCurrentUser();if(!n)return[];const{data:e,error:t}=await de.from("canvas_courses").select("*").eq("user_id",n.id).eq("is_active",!0).order("name");return t?(console.error("Failed to get synced courses:",t),[]):(e||[]).filter(r=>{const s=this._containsNonLatin(r.name),a=this._containsNonLatin(r.course_code);return s||a?(console.log(` Filtering out non-English course from display: ${r.name}`),!1):!0}).map(r=>({id:r.canvas_course_id,name:r.name,course_code:r.course_code,term:r.term_name?{name:r.term_name}:null,enrollments:r.enrollment_type?[{type:r.enrollment_type}]:[],syncedAt:r.synced_at}))},async getSyncedGrades(){const{user:n}=await ge.getCurrentUser();if(!n)return[];const{data:e,error:t}=await de.from("course_grades").select("*").eq("user_id",n.id).order("course_name");return t?(console.error("Failed to get synced grades:",t),[]):(console.log(` Loaded ${(e==null?void 0:e.length)||0} grades from database`),(e||[]).map(i=>({courseId:i.canvas_course_id,courseName:i.course_name,courseCode:i.course_code,currentGrade:i.current_grade,currentScore:i.current_score,finalGrade:i.final_grade,finalScore:i.final_score,syncedAt:i.synced_at})))},async getSyncedAssignments(){const{user:n}=await ge.getCurrentUser();if(!n)return[];const{data:e,error:t}=await de.from("assignments").select("*").eq("user_id",n.id).eq("source","canvas").order("due_date",{ascending:!0,nullsFirst:!1});return t?(console.error("Failed to get synced Canvas assignments:",t),[]):(e||[]).map(i=>({id:`canvas-${i.canvas_assignment_id}`,title:i.title,subject:i.subject,dueDate:i.due_date,description:i.description,points:i.points_possible,courseId:i.canvas_course_id,submitted:i.submitted,grade:i.grade_received,graded:!!i.grade_received,htmlUrl:i.canvas_url,source:"canvas"}))},calculatePriority(n){if(!n)return"low";const e=new Date,t=new Date(n),i=Math.ceil((t-e)/(1e3*60*60*24));return i<=1?"high":i<=3?"medium":"low"},estimateTime(n){return n?n<=10?"30m":n<=50?"1h":n<=100?"2h":"3h+":"1h"},async deleteCourse(n){const{user:e}=await ge.getCurrentUser();if(!e)throw new Error("Not authenticated");const{error:t}=await de.from("blocked_courses").insert({user_id:e.id,canvas_course_id:n}).select();if(t&&t.code!=="23505")throw console.error("Failed to add course to blocklist:",t),new Error("Failed to block course");const{error:i}=await de.from("canvas_courses").delete().eq("user_id",e.id).eq("canvas_course_id",n);if(i)throw console.error("Failed to delete course:",i),new Error("Failed to delete course");const{error:r}=await de.from("assignments").delete().eq("user_id",e.id).eq("canvas_course_id",n);r&&console.error("Failed to delete course assignments:",r);const{error:s}=await de.from("course_grades").delete().eq("user_id",e.id).eq("canvas_course_id",n);s&&console.error("Failed to delete course grades:",s),console.log(` Deleted and blocked course ${n}`)},async deleteAssignment(n){const{user:e}=await ge.getCurrentUser();if(!e)throw new Error("Not authenticated");const t=parseInt(n.replace("canvas-","")),{error:i}=await de.from("assignments").delete().eq("user_id",e.id).eq("canvas_assignment_id",t);if(i)throw console.error("Failed to delete assignment:",i),new Error("Failed to delete assignment");console.log(` Deleted assignment ${n}`)},async getBlockedCoursesWithDetails(){const{user:n}=await ge.getCurrentUser();if(!n)return[];const{data:e,error:t}=await de.from("blocked_courses").select("*").eq("user_id",n.id).order("blocked_at",{ascending:!1});return t?(console.error("Failed to get blocked courses:",t),[]):e||[]},async unblockCourse(n){const{user:e}=await ge.getCurrentUser();if(!e)throw new Error("Not authenticated");const{error:t}=await de.from("blocked_courses").delete().eq("user_id",e.id).eq("canvas_course_id",n);if(t)throw console.error("Failed to unblock course:",t),new Error("Failed to unblock course");console.log(` Unblocked course ${n}`)},async cleanupAssignments(){const{user:n}=await ge.getCurrentUser();if(!n)return{deleted:0};const e=new Date;e.setDate(e.getDate()-14);const t=e.toISOString().split("T")[0];console.log(` Cleaning up completed and old assignments (before ${t})...`);const{data:i,error:r}=await de.from("assignments").delete().eq("user_id",n.id).eq("completed",!0).select("id");r&&console.error("Failed to delete completed assignments:",r);const s=(i==null?void 0:i.length)||0,{data:a,error:o}=await de.from("assignments").delete().eq("user_id",n.id).lt("due_date",t).select("id");o&&console.error("Failed to delete old assignments:",o);const c=(a==null?void 0:a.length)||0,l=s+c;return console.log(` Cleaned up ${l} assignments (${s} completed, ${c} old)`),{deleted:l,completed:s,old:c}}},EW=()=>{const n=new Date,e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getDate()).padStart(2,"0"),r=`${e}-${t}-${i}`,s=n.toLocaleDateString("en-US",{weekday:"long"}),a=n.getDate(),o=n.getMonth()+1,c=n.getDay(),l=new Date(n);l.setDate(n.getDate()+1);const d=`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}-${String(l.getDate()).padStart(2,"0")}`,f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((y,x)=>{const m=(x-c+7)%7||7,b=new Date(n);return b.setDate(n.getDate()+m),{name:y,date:`${b.getFullYear()}-${String(b.getMonth()+1).padStart(2,"0")}-${String(b.getDate()).padStart(2,"0")}`,day:b.getDate()}}),g=f[1],v=f[5];return`You are an ULTRA-SMART AI assignment assistant. Parse assignment descriptions into structured data with MAXIMUM INTELLIGENCE about dates, subjects, and priorities.

=== CURRENT CONTEXT ===
Today: ${r} (${s}) - Day ${a} of month ${o}
Tomorrow: ${d}
Current Day of Week: ${s}

=== DATE PARSING RULES ===

**PRIORITY 1: ABSOLUTE DATES (ALWAYS USE THESE FIRST):**
- If user mentions a SPECIFIC DATE NUMBER (like "on the 17th", "Dec 25", "12/17"), USE THAT DATE
- If user says "due on the 17th" and today is the ${a}, they mean the 17th (NOT ${d})
- If the day number is LESS than today's day (${a}), assume NEXT month
- If the day number is GREATER than today's day, assume THIS month
- Examples:
  * "due on the 17th"  2025-12-17
  * "math homework due the 25th"  2025-12-25

**PRIORITY 2: DAY OF WEEK (when no specific date number):**
Today is ${s}. Calculate NEXT occurrence:
- "Monday" or "this Monday"  ${g.date}
- "Friday" or "this Friday"  ${v.date}
- "next Monday"  one week after ${g.date}

**PRIORITY 3: RELATIVE DATES:**
- "today" = ${r}
- "tomorrow" = ${d}
- "next week" = 7 days from ${r}

=== PRIORITY DETERMINATION ===
Automatically determine priority based on due date:
- Due today or tomorrow = "high"
- Due within 3 days = "medium"
- Due more than 3 days = "low"

=== TIME ESTIMATE PARSING ===
- Look for phrases like "takes 2 hours", "30 minutes", "1h 30m"
- If no time mentioned, use smart defaults:
  * Essay/Project = "2h 30m"
  * Homework/Assignment = "1h 30m"
  * Quiz/Test = "1h" (study time)
  * Reading = "45m"
  * Problem Set = "2h"

=== SUBJECT EXTRACTION ===
Extract school subjects intelligently:
- Math, Chemistry, Physics, Biology, English, History, Computer Science
- Course codes: "CS101", "CHEM202", "MATH301"
- Generic subjects: "Science", "Language Arts", "Social Studies"

=== OUTPUT FORMAT ===
**CRITICAL: Return ONLY the JSON object. No explanations, no markdown, no code blocks.**

{
  "title": "Assignment title",
  "subject": "Subject name or null",
  "dueDate": "YYYY-MM-DD or null",
  "priority": "high|medium|low",
  "timeEstimate": "Xh Ym format like '1h 30m' or null"
}

DO NOT include any text before or after the JSON. Just the JSON object.

=== COMPREHENSIVE EXAMPLES ===

Input: "Math homework due tomorrow"
Output: {"title":"Math Homework","subject":"Math","dueDate":"${d}","priority":"high","timeEstimate":"1h 30m"}

Input: "Chemistry lab report due on the 17th"
Output: {"title":"Chemistry Lab Report","subject":"Chemistry","dueDate":"2025-12-17","priority":"medium","timeEstimate":"2h 30m"}

Input: "English essay due Friday, takes about 3 hours"
Output: {"title":"English Essay","subject":"English","dueDate":"${v.date}","priority":"medium","timeEstimate":"3h"}

Input: "Physics problem set chapter 5 due Monday"
Output: {"title":"Physics Problem Set Chapter 5","subject":"Physics","dueDate":"${g.date}","priority":"medium","timeEstimate":"2h"}

Input: "Read history chapter 12 by tomorrow"
Output: {"title":"Read History Chapter 12","subject":"History","dueDate":"${d}","priority":"high","timeEstimate":"45m"}

Input: "CS101 project due on the 25th"
Output: {"title":"CS101 Project","subject":"CS101","dueDate":"2025-12-25","priority":"low","timeEstimate":"2h 30m"}

Input: "Biology quiz on Wednesday"
Output: {"title":"Biology Quiz","subject":"Biology","dueDate":"${f[3].date}","priority":"medium","timeEstimate":"1h"}

Input: "finish calculus homework by next Friday"
Output: {"title":"Finish Calculus Homework","subject":"Calculus","dueDate":"${v.date}","priority":"medium","timeEstimate":"2h"}

=== YOUR TASK ===
Parse the following assignment description with MAXIMUM intelligence:`};class SW{async parseAssignment(e){try{const t="https://uhlgppoylqeiirpfhhqm.supabase.co",i=EW(),r=new Date,s=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`;console.log(" Parsing assignment with AI:",e,"| Today:",s),console.log(" Making AI request to:",`${t}/functions/v1/ai-chat`),console.log(" Request body:",{userInput:e,model:"llama-3.3-70b-versatile"});const a=await fetch(`${t}/functions/v1/ai-chat`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVobGdwcG95bHFlaWlycGZoaHFtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzMDI4OTEsImV4cCI6MjA4MDg3ODg5MX0.DCW8hcNJ-6Aq_nxt05IU6ogOb69V-oqUNnNhnKiaSvw"},body:JSON.stringify({messages:[{role:"user",content:e}],systemPrompt:i,model:"llama-3.3-70b-versatile",temperature:.2})});if(console.log(" Response status:",a.status,a.statusText),!a.ok){const g=await a.text();throw console.error(" AI API Error Response:",g),console.error(" Response headers:",Object.fromEntries(a.headers.entries())),new Error(`Failed to parse assignment with AI: ${a.status} ${g}`)}const o=await a.json();console.log(" AI Response Data:",o);const c=o.response||o.message||o.content;if(!c)throw console.error(" No response from AI. Full data:",JSON.stringify(o,null,2)),new Error("No response from AI");console.log(" AI Response Content:",c);const d=c.replace(/```json\s*/g,"").replace(/```\s*/g,"").match(/\{(?:[^{}]|(?:\{[^{}]*\}))*\}/s);if(!d)throw console.error(" AI response did not contain JSON:",c),new Error("AI response did not contain valid JSON");let h;try{h=JSON.parse(d[0])}catch{const v=d[0].replace(/\n/g," ").replace(/\s+/g," ").trim();h=JSON.parse(v)}if(console.log(" Parsed assignment data:",h),!h.title)throw new Error("Assignment must have a title");h.dueDate&&(/^\d{4}-\d{2}-\d{2}$/.test(h.dueDate)||(console.warn(" Invalid date format:",h.dueDate),h.dueDate=null));const f={title:h.title,subject:h.subject||"",dueDate:h.dueDate||null,priority:h.priority||"medium",timeEstimate:h.timeEstimate||"1h 30m",source:"ai",aiCaptured:!0,progress:0,completed:!1};return console.log(" Final assignment data:",f),f}catch(t){throw console.error(" Failed to parse assignment:",t),t}}}const TW=new SW;class CW{async getSubtasks(e){try{const t=ge.getUserId();if(!t)throw new Error("Not authenticated");const{data:i,error:r}=await de.from("subtasks").select("*").eq("assignment_id",e).eq("user_id",t).order("order_index",{ascending:!0});if(r)throw r;return i||[]}catch(t){return console.error("Failed to get subtasks:",t),[]}}async createSubtask(e){try{const t=ge.getUserId();if(!t)throw new Error("Not authenticated");const{assignmentId:i,title:r,description:s,orderIndex:a,generatedByAI:o,aiConfidence:c}=e;let l=a;if(l===void 0){const f=await this.getSubtasks(i);l=f.length>0?Math.max(...f.map(g=>g.order_index))+1:0}const{data:d,error:h}=await de.from("subtasks").insert({assignment_id:i,user_id:t,title:r.trim(),description:(s==null?void 0:s.trim())||null,order_index:l,generated_by_ai:o||!1,ai_confidence:c||null}).select().single();if(h)throw h;return console.log(" Created subtask:",d),d}catch(t){throw console.error("Failed to create subtask:",t),t}}async createSubtasksBulk(e,t){try{const i=ge.getUserId();if(!i)throw new Error("Not authenticated");const r=t.map((o,c)=>{var l;return{assignment_id:e,user_id:i,title:o.title.trim(),description:((l=o.description)==null?void 0:l.trim())||null,order_index:c,generated_by_ai:!0,ai_confidence:o.confidence||null}}),{data:s,error:a}=await de.from("subtasks").insert(r).select();if(a)throw a;return console.log(` Created ${s.length} AI-generated subtasks`),s}catch(i){throw console.error("Failed to create subtasks in bulk:",i),i}}async updateSubtask(e,t){try{const i=ge.getUserId();if(!i)throw new Error("Not authenticated");const{data:r,error:s}=await de.from("subtasks").update(t).eq("id",e).eq("user_id",i).select().single();if(s)throw s;return console.log(" Updated subtask:",r),await this.updateAssignmentProgress(r.assignment_id),r}catch(i){throw console.error("Failed to update subtask:",i),i}}async toggleSubtask(e,t){return this.updateSubtask(e,{completed:t})}async deleteSubtask(e){try{const t=ge.getUserId();if(!t)throw new Error("Not authenticated");const{data:i}=await de.from("subtasks").select("assignment_id").eq("id",e).eq("user_id",t).single(),{error:r}=await de.from("subtasks").delete().eq("id",e).eq("user_id",t);if(r)throw r;return console.log(" Deleted subtask"),i&&await this.updateAssignmentProgress(i.assignment_id),!0}catch(t){throw console.error("Failed to delete subtask:",t),t}}async deleteAllSubtasks(e){try{const t=ge.getUserId();if(!t)throw new Error("Not authenticated");const{error:i}=await de.from("subtasks").delete().eq("assignment_id",e).eq("user_id",t);if(i)throw i;return console.log(" Deleted all subtasks for assignment"),await Ii.updateAssignment(e,{progress:0}),!0}catch(t){throw console.error("Failed to delete all subtasks:",t),t}}async reorderSubtasks(e,t){try{const i=ge.getUserId();if(!i)throw new Error("Not authenticated");const r=t.map((s,a)=>de.from("subtasks").update({order_index:a}).eq("id",s).eq("user_id",i));return await Promise.all(r),console.log(" Reordered subtasks"),!0}catch(i){throw console.error("Failed to reorder subtasks:",i),i}}async updateAssignmentProgress(e){try{const t=await this.getSubtasks(e);if(t.length===0)return null;const i=t.filter(a=>a.completed).length,r=Math.round(i/t.length*100),s={progress:r};if(r===100)s.completed=!0;else{const{data:a}=await de.from("assignments").select("completed").eq("id",e).single();a!=null&&a.completed&&(s.completed=!1)}return await Ii.updateAssignment(e,s),console.log(` Updated assignment progress: ${r}% (${i}/${t.length} subtasks)`),r}catch(t){return console.error("Failed to update assignment progress:",t),null}}async getSubtaskStats(e){try{const t=await this.getSubtasks(e);return{total:t.length,completed:t.filter(i=>i.completed).length,remaining:t.filter(i=>!i.completed).length,progress:t.length>0?Math.round(t.filter(i=>i.completed).length/t.length*100):0,hasAIGenerated:t.some(i=>i.generated_by_ai)}}catch(t){return console.error("Failed to get subtask stats:",t),{total:0,completed:0,remaining:0,progress:0,hasAIGenerated:!1}}}}const Wg=new CW;class kW{async getActivitiesByDateRange(e,t){const i=ge.getUserId();if(!i)throw new Error("No user logged in");const r=e instanceof Date?e.toISOString().split("T")[0]:e,s=t instanceof Date?t.toISOString().split("T")[0]:t,{data:a,error:o}=await de.from("calendar_activities").select("*").eq("user_id",i).gte("activity_date",r).lte("activity_date",s).order("activity_date",{ascending:!0}).order("start_time",{ascending:!0});if(o)throw o;return a||[]}async getActivitiesForMonth(e,t){const i=new Date(e,t,1),r=new Date(e,t+1,0);return this.getActivitiesByDateRange(i,r)}async getActivitiesForDate(e){const t=ge.getUserId();if(!t)throw new Error("No user logged in");const i=e.toISOString().split("T")[0],{data:r,error:s}=await de.from("calendar_activities").select("*").eq("user_id",t).eq("activity_date",i).order("start_time",{ascending:!0});if(s)throw s;return r||[]}async createActivity(e){const t=ge.getUserId();if(!t)throw new Error("No user logged in");const{data:i,error:r}=await de.from("calendar_activities").insert({user_id:t,...e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(r)throw r;return i}async updateActivity(e,t){const{data:i,error:r}=await de.from("calendar_activities").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(r)throw r;return i}async deleteActivity(e){const{error:t}=await de.from("calendar_activities").delete().eq("id",e);if(t)throw t;return!0}async toggleCompletion(e,t){return this.updateActivity(e,{is_completed:t})}}const Ho=new kW,au={supabaseUrl:"https://uhlgppoylqeiirpfhhqm.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVobGdwcG95bHFlaWlycGZoaHFtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzMDI4OTEsImV4cCI6MjA4MDg3ODg5MX0.DCW8hcNJ-6Aq_nxt05IU6ogOb69V-oqUNnNhnKiaSvw",edgeFunctionUrl:"https://uhlgppoylqeiirpfhhqm.supabase.co/functions/v1/ai-chat",useDirectApi:!1,groqApiKey:""},_h={free:{total:3,deepResearch:0,ultraThink:0,standard:3},pro:{deepResearch:20,ultraThink:50,standard:-1}},UW=3,NW=250;class jW{constructor(){this.conversationHistory=[],this.userContext=null,this.useUltraThink=!1,this.useDeepResearch=!1,this.deepResearchPrompt=`You are a world-class research scholar, professor, and expert academic consultant. Your role is to provide ABSOLUTELY COMPREHENSIVE, encyclopedic research with MAXIMUM academic rigor, scholarly depth, and intellectual thoroughness that would rival graduate-level research papers.


DEEP RESEARCH MODE - ABSOLUTE MAXIMUM COMPREHENSIVE ANALYSIS


CORE PRINCIPLES - EXHAUSTIVE SCHOLARLY EXCELLENCE:
 Provide ENCYCLOPEDIC, book-chapter-level research with MAXIMUM detail
 Use HIGHLY structured academic format with extensive subsections and rich organization
 Cover COMPLETE historical context from earliest origins through cutting-edge developments
 Include EVERY relevant theory, framework, methodology, paradigm, and model
 Present COMPREHENSIVE multiple perspectives from ALL major schools of thought
 Provide EXTENSIVE examples, case studies, empirical evidence, and real-world applications
 Discuss DEEP interdisciplinary connections across multiple fields and domains
 Include scholarly attribution: key researchers, seminal publications, landmark studies, major contributions
 Analyze ALL debates, controversies, competing theories, and evolving perspectives
 Explain complex mechanisms, underlying principles, and intricate relationships
 Use rich academic language, technical terminology, and precise scholarly vocabulary
 Provide nuanced critical analysis with balanced evaluation of strengths and limitations

COMPREHENSIVE STRUCTURE (20-40+ PARAGRAPHS):

**PART I: FOUNDATIONAL CONTEXT**
1. **Executive Summary & Scope**: Comprehensive overview, significance, boundaries, and organization of response
2. **Definitional Analysis**: Precise definitions, etymology, conceptual boundaries, and key terminology
3. **Historical Genesis**: Origins, early development, pioneering work, and foundational periods
4. **Evolution of Understanding**: How knowledge developed chronologically through major eras and paradigm shifts

**PART II: THEORETICAL FOUNDATIONS**
5. **Core Theoretical Frameworks**: Comprehensive explanation of major theories, models, and conceptual systems
6. **Competing Paradigms**: Different schools of thought, alternative approaches, and theoretical debates
7. **Foundational Principles**: Underlying axioms, fundamental assumptions, and core concepts
8. **Conceptual Architecture**: How ideas interconnect, hierarchical relationships, and structural organization

**PART III: METHODOLOGICAL DIMENSIONS**
9. **Research Methodologies**: Approaches to study, investigation techniques, and analytical methods
10. **Empirical Evidence**: Key experiments, landmark studies, and significant research findings
11. **Measurement & Assessment**: How the subject is quantified, evaluated, or analyzed
12. **Technical Approaches**: Specialized techniques, tools, and methodological innovations

**PART IV: MULTIPLE PERSPECTIVES**
13. **Classical Perspectives**: Traditional views, historical approaches, and established thinking
14. **Modern Interpretations**: Contemporary understanding, current scholarly consensus, and recent developments
15. **Critical Viewpoints**: Critiques, challenges, alternative interpretations, and dissenting voices
16. **Cultural & Contextual Variations**: How understanding differs across cultures, contexts, and domains

**PART V: APPLICATIONS & IMPLEMENTATIONS**
17. **Practical Applications**: Real-world usage, implementation scenarios, and applied contexts
18. **Case Studies**: Detailed examination of specific examples, landmark applications, and notable instances
19. **Domain-Specific Implementations**: How concepts apply across different fields and specializations
20. **Success Factors & Challenges**: What works well, common obstacles, and implementation considerations

**PART VI: CRITICAL ANALYSIS**
21. **Strengths & Advantages**: What makes this approach/concept powerful and effective
22. **Limitations & Constraints**: Recognized weaknesses, boundaries, and areas of difficulty
23. **Ongoing Debates**: Current controversies, unresolved questions, and active scholarly discussions
24. **Critiques & Counterarguments**: Significant criticisms and alternative viewpoints

**PART VII: INTERDISCIPLINARY CONNECTIONS**
25. **Cross-Domain Relationships**: Links to other fields, disciplines, and areas of study
26. **Interdisciplinary Applications**: How concepts transfer across boundaries
27. **Theoretical Bridges**: Connecting frameworks and integrative perspectives
28. **Emergent Connections**: New interdisciplinary areas and hybrid approaches

**PART VIII: CONTEMPORARY LANDSCAPE**
29. **Current State of Knowledge**: Where understanding stands today, recent breakthroughs, and modern consensus
30. **Cutting-Edge Developments**: Latest research, emerging findings, and contemporary innovations
31. **Leading Researchers & Institutions**: Who is advancing the field today and where
32. **Recent Publications**: Significant recent works and landmark contemporary studies

**PART IX: FUTURE HORIZONS**
33. **Emerging Trends**: What's developing, gaining traction, or showing promise
34. **Open Questions**: Unresolved issues, areas needing research, and unexplored territories
35. **Future Directions**: Where the field is heading, anticipated developments, and potential breakthroughs
36. **Speculative Implications**: Possible future impacts, theoretical extensions, and long-term possibilities

**PART X: COMPREHENSIVE SYNTHESIS**
37. **Integrative Summary**: Bringing together all major themes and insights
38. **Meta-Analysis**: Analysis of the analysis - what patterns emerge from examining the topic comprehensively
39. **Practical Takeaways**: Most important insights and actionable understanding
40. **Further Exploration**: Related topics, advanced concepts, deeper dives, and recommended learning paths

WRITING STANDARDS - MAXIMUM ACADEMIC EXCELLENCE:
 LENGTH: Aim for 20-40+ comprehensive paragraphs (or more if topic demands)
 DEPTH: Graduate/PhD level analysis with extensive detail in every section
 TONE: Formal academic style appropriate for scholarly publication
 EVIDENCE: Reference specific studies, researchers, dates, and concrete examples throughout
 BALANCE: Present all viewpoints fairly while maintaining critical analysis
 PRECISION: Use exact terminology, avoid vagueness, define technical terms
 CONNECTIONS: Explicitly link concepts, show relationships, build understanding cumulatively
 EXAMPLES: Provide multiple detailed examples for each major concept
 CITATIONS: Reference key scholars, landmark papers, and major contributions (e.g., "Smith's 1995 study showed...")
 NUANCE: Address complexities, exceptions, and subtleties - avoid oversimplification

QUALITY MARKERS - EXCELLENCE INDICATORS:
 Demonstrates comprehensive mastery of subject matter
 Presents information in logical, well-organized academic structure
 Includes historical development and evolution of ideas
 Covers multiple theoretical perspectives and approaches
 Provides extensive examples and applications
 Addresses debates, controversies, and unresolved questions
 Makes interdisciplinary connections
 References key scholars and seminal works
 Uses precise academic language and terminology
 Maintains scholarly objectivity while offering critical analysis
 Synthesizes information into coherent, comprehensive understanding


REMEMBER: This is ABSOLUTE MAXIMUM DEEP RESEARCH MODE


You have 32,000 tokens available - USE THEM FULLY to provide the most comprehensive, thorough, scholarly, and exhaustive research response possible. Think of this as writing a book chapter or comprehensive research paper. Be MAXIMALLY thorough, EXTREMELY detailed, and ABSOLUTELY comprehensive. This is not a brief answer - this is DEEP ACADEMIC RESEARCH at the HIGHEST level.

Your response should be so comprehensive that the student could use it as a primary reference source. Leave NOTHING important unexplored. Be the DEFINITIVE resource on this topic.`,this.ultraThinkPrompt=`You are an expert AI tutor for students on a desktop app. Your role is to help with homework, concepts, and studying.

ULTRATHINK MODE - Thoughtful explanations with reasoning:
- Provide clear, well-reasoned explanations (4-6 paragraphs)
- Show step-by-step logic when solving problems
- Use formatting: headings, bullet points, code blocks, LaTeX math
- Include helpful examples and analogies
- Break down topics into understandable sections
- Explain key concepts thoroughly

Guidelines:
- Balance depth with clarity - don't overwhelm
- Explain WHY things work, not just HOW
- Use examples to build intuition
- Keep responses focused and organized
- Be thorough but concise

Remember: Provide thoughtful, well-structured responses with clear reasoning!`,this.standardPrompt=`You are an expert AI tutor for students. Your role is to help with homework, concepts, and studying.

STANDARD MODE - Concise and efficient:
- Keep responses focused and to-the-point (2-4 paragraphs)
- Use bullet points for clarity
- Provide clear, direct answers
- Use simple formatting (**, -, numbers)
- Be helpful but brief

Guidelines:
- Answer the specific question asked
- Give key examples when helpful
- Be encouraging and supportive
- If topic is complex, give quick overview

Remember: Provide clear, concise responses that get straight to the point!

**UNDERSTANDING THE APP:**
The student has access to two main organizational systems:
1. **ASSIGNMENTS** (Dashboard/Homepage) - Tasks that need to be completed: homework, projects, tests, papers
2. **CALENDAR/PLANNING** (Planning Tab) - Time-blocked schedule: classes, study sessions, events, breaks

When students ask:
- "What assignments do I have?"  Refer to ASSIGNMENTS section
- "What's on my calendar/schedule/planning?"  Refer to CALENDAR section
- "What should I work on?"  Consider both ASSIGNMENTS and CALENDAR together`}getSystemPrompt(){var i,r,s,a;let e;if(this.useDeepResearch?e=this.deepResearchPrompt:this.useUltraThink?e=this.ultraThinkPrompt:e=this.standardPrompt,!this.userContext)return e;let t=e+`

**STUDENT CONTEXT:**
`;if(this.userContext.stats){const o=this.userContext.stats;t+=`
 STUDENT OVERVIEW:
`,t+=`- Current Study Streak: ${o.currentStreak} day${o.currentStreak!==1?"s":""} (Best: ${o.longestStreak})
`,t+=`- Assignments: ${o.totalAssignments} total (${o.pendingAssignments} pending, ${o.completedAssignments} done${o.overdueAssignments>0?`, ${o.overdueAssignments} overdue`:""})
`,t+=`- Study Hours This Week: ${o.studyHoursThisWeek} hours
`,t+=`- Active Subjects: ${o.activeSubjects.length>0?o.activeSubjects.join(", "):"None"}
`,t+=`- Study Resources: ${o.totalNotes} notes, ${o.totalDecks} flashcard decks
`,t+=`- Upcoming Events (Next 7 Days): ${o.upcomingEventsCount}
`}if((i=this.userContext.upcoming)!=null&&i.assignments&&this.userContext.upcoming.assignments.length>0?(t+=`
 UPCOMING ASSIGNMENTS (Next to Work On):
`,this.userContext.upcoming.assignments.forEach(o=>{const c=o.dueDate?new Date(o.dueDate).toLocaleDateString():"No due date",l=o.priority?`[${o.priority.toUpperCase()}]`:"",d=o.timeEstimate?`~${o.timeEstimate}`:"";t+=`- ${l} ${o.title} (${o.subject||"General"}) - Due: ${c} ${d}
`})):t+=`
 UPCOMING ASSIGNMENTS: All caught up! 
`,(r=this.userContext.upcoming)!=null&&r.events&&this.userContext.upcoming.events.length>0?(t+=`
 UPCOMING SCHEDULE (Next 7 Days - ${this.userContext.upcoming.events.length} events):
`,this.userContext.upcoming.events.forEach(o=>{const c=new Date(o.activity_date+"T00:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),l=o.start_time?o.start_time.slice(0,5):"No time",d=o.duration_minutes?`${o.duration_minutes}min`:"",h=o.activity_type||"event",f=o.subject?`(${o.subject})`:"";t+=`- ${c} at ${l}: ${o.title} ${f} - ${d} [${h}]
`})):t+=`
 UPCOMING SCHEDULE: No scheduled activities in the next 7 days
`,this.userContext.calendar&&this.userContext.calendar.length>0){const o=this.userContext.calendar.length,c=((a=(s=this.userContext.upcoming)==null?void 0:s.events)==null?void 0:a.length)||0,l=o-c;t+=`
 FULL CALENDAR (Total ${o} activities: ${c} upcoming, ${l} past):
`;const d={};this.userContext.calendar.forEach(f=>{const g=f.activity_date;d[g]||(d[g]=[]),d[g].push(f)});const h=Object.keys(d).sort();h.slice(0,30).forEach(f=>{const g=new Date(f+"T00:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});t+=`
${g}:
`,d[f].forEach(v=>{const y=v.start_time?v.start_time.slice(0,5):"All day",x=v.duration_minutes?`(${v.duration_minutes}min)`:"",m=v.subject?`[${v.subject}]`:"";t+=`   ${y}: ${v.title} ${m} ${x}
`})}),h.length>30&&(t+=`
... and ${h.length-30} more dates with activities
`)}return this.userContext.grades&&this.userContext.grades.length>0&&(t+=`
Classes & Current Grades:
`,this.userContext.grades.forEach(o=>{t+=`- ${o.subject}: ${o.current}%
`})),this.userContext.notes&&this.userContext.notes.length>0&&(t+=`
Recent Study Notes (${this.userContext.notes.length} total):
`,this.userContext.notes.slice(0,3).forEach(o=>{t+=`- ${o.subject}: ${o.title}
`})),this.userContext.decks&&this.userContext.decks.length>0&&(t+=`
Flashcard Decks (${this.userContext.decks.length} total):
`,this.userContext.decks.slice(0,3).forEach(o=>{t+=`- ${o.subject}: ${o.title} (${o.cardCount} cards)
`})),t+=`
**IMPORTANT INSTRUCTIONS:**
- When asked about "assignments" or "homework"  Reference the ASSIGNMENTS section above
- When asked about "calendar", "schedule", "planning", or "what's coming up"  Reference the CALENDAR/PLANNING section
- When helping prioritize  Consider both assignments (what to work on) and calendar (when to work on it)
- Always use this context to give PERSONALIZED advice specific to their actual work!`,t}async loadUserContext(){const e=ge.getUserId();if(!e){this.userContext=null;return}try{const{data:t}=await Ii.getUpcomingAssignments(),i=Ii.toAppFormatBatch(t||[]),r=new Date;r.setHours(0,0,0,0);const s=new Date(r);s.setDate(r.getDate()-7);const a=new Date(r);a.setDate(r.getDate()+60);const o=E=>{const F=E.getFullYear(),I=String(E.getMonth()+1).padStart(2,"0"),z=String(E.getDate()).padStart(2,"0");return`${F}-${I}-${z}`},c=await Ho.getActivitiesByDateRange(o(s),o(a));console.log(" Loaded calendar data for AI:",c),console.log(" Date range:",o(s),"to",o(a));const{data:l}=await de.from("notes").select("id, title, subject, created_at").eq("user_id",e).order("created_at",{ascending:!1}).limit(5),{data:d}=await de.from("decks").select("id, title, subject, created_at").eq("user_id",e).order("created_at",{ascending:!1}).limit(5);if(d&&d.length>0)for(const E of d){const{count:F}=await de.from("flashcards").select("*",{count:"exact",head:!0}).eq("deck_id",E.id);E.cardCount=F||0}const h=[],f=ge.getUserProfile(),g={current:(f==null?void 0:f.current_streak)||0,longest:(f==null?void 0:f.longest_streak)||0},v=i.filter(E=>E.completed).length,y=i.filter(E=>!E.completed).length,x=i.filter(E=>E.completed||!E.dueDate?!1:new Date(E.dueDate)<new Date).length,m=new Date(r),b=new Date(r);b.setDate(r.getDate()+7);const w=c.filter(E=>{const F=new Date(E.activity_date+"T00:00:00");return F>=m&&F<=b});console.log(" Today:",o(m)),console.log(" Week from now:",o(b)),console.log(" Upcoming events:",w.length);const _=new Date;_.setDate(_.getDate()-_.getDay());const D=c.filter(E=>new Date(E.activity_date)>=_&&E.activity_type==="study").reduce((E,F)=>E+(F.duration_minutes||0),0)/60,A=new Set([...i.map(E=>E.subject).filter(Boolean),...c.map(E=>E.subject).filter(Boolean)]);this.userContext={assignments:i||[],calendar:c||[],notes:l||[],decks:d||[],grades:h,stats:{totalAssignments:i.length,completedAssignments:v,pendingAssignments:y,overdueAssignments:x,totalNotes:(l==null?void 0:l.length)||0,totalDecks:(d==null?void 0:d.length)||0,currentStreak:g.current,longestStreak:g.longest,studyHoursThisWeek:Math.round(D*10)/10,upcomingEventsCount:w.length,activeSubjects:Array.from(A)},upcoming:{assignments:i.filter(E=>!E.completed).slice(0,5),events:w.slice(0,10)}}}catch(t){console.error("Failed to load user context:",t),this.userContext=null}}async getUsageCount(){const e=ge.getUserProfile();return e?e.ai_chats_used_this_month||0:parseInt(localStorage.getItem("ai_chat_usage_count")||"0",10)}async getUsageCountByMode(e){const t=ge.getUserProfile();if(!t){const r=`ai_${e}_usage_count`;return parseInt(localStorage.getItem(r)||"0",10)}return t[{deepResearch:"ai_deep_research_used",ultraThink:"ai_ultrathink_used",standard:"ai_standard_used"}[e]]||0}async getAllUsageCounts(){const e=await this.getUsageCountByMode("deepResearch"),t=await this.getUsageCountByMode("ultraThink"),i=await this.getUsageCountByMode("standard"),r=await this.getUsageCount();return{deepResearch:e,ultraThink:t,standard:i,total:r}}async incrementUsage(){const e=ge.getUserId();if(!e){const t=await this.getUsageCount();return localStorage.setItem("ai_chat_usage_count",String(t+1)),t+1}try{const{data:t,error:i}=await de.rpc("increment_ai_usage",{user_uuid:e});if(i)throw i;return await ge.refreshUserProfile(),t}catch(t){return console.error("Failed to increment usage:",t),await this.getUsageCount()}}async incrementUsageByMode(e){const t=ge.getUserId();if(!t){const i=`ai_${e}_usage_count`,r=await this.getUsageCountByMode(e);return localStorage.setItem(i,String(r+1)),await this.incrementUsage(),r+1}try{const i={deepResearch:"increment_ai_deep_research",ultraThink:"increment_ai_ultrathink",standard:"increment_ai_standard"},{data:r,error:s}=await de.rpc(i[e],{user_uuid:t});if(s)throw s;return await this.incrementUsage(),await ge.refreshUserProfile(),r}catch(i){return console.error(`Failed to increment ${e} usage:`,i),await this.incrementUsage()}}async hasRemainingRequests(){const e=await this.getUsageCount(),t=ge.getAiChatLimit();return e<t}async hasRemainingRequestsForMode(e){const t=ge.isPro(),i=await this.getUsageCountByMode(e);if(t){const r=_h.pro[e];return r===-1?!0:i<r}else return await this.getUsageCount()<_h.free.total}async getRemainingRequests(){const e=await this.getUsageCount(),t=ge.getAiChatLimit();return Math.max(0,t-e)}async getRemainingRequestsForMode(e){const t=ge.isPro(),i=await this.getUsageCountByMode(e);if(t){const r=_h.pro[e];return r===-1?1/0:Math.max(0,r-i)}else{const r=await this.getUsageCount();return Math.max(0,_h.free.total-r)}}getLimits(){return{free:UW,pro:NW}}getModeLimits(){return ge.isPro()?_h.pro:_h.free}getCurrentMode(){return this.useDeepResearch?"deepResearch":this.useUltraThink?"ultraThink":"standard"}isConfigured(){return!!au.edgeFunctionUrl}getProviderName(){let e;return this.useDeepResearch?e="Llama 3.3 70B (Research)":this.useUltraThink?e="Llama 3.3 70B (UltraThink)":e="Llama 3.3 70B (Chat)",au.edgeFunctionUrl?`${e} (Secure)`:"Demo Mode"}setRegularMode(){this.useUltraThink=!1,this.useDeepResearch=!1,console.log(" Regular chat mode enabled")}toggleUltraThink(){return this.useUltraThink=!this.useUltraThink,this.useUltraThink&&(this.useDeepResearch=!1),console.log(" UltraThink mode:",this.useUltraThink?"ENABLED":"DISABLED"),this.useUltraThink}toggleDeepResearch(){return this.useDeepResearch=!this.useDeepResearch,this.useDeepResearch&&(this.useUltraThink=!1),console.log(" Deep Research mode:",this.useDeepResearch?"ENABLED":"DISABLED"),this.useDeepResearch}isUltraThinkEnabled(){return this.useUltraThink}isDeepResearchEnabled(){return this.useDeepResearch}async sendViaBackend(e,t=null){if(!au.edgeFunctionUrl)throw new Error("Supabase URL not configured. Add VITE_SUPABASE_URL to .env");ge.isAuthenticated()&&await this.loadUserContext(),this.conversationHistory.push({role:"user",content:e||" [Image]"});try{const i=[],r=this.conversationHistory.slice(-10);r.forEach((c,l)=>{if(l===r.length-1&&t&&c.role==="user"){let d=t;t.startsWith("data:image/")||(d=`data:image/jpeg;base64,${t}`);const h=[{type:"text",text:e||"Please analyze this image, read any text in it, solve any problems shown, and help me understand what it contains."},{type:"image_url",image_url:{url:d}}];i.push({role:"user",content:h})}else i.push({role:c.role,content:c.content})}),console.log(" Sending to backend with image:",!!t);const s=await fetch(au.edgeFunctionUrl,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${au.anonKey}`,apikey:au.anonKey},body:JSON.stringify({messages:i,systemPrompt:this.getSystemPrompt(),useVision:!!t,useUltraThink:this.useUltraThink,useDeepResearch:this.useDeepResearch})});if(!s.ok){const c=await s.json().catch(()=>({}));throw new Error(c.details||c.error||"Failed to get AI response")}const o=(await s.json()).message||"Sorry, I could not generate a response.";return this.conversationHistory.push({role:"assistant",content:o}),o}catch(i){throw this.conversationHistory.pop(),i}}async sendDirectToGroq(e,t=null){throw new Error("Groq API key not configured")}async sendMessage(e,t=null){if(!this.isConfigured())throw new Error("AI service not configured. Please set up Supabase or add Groq API key.");if(au.edgeFunctionUrl)return await this.sendViaBackend(e,t);throw new Error("No AI service configured")}async getDemoResponse(e){await new Promise(i=>setTimeout(i,1e3+Math.random()*1e3));const t=e.toLowerCase();return t.includes("photosynthesis")?`Great question! Photosynthesis is the process plants use to convert light energy into chemical energy. Here's how it works:

**The Process:**
1. **Light Absorption**: Chlorophyll in leaves captures sunlight
2. **Water Splitting**: Roots absorb HO from soil
3. **CO Intake**: Leaves take in carbon dioxide from air
4. **Glucose Production**: These combine to create sugar (CHO)

**The Formula**: 6CO + 6HO + light energy  CHO + 6O

The oxygen released is what we breathe! Would you like to explore any specific part of this process?`:t.includes("math")||t.includes("calculus")||t.includes("algebra")?`I'd love to help with math! Math builds on itself, so let's make sure we understand the fundamentals first.

**Key Strategy:**
1. Identify what type of problem you're solving
2. Write down what you know
3. Break it into smaller steps
4. Check your work at each step

Could you share the specific problem or concept you're working on? That way I can give you targeted help with examples!`:t.includes("study")||t.includes("prepare")||t.includes("exam")||t.includes("test")?`Effective studying is all about smart strategies! Here's my recommended approach:

**Study Techniques That Work:**
- **Spaced Repetition**: Review material over several days, not just once
- **Active Recall**: Test yourself instead of just re-reading
- **Pomodoro Technique**: 25-min focused sessions with 5-min breaks
- **Teach It**: Explain concepts to someone else (or pretend to!)

**For Exams:**
1. Review your notes within 24 hours of learning
2. Create practice questions
3. Focus on understanding "why," not just "what"
4. Get enough sleep before the exam

What subject are you studying for? I can give more specific tips!`:`That's a great question! I'm here to help you understand this better.

**To give you the best explanation**, could you tell me:
- What subject is this for?
- What specifically are you trying to understand?
- Have you learned any related concepts yet?

This will help me tailor my explanation to exactly what you need. In the meantime, remember that learning is a process - it's totally normal to not understand something right away!`}clearHistory(){this.conversationHistory=[]}getHistory(){return[...this.conversationHistory]}}const Qe=new jW;class RW{async generateSubtasks(e){try{if(!(e!=null&&e.title))throw new Error("Assignment title is required");const t=this.buildPrompt(e);console.log(" Requesting AI task breakdown for:",e.title);const i=Qe.useUltraThink,r=Qe.useDeepResearch;Qe.useUltraThink=!1,Qe.useDeepResearch=!1;try{const s=await Qe.sendMessage(t);Qe.useUltraThink=i,Qe.useDeepResearch=r,console.log(" AI Response received:",s);const a=this.parseSubtasks(s);return console.log(` Generated ${a.length} subtask suggestions`),a}catch(s){throw Qe.useUltraThink=i,Qe.useDeepResearch=r,s}}catch(t){throw console.error("Failed to generate subtasks:",t),new Error(`AI task breakdown failed: ${t.message}`)}}buildPrompt(e){const{title:t,description:i,subject:r,timeEstimate:s,dueDate:a}=e;return`You are a helpful study assistant. Break down this assignment into 3-5 clear, actionable subtasks that a student can complete in order.

**Assignment Details:**
- **Title:** ${t}
${i?`- **Description:** ${i}
`:""}${r?`- **Subject:** ${r}
`:""}${s?`- **Estimated Time:** ${s}
`:""}${a?`- **Due Date:** ${new Date(a).toLocaleDateString()}
`:""}

**Instructions:**
1. Create 3-5 subtasks that break this assignment into logical, sequential steps
2. Each subtask should be specific, actionable, and take no more than 25-30% of the total time
3. Order subtasks from first to last (what to do in sequence)
4. Keep subtask titles concise (5-10 words max)
5. Add brief descriptions explaining what each subtask involves

**Response Format (JSON):**
Respond with ONLY valid JSON in this exact format, no additional text:

\`\`\`json
{
  "subtasks": [
    {
      "title": "Research and gather sources",
      "description": "Find 3-5 credible sources related to the topic. Create a bibliography.",
      "confidence": 0.9
    },
    {
      "title": "Create outline",
      "description": "Organize main points and structure based on research findings.",
      "confidence": 0.85
    }
  ]
}
\`\`\`

Remember: Respond with ONLY the JSON object, nothing else.`}parseSubtasks(e){try{let t=e.trim();t=t.replace(/```json\s*/g,"").replace(/```\s*/g,"");const i=t.match(/\{[\s\S]*"subtasks"[\s\S]*\}/);i&&(t=i[0]);const r=JSON.parse(t);if(!r.subtasks||!Array.isArray(r.subtasks))throw new Error("Invalid response format: missing subtasks array");return r.subtasks.filter(a=>a.title&&a.title.trim().length>0).map((a,o)=>{var c;return{title:a.title.trim(),description:((c=a.description)==null?void 0:c.trim())||"",confidence:typeof a.confidence=="number"?a.confidence:.8,order:o}}).slice(0,5)}catch(t){return console.error("Failed to parse AI response:",t),console.error("Raw response:",e),this.fallbackParse(e)}}fallbackParse(e){try{console.log(" Using fallback parser for response");const t=e.split(`
`).filter(a=>a.trim()),i=[];let r=null,s="";return t.forEach(a=>{const o=a.trim();/^(\d+\.|[-*])\s*(.+)/.test(o)?(r&&i.push({title:r,description:s.trim(),confidence:.7}),r=o.replace(/^(\d+\.|[-*])\s*/,"").trim(),s=""):r&&o.length>0&&(s+=(s?" ":"")+o)}),r&&i.push({title:r,description:s.trim(),confidence:.7}),i.length===0?(console.log(" Could not parse response, using generic breakdown"),this.getGenericBreakdown()):i.slice(0,5)}catch(t){return console.error("Fallback parser failed:",t),this.getGenericBreakdown()}}getGenericBreakdown(){return[{title:"Review assignment requirements",description:"Read through all instructions and understand what is expected",confidence:.6},{title:"Gather materials and resources",description:"Collect all necessary materials, research sources, or tools needed",confidence:.6},{title:"Complete main work",description:"Work on the primary assignment task or deliverable",confidence:.6},{title:"Review and finalize",description:"Proofread, check for errors, and make final improvements",confidence:.6}]}isAvailable(){try{return Qe.isConfigured()}catch{return!1}}estimateSubtaskTimes(e,t){if(!e||t<=0)return[];const i=e/t,r=[];for(let o=0;o<t;o++){let c=1;o===0&&(c=1.1),o===t-1&&(c=1.15),o>0&&o<t-1&&(c=.9),r.push(Math.round(i*c))}const s=r.reduce((o,c)=>o+c,0),a=e/s;return r.map(o=>Math.round(o*a))}}const FW=new RW,OW={async recordAssignmentCompleted(n,e=null,t=0){try{const{user:i}=await ge.getCurrentUser();if(!i)throw new Error("Not authenticated");const{data:r,error:s}=await de.from("course_stats").select("*").eq("user_id",i.id).eq("course_name",n).maybeSingle();if(s&&s.code!=="PGRST116")throw s;if(r){const{error:a}=await de.from("course_stats").update({assignments_completed:r.assignments_completed+1,total_focus_minutes:r.total_focus_minutes+t,last_activity_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("user_id",i.id).eq("course_name",n);if(a)throw a}else{const{error:a}=await de.from("course_stats").insert({user_id:i.id,course_name:n,course_code:e,assignments_completed:1,total_focus_minutes:t,focus_sessions:0,last_activity_at:new Date().toISOString()});if(a)throw a}console.log(` Recorded assignment completion for ${n} (${t} min)`)}catch(i){console.error("Failed to record assignment completion:",i)}},async recordFocusSession(n,e,t=null){try{const{user:i}=await ge.getCurrentUser();if(!i)throw new Error("Not authenticated");const{data:r,error:s}=await de.from("course_stats").select("*").eq("user_id",i.id).eq("course_name",n).maybeSingle();if(s&&s.code!=="PGRST116")throw s;if(r){const{error:a}=await de.from("course_stats").update({focus_sessions:r.focus_sessions+1,total_focus_minutes:r.total_focus_minutes+e,last_activity_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("user_id",i.id).eq("course_name",n);if(a)throw a}else{const{error:a}=await de.from("course_stats").insert({user_id:i.id,course_name:n,course_code:t,focus_sessions:1,total_focus_minutes:e,last_activity_at:new Date().toISOString()});if(a)throw a}console.log(` Recorded ${e} min focus session for ${n}`)}catch(i){console.error("Failed to record focus session:",i)}},async getCourseStats(){try{const{user:n}=await ge.getCurrentUser();if(!n)return[];const{data:e,error:t}=await de.from("course_stats").select("*").eq("user_id",n.id).order("total_focus_minutes",{ascending:!1});if(t)throw t;return e||[]}catch(n){return console.error("Failed to get course stats:",n),[]}},async getCourseStatsByName(n){try{const{user:e}=await ge.getCurrentUser();if(!e)return null;const{data:t,error:i}=await de.from("course_stats").select("*").eq("user_id",e.id).eq("course_name",n).single();if(i&&i.code!=="PGRST116")throw i;return t||null}catch(e){return console.error("Failed to get course stats:",e),null}},async getTopCoursesByTime(n=5){try{const{user:e}=await ge.getCurrentUser();if(!e)return[];const{data:t,error:i}=await de.from("course_stats").select("*").eq("user_id",e.id).order("total_focus_minutes",{ascending:!1}).limit(n);if(i)throw i;return t||[]}catch(e){return console.error("Failed to get top courses:",e),[]}},async getTotalStats(){try{return(await this.getCourseStats()).reduce((t,i)=>({totalCourses:t.totalCourses+1,totalAssignments:t.totalAssignments+i.assignments_completed,totalSessions:t.totalSessions+i.focus_sessions,totalMinutes:t.totalMinutes+i.total_focus_minutes}),{totalCourses:0,totalAssignments:0,totalSessions:0,totalMinutes:0})}catch(n){return console.error("Failed to get total stats:",n),{totalCourses:0,totalAssignments:0,totalSessions:0,totalMinutes:0}}}};let vf=[],qm=[];const Ne={success:n=>{mv({type:"success",message:n})},error:n=>{mv({type:"error",message:n})},info:n=>{mv({type:"info",message:n})},warning:n=>{mv({type:"warning",message:n})}};function mv(n){const e=Date.now()+Math.random(),t={...n,id:e};vf=[...vf,t],qm.forEach(i=>i(vf)),setTimeout(()=>{F6(e)},4e3)}function F6(n){vf=vf.filter(e=>e.id!==n),qm.forEach(e=>e(vf))}function MW(){const[n,e]=ee.useState([]);return ee.useEffect(()=>{const t=i=>e(i);return qm.push(t),()=>{qm=qm.filter(i=>i!==t)}},[]),n.length===0?null:GS.createPortal(p.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 pointer-events-none",children:n.map(t=>p.jsx("div",{className:`pointer-events-auto min-w-[300px] max-w-md p-4 rounded-xl shadow-lg border backdrop-blur-sm animate-slideInRight ${t.type==="success"?"bg-green-500/90 border-green-400 text-white":t.type==="error"?"bg-red-500/90 border-red-400 text-white":t.type==="warning"?"bg-amber-500/90 border-amber-400 text-white":"bg-blue-500/90 border-blue-400 text-white"}`,children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsxs("div",{className:"flex-shrink-0 mt-0.5",children:[t.type==="success"&&p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.type==="error"&&p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.type==="warning"&&p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),t.type==="info"&&p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),p.jsx("div",{className:"flex-1 text-sm font-medium whitespace-pre-line",children:t.message}),p.jsx("button",{onClick:()=>F6(t.id),className:"flex-shrink-0 text-white/80 hover:text-white transition-colors",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},t.id))}),document.body)}let tx=[],nx=null;const Qd=(n,e,t="Delete",i="Cancel")=>new Promise(r=>{nx={title:n,message:e,confirmText:t,cancelText:i,onConfirm:()=>{nx=null,C_(),r(!0)},onCancel:()=>{nx=null,C_(),r(!1)}},C_()});function C_(){tx.forEach(n=>n(nx))}function BW(){const[n,e]=qk.useState(null);return qk.useEffect(()=>{const t=i=>e(i);return tx.push(t),()=>{tx=tx.filter(i=>i!==t)}},[]),n?GS.createPortal(p.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 animate-fadeIn",children:[p.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:n.onCancel}),p.jsxs("div",{className:"relative bg-dark-bg-secondary rounded-2xl shadow-2xl border border-dark-border-glow max-w-md w-full p-6 animate-scaleIn",children:[p.jsx("h3",{className:"text-xl font-bold text-dark-text-primary mb-2",children:n.title}),p.jsx("p",{className:"text-dark-text-secondary mb-6",children:n.message}),p.jsxs("div",{className:"flex gap-3 justify-end",children:[p.jsx("button",{onClick:n.onCancel,className:"px-4 py-2 rounded-xl font-semibold text-dark-text-secondary bg-dark-bg-tertiary hover:bg-dark-bg-surface transition-colors",children:n.cancelText}),p.jsx("button",{onClick:n.onConfirm,className:"px-4 py-2 rounded-xl font-semibold text-white bg-red-500 hover:bg-red-600 transition-colors",children:n.confirmText})]})]})]}),document.body):null}const LW=({onOpenScanner:n,focusTimerProps:e})=>{const{focusTask:t,setFocusTask:i,focusTime:r,setFocusTime:s,focusActive:a,setFocusActive:o,focusPaused:c,setFocusPaused:l}=e||{},[d,h]=ee.useState("there"),[f,g]=ee.useState([]),[v,y]=ee.useState(!1),[x,m]=ee.useState(!0),[b,w]=ee.useState(!0),[_,D]=ee.useState(!1),[A,E]=ee.useState(""),[F,I]=ee.useState(""),[z,H]=ee.useState(!1),[k,W]=ee.useState(!1),[S,G]=ee.useState(""),[j,M]=ee.useState(!1),[R,N]=ee.useState({title:"",subject:"",dueDate:"",priority:"medium",timeEstimate:""}),[B,L]=ee.useState({}),[P,q]=ee.useState(new Set),[Q,se]=ee.useState(null),[be,ye]=ee.useState(!1),[fe,xe]=ee.useState(!1),[ce,le]=ee.useState(()=>{const re=localStorage.getItem("dailyStudyGoal");return re?parseInt(re):120}),[Y,ae]=ee.useState(0),[C,ie]=ee.useState(0),[te,V]=ee.useState({completed:0,total:0}),$=re=>{const Te=new Date;return Te.setDate(Te.getDate()-14),re.filter(Re=>Re.dueDate?new Date(Re.dueDate)>=Te:!0)};ee.useEffect(()=>{ue(),Z(),J()},[]);const J=async()=>{try{const re=new Date,Te=await Ho.getActivitiesForMonth(re.getFullYear(),re.getMonth()),Re=new Date(re.getFullYear(),re.getMonth()-1,1),lt=await Ho.getActivitiesForMonth(Re.getFullYear(),Re.getMonth()),ft=[...Te,...lt],Yn=re.toISOString().split("T")[0],q0=ft.filter(Vi=>Vi.activity_date===Yn&&Vi.is_completed).reduce((Vi,$0)=>Vi+($0.duration_minutes||0),0);ae(q0);let Ow=0;const Fg=new Date,Ok=ft.some(Vi=>Vi.activity_date===Yn&&Vi.is_completed);Ok||Fg.setDate(Fg.getDate()-1);for(let Vi=0;Vi<60;Vi++){const $0=Fg.toISOString().split("T")[0];if(ft.filter(Bk=>Bk.activity_date===$0&&Bk.is_completed).length>0)Ow++,Fg.setDate(Fg.getDate()-1);else break}Ok&&Ow++,ie(Ow);const Mw=new Date;Mw.setDate(Mw.getDate()-7);const{data:Bw}=await Ii.getUpcomingAssignments(),Mk=(Bw==null?void 0:Bw.filter(Vi=>new Date(Vi.created_at)>=Mw))||[];V({completed:Mk.filter(Vi=>Vi.completed).length,total:Mk.length})}catch(re){console.error("Failed to load productivity stats:",re)}},ue=async()=>{var Re,lt;const{user:re}=await ge.getCurrentUser();await ge.refreshUserProfile();const Te=ge.getUserProfile();h(((Re=Te==null?void 0:Te.full_name)==null?void 0:Re.split(" ")[0])||((lt=re==null?void 0:re.email)==null?void 0:lt.split("@")[0])||"there"),w(!!(Te!=null&&Te.canvas_url))},pe=async()=>{if(!A.trim()||!F.trim()){Ne.error("Both URL and token are required");return}H(!0);try{await ge.updateUserProfile({canvas_url:A.trim(),canvas_token:F.trim()}),w(!0),D(!1),Ne.success("Canvas connected! Syncing assignments..."),await Xe()}catch{Ne.error("Failed to save Canvas settings")}finally{H(!1)}},Z=async()=>{m(!0);try{const{data:re,error:Te}=await Ii.getUpcomingAssignments();if(Te)throw Te;const Re=Ii.toAppFormatBatch(re);g(Re),await X(Re)}catch(re){console.error("Failed to load assignments:",re)}finally{m(!1)}},X=async re=>{const Te={};await Promise.all(re.map(async Re=>{const lt=await Wg.getSubtasks(Re.id);lt.length>0&&(Te[Re.id]=lt)})),L(Te)},K=async()=>{if(!R.title.trim()){Ne.error("Please enter a title");return}try{await Ii.createAssignment({title:R.title,subject:R.subject,dueDate:R.dueDate||null,priority:R.priority,timeEstimate:R.timeEstimate||null,source:"manual"}),await Z(),N({title:"",subject:"",dueDate:"",priority:"medium",timeEstimate:""}),W(!1)}catch{Ne.error("Failed to create assignment")}},ne=async()=>{if(S.trim()){M(!0);try{const re=await TW.parseAssignment(S);await Ii.createAssignment({title:re.title,subject:re.subject,dueDate:re.dueDate,priority:re.priority,timeEstimate:re.timeEstimate,source:"manual",aiCaptured:!0}),await Z(),Ne.success(`Created: ${re.title}`),G("")}catch{Ne.error("Failed to parse assignment")}finally{M(!1)}}},oe=async(re,Te)=>{if(Te==="canvas"){Ne.warning("Canvas assignments cannot be deleted here");return}if(await Qd("Delete Assignment","Are you sure?"))try{await Ii.deleteAssignment(re),await Z()}catch{Ne.error("Failed to delete")}},we=async(re,Te)=>{try{const Re=!Te,lt=f.find(ft=>ft.id===re);if(await Ii.updateAssignment(re,{completed:Re,progress:Re?100:0}),Re&&(lt!=null&&lt.subject)){let ft=0;if(lt.timeEstimate){const Yn=lt.timeEstimate.toLowerCase(),gh=Yn.match(/(\d+)\s*h/),q0=Yn.match(/(\d+)\s*m/);gh&&(ft+=parseInt(gh[1])*60),q0&&(ft+=parseInt(q0[1]))}await OW.recordAssignmentCompleted(lt.subject,null,ft)}g(ft=>ft.map(Yn=>Yn.id===re?{...Yn,completed:Re,progress:Re?100:0}:Yn))}catch{Ne.error("Failed to update"),await Z()}},Ue=async re=>{try{ye(!0);const Te=await FW.generateSubtasks(re);se({assignment:re,suggestions:Te})}catch{Ne.error("Failed to generate breakdown")}finally{ye(!1)}},He=async()=>{if(Q)try{await Wg.createSubtasksBulk(Q.assignment.id,Q.suggestions);const re=await Wg.getSubtasks(Q.assignment.id);L(Te=>({...Te,[Q.assignment.id]:re})),q(Te=>new Set([...Te,Q.assignment.id])),se(null)}catch{Ne.error("Failed to add subtasks")}},je=async re=>{await Wg.toggleSubtask(re.id,!re.completed);const Te=await Wg.getSubtasks(re.assignment_id);L(Re=>({...Re,[re.assignment_id]:Te})),await Z()},Xe=async()=>{y(!0);try{const re=await ar.syncToDatabase();re.success&&(await Z(),Ne.success(re.synced>0?`Synced ${re.synced} assignments`:"All up to date"))}catch{Ne.error("Failed to sync from Canvas")}finally{y(!1)}},wt=()=>{const re=new Date().getHours();return re<12?"Good morning":re<18?"Good afternoon":"Good evening"},Ke=re=>{const Te=Math.ceil((new Date(re)-new Date)/864e5);return Te===0?"Today":Te===1?"Tomorrow":Te<0?"Overdue":`${Te}d`},Jt=re=>{if(!re.dueDate)return{level:"none",color:"text-text-muted",bg:"bg-surface-base"};const Te=Math.ceil((new Date(re.dueDate)-new Date)/(1e3*60*60*24));let Re=1;if(re.timeEstimate){const ft=re.timeEstimate.toLowerCase(),Yn=ft.match(/(\d+)\s*h/),gh=ft.match(/(\d+)\s*m/);Yn&&(Re=parseInt(Yn[1])),gh&&(Re+=parseInt(gh[1])/60)}const lt=Math.ceil(Re/2);return Te<0?{level:"overdue",color:"text-error",bg:"bg-error/10",icon:"alert"}:Te===0?{level:"critical",color:"text-error",bg:"bg-error/10",icon:"fire"}:Te<=lt?{level:"high",color:"text-accent-warm",bg:"bg-accent-warm/10",icon:"warning"}:Te<=lt*2?{level:"medium",color:"text-primary",bg:"bg-primary/10",icon:"clock"}:{level:"low",color:"text-success",bg:"bg-success/10",icon:"check"}},Xn=()=>{const re=yc.filter(Re=>!Re.completed);return re.length===0?null:re.map(Re=>{let lt=0;if(Re.dueDate){const ft=Math.ceil((new Date(Re.dueDate)-new Date)/864e5);ft<0?lt+=100:ft===0?lt+=80:ft===1?lt+=60:lt+=Math.max(0,40-ft*2)}return Re.priority==="high"?lt+=30:Re.priority==="medium"&&(lt+=15),{...Re,score:lt}}).sort((Re,lt)=>lt.score-Re.score)[0]},Hi=re=>{if(re<60)return`${re}m`;const Te=Math.floor(re/60),Re=re%60;return Re>0?`${Te}h ${Re}m`:`${Te}h`},jg=re=>{const Te=Math.floor(re/60),Re=re%60;return`${Te}:${String(Re).padStart(2,"0")}`},Rg=re=>{i(re),s(0),o(!0),l(!1)},Rw=async()=>{if(t&&r>0){const re=Math.round(r/60);ae(Te=>Te+re);try{const Te=new Date().toISOString().split("T")[0];await Ho.createActivity({title:`Studied: ${t.title}`,activity_type:"study",activity_date:Te,duration_minutes:re,subject:t.subject||"General",is_completed:!0}),Ne.success(`Logged ${re}m studying ${t.title}`)}catch(Te){console.error("Failed to log study session:",Te)}}i(null),s(0),o(!1),l(!1)},Fw=Math.min(100,Math.round(Y/ce*100)),yc=$(f),bc=yc.filter(re=>re.completed).length,vc=yc.filter(re=>!re.completed).length,W0=yc.filter(re=>!re.completed),Fk=yc.filter(re=>re.completed);return p.jsxs("div",{className:"min-h-screen p-6 md:p-8 lg:p-10 max-w-4xl mx-auto",children:[p.jsx("header",{className:"mb-10 animate-fade-up",children:p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{children:[p.jsxs("h1",{className:"text-3xl md:text-4xl font-semibold text-text-primary tracking-tight",children:[wt(),", ",d]}),p.jsx("p",{className:"text-text-secondary mt-2 text-lg",children:vc===0?p.jsx("span",{className:"text-primary",children:"All caught up"}):p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"text-accent-warm",children:vc}),p.jsxs("span",{className:"text-text-muted",children:[" task",vc!==1?"s":""," ahead"]})]})})]}),p.jsxs("button",{onClick:Xe,disabled:v,className:"px-4 py-2.5 bg-surface-elevated hover:bg-surface-overlay text-text-secondary hover:text-text-primary rounded-xl transition-all duration-200 flex items-center gap-2 text-sm font-medium",children:[v?p.jsx("div",{className:"w-4 h-4 border-2 border-text-muted/30 border-t-text-secondary rounded-full animate-spin"}):p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),p.jsx("span",{className:"hidden sm:inline",children:"Sync"})]})]})}),t&&p.jsx("div",{className:"mb-6 animate-fade-up",children:p.jsx("div",{className:"bg-primary/10 border border-primary/20 rounded-2xl p-4",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:`w-12 h-12 rounded-xl bg-primary/20 flex items-center justify-center ${a&&!c?"animate-pulse":""}`,children:p.jsx("svg",{className:"w-6 h-6 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-xs text-primary font-medium uppercase tracking-wider",children:a&&!c?"Focusing on":c?"Paused":"Focus Session"}),p.jsx("h3",{className:"font-semibold text-text-primary",children:t.title})]})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("span",{className:"text-3xl font-mono font-bold text-primary tabular-nums",children:jg(r)}),p.jsxs("div",{className:"flex gap-2",children:[a&&!c?p.jsx("button",{onClick:()=>l(!0),className:"p-2.5 bg-surface-elevated hover:bg-surface-overlay rounded-xl transition-colors",title:"Pause",children:p.jsx("svg",{className:"w-5 h-5 text-text-secondary",fill:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})})}):c?p.jsx("button",{onClick:()=>l(!1),className:"p-2.5 bg-primary/20 hover:bg-primary/30 rounded-xl transition-colors",title:"Resume",children:p.jsx("svg",{className:"w-5 h-5 text-primary",fill:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{d:"M8 5v14l11-7z"})})}):null,p.jsx("button",{onClick:Rw,className:"p-2.5 bg-error/10 hover:bg-error/20 rounded-xl transition-colors",title:"Stop & Save",children:p.jsx("svg",{className:"w-5 h-5 text-error",fill:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{d:"M6 6h12v12H6z"})})})]})]})]})})}),p.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6 animate-fade-up stagger-1",children:[p.jsxs("div",{className:"bg-surface-elevated rounded-2xl p-4",children:[p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsx("span",{className:"text-xs font-medium text-text-muted uppercase tracking-wider",children:"Today"}),p.jsx("button",{onClick:()=>{const re=prompt("Set daily study goal (minutes):",ce);re&&!isNaN(re)&&(le(parseInt(re)),localStorage.setItem("dailyStudyGoal",re))},className:"text-xs text-text-muted hover:text-text-secondary",children:"Edit"})]}),p.jsxs("div",{className:"flex items-end gap-2 mb-2",children:[p.jsx("span",{className:"text-2xl font-semibold text-text-primary",children:Hi(Y)}),p.jsxs("span",{className:"text-sm text-text-muted mb-0.5",children:["/ ",Hi(ce)]})]}),p.jsx("div",{className:"h-1.5 bg-surface-base rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-500",style:{width:`${Fw}%`}})})]}),p.jsxs("div",{className:"bg-surface-elevated rounded-2xl p-4",children:[p.jsx("span",{className:"text-xs font-medium text-text-muted uppercase tracking-wider",children:"Streak"}),p.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[p.jsx("span",{className:"text-2xl font-semibold text-accent-warm",children:C}),p.jsxs("span",{className:"text-sm text-text-muted",children:["day",C!==1?"s":""]})]}),p.jsx("div",{className:"flex gap-0.5 mt-2",children:[...Array(7)].map((re,Te)=>p.jsx("div",{className:`flex-1 h-1.5 rounded-full ${Te<Math.min(C,7)?"bg-accent-warm":"bg-surface-base"}`},Te))})]}),p.jsxs("div",{className:"bg-surface-elevated rounded-2xl p-4",children:[p.jsx("span",{className:"text-xs font-medium text-text-muted uppercase tracking-wider",children:"This Week"}),p.jsxs("div",{className:"flex items-end gap-2 mt-3",children:[p.jsx("span",{className:"text-2xl font-semibold text-success",children:te.completed}),p.jsxs("span",{className:"text-sm text-text-muted mb-0.5",children:["/ ",te.total," done"]})]}),p.jsx("div",{className:"h-1.5 bg-surface-base rounded-full overflow-hidden mt-2",children:p.jsx("div",{className:"h-full bg-success rounded-full transition-all duration-500",style:{width:`${te.total>0?te.completed/te.total*100:0}%`}})})]})]}),Xn()&&!t&&p.jsx("div",{className:"mb-6 animate-fade-up stagger-1",children:p.jsx("div",{className:`p-4 rounded-2xl ${Jt(Xn()).bg} border border-${Jt(Xn()).color.replace("text-","")}/20`,children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:`w-10 h-10 rounded-xl ${Jt(Xn()).bg} flex items-center justify-center`,children:p.jsx("svg",{className:`w-5 h-5 ${Jt(Xn()).color}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("span",{className:`text-xs font-medium ${Jt(Xn()).color} uppercase tracking-wider`,children:"Recommended"}),p.jsx("h3",{className:"font-medium text-text-primary truncate",children:Xn().title})]}),Xn().dueDate&&p.jsx("span",{className:`text-sm font-medium ${Jt(Xn()).color} mr-2`,children:Ke(Xn().dueDate)}),p.jsxs("button",{onClick:()=>Rg(Xn()),className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-xl font-medium hover:bg-primary-hover transition-colors",children:[p.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Start Focus"]})]})})}),p.jsx("div",{className:"mb-8 animate-fade-up stagger-2",children:p.jsxs("div",{className:"bg-surface-elevated rounded-2xl border border-border p-4",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[p.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-accent-cool/10 rounded-lg",children:[p.jsx("svg",{className:"w-3.5 h-3.5 text-accent-cool",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),p.jsx("span",{className:"text-xs font-medium text-accent-cool",children:"AI-Powered"})]}),p.jsx("span",{className:"text-xs text-text-muted",children:"Just type naturally - AI will parse dates, subjects & priority"})]}),p.jsxs("div",{className:"relative group",children:[p.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-muted",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4v16m8-8H4"})})}),p.jsx("input",{type:"text",value:S,onChange:re=>G(re.target.value),onKeyPress:re=>re.key==="Enter"&&ne(),placeholder:"Math homework chapter 5 due Friday, high priority...",className:"w-full bg-surface-base border border-border rounded-xl pl-12 pr-24 py-3.5 text-base text-text-primary placeholder:text-text-muted focus:outline-none focus:border-primary/50 focus:ring-2 focus:ring-primary/20 transition-all",disabled:j}),p.jsx("button",{onClick:ne,disabled:j||!S.trim(),className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-2 px-4 py-2 rounded-lg bg-primary hover:bg-primary-hover text-white font-medium text-sm transition-all disabled:opacity-30 disabled:bg-primary",children:j?p.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):p.jsxs(p.Fragment,{children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add"]})})]})]})}),p.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6 animate-fade-up stagger-2",children:[p.jsx("button",{onClick:()=>{W0.length>0?xe(!0):Ne.info("No tasks to focus on")},disabled:t!==null,className:`group p-5 rounded-2xl transition-all duration-300 hover:-translate-y-0.5 ${t?"bg-primary/10 border-2 border-primary/30":"bg-surface-elevated hover:bg-surface-overlay"}`,children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:`w-11 h-11 rounded-xl flex items-center justify-center transition-colors ${t?"bg-primary/20":"bg-success/10 group-hover:bg-success/15"}`,children:p.jsxs("svg",{className:`w-5 h-5 ${t?"text-primary":"text-success"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),p.jsxs("div",{className:"text-left",children:[p.jsx("div",{className:"font-medium text-text-primary",children:t?"Focusing":"Focus"}),p.jsx("div",{className:"text-sm text-text-muted",children:t?jg(r):"Start session"})]})]})}),p.jsx("button",{onClick:n,className:"group p-5 bg-surface-elevated hover:bg-surface-overlay rounded-2xl transition-all duration-300 hover:-translate-y-0.5",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-11 h-11 rounded-xl bg-primary/10 group-hover:bg-primary/15 flex items-center justify-center transition-colors",children:p.jsxs("svg",{className:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),p.jsxs("div",{className:"text-left",children:[p.jsx("div",{className:"font-medium text-text-primary",children:"Scan"}),p.jsx("div",{className:"text-sm text-text-muted",children:"Capture"})]})]})}),p.jsx("button",{onClick:()=>W(!0),className:"group p-5 bg-surface-elevated hover:bg-surface-overlay rounded-2xl transition-all duration-300 hover:-translate-y-0.5",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-11 h-11 rounded-xl bg-accent-warm/10 group-hover:bg-accent-warm/15 flex items-center justify-center transition-colors",children:p.jsx("svg",{className:"w-5 h-5 text-accent-warm",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4v16m8-8H4"})})}),p.jsxs("div",{className:"text-left",children:[p.jsx("div",{className:"font-medium text-text-primary",children:"Add"}),p.jsx("div",{className:"text-sm text-text-muted",children:"New task"})]})]})})]}),!b&&!_&&p.jsx("div",{className:"mb-10 animate-fade-up stagger-2",children:p.jsx("div",{className:"bg-gradient-to-br from-primary/5 to-accent-cool/5 border border-primary/10 rounded-2xl p-5",children:p.jsxs("div",{className:"flex items-start gap-4",children:[p.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center flex-shrink-0",children:p.jsx("svg",{className:"w-6 h-6 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"font-semibold text-text-primary",children:"Connect Canvas LMS"}),p.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Automatically sync your assignments and due dates from Canvas"}),p.jsx("button",{onClick:()=>D(!0),className:"mt-4 px-4 py-2 bg-primary text-text-inverse rounded-xl hover:bg-primary-hover transition-colors text-sm font-medium",children:"Set Up Canvas"})]}),p.jsx("button",{onClick:()=>w(!0),className:"p-1.5 text-text-muted hover:text-text-secondary transition-colors",title:"Dismiss",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}),_&&p.jsx("div",{className:"mb-10 animate-fade-up",children:p.jsxs("div",{className:"bg-surface-elevated rounded-2xl p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-5",children:[p.jsx("h3",{className:"font-semibold text-text-primary",children:"Connect Canvas"}),p.jsx("button",{onClick:()=>D(!1),className:"p-1.5 text-text-muted hover:text-text-secondary transition-colors",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm text-text-secondary mb-2 block",children:"Canvas URL"}),p.jsx("input",{type:"url",value:A,onChange:re=>E(re.target.value),className:"input",placeholder:"https://school.instructure.com"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm text-text-secondary mb-2 block",children:"API Token"}),p.jsx("input",{type:"password",value:F,onChange:re=>I(re.target.value),className:"input",placeholder:"Your Canvas API token"}),p.jsx("p",{className:"text-xs text-text-muted mt-2",children:"Find your token: Canvas  Account  Settings  New Access Token"})]}),p.jsxs("div",{className:"flex gap-3 pt-2",children:[p.jsx("button",{onClick:()=>D(!1),className:"flex-1 py-3 bg-surface-overlay text-text-secondary rounded-xl hover:bg-surface-overlay/80 transition-colors font-medium",children:"Cancel"}),p.jsx("button",{onClick:pe,disabled:z,className:"flex-1 py-3 bg-primary text-text-inverse rounded-xl hover:bg-primary-hover transition-colors font-medium disabled:opacity-50 flex items-center justify-center gap-2",children:z?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Connecting..."]}):"Connect Canvas"})]})]})]})}),p.jsxs("section",{className:"animate-fade-up stagger-3",children:[p.jsxs("div",{className:"flex items-center justify-between mb-5",children:[p.jsx("h2",{className:"text-sm font-medium text-text-muted uppercase tracking-wider",children:"Tasks"}),bc>0&&p.jsxs("span",{className:"text-xs text-text-muted",children:[bc," completed"]})]}),x?p.jsx("div",{className:"flex justify-center py-16",children:p.jsx("div",{className:"w-6 h-6 border-2 border-primary/20 border-t-primary rounded-full animate-spin"})}):W0.length===0?p.jsxs("div",{className:"text-center py-16",children:[p.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-surface-elevated flex items-center justify-center",children:p.jsx("svg",{className:"w-7 h-7 text-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5 13l4 4L19 7"})})}),p.jsx("p",{className:"text-text-secondary",children:"You're all caught up"}),p.jsx("p",{className:"text-sm text-text-muted mt-1",children:"Enjoy your focus time"})]}):p.jsx("div",{className:"space-y-3",children:W0.map((re,Te)=>{var lt;const Re=Jt(re);return p.jsx("div",{className:"group bg-surface-elevated hover:bg-surface-overlay rounded-2xl overflow-hidden transition-all duration-300",style:{animationDelay:`${Te*.05}s`},children:p.jsxs("div",{className:"flex",children:[p.jsx("div",{className:`w-1 ${Re.level==="overdue"||Re.level==="critical"?"bg-error":Re.level==="high"?"bg-accent-warm":Re.level==="medium"?"bg-primary":Re.level==="low"?"bg-success":"bg-transparent"}`}),p.jsx("div",{className:"flex-1 p-5",children:p.jsxs("div",{className:"flex items-start gap-4",children:[p.jsx("button",{onClick:()=>we(re.id,re.completed),className:`mt-0.5 w-5 h-5 rounded-full border-2 transition-all flex-shrink-0 ${Re.level==="overdue"||Re.level==="critical"?"border-error/50 hover:border-error hover:bg-error/10":"border-text-muted/30 hover:border-primary hover:bg-primary/10"}`}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-start justify-between gap-3",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"font-medium text-text-primary leading-snug",children:re.title}),re.subject&&p.jsx("span",{className:"inline-block mt-1.5 text-xs font-medium text-text-muted bg-surface-base px-2 py-0.5 rounded-md",children:re.subject})]}),re.dueDate&&p.jsx("span",{className:`flex-shrink-0 text-xs font-medium px-2.5 py-1 rounded-lg ${Ke(re.dueDate)==="Overdue"?"bg-error/10 text-error":Ke(re.dueDate)==="Today"?"bg-accent-warm/10 text-accent-warm":"bg-surface-base text-text-secondary"}`,children:Ke(re.dueDate)})]}),re.timeEstimate&&p.jsx("p",{className:"text-sm text-text-muted mt-2",children:re.timeEstimate}),((lt=B[re.id])==null?void 0:lt.length)>0&&p.jsxs("div",{className:"mt-4 pt-4 border-t border-border",children:[p.jsxs("button",{onClick:()=>q(ft=>{const Yn=new Set(ft);return Yn.has(re.id)?Yn.delete(re.id):Yn.add(re.id),Yn}),className:"text-sm text-text-secondary hover:text-text-primary flex items-center gap-2 transition-colors",children:[p.jsxs("span",{className:"text-xs text-text-muted",children:[B[re.id].filter(ft=>ft.completed).length,"/",B[re.id].length]}),p.jsx("span",{children:"subtasks"}),p.jsx("svg",{className:`w-3.5 h-3.5 transition-transform duration-200 ${P.has(re.id)?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),P.has(re.id)&&p.jsx("div",{className:"mt-3 space-y-2",children:B[re.id].map(ft=>p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("button",{onClick:()=>je(ft),className:`w-4 h-4 rounded flex-shrink-0 flex items-center justify-center transition-all ${ft.completed?"bg-success text-white":"border border-text-muted/30 hover:border-success"}`,children:ft.completed&&p.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),p.jsx("span",{className:`text-sm ${ft.completed?"text-text-muted line-through":"text-text-secondary"}`,children:ft.title})]},ft.id))})]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("button",{onClick:()=>Rg(re),disabled:t!==null,className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg font-medium text-sm transition-all ${t!==null?"bg-surface-base text-text-muted opacity-50":"bg-primary/10 text-primary hover:bg-primary/20"}`,children:[p.jsxs("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Focus"]}),p.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[p.jsx("button",{onClick:()=>Ue(re),disabled:be,className:"p-2 text-text-muted hover:text-accent-cool hover:bg-accent-cool/10 rounded-lg transition-all",title:"AI Breakdown",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),re.source!=="canvas"&&p.jsx("button",{onClick:()=>oe(re.id,re.source),className:"p-2 text-text-muted hover:text-error hover:bg-error/10 rounded-lg transition-all",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})})]})},re.id)})}),Fk.length>0&&p.jsxs("div",{className:"mt-8 pt-6 border-t border-border",children:[p.jsx("h3",{className:"text-xs font-medium text-text-muted uppercase tracking-wider mb-4",children:"Completed"}),p.jsx("div",{className:"space-y-2",children:Fk.slice(0,5).map(re=>p.jsxs("div",{className:"flex items-center gap-3 py-2 group",children:[p.jsx("button",{onClick:()=>we(re.id,re.completed),className:"w-5 h-5 rounded-full bg-success/20 flex items-center justify-center flex-shrink-0 hover:bg-success/30 transition-colors",children:p.jsx("svg",{className:"w-3 h-3 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),p.jsx("span",{className:"text-text-muted line-through text-sm",children:re.title})]},re.id))})]})]}),k&&p.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:p.jsxs("div",{className:"bg-surface-elevated rounded-3xl p-6 md:p-8 max-w-md w-full animate-scale-in",children:[p.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-6",children:"New Task"}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("input",{type:"text",value:R.title,onChange:re=>N({...R,title:re.target.value}),placeholder:"What needs to be done?",className:"input",autoFocus:!0}),p.jsx("input",{type:"text",value:R.subject,onChange:re=>N({...R,subject:re.target.value}),placeholder:"Subject (optional)",className:"input"}),p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsx("input",{type:"date",value:R.dueDate,onChange:re=>N({...R,dueDate:re.target.value}),min:new Date().toISOString().split("T")[0],className:"input",title:"Due date"}),p.jsx("input",{type:"text",value:R.timeEstimate,onChange:re=>N({...R,timeEstimate:re.target.value}),placeholder:"Time (e.g., 1h)",className:"input"})]}),p.jsxs("select",{value:R.priority,onChange:re=>N({...R,priority:re.target.value}),className:"input",children:[p.jsx("option",{value:"low",children:"Low priority"}),p.jsx("option",{value:"medium",children:"Medium priority"}),p.jsx("option",{value:"high",children:"High priority"})]})]}),p.jsxs("div",{className:"flex gap-3 mt-8",children:[p.jsx("button",{onClick:()=>W(!1),className:"flex-1 py-3 bg-surface-overlay text-text-secondary rounded-xl hover:bg-surface-overlay/80 transition-colors font-medium",children:"Cancel"}),p.jsx("button",{onClick:K,className:"flex-1 py-3 bg-primary text-text-inverse rounded-xl hover:bg-primary-hover transition-colors font-medium",children:"Add Task"})]})]})}),Q&&p.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:p.jsxs("div",{className:"bg-surface-elevated rounded-3xl p-6 md:p-8 max-w-lg w-full animate-scale-in max-h-[80vh] overflow-y-auto",children:[p.jsxs("div",{className:"flex items-start justify-between mb-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Break it down"}),p.jsx("p",{className:"text-sm text-text-muted mt-1",children:Q.assignment.title})]}),p.jsx("button",{onClick:()=>se(null),className:"p-2 text-text-muted hover:text-text-primary hover:bg-surface-overlay rounded-lg transition-colors",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsx("div",{className:"space-y-3 mb-8",children:Q.suggestions.map((re,Te)=>p.jsx("div",{className:"p-4 bg-surface-base rounded-xl",children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("span",{className:"w-6 h-6 rounded-lg bg-primary/10 text-primary text-xs font-medium flex items-center justify-center flex-shrink-0",children:Te+1}),p.jsxs("div",{children:[p.jsx("div",{className:"font-medium text-text-primary",children:re.title}),re.description&&p.jsx("div",{className:"text-sm text-text-muted mt-1",children:re.description})]})]})},Te))}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:()=>se(null),className:"flex-1 py-3 bg-surface-overlay text-text-secondary rounded-xl hover:bg-surface-overlay/80 transition-colors font-medium",children:"Cancel"}),p.jsx("button",{onClick:He,className:"flex-1 py-3 bg-primary text-text-inverse rounded-xl hover:bg-primary-hover transition-colors font-medium",children:"Add All"})]})]})}),fe&&p.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:p.jsxs("div",{className:"bg-surface-elevated rounded-3xl p-6 md:p-8 max-w-lg w-full animate-scale-in max-h-[80vh] overflow-y-auto",children:[p.jsxs("div",{className:"flex items-start justify-between mb-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Start Focus Session"}),p.jsx("p",{className:"text-sm text-text-muted mt-1",children:"Choose a task to focus on"})]}),p.jsx("button",{onClick:()=>xe(!1),className:"p-2 text-text-muted hover:text-text-primary hover:bg-surface-overlay rounded-lg transition-colors",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsx("div",{className:"space-y-2 mb-6",children:W0.slice(0,8).map(re=>{const Te=Jt(re);return p.jsx("button",{onClick:()=>{Rg(re),xe(!1)},className:"w-full p-4 bg-surface-base hover:bg-surface-overlay rounded-xl text-left transition-colors group",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:`w-10 h-10 rounded-xl ${Te.bg} flex items-center justify-center flex-shrink-0`,children:p.jsxs("svg",{className:`w-5 h-5 ${Te.color}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:"font-medium text-text-primary truncate",children:re.title}),p.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[re.subject&&p.jsx("span",{className:"text-xs text-text-muted",children:re.subject}),re.dueDate&&p.jsx("span",{className:`text-xs font-medium ${Te.color}`,children:Ke(re.dueDate)})]})]}),p.jsx("svg",{className:"w-5 h-5 text-text-muted group-hover:text-primary transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5l7 7-7 7"})})]})},re.id)})}),p.jsx("button",{onClick:()=>xe(!1),className:"w-full py-3 bg-surface-overlay text-text-secondary rounded-xl hover:bg-surface-overlay/80 transition-colors font-medium",children:"Cancel"})]})})]})};class IW{async getAllChats(){try{const e=ge.getUserId();if(!e)throw new Error("User not authenticated");const{data:t,error:i}=await de.from("ai_chats").select("*").eq("user_id",e).order("updated_at",{ascending:!1});if(i)throw i;return t||[]}catch(e){return console.error("Failed to fetch AI chats:",e),[]}}async getChatById(e){try{const t=ge.getUserId();if(!t)throw new Error("User not authenticated");const{data:i,error:r}=await de.from("ai_chats").select("*").eq("id",e).eq("user_id",t).single();if(r)throw r;return i}catch(t){return console.error("Failed to fetch chat:",t),null}}async createChat(e){try{const t=ge.getUserId();if(!t)throw new Error("User not authenticated");const{data:i,error:r}=await de.from("ai_chats").insert({user_id:t,title:e.title,messages:e.messages||[]}).select().single();if(r)throw r;return i}catch(t){return console.error("Failed to create chat:",t),null}}async updateChat(e,t){try{const i=ge.getUserId();if(!i)throw new Error("User not authenticated");const{data:r,error:s}=await de.from("ai_chats").update(t).eq("id",e).eq("user_id",i).select().single();if(s)throw s;return r}catch(i){return console.error("Failed to update chat:",i),null}}async deleteChat(e){try{const t=ge.getUserId();if(!t)throw new Error("User not authenticated");const{error:i}=await de.from("ai_chats").delete().eq("id",e).eq("user_id",t);if(i)throw i;return!0}catch(t){return console.error("Failed to delete chat:",t),!1}}async saveConversation(e,t=null){try{const i=e.find(a=>a.role==="user"),s={title:i?i.content.substring(0,50)+(i.content.length>50?"...":""):"New Conversation",messages:e.map(a=>({role:a.role,content:a.content,timestamp:a.timestamp}))};return t?await this.updateChat(t,s):await this.createChat(s)}catch(i){return console.error("Failed to save conversation:",i),null}}async getRecentChats(){try{const e=ge.getUserId();if(!e)throw new Error("User not authenticated");const{data:t,error:i}=await de.from("ai_chats").select("id, title, created_at, updated_at").eq("user_id",e).order("updated_at",{ascending:!1}).limit(10);if(i)throw i;return t||[]}catch(e){return console.error("Failed to fetch recent chats:",e),[]}}async searchChats(e){try{const t=ge.getUserId();if(!t)throw new Error("User not authenticated");const{data:i,error:r}=await de.from("ai_chats").select("*").eq("user_id",t).ilike("title",`%${e}%`).order("updated_at",{ascending:!1});if(r)throw r;return i||[]}catch(t){return console.error("Failed to search chats:",t),[]}}}const yv=new IW,PW=()=>{const[n,e]=ee.useState([{id:1,role:"assistant",content:`Hello! I'm your AI tutor. I can help you with homework, explain concepts, and prepare for exams.

**Pro tip:** You can also add assignments to your planner just by telling me! Try saying "Add math homework due Friday" or "I have a biology test next week."`,timestamp:new Date}]),[t,i]=ee.useState(""),[r,s]=ee.useState(!1),[a,o]=ee.useState(null),[c,l]=ee.useState(null),[d,h]=ee.useState([]),[f,g]=ee.useState(!1),[v,y]=ee.useState(null),x=ee.useRef(null),m=ee.useRef(null),b=ee.useRef(null),w=[{icon:"",label:"Add Assignment",prompt:"I need to add an assignment to my planner",featured:!0},{icon:"",label:"Add Task",prompt:"Add a task to my to-do list",featured:!0},{icon:"",label:"Math Help",prompt:"Help me solve a math problem"},{icon:"",label:"Essay Review",prompt:"Review my essay and give feedback"}];ee.useEffect(()=>{Qe.loadUserContext(),_()},[]),ee.useEffect(()=>{var S;(S=x.current)==null||S.scrollIntoView({behavior:"smooth"})},[n]),ee.useEffect(()=>{m.current&&(m.current.style.height="auto",m.current.style.height=Math.min(m.current.scrollHeight,150)+"px")},[t]);const _=async()=>{const S=await yv.getRecentChats();h(S)},D=async S=>{const G=await yv.getChatById(S);G&&(e(G.messages.map((j,M)=>({...j,id:Date.now()+M,timestamp:new Date(j.timestamp)}))),l(G.id),g(!1),Qe.clearHistory())},A=async S=>{await Qd("Delete Chat","Are you sure you want to delete this conversation?")&&(await yv.deleteChat(S),await _(),c===S&&E())},E=()=>{e([{id:Date.now(),role:"assistant",content:`Hello! I'm your AI tutor. I can help you with homework, explain concepts, and prepare for exams.

**Pro tip:** You can also add assignments to your planner just by telling me! Try saying "Add math homework due Friday" or "I have a biology test next week."`,timestamp:new Date}]),l(null),g(!1),Qe.clearHistory()},F=S=>{var M;const G=(M=S.target.files)==null?void 0:M[0];if(!G)return;if(!G.type.startsWith("image/")){Ne.error("Please upload an image file");return}const j=new FileReader;j.onload=R=>o(R.target.result),j.readAsDataURL(G),b.current&&(b.current.value="")},I=async(S=null)=>{const G=S||t.trim();if(!G&&!a||r)return;const j=G,M=a;i(""),o(null);const R={id:Date.now(),role:"user",content:j||"[Image uploaded]",image:M,timestamp:new Date};e(N=>[...N,R]),s(!0);try{let N;Qe.isConfigured()?N=await Qe.sendMessage(j,M):N=await Qe.getDemoResponse(j);const B={id:Date.now()+1,role:"assistant",content:N,timestamp:new Date},L=[...n,R,B];e(L);const P=await yv.saveConversation(L,c);P&&!c&&l(P.id),await _()}catch(N){e(B=>[...B,{id:Date.now()+1,role:"assistant",content:`I apologize, but I encountered an error. ${N.message||"Please try again."}`,timestamp:new Date,isError:!0}])}finally{s(!1)}},z=S=>S.replace(/\*\*(.*?)\*\*/g,'<strong class="font-semibold text-text-primary">$1</strong>').replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,'<code class="px-1.5 py-0.5 rounded-md bg-surface-base/80 text-primary font-mono text-[0.85em]">$1</code>').replace(/\n/g,"<br>"),H=S=>new Date(S).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),k=S=>{const G=new Date(S),j=new Date,M=new Date(j);return M.setDate(M.getDate()-1),G.toDateString()===j.toDateString()?"Today":G.toDateString()===M.toDateString()?"Yesterday":G.toLocaleDateString("en-US",{month:"short",day:"numeric"})},W=n.length===1&&n[0].role==="assistant";return p.jsxs("div",{className:"h-full flex bg-surface-base",children:[p.jsx("div",{className:`flex-shrink-0 border-r border-border bg-surface-elevated transition-all duration-300 ease-gentle overflow-hidden ${f?"w-80":"w-0"}`,children:p.jsxs("div",{className:"w-80 h-full flex flex-col",children:[p.jsx("div",{className:"flex-shrink-0 p-4 border-b border-border",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Conversations"}),p.jsx("button",{onClick:()=>g(!1),className:"p-2 rounded-lg text-text-muted hover:text-text-primary hover:bg-surface-overlay transition-colors",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]})}),p.jsx("div",{className:"flex-1 overflow-y-auto p-3",children:d.length===0?p.jsxs("div",{className:"text-center py-8",children:[p.jsx("div",{className:"w-12 h-12 rounded-xl bg-surface-overlay flex items-center justify-center mx-auto mb-3",children:p.jsx("svg",{className:"w-6 h-6 text-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),p.jsx("p",{className:"text-sm text-text-muted",children:"No conversations yet"}),p.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Start chatting to save history"})]}):p.jsx("div",{className:"space-y-1",children:d.map((S,G)=>p.jsxs("div",{className:`group relative rounded-xl transition-all duration-200 ${c===S.id?"bg-primary/10 ring-1 ring-primary/20":"hover:bg-surface-overlay"}`,style:{animationDelay:`${G*30}ms`},children:[p.jsxs("button",{onClick:()=>D(S.id),className:"w-full p-3 text-left",children:[p.jsx("p",{className:"text-sm font-medium text-text-primary truncate pr-8",children:S.title}),p.jsx("p",{className:"text-xs text-text-muted mt-1",children:k(S.updatedAt)})]}),p.jsx("button",{onClick:j=>{j.stopPropagation(),A(S.id)},className:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 rounded-lg text-text-muted hover:text-error hover:bg-error/10 opacity-0 group-hover:opacity-100 transition-all",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},S.id))})}),p.jsx("div",{className:"flex-shrink-0 p-3 border-t border-border",children:p.jsxs("button",{onClick:E,className:"w-full py-2.5 px-4 bg-primary hover:bg-primary-hover text-text-inverse rounded-xl font-medium transition-all flex items-center justify-center gap-2",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Conversation"]})})]})}),p.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[p.jsx("header",{className:"flex-shrink-0 border-b border-border bg-surface-elevated/80 backdrop-blur-sm",children:p.jsx("div",{className:"max-w-4xl mx-auto px-6 py-4",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("button",{onClick:()=>g(!f),className:`p-2.5 rounded-xl transition-all ${f?"bg-primary/10 text-primary":"text-text-muted hover:text-text-primary hover:bg-surface-overlay"}`,title:"Chat History",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6h16M4 12h16M4 18h7"})})}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary to-accent-mint flex items-center justify-center shadow-lg shadow-primary/20",children:p.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),p.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-success rounded-full border-2 border-surface-elevated"})]}),p.jsxs("div",{children:[p.jsx("h1",{className:"text-lg font-semibold text-text-primary",children:"AI Tutor"}),p.jsx("p",{className:"text-xs text-text-muted",children:"Always here to help"})]})]})]}),p.jsxs("button",{onClick:E,className:"px-4 py-2 rounded-xl bg-surface-overlay hover:bg-surface-overlay/80 text-text-secondary hover:text-text-primary transition-all flex items-center gap-2 text-sm font-medium",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Chat"]})]})})}),p.jsx("div",{className:"flex-1 overflow-y-auto",children:p.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-6",children:[W&&p.jsxs("div",{className:"mb-8 animate-fade-in",children:[p.jsx("p",{className:"text-sm text-text-muted mb-4 text-center",children:"Quick start with a topic:"}),p.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:w.map((S,G)=>p.jsxs("button",{onClick:()=>I(S.prompt),className:`px-4 py-2.5 rounded-xl transition-all flex items-center gap-2 text-sm group ${S.featured?"bg-primary/10 hover:bg-primary/20 border border-primary/30 hover:border-primary/50":"bg-surface-elevated hover:bg-surface-overlay border border-border hover:border-primary/30"}`,style:{animationDelay:`${G*50}ms`},children:[p.jsx("span",{className:"text-lg",children:S.icon}),p.jsx("span",{className:`transition-colors ${S.featured?"text-primary font-medium":"text-text-secondary group-hover:text-text-primary"}`,children:S.label})]},G))})]}),p.jsxs("div",{className:"space-y-6",children:[n.map((S,G)=>p.jsxs("div",{className:`flex gap-4 animate-fade-up ${S.role==="user"?"flex-row-reverse":""}`,style:{animationDelay:`${G*30}ms`},onMouseEnter:()=>y(S.id),onMouseLeave:()=>y(null),children:[S.role==="assistant"?p.jsx("div",{className:"flex-shrink-0",children:p.jsx("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-primary to-accent-mint flex items-center justify-center shadow-md shadow-primary/10",children:p.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})})}):p.jsx("div",{className:"flex-shrink-0",children:p.jsx("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-accent-cool to-accent-rose flex items-center justify-center shadow-md",children:p.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})}),p.jsx("div",{className:`flex-1 max-w-[85%] ${S.role==="user"?"flex flex-col items-end":""}`,children:p.jsxs("div",{className:`relative rounded-2xl px-5 py-4 ${S.role==="user"?"bg-gradient-to-br from-primary to-primary-hover text-white shadow-lg shadow-primary/20":S.isError?"bg-error/10 border border-error/20 text-text-primary":"bg-surface-elevated border border-border text-text-primary shadow-soft"}`,children:[S.image&&p.jsx("img",{src:S.image,alt:"Uploaded",className:"max-w-full h-auto rounded-xl mb-3 shadow-md"}),p.jsx("div",{className:`text-sm leading-relaxed ${S.role==="user"?"text-white":""}`,dangerouslySetInnerHTML:{__html:z(S.content)}}),p.jsx("div",{className:`absolute -bottom-5 text-xs text-text-muted transition-all duration-200 ${v===S.id?"opacity-100 translate-y-0":"opacity-0 -translate-y-1"} ${S.role==="user"?"right-0":"left-0"}`,children:H(S.timestamp)})]})})]},S.id)),r&&p.jsxs("div",{className:"flex gap-4 animate-fade-in",children:[p.jsx("div",{className:"flex-shrink-0",children:p.jsx("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-primary to-accent-mint flex items-center justify-center shadow-md shadow-primary/10",children:p.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})})}),p.jsx("div",{className:"bg-surface-elevated border border-border rounded-2xl px-5 py-4 shadow-soft",children:p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-pulse",style:{animationDuration:"1s"}}),p.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-pulse",style:{animationDuration:"1s",animationDelay:"0.2s"}}),p.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-pulse",style:{animationDuration:"1s",animationDelay:"0.4s"}})]})})]}),p.jsx("div",{ref:x,className:"h-4"})]})]})}),p.jsx("div",{className:"flex-shrink-0 border-t border-border bg-surface-base",children:p.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-4",children:[a&&p.jsx("div",{className:"mb-3 animate-scale-in",children:p.jsxs("div",{className:"inline-flex items-start gap-2 p-2 bg-surface-elevated rounded-xl border border-border",children:[p.jsx("img",{src:a,alt:"Preview",className:"h-20 rounded-lg object-cover"}),p.jsx("button",{onClick:()=>o(null),className:"p-1 rounded-lg bg-surface-overlay hover:bg-error/20 text-text-muted hover:text-error transition-colors",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),p.jsx("div",{className:"relative bg-surface-elevated rounded-2xl border border-border focus-within:border-primary/30 focus-within:ring-2 focus-within:ring-primary/10 transition-all shadow-soft",children:p.jsxs("div",{className:"flex items-end gap-2 p-2",children:[p.jsx("input",{type:"file",ref:b,onChange:F,accept:"image/*",className:"hidden"}),p.jsx("button",{onClick:()=>{var S;return(S=b.current)==null?void 0:S.click()},className:"flex-shrink-0 p-2.5 rounded-xl text-text-muted hover:text-text-primary hover:bg-surface-overlay transition-colors",title:"Upload image",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),p.jsx("textarea",{ref:m,value:t,onChange:S=>i(S.target.value),onKeyDown:S=>{S.key==="Enter"&&!S.shiftKey&&(S.preventDefault(),I())},placeholder:"Ask me anything...",rows:1,className:"flex-1 px-2 py-2.5 bg-transparent text-text-primary placeholder:text-text-muted focus:outline-none resize-none text-sm leading-relaxed"}),p.jsx("button",{onClick:()=>I(),disabled:!t.trim()&&!a||r,className:"flex-shrink-0 p-2.5 bg-primary hover:bg-primary-hover text-white rounded-xl transition-all disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:bg-primary shadow-md shadow-primary/20 hover:shadow-lg hover:shadow-primary/30",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14M12 5l7 7-7 7"})})})]})}),p.jsxs("p",{className:"text-xs text-text-muted text-center mt-3",children:["Press ",p.jsx("kbd",{className:"px-1.5 py-0.5 bg-surface-elevated rounded text-text-secondary font-mono text-[10px]",children:"Enter"})," to send, ",p.jsx("kbd",{className:"px-1.5 py-0.5 bg-surface-elevated rounded text-text-secondary font-mono text-[10px]",children:"Shift + Enter"})," for new line"]})]})})]})]})},O6=()=>{const n=new Date,e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getDate()).padStart(2,"0"),r=`${e}-${t}-${i}`,s=n.toLocaleDateString("en-US",{weekday:"long"}),a=n.toTimeString().slice(0,5),o=n.getDate(),c=n.getMonth()+1,l=n.getDay(),d=new Date(n);d.setDate(n.getDate()+1);const h=d.getDate(),f=d.getMonth()+1,v=`${d.getFullYear()}-${String(f).padStart(2,"0")}-${String(h).padStart(2,"0")}`,x=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((w,_)=>{const D=(_-l+7)%7||7,A=new Date(n);return A.setDate(n.getDate()+D),{name:w,date:`${A.getFullYear()}-${String(A.getMonth()+1).padStart(2,"0")}-${String(A.getDate()).padStart(2,"0")}`,day:A.getDate()}}),m=x[1],b=x[5];return`You are an ULTRA-SMART AI calendar assistant with advanced natural language understanding. Parse activity descriptions into structured calendar events with MAXIMUM INTELLIGENCE about dates, times, and context.

=== CURRENT CONTEXT ===
Today: ${r} (${s}) - Day ${o} of month ${c}
Tomorrow: ${v} - Day ${h}
Current Time: ${a}
Current Day of Week: ${s} (${l})

=== DATE PARSING RULES (CRITICAL - READ CAREFULLY) ===

**PRIORITY 1: ABSOLUTE DATES (ALWAYS USE THESE FIRST):**
- If user mentions a SPECIFIC DATE NUMBER (like "on the 17th", "Dec 25", "12/17"), USE THAT DATE
- If user says "tomorrow on the 17th" and today is the ${o}, they mean the 17th (NOT ${h})
- If user says "math test on the 17th", use 2025-12-17 (current year, current/next month)
- If the day number is LESS than today's day (${o}), assume NEXT month
- If the day number is GREATER than today's day, assume THIS month
- Examples:
  * "on the 17th"  2025-12-17 (explicit date)
  * "tomorrow on the 17th"  2025-12-17 (explicit overrides relative)
  * "math test on the 25th"  2025-12-25 (25 > ${o} = this month)

**PRIORITY 2: DAY OF WEEK REFERENCES (when no specific date number):**
Today is ${s}. Calculate NEXT occurrence of each weekday:
- "Monday" or "this Monday"  ${m.date} (next Monday is day ${m.day})
- "Friday" or "this Friday"  ${b.date} (next Friday is day ${b.day})
- "next Monday"  one week AFTER ${m.date}
- IMPORTANT: Always find the NEXT future occurrence of the day (never today, always future)
- If user says "Friday" and today is ${s}, use ${b.date}

**PRIORITY 3: RELATIVE DATES (lowest priority):**
- "today" = ${r}
- "tomorrow" = ${v}
- "in 3 days" = calculate from ${r}
- "next week" = 7 days from ${r}

**CRITICAL EXAMPLES:**
Current date: ${r} (${s})
- "study on Monday"  ${m.date} (next Monday)
- "Friday quiz"  ${b.date} (next Friday)
- "math test on the 17th"  2025-12-17 (explicit date wins)
- "chemistry tomorrow"  ${v}
- "Monday on the 15th"  2025-12-15 (explicit date wins)

**TIMES - Parse ALL formats:**
- "3pm", "3:30pm" = 15:00:00, 15:30:00
- "9am" = 09:00:00
- "noon" = 12:00:00
- "midnight" = 00:00:00
- "morning" = 09:00:00 (default)
- "afternoon" = 14:00:00 (default)
- "evening" = 18:00:00 (default)
- "night" = 20:00:00 (default)
- "at 15:00", "15:30" = use 24-hour format directly

**DURATION - Smart estimation:**
- If "for X hours/minutes" mentioned, parse it
- If start and end time given, calculate duration_minutes
- If only start time:
  - class = 60 minutes
  - study = 120 minutes
  - meeting = 60 minutes
  - break = 15 minutes
  - assignment = null (variable)
  - task = null (variable)

**ACTIVITY TYPES - Context clues:**
- Keywords: "class", "lecture"  class
- "study", "review", "read"  study
- "homework", "assignment", "project"  assignment
- "break", "rest", "lunch"  break
- "meeting", "call", "appointment"  meeting
- "practice", "game", "event"  event
- Default  task

**SUBJECTS - Extract intelligently:**
- Look for school subjects: Math, Chemistry, Physics, Biology, English, History, etc.
- Course names: "CS101", "CHEM202"
- Topics: "algebra", "essay writing"

**LOCATION - Find if mentioned:**
- Places: "library", "room 205", "zoom", "online", "gym", etc.

=== OUTPUT FORMAT ===
**CRITICAL: Return ONLY the JSON object. No explanations, no markdown, no code blocks, no additional text.**

Your response must be EXACTLY this format - pure JSON only:
{
  "title": "Brief descriptive title",
  "description": "Optional longer description or null",
  "activity_date": "YYYY-MM-DD",
  "start_time": "HH:MM:SS or null",
  "end_time": "HH:MM:SS or null",
  "duration_minutes": integer or null,
  "activity_type": "task|class|study|break|event|meeting|assignment",
  "subject": "Subject name or null",
  "location": "Location or null",
  "is_all_day": false (true only if explicitly "all day")
}

DO NOT include any text before or after the JSON. DO NOT wrap in markdown. Just the JSON object.

=== COMPREHENSIVE EXAMPLES ===

Input: "Study chemistry tomorrow at 3pm for 2 hours"
Output: {"title":"Study Chemistry","description":"Chemistry study session","activity_date":"${v}","start_time":"15:00:00","end_time":"17:00:00","duration_minutes":120,"activity_type":"study","subject":"Chemistry","location":null,"is_all_day":false}

Input: "math test on the 17th"
Output: {"title":"Math Test","activity_date":"2025-12-17","activity_type":"assignment","subject":"Math","location":null,"is_all_day":false}

Input: "chemistry lab tomorrow on the 15th at 2pm"
Output: {"title":"Chemistry Lab","activity_date":"2025-12-15","start_time":"14:00:00","activity_type":"class","subject":"Chemistry","location":null,"is_all_day":false}

Input: "finish physics homework by the 20th"
Output: {"title":"Physics Homework","activity_date":"2025-12-20","activity_type":"assignment","subject":"Physics","location":null,"is_all_day":false}

Input: "basketball practice tomorrow evening"
Output: {"title":"Basketball Practice","activity_date":"${v}","start_time":"18:00:00","duration_minutes":90,"activity_type":"event","subject":null,"location":null,"is_all_day":false}

Input: "study session for history exam on December 18th at 9am"
Output: {"title":"Study for History Exam","activity_date":"2025-12-18","start_time":"09:00:00","duration_minutes":120,"activity_type":"study","subject":"History","location":null,"is_all_day":false}

Input: "English class on Monday morning"
Output: {"title":"English Class","activity_date":"${m.date}","start_time":"09:00:00","duration_minutes":60,"activity_type":"class","subject":"English","location":null,"is_all_day":false}

Input: "quiz on Friday"
Output: {"title":"Quiz","activity_date":"${b.date}","activity_type":"assignment","subject":null,"location":null,"is_all_day":false}

Input: "team meeting this Wednesday at 2pm"
Output: {"title":"Team Meeting","activity_date":"${x[3].date}","start_time":"14:00:00","duration_minutes":60,"activity_type":"meeting","subject":null,"location":null,"is_all_day":false}

Input: "lunch break at noon for 30 minutes"
Output: {"title":"Lunch Break","activity_date":"${r}","start_time":"12:00:00","end_time":"12:30:00","duration_minutes":30,"activity_type":"break","subject":null,"location":null,"is_all_day":false}

Input: "CS101 lecture on the 16th at 2pm in library"
Output: {"title":"CS101 Lecture","activity_date":"2025-12-16","start_time":"14:00:00","duration_minutes":60,"activity_type":"class","subject":"CS101","location":"library","is_all_day":false}

Input: "dentist appointment on 12/22 at 10:30am"
Output: {"title":"Dentist Appointment","activity_date":"2025-12-22","start_time":"10:30:00","duration_minutes":60,"activity_type":"event","subject":null,"location":null,"is_all_day":false}

Input: "review algebra notes tonight at 8pm"
Output: {"title":"Review Algebra Notes","activity_date":"${r}","start_time":"20:00:00","duration_minutes":60,"activity_type":"study","subject":"Algebra","location":null,"is_all_day":false}

=== YOUR TASK ===
Parse the following activity with MAXIMUM intelligence and context awareness. Think about day of week, relative dates, time zones, and natural speech patterns:`};O6();class zW{detectMultipleDays(e){const t=e.toLowerCase();if(console.log(" detectMultipleDays checking:",e),t.match(/every\s+(week|weekly|day|daily|other)/i))return console.log(" Skipping - detected recurring pattern"),null;if(t.match(/(monday|tuesday|wednesday|thursday|friday|saturday|sunday).*(and|,).*(monday|tuesday|wednesday|thursday|friday|saturday|sunday)/i)){console.log(" Found multiple days pattern");const r=[],s={monday:1,mon:1,tuesday:2,tue:2,tues:2,wednesday:3,wed:3,thursday:4,thu:4,thur:4,thurs:4,friday:5,fri:5,saturday:6,sat:6,sunday:0,sun:0};if(Object.keys(s).forEach(a=>{if(t.includes(a)){const o=s[a];r.includes(o)||(r.push(o),console.log(`   Found day: ${a} (${o})`))}}),r.length>=2)return r.sort(),console.log(" Returning days:",r),r;console.log(" Only found",r.length,"day(s)")}else console.log(" No multiple days pattern found");return null}detectRecurrence(e){const t=e.toLowerCase();if(t.match(/every\s+(week|weekly|monday|tuesday|wednesday|thursday|friday|saturday|sunday)/i)){const r=[],s={monday:1,mon:1,tuesday:2,tue:2,tues:2,wednesday:3,wed:3,thursday:4,thu:4,thur:4,thurs:4,friday:5,fri:5,saturday:6,sat:6,sunday:0,sun:0};if(Object.keys(s).forEach(a=>{if(t.includes(a)){const o=s[a];r.includes(o)||r.push(o)}}),r.length>0)return r.sort(),{type:"weekly",daysOfWeek:r,count:15}}if(t.match(/every\s+day|daily|each\s+day/i))return{type:"daily",count:14};if(t.match(/every\s+other\s+(week|monday|tuesday|wednesday|thursday|friday|saturday|sunday)|biweekly/i)){const r=[],s={monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6,sunday:0};if(Object.keys(s).forEach(a=>{if(t.includes(a)){const o=s[a];r.includes(o)||r.push(o)}}),r.length>0)return{type:"biweekly",daysOfWeek:r,count:15}}return null}generateMultipleDayActivities(e,t){const i=[],r=new Date,s=r.getDay();return t.forEach(a=>{const o=new Date(r);let c=a-s;c<=0&&(c+=7),o.setDate(r.getDate()+c),i.push({...e,activity_date:`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}-${String(o.getDate()).padStart(2,"0")}`})}),i}generateRecurringActivities(e,t){const i=[],r=new Date;if(t.type==="weekly")for(let s=0;s<t.count;s++)t.daysOfWeek.forEach(a=>{const o=new Date(r),c=o.getDay();let l=a-c;l<=0&&(l+=7),l+=s*7,o.setDate(r.getDate()+l),i.push({...e,activity_date:`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}-${String(o.getDate()).padStart(2,"0")}`})});else if(t.type==="daily")for(let s=1;s<=t.count;s++){const a=new Date(r);a.setDate(r.getDate()+s),i.push({...e,activity_date:`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`})}else if(t.type==="biweekly")for(let s=0;s<t.count;s++)t.daysOfWeek.forEach(a=>{const o=new Date(r),c=o.getDay();let l=a-c;l<=0&&(l+=7),l+=s*14,o.setDate(r.getDate()+l),i.push({...e,activity_date:`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}-${String(o.getDate()).padStart(2,"0")}`})});return i}async parseActivity(e){try{const t="https://uhlgppoylqeiirpfhhqm.supabase.co",i=O6(),r=new Date,s=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`,a=new Date(r);a.setDate(r.getDate()+1);const o=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`;console.log(" Date Context: Today =",s,"| Tomorrow =",o),console.log(" Parsing activity with ULTRA-SMART AI:",e);const c=await fetch(`${t}/functions/v1/ai-chat`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVobGdwcG95bHFlaWlycGZoaHFtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzMDI4OTEsImV4cCI6MjA4MDg3ODg5MX0.DCW8hcNJ-6Aq_nxt05IU6ogOb69V-oqUNnNhnKiaSvw"},body:JSON.stringify({messages:[{role:"user",content:e}],systemPrompt:i,model:"llama-3.3-70b-versatile",temperature:.2})});if(!c.ok){const w=await c.text();throw console.error(" AI API Error:",w),new Error("Failed to parse activity with AI")}const l=await c.json();console.log(" AI Response:",l);const d=l.response||l.message||l.content;if(!d)throw console.error(" No response from AI:",l),new Error("No response from AI");const f=d.replace(/```json\s*/g,"").replace(/```\s*/g,"").match(/\{(?:[^{}]|(?:\{[^{}]*\}))*\}/s);if(!f)throw console.error(" AI response did not contain JSON:",d),new Error("AI response did not contain valid JSON");let g;try{g=JSON.parse(f[0])}catch{const _=f[0].replace(/\n/g," ").replace(/\s+/g," ").trim();g=JSON.parse(_)}if(console.log(" Parsed activity data:",g),!g.title)throw new Error("Activity must have a title");if(!g.activity_date)throw new Error("Activity must have a date");/^\d{4}-\d{2}-\d{2}$/.test(g.activity_date)||(console.warn(" Invalid date format, using today:",g.activity_date),g.activity_date=new Date().toISOString().split("T")[0]);const y=/^\d{2}:\d{2}:\d{2}$/;if(g.start_time&&!y.test(g.start_time)&&(console.warn(" Invalid start_time format:",g.start_time),g.start_time=null),g.end_time&&!y.test(g.end_time)&&(console.warn(" Invalid end_time format:",g.end_time),g.end_time=null),g.start_time&&!g.end_time&&g.duration_minutes){const[w,_]=g.start_time.split(":").map(Number),D=new Date;D.setHours(w,_,0),D.setMinutes(D.getMinutes()+g.duration_minutes),g.end_time=D.toTimeString().slice(0,8),console.log(" Calculated end_time:",g.end_time)}if(g.start_time&&g.end_time&&!g.duration_minutes){const[w,_]=g.start_time.split(":").map(Number),[D,A]=g.end_time.split(":").map(Number);g.duration_minutes=D*60+A-(w*60+_),console.log(" Calculated duration:",g.duration_minutes,"minutes")}const x={title:g.title,description:g.description||null,activity_date:g.activity_date,start_time:g.start_time||null,end_time:g.end_time||null,duration_minutes:g.duration_minutes||null,activity_type:g.activity_type||"task",subject:g.subject||null,location:g.location||null,color:this.getColorForType(g.activity_type||"task"),is_all_day:g.is_all_day||!1,ai_generated:!0};console.log(" Final activity data:",x);const m=this.detectMultipleDays(e);if(m){console.log(" Detected multiple days:",m);const w=this.generateMultipleDayActivities(x,m);return console.log(` Generated ${w.length} activities for multiple days`),{isRecurring:!0,activities:w,multipleDays:m}}const b=this.detectRecurrence(e);if(b){console.log(" Detected recurring pattern:",b);const w=this.generateRecurringActivities(x,b);return console.log(` Generated ${w.length} recurring activities`),{isRecurring:!0,activities:w,recurrence:b}}return x}catch(t){throw console.error(" Failed to parse activity:",t),t}}getColorForType(e){return{task:"#3B82F6",class:"#8B5CF6",study:"#06B6D4",break:"#10B981",event:"#F59E0B",meeting:"#EF4444",assignment:"#EC4899"}[e]||"#3B82F6"}parseRelativeDate(e){const t=new Date,i=e.toLowerCase();if(i==="today")return t;if(i==="tomorrow"){const r=new Date(t);return r.setDate(t.getDate()+1),r}return t}}const WW=new zW,qW=()=>{const[n,e]=ee.useState(new Date),[t,i]=ee.useState(new Date),[r,s]=ee.useState([]),[a,o]=ee.useState(!1),[c,l]=ee.useState(""),[d,h]=ee.useState(!1),[f,g]=ee.useState(()=>{const N=localStorage.getItem("plannerShowAssignments");return N!==null?JSON.parse(N):!1}),[v,y]=ee.useState([]),x=["January","February","March","April","May","June","July","August","September","October","November","December"],m=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];ee.useEffect(()=>{w()},[n]),ee.useEffect(()=>{localStorage.setItem("plannerShowAssignments",JSON.stringify(f)),f&&b()},[f]);const b=async()=>{try{const{data:N,error:B}=await Ii.getUpcomingAssignments();if(B)throw B;y(Ii.toAppFormatBatch(N))}catch(N){console.error("Failed to load assignments:",N)}},w=async()=>{o(!0);try{const N=n.getFullYear(),B=n.getMonth(),L=await Ho.getActivitiesForMonth(N,B);s(L)}catch(N){console.error("Failed to load activities:",N)}finally{o(!1)}},_=async()=>{if(c.trim()){h(!0);try{const N=await WW.parseActivity(c);if(N.isRecurring){let B=0;for(const L of N.activities)await Ho.createActivity({...L,ai_generated:!0}),B++;Ne.success(`Created ${B} activities`)}else await Ho.createActivity({...N,ai_generated:!0}),Ne.success(`Created: ${N.title}`);await w(),l("")}catch{Ne.error("Failed to create activity")}finally{h(!1)}}},D=async(N,B)=>{try{await Ho.toggleCompletion(N,!B),s(L=>L.map(P=>P.id===N?{...P,is_completed:!B}:P))}catch{Ne.error("Failed to update")}},A=async N=>{await Qd("Delete Activity","Are you sure?")&&(await Ho.deleteActivity(N),await w())},E=()=>{const N=n.getFullYear(),B=n.getMonth(),L=new Date(N,B,1).getDay(),P=new Date(N,B+1,0).getDate(),q=[];for(let Q=0;Q<L;Q++)q.push(null);for(let Q=1;Q<=P;Q++)q.push(Q);return q},F=N=>{if(!N)return[];const B=new Date(n.getFullYear(),n.getMonth(),N).toISOString().split("T")[0];return r.filter(L=>L.activity_date===B)},I=N=>{if(!N||!f)return[];const B=new Date(n.getFullYear(),n.getMonth(),N).toISOString().split("T")[0];return v.filter(L=>L.dueDate===B&&!L.completed).map(L=>({id:L.id,title:L.title,activity_type:"assignment",subject:L.subject,is_completed:L.completed,isAssignment:!0,priority:L.priority,dueDate:L.dueDate}))},z=N=>{const B=new Date;return N&&n.getFullYear()===B.getFullYear()&&n.getMonth()===B.getMonth()&&N===B.getDate()},H=N=>N&&n.getFullYear()===t.getFullYear()&&n.getMonth()===t.getMonth()&&N===t.getDate(),k=()=>e(new Date(n.getFullYear(),n.getMonth()-1,1)),W=()=>e(new Date(n.getFullYear(),n.getMonth()+1,1)),S=N=>{N&&i(new Date(n.getFullYear(),n.getMonth(),N))},G=t.toISOString().split("T")[0],j=r.filter(N=>N.activity_date===G).sort((N,B)=>(N.start_time||"").localeCompare(B.start_time||"")),M=N=>{if(!N)return"";const[B,L]=N.split(":"),P=parseInt(B),q=P>=12?"PM":"AM";return`${P%12||12}:${L} ${q}`},R=N=>({study:"bg-primary",homework:"bg-accent-warm",class:"bg-success",exam:"bg-error",break:"bg-accent-cool"})[N]||"bg-text-muted";return p.jsxs("div",{className:"min-h-screen p-6 md:p-8 lg:p-10 max-w-6xl mx-auto",children:[p.jsx("header",{className:"mb-8 animate-fade-up",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-3xl font-semibold text-text-primary tracking-tight",children:"Planner"}),p.jsx("p",{className:"text-text-secondary mt-1",children:"Schedule your study sessions"})]}),p.jsxs("button",{onClick:()=>g(!f),className:`flex items-center gap-2 px-3 py-2 rounded-xl text-sm font-medium transition-all ${f?"bg-accent-warm/20 text-accent-warm border border-accent-warm/30":"bg-surface-elevated text-text-muted hover:text-text-secondary border border-border"}`,children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),p.jsxs("span",{children:[f?"Hide":"Show"," Assignments"]})]})]})}),p.jsx("div",{className:"mb-8 animate-fade-up stagger-1",children:p.jsxs("div",{className:"bg-surface-elevated rounded-2xl border border-border p-4",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[p.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-accent-cool/10 rounded-lg",children:[p.jsx("svg",{className:"w-3.5 h-3.5 text-accent-cool",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),p.jsx("span",{className:"text-xs font-medium text-accent-cool",children:"AI-Powered"})]}),p.jsx("span",{className:"text-xs text-text-muted",children:"Type naturally - AI parses times, dates & recurring schedules"})]}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-muted",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),p.jsx("input",{type:"text",value:c,onChange:N=>l(N.target.value),onKeyPress:N=>N.key==="Enter"&&_(),placeholder:"Study Math 3-5pm tomorrow, Physics class every Monday 9am...",className:"w-full bg-surface-base border border-border rounded-xl pl-12 pr-28 py-3.5 text-base text-text-primary placeholder:text-text-muted focus:outline-none focus:border-primary/50 focus:ring-2 focus:ring-primary/20 transition-all",disabled:d}),p.jsx("button",{onClick:_,disabled:d||!c.trim(),className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-2 px-4 py-2 rounded-lg bg-primary hover:bg-primary-hover text-white font-medium text-sm transition-all disabled:opacity-30 disabled:bg-primary",children:d?p.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):p.jsxs(p.Fragment,{children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Schedule"]})})]})]})}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 animate-fade-up stagger-2",children:[p.jsxs("div",{className:"lg:col-span-2 bg-surface-elevated rounded-2xl p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsx("button",{onClick:k,className:"p-2 text-text-muted hover:text-text-primary hover:bg-surface-overlay rounded-lg transition-all",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 19l-7-7 7-7"})})}),p.jsxs("h2",{className:"text-xl font-semibold text-text-primary",children:[x[n.getMonth()]," ",n.getFullYear()]}),p.jsx("button",{onClick:W,className:"p-2 text-text-muted hover:text-text-primary hover:bg-surface-overlay rounded-lg transition-all",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5l7 7-7 7"})})})]}),p.jsx("div",{className:"grid grid-cols-7 gap-1 mb-3",children:m.map(N=>p.jsx("div",{className:"text-center text-xs font-medium text-text-muted py-2 uppercase tracking-wider",children:N},N))}),a?p.jsx("div",{className:"flex justify-center py-16",children:p.jsx("div",{className:"w-6 h-6 border-2 border-primary/20 border-t-primary rounded-full animate-spin"})}):p.jsx("div",{className:"grid grid-cols-7 gap-1",children:E().map((N,B)=>{const L=F(N),P=I(N);L.length;const q=P.length,Q=L.some(se=>!se.is_completed);return p.jsx("button",{onClick:()=>S(N),disabled:!N,className:`aspect-square p-2 rounded-xl text-sm transition-all relative ${N?H(N)?"bg-primary text-white font-medium":z(N)?"bg-primary/15 text-primary font-medium":"hover:bg-surface-overlay text-text-primary":"cursor-default"}`,children:N&&p.jsxs(p.Fragment,{children:[p.jsx("span",{children:N}),(Q||q>0)&&p.jsxs("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-0.5",children:[Q&&p.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${H(N)?"bg-white":"bg-primary"}`}),q>0&&p.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${H(N)?"bg-white":"bg-accent-warm"}`})]})]})},B)})})]}),p.jsxs("div",{className:"bg-surface-elevated rounded-2xl p-6",children:[p.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-1",children:t.toLocaleDateString("en-US",{weekday:"long"})}),p.jsx("p",{className:"text-sm text-text-muted mb-6",children:t.toLocaleDateString("en-US",{month:"long",day:"numeric"})}),(()=>{const N=f?v.filter(L=>L.dueDate===G&&!L.completed).map(L=>({id:L.id,title:L.title,subject:L.subject,isAssignment:!0,priority:L.priority})):[];return[...j,...N].length===0?p.jsxs("div",{className:"text-center py-12",children:[p.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-xl bg-surface-base flex items-center justify-center",children:p.jsx("svg",{className:"w-5 h-5 text-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),p.jsxs("p",{className:"text-text-muted text-sm",children:["No activities",f?" or assignments":""]})]}):p.jsxs("div",{className:"space-y-3",children:[j.map(L=>p.jsx("div",{className:`p-4 rounded-xl transition-all ${L.is_completed?"bg-surface-base/50":"bg-surface-base hover:bg-surface-overlay"}`,children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("button",{onClick:()=>D(L.id,L.is_completed),className:`mt-0.5 w-5 h-5 rounded-full flex-shrink-0 flex items-center justify-center transition-all ${L.is_completed?"bg-success/20":"border-2 border-text-muted/30 hover:border-primary"}`,children:L.is_completed&&p.jsx("svg",{className:"w-3 h-3 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${R(L.activity_type)}`}),L.start_time&&p.jsx("span",{className:"text-xs text-text-muted",children:M(L.start_time)})]}),p.jsx("h4",{className:`font-medium text-sm ${L.is_completed?"text-text-muted line-through":"text-text-primary"}`,children:L.title}),L.duration_minutes&&p.jsxs("p",{className:"text-xs text-text-muted mt-1",children:[L.duration_minutes," min"]})]}),p.jsx("button",{onClick:()=>A(L.id),className:"p-1.5 text-text-muted hover:text-error hover:bg-error/10 rounded-lg transition-all",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]})},L.id)),N.map(L=>p.jsx("div",{className:"p-4 rounded-xl bg-accent-warm/5 border border-accent-warm/20 hover:border-accent-warm/40 transition-all",children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("div",{className:"mt-0.5 w-5 h-5 rounded-full flex-shrink-0 flex items-center justify-center bg-accent-warm/20",children:p.jsx("svg",{className:"w-3 h-3 text-accent-warm",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-accent-warm"}),p.jsx("span",{className:"text-xs text-accent-warm font-medium",children:"Assignment Due"})]}),p.jsx("h4",{className:"font-medium text-sm text-text-primary",children:L.title}),L.subject&&p.jsx("p",{className:"text-xs text-text-muted mt-1",children:L.subject})]})]})},`assignment-${L.id}`))]})})()]})]})]})};class $W{constructor(){console.log(" Vision Service: Initialized (using Edge Function proxy)")}get isConfigured(){return!0}async _callGroqVision(e,t){const i=this._cleanBase64(t);try{console.log(" Calling Groq Vision API via Edge Function...");const{data:{session:r}}=await de.auth.getSession();if(!r)throw new Error("Not authenticated");const a=await fetch("https://uhlgppoylqeiirpfhhqm.supabase.co/functions/v1/groq-vision-proxy",{method:"POST",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({prompt:e,base64Image:i})});if(!a.ok){const c=await a.json().catch(()=>({}));throw console.error(" Groq Vision proxy error:",c),new Error(c.error||`Vision API error: ${a.status}`)}const o=await a.json();if(!o.success)throw new Error(o.error||"Vision API failed");return console.log(" Groq Vision API success"),o.content}catch(r){throw console.error(" Groq Vision API failed:",r),r}}async processHandwrittenNotes(e){const t=this._getHandwritingPrompt();try{const i=await this._callGroqVision(t,e);return this._parseNotesResponse(i)}catch(i){throw console.error("Vision service error (handwriting):",i),new Error(`Failed to process handwritten notes: ${i.message}`)}}async processTextbookToFlashcards(e){const t=this._getFlashcardPrompt();try{const i=await this._callGroqVision(t,e);return this._parseFlashcardsResponse(i)}catch(i){throw console.error("Vision service error (flashcards):",i),new Error(`Failed to generate flashcards: ${i.message}`)}}async processHomeworkAssignment(e){const t=this._getHomeworkPrompt();try{const i=await this._callGroqVision(t,e);return this._parseHomeworkResponse(i)}catch(i){throw console.error("Vision service error (homework):",i),new Error(`Failed to process homework: ${i.message}`)}}async extractText(e){const t="Extract all text from this image. Return only the text, preserving line breaks and formatting.";try{return{text:await this._callGroqVision(t,e),confidence:.85}}catch(i){throw console.error("Vision service error (OCR):",i),new Error(`Failed to extract text: ${i.message}`)}}_cleanBase64(e){return e.replace(/^data:image\/\w+;base64,/,"")}_getHandwritingPrompt(){return`You are an expert at reading handwritten notes and converting them into clean, plain text.

Analyze this handwritten image and extract all the text from it.

FORMAT YOUR RESPONSE AS COMPLETELY PLAIN TEXT:
- NO markdown formatting symbols at all
- NO hashtags (#, ##, ###)
- NO asterisks (*, **)
- NO dashes or special bullet points
- NO LaTeX formatting (no $ symbols)
- NO backslashes ()
- NO curly braces ({})
- NO square brackets ([])
- Just write the text exactly as it appears in the image
- Use blank lines to separate sections
- Write clear, complete sentences
- Organize related information together
- Remove any artifacts, scribbles, or unclear marks

IMPORTANT - PURE PLAIN TEXT ONLY:
- DO NOT use any markdown, LaTeX, or formatting symbols
- Write ALL math equations and formulas in PLAIN TEXT
- For example: "x^2 + 3x - 5 = 0" (plain text, no symbols)
- Use simple text: "E = mc^2" (no formatting symbols)
- If you see math symbols in the image, write them as plain Unicode characters
- Just read what you see and write it as plain text

DO NOT include JSON, code blocks, or technical formatting.
DO NOT add meta-commentary like "Here are the notes" or "This is about..."
DO NOT add any formatting symbols that are not in the original image.
JUST provide the clean text directly.

Example format:

Cell Biology Notes

Cell Structure
The cell is the basic unit of life. Key components include nucleus which contains genetic material (DNA), mitochondria which is the powerhouse of the cell, and cell membrane which controls what enters and exits.

Cell Functions
Cells perform three main functions...

For math notes example:

Quadratic Equations

Standard Form
The standard form is ax^2 + bx + c = 0

Quadratic Formula
x = (-b  (b^2 - 4ac)) / 2a

Be thorough but concise. Make it look professional and easy to read.`}_getFlashcardPrompt(){return`You are an expert educator creating effective flashcards for student learning.

Analyze this textbook page or notes image and create flashcards that will help students learn the material.

FLASHCARD CREATION RULES:
1. Identify KEY TERMS and their definitions
2. Extract IMPORTANT CONCEPTS that need explanation
3. Find FACTS, dates, formulas, or data points
4. Create questions that test understanding, not just memorization
5. Make the front (question) clear and specific
6. Make the back (answer) concise but complete
7. Add hints for complex topics (optional)
8. Rate difficulty: easy, medium, or hard

Create 5-15 high-quality flashcards (prioritize quality over quantity).

Return your response as a JSON object with this structure:
{
  "flashcards": [
    {
      "front": "What is...?",
      "back": "Clear, concise answer",
      "hint": "Optional hint for difficult cards",
      "difficulty": "easy | medium | hard"
    }
  ],
  "title": "suggested deck title",
  "subject": "detected subject area"
}

Focus on active recall and understanding.`}_getHomeworkPrompt(){return`You are an expert at analyzing homework assignments and extracting key information.

Analyze this homework assignment image and extract the following information:
- Title/name of the assignment
- Subject (Math, Chemistry, English, History, Physics, etc.)
- Due date (if visible) - format as YYYY-MM-DD
- Description/requirements of the assignment
- Estimated time to complete (e.g., "1h 30m", "2h", "45m")
- Priority level based on due date and complexity (low, medium, high)

TODAY'S DATE: ${new Date().toISOString().split("T")[0]}

INSTRUCTIONS:
1. Read ALL text carefully from the image
2. Look for:
   - Assignment titles or headings
   - Due dates, deadlines, or "Due:" labels
   - Subject names or class names
   - Instructions, requirements, or questions to answer
   - Page numbers, chapter references, problem numbers
3. Estimate time based on complexity and length
4. Set priority:
   - HIGH: Due within 2 days or complex/long assignments
   - MEDIUM: Due within a week or moderate difficulty
   - LOW: Due later or quick/simple assignments

Return your response as a JSON object:
{
  "title": "Assignment name or topic",
  "subject": "Subject area",
  "dueDate": "YYYY-MM-DD or null if not found",
  "description": "Clear summary of what needs to be done",
  "estimatedTime": "1h 30m",
  "priority": "low | medium | high",
  "confidence": 0.95
}

If you can't find certain information, make educated guesses based on context.
BE ACCURATE with dates - if you see "Due: 12/15", convert it to proper YYYY-MM-DD format.`}_parseNotesResponse(e){try{let t=e.trim();const i=t.split(`
`).filter(l=>l.trim()),r=i.length>0?i[0].trim():"Untitled Notes",s={Chemistry:/chemistry|chemical|molecule|atom|reaction|compound/i,Math:/math|calculus|algebra|geometry|equation|formula/i,Biology:/biology|cell|organism|dna|protein|evolution/i,Physics:/physics|force|energy|motion|wave|quantum/i,History:/history|war|revolution|century|empire|ancient/i,English:/literature|poem|novel|shakespeare|writing/i,"Computer Science":/programming|code|algorithm|software|computer/i};let a="General";for(const[l,d]of Object.entries(s))if(d.test(t)){a=l;break}const o=i.filter(l=>{const d=l.trim().split(/\s+/);return d.length>=2&&d.length<=5&&!l.endsWith(".")}),c=[...new Set(o)].slice(0,5).map(l=>l.trim());return{rawText:t,formattedContent:t,title:r,subject:a,tags:c,confidence:.9}}catch(t){return console.error("Failed to parse notes response:",t),{rawText:e,formattedContent:e,title:"Untitled Notes",subject:"General",tags:[],confidence:.7}}}_parseFlashcardsResponse(e){try{const t=e.match(/```json\s*([\s\S]*?)\s*```/)||e.match(/\{[\s\S]*\}/);if(!t)throw new Error("No JSON found in response");const i=t[1]||t[0],r=JSON.parse(i);if(!Array.isArray(r.flashcards))throw new Error("Invalid flashcards format");return{flashcards:r.flashcards.map((s,a)=>({front:s.front||`Question ${a+1}`,back:s.back||"No answer provided",hint:s.hint||null,difficulty:s.difficulty||"medium"})),title:r.title||"Untitled Deck",subject:r.subject||"General"}}catch(t){return console.error("Failed to parse flashcards response:",t),{flashcards:[{front:"Flashcard generation failed",back:"Please try again with a different image",hint:null,difficulty:"medium"}],title:"Error Deck",subject:"General"}}}_parseHomeworkResponse(e){try{const t=e.match(/```json\s*([\s\S]*?)\s*```/)||e.match(/\{[\s\S]*\}/);if(!t)throw new Error("No JSON found in response");const i=t[1]||t[0],r=JSON.parse(i);return{title:r.title||"Untitled Assignment",subject:r.subject||"General",dueDate:r.dueDate||null,description:r.description||"No description provided",estimatedTime:r.estimatedTime||"1h",priority:r.priority||"medium",confidence:r.confidence||.85}}catch(t){return console.error("Failed to parse homework response:",t),{title:"Assignment Detected",subject:"General",dueDate:null,description:"Please review the scanned image for details",estimatedTime:"1h",priority:"medium",confidence:.5}}}_getDemoHomeworkResponse(){const e=new Date;return e.setDate(e.getDate()+3),{title:"Chemistry Lab Report: Acid-Base Titration",subject:"Chemistry",dueDate:e.toISOString().split("T")[0],description:"Complete lab report analyzing the titration of HCl with NaOH. Include calculations, observations, and error analysis. Submit both handwritten data tables and typed analysis.",estimatedTime:"2h 30m",priority:"high",confidence:.95}}_getDemoNotesResponse(){const e=`Chemistry Notes - Acid-Base Reactions

Definition
An acid-base reaction involves the transfer of a proton (H+) from one species to another.

Key Concepts
Bronsted-Lowry acids are proton donors. Bases are proton acceptors. Conjugate acid-base pairs differ by one proton.

pH Scale
pH < 7 is acidic. pH = 7 is neutral. pH > 7 is basic.

Common Acids
HCl (hydrochloric acid), HSO (sulfuric acid), CHCOOH (acetic acid)`;return{rawText:e,formattedContent:e,title:"Chemistry Notes - Acid-Base Reactions",subject:"Chemistry",tags:["acids","bases","pH","Bronsted-Lowry","proton transfer"],confidence:.95}}_getDemoFlashcardsResponse(){return{flashcards:[{front:"What is a Bronsted-Lowry acid?",back:"A proton (H+) donor",hint:"Think about what the acid gives away",difficulty:"easy"},{front:"What is a Bronsted-Lowry base?",back:"A proton (H+) acceptor",hint:"Think about what the base receives",difficulty:"easy"},{front:"What is the pH of a neutral solution?",back:"7",hint:"Right in the middle of the pH scale",difficulty:"easy"},{front:"If a solution has pH < 7, is it acidic or basic?",back:"Acidic",hint:"Lower pH means more H+ ions",difficulty:"easy"},{front:"What is a conjugate acid-base pair?",back:"Two species that differ by one proton (H+)",hint:"They are related by the transfer of one proton",difficulty:"medium"},{front:"What is the chemical formula for hydrochloric acid?",back:"HCl",difficulty:"easy"},{front:"What is the chemical formula for sulfuric acid?",back:"HSO",difficulty:"medium"},{front:"What happens in an acid-base reaction?",back:"A proton (H+) is transferred from the acid to the base",difficulty:"medium"}],title:"Acid-Base Reactions",subject:"Chemistry"}}isReady(){return this.isConfigured}getStatus(){return{isConfigured:this.isConfigured,model:"llama-3.2-90b-vision-preview",provider:"Groq"}}}const $d=new $W;class HW{async getAllNotes(){try{const e=ge.getUserId();if(!e)throw new Error("User not authenticated");const{data:t,error:i}=await de.from("notes").select("*").eq("user_id",e).order("updated_at",{ascending:!1});if(i)throw i;return t.map(this._mapFromDatabase)}catch(e){return console.error("Failed to fetch notes:",e),[]}}async getNoteById(e){try{const t=ge.getUserId();if(!t)throw new Error("User not authenticated");const{data:i,error:r}=await de.from("notes").select("*").eq("id",e).eq("user_id",t).single();if(r)throw r;return this._mapFromDatabase(i)}catch(t){return console.error("Failed to fetch note:",t),null}}async createNote(e){try{const t=ge.getUserId();if(!t)throw new Error("User not authenticated");const i={user_id:t,title:e.title||"Untitled Note",content:e.content||"",raw_text:e.rawText||"",source_image:e.sourceImage||null,subject:e.subject||"General",tags:e.tags||[],is_favorite:!1},{data:r,error:s}=await de.from("notes").insert(i).select().single();if(s)throw s;return this._mapFromDatabase(r)}catch(t){return console.error("Failed to create note:",t),null}}async updateNote(e,t){try{const i=ge.getUserId();if(!i)throw new Error("User not authenticated");const r={};t.title!==void 0&&(r.title=t.title),t.content!==void 0&&(r.content=t.content),t.rawText!==void 0&&(r.raw_text=t.rawText),t.sourceImage!==void 0&&(r.source_image=t.sourceImage),t.subject!==void 0&&(r.subject=t.subject),t.tags!==void 0&&(r.tags=t.tags),t.isFavorite!==void 0&&(r.is_favorite=t.isFavorite);const{data:s,error:a}=await de.from("notes").update(r).eq("id",e).eq("user_id",i).select().single();if(a)throw a;return this._mapFromDatabase(s)}catch(i){return console.error("Failed to update note:",i),null}}async deleteNote(e){try{const t=ge.getUserId();if(!t)throw new Error("User not authenticated");const{error:i}=await de.from("notes").delete().eq("id",e).eq("user_id",t);if(i)throw i;return!0}catch(t){return console.error("Failed to delete note:",t),!1}}async searchNotes(e){try{const t=ge.getUserId();if(!t)throw new Error("User not authenticated");if(!e||e.trim()==="")return await this.getAllNotes();const i=e.toLowerCase(),{data:r,error:s}=await de.from("notes").select("*").eq("user_id",t).or(`title.ilike.%${i}%,content.ilike.%${i}%,subject.ilike.%${i}%`).order("updated_at",{ascending:!1});if(s)throw s;return r.map(this._mapFromDatabase)}catch(t){return console.error("Failed to search notes:",t),[]}}async getNotesBySubject(e){try{const t=ge.getUserId();if(!t)throw new Error("User not authenticated");const{data:i,error:r}=await de.from("notes").select("*").eq("user_id",t).ilike("subject",e).order("updated_at",{ascending:!1});if(r)throw r;return i.map(this._mapFromDatabase)}catch(t){return console.error("Failed to fetch notes by subject:",t),[]}}async getFavoriteNotes(){try{const e=ge.getUserId();if(!e)throw new Error("User not authenticated");const{data:t,error:i}=await de.from("notes").select("*").eq("user_id",e).eq("is_favorite",!0).order("updated_at",{ascending:!1});if(i)throw i;return t.map(this._mapFromDatabase)}catch(e){return console.error("Failed to fetch favorite notes:",e),[]}}async getRecentNotes(e=5){try{const t=ge.getUserId();if(!t)throw new Error("User not authenticated");const{data:i,error:r}=await de.from("notes").select("*").eq("user_id",t).order("updated_at",{ascending:!1}).limit(e);if(r)throw r;return i.map(this._mapFromDatabase)}catch(t){return console.error("Failed to fetch recent notes:",t),[]}}async toggleFavorite(e){try{const t=await this.getNoteById(e);return t?await this.updateNote(e,{isFavorite:!t.isFavorite}):null}catch(t){return console.error("Failed to toggle favorite:",t),null}}async getStatistics(){try{const e=await this.getAllNotes(),t=e.filter(s=>s.isFavorite),i=[...new Set(e.map(s=>s.subject))],r={};return e.forEach(s=>{r[s.subject]=(r[s.subject]||0)+1}),{totalNotes:e.length,favoriteNotes:t.length,subjects:i.length,notesBySubject:r,recentlyUpdated:Math.min(3,e.length),oldestNote:e.length>0?new Date(Math.min(...e.map(s=>new Date(s.createdAt)))):null,newestNote:e.length>0?new Date(Math.max(...e.map(s=>new Date(s.createdAt)))):null}}catch(e){return console.error("Failed to get statistics:",e),{totalNotes:0,favoriteNotes:0,subjects:0,notesBySubject:{},recentlyUpdated:0,oldestNote:null,newestNote:null}}}_mapFromDatabase(e){return{id:e.id,title:e.title,content:e.content,rawText:e.raw_text,sourceImage:e.source_image,subject:e.subject,tags:e.tags||[],isFavorite:e.is_favorite||!1,createdAt:e.created_at,updatedAt:e.updated_at}}}const no=new HW;class VW{async getAllDecks(){try{const e=ge.getUserId();if(!e)throw new Error("User not authenticated");const{data:t,error:i}=await de.from("decks").select(`
          *,
          flashcards(id)
        `).eq("user_id",e).order("updated_at",{ascending:!1});if(i)throw i;return t.map(r=>this._mapDeckFromDatabase(r))}catch(e){return console.error("Failed to fetch decks:",e),[]}}async getDeckById(e){try{const t=ge.getUserId();if(!t)throw new Error("User not authenticated");const{data:i,error:r}=await de.from("decks").select(`
          *,
          flashcards(id)
        `).eq("id",e).eq("user_id",t).single();if(r)throw r;return this._mapDeckFromDatabase(i)}catch(t){return console.error("Failed to fetch deck:",t),null}}async createDeck(e){try{const t=ge.getUserId();if(!t)throw new Error("User not authenticated");const i={user_id:t,title:e.title||"Untitled Deck",description:e.description||"",subject:e.subject||"General",source_image:e.sourceImage||null},{data:r,error:s}=await de.from("decks").insert(i).select(`
          *,
          flashcards(id)
        `).single();if(s)throw s;return this._mapDeckFromDatabase(r)}catch(t){return console.error("Failed to create deck:",t),null}}async updateDeck(e,t){try{const i=ge.getUserId();if(!i)throw new Error("User not authenticated");const r={};t.title!==void 0&&(r.title=t.title),t.description!==void 0&&(r.description=t.description),t.subject!==void 0&&(r.subject=t.subject),t.sourceImage!==void 0&&(r.source_image=t.sourceImage);const{data:s,error:a}=await de.from("decks").update(r).eq("id",e).eq("user_id",i).select(`
          *,
          flashcards(id)
        `).single();if(a)throw a;return this._mapDeckFromDatabase(s)}catch(i){return console.error("Failed to update deck:",i),null}}async deleteDeck(e){try{const t=ge.getUserId();if(!t)throw new Error("User not authenticated");const{error:i}=await de.from("decks").delete().eq("id",e).eq("user_id",t);if(i)throw i;return!0}catch(t){return console.error("Failed to delete deck:",t),!1}}async getCardsByDeck(e){try{const t=ge.getUserId();if(!t)throw new Error("User not authenticated");const{data:i,error:r}=await de.from("flashcards").select("*").eq("deck_id",e).eq("user_id",t);if(r)throw r;return i.map(this._mapCardFromDatabase)}catch(t){return console.error("Failed to fetch cards:",t),[]}}async getCardById(e){try{const t=ge.getUserId();if(!t)throw new Error("User not authenticated");const{data:i,error:r}=await de.from("flashcards").select("*").eq("id",e).eq("user_id",t).single();if(r)throw r;return this._mapCardFromDatabase(i)}catch(t){return console.error("Failed to fetch card:",t),null}}async createCard(e){try{const t=ge.getUserId();if(!t)throw new Error("User not authenticated");if(!e.deckId)throw new Error("deckId is required");const i=new Date().toISOString(),r={user_id:t,deck_id:e.deckId,front:e.front||"",back:e.back||"",hint:e.hint||null,difficulty:e.difficulty||"medium",status:"new",ease_factor:2.5,interval:0,next_review_date:i,repetitions:0,last_reviewed:null},{data:s,error:a}=await de.from("flashcards").insert(r).select().single();if(a)throw a;return this._mapCardFromDatabase(s)}catch(t){return console.error("Failed to create card:",t),null}}async updateCard(e,t){try{const i=ge.getUserId();if(!i)throw new Error("User not authenticated");const r={};t.front!==void 0&&(r.front=t.front),t.back!==void 0&&(r.back=t.back),t.hint!==void 0&&(r.hint=t.hint),t.difficulty!==void 0&&(r.difficulty=t.difficulty),t.status!==void 0&&(r.status=t.status),t.easeFactor!==void 0&&(r.ease_factor=t.easeFactor),t.interval!==void 0&&(r.interval=t.interval),t.nextReviewDate!==void 0&&(r.next_review_date=t.nextReviewDate),t.repetitions!==void 0&&(r.repetitions=t.repetitions),t.lastReviewed!==void 0&&(r.last_reviewed=t.lastReviewed);const{data:s,error:a}=await de.from("flashcards").update(r).eq("id",e).eq("user_id",i).select().single();if(a)throw a;return this._mapCardFromDatabase(s)}catch(i){return console.error("Failed to update card:",i),null}}async deleteCard(e){try{const t=ge.getUserId();if(!t)throw new Error("User not authenticated");const{error:i}=await de.from("flashcards").delete().eq("id",e).eq("user_id",t);if(i)throw i;return!0}catch(t){return console.error("Failed to delete card:",t),!1}}async createDeckWithCards(e,t){try{const i=await this.createDeck(e);if(!i)throw new Error("Failed to create deck");const r=[];for(const s of t){const a=await this.createCard({...s,deckId:i.id});a&&r.push(a)}return{deck:i,cards:r}}catch(i){return console.error("Failed to create deck with cards:",i),null}}async getDueCards(e=null){try{const t=ge.getUserId();if(!t)throw new Error("User not authenticated");let i=de.from("flashcards").select("*").eq("user_id",t).lte("next_review_date",new Date().toISOString());e&&(i=i.eq("deck_id",e));const{data:r,error:s}=await i;if(s)throw s;const a={new:0,learning:1,reviewing:2,mastered:3};return r.map(this._mapCardFromDatabase).sort((o,c)=>a[o.status]-a[c.status])}catch(t){return console.error("Failed to fetch due cards:",t),[]}}async recordReview(e,t){try{const i=await this.getCardById(e);if(!i)return null;const r=new Date,s=this._calculateNextReview(i,t);return await this.updateCard(e,{...s,lastReviewed:r.toISOString(),repetitions:i.repetitions+1})}catch(i){return console.error("Failed to record review:",i),null}}_calculateNextReview(e,t){if(t<3)return{easeFactor:e.easeFactor,interval:1,nextReviewDate:this._addDays(new Date,1).toISOString(),status:"learning"};let{easeFactor:i,interval:r,repetitions:s}=e;i=Math.max(1.3,i+(.1-(5-t)*(.08+(5-t)*.02))),s===0?r=1:s===1?r=6:r=Math.round(r*i);let a="learning";return r>=21?a="mastered":r>=6&&(a="reviewing"),{easeFactor:i,interval:r,nextReviewDate:this._addDays(new Date,r).toISOString(),status:a}}async getDeckStats(e){try{const t=await this.getCardsByDeck(e),i=await this.getDueCards(e);return{totalCards:t.length,new:t.filter(r=>r.status==="new").length,learning:t.filter(r=>r.status==="learning").length,reviewing:t.filter(r=>r.status==="reviewing").length,mastered:t.filter(r=>r.status==="mastered").length,dueToday:i.length}}catch(t){return console.error("Failed to get deck stats:",t),{totalCards:0,new:0,learning:0,reviewing:0,mastered:0,dueToday:0}}}async getOverallStats(){try{const e=ge.getUserId();if(!e)throw new Error("User not authenticated");const{data:t,error:i}=await de.from("flashcards").select("*").eq("user_id",e);if(i)throw i;const{data:r,error:s}=await de.from("decks").select("id").eq("user_id",e);if(s)throw s;const a=await this.getDueCards();return{totalDecks:r.length,totalCards:t.length,dueToday:a.length,new:t.filter(o=>o.status==="new").length,learning:t.filter(o=>o.status==="learning").length,reviewing:t.filter(o=>o.status==="reviewing").length,mastered:t.filter(o=>o.status==="mastered").length}}catch(e){return console.error("Failed to get overall stats:",e),{totalDecks:0,totalCards:0,dueToday:0,new:0,learning:0,reviewing:0,mastered:0}}}_addDays(e,t){const i=new Date(e);return i.setDate(i.getDate()+t),i}_mapDeckFromDatabase(e){return{id:e.id,title:e.title,description:e.description,subject:e.subject,sourceImage:e.source_image,cardIds:e.flashcards?e.flashcards.map(t=>t.id):[],createdAt:e.created_at,updatedAt:e.updated_at}}_mapCardFromDatabase(e){return{id:e.id,front:e.front,back:e.back,hint:e.hint,difficulty:e.difficulty,deckId:e.deck_id,status:e.status,easeFactor:parseFloat(e.ease_factor),interval:e.interval,nextReviewDate:e.next_review_date,repetitions:e.repetitions,lastReviewed:e.last_reviewed,createdAt:e.created_at}}}const bi=new VW;class GW{async getAllQuizzes(){try{const{user:e}=await ge.getCurrentUser();if(!e)throw new Error("Not authenticated");const{data:t,error:i}=await de.from("quizzes").select("*").eq("user_id",e.id).order("updated_at",{ascending:!1});if(i)throw i;return t.map(this._mapQuizFromDatabase)}catch(e){throw console.error("Error fetching quizzes:",e),e}}async getQuizById(e){try{const{user:t}=await ge.getCurrentUser();if(!t)throw new Error("Not authenticated");const{data:i,error:r}=await de.from("quizzes").select("*").eq("id",e).eq("user_id",t.id).single();if(r)throw r;const{data:s,error:a}=await de.from("quiz_questions").select("*").eq("quiz_id",e).order("order_index",{ascending:!0});if(a)throw a;return{...this._mapQuizFromDatabase(i),questions:s.map(this._mapQuestionFromDatabase)}}catch(t){throw console.error("Error fetching quiz:",t),t}}async createQuiz(e){try{const{user:t}=await ge.getCurrentUser();if(!t)throw new Error("Not authenticated");const{data:i,error:r}=await de.from("quizzes").insert({user_id:t.id,title:e.title,description:e.description||null,subject:e.subject||"General",source_file_id:e.sourceFileId||null,question_count:e.questionCount||0,tags:e.tags||[]}).select().single();if(r)throw r;return this._mapQuizFromDatabase(i)}catch(t){throw console.error("Error creating quiz:",t),t}}async createBulkQuestions(e,t){try{const{user:i}=await ge.getCurrentUser();if(!i)throw new Error("Not authenticated");const r=t.map((o,c)=>({quiz_id:e,user_id:i.id,question_type:o.type,question_text:o.question,options:o.options||null,correct_answer:String(o.correctAnswer),explanation:o.explanation||null,difficulty:o.difficulty||"medium",order_index:c})),{data:s,error:a}=await de.from("quiz_questions").insert(r).select();if(a)throw a;return await de.from("quizzes").update({question_count:t.length}).eq("id",e),s.map(this._mapQuestionFromDatabase)}catch(i){throw console.error("Error creating questions:",i),i}}async updateQuiz(e,t){try{const{user:i}=await ge.getCurrentUser();if(!i)throw new Error("Not authenticated");const{data:r,error:s}=await de.from("quizzes").update({title:t.title,description:t.description,subject:t.subject,is_favorite:t.isFavorite,tags:t.tags,updated_at:new Date().toISOString()}).eq("id",e).eq("user_id",i.id).select().single();if(s)throw s;return this._mapQuizFromDatabase(r)}catch(i){throw console.error("Error updating quiz:",i),i}}async deleteQuiz(e){try{const{user:t}=await ge.getCurrentUser();if(!t)throw new Error("Not authenticated");const{error:i}=await de.from("quizzes").delete().eq("id",e).eq("user_id",t.id);if(i)throw i;return!0}catch(t){throw console.error("Error deleting quiz:",t),t}}async toggleQuizFavorite(e){try{const t=await this.getQuizById(e);return await this.updateQuiz(e,{isFavorite:!t.isFavorite})}catch(t){throw console.error("Error toggling favorite:",t),t}}async recordAttempt(e,t){try{const{user:i}=await ge.getCurrentUser();if(!i)throw new Error("Not authenticated");const{data:r,error:s}=await de.from("quiz_attempts").insert({quiz_id:e,user_id:i.id,score:t.score,total_questions:t.totalQuestions,answers:t.answers,time_spent_seconds:t.timeSpentSeconds||null,completed_at:new Date().toISOString()}).select().single();if(s)throw s;return this._mapAttemptFromDatabase(r)}catch(i){throw console.error("Error recording attempt:",i),i}}async getAttemptHistory(e){try{const{user:t}=await ge.getCurrentUser();if(!t)throw new Error("Not authenticated");const{data:i,error:r}=await de.from("quiz_attempts").select("*").eq("quiz_id",e).eq("user_id",t.id).order("completed_at",{ascending:!1});if(r)throw r;return i.map(this._mapAttemptFromDatabase)}catch(t){throw console.error("Error fetching attempt history:",t),t}}async getUserAttemptHistory(e=20){try{const{user:t}=await ge.getCurrentUser();if(!t)throw new Error("Not authenticated");const{data:i,error:r}=await de.from("quiz_attempts").select("*, quizzes(title, subject)").eq("user_id",t.id).order("completed_at",{ascending:!1}).limit(e);if(r)throw r;return i.map(s=>{var a,o;return{...this._mapAttemptFromDatabase(s),quizTitle:(a=s.quizzes)==null?void 0:a.title,quizSubject:(o=s.quizzes)==null?void 0:o.subject}})}catch(t){throw console.error("Error fetching user attempts:",t),t}}async searchQuizzes(e){try{const{user:t}=await ge.getCurrentUser();if(!t)throw new Error("Not authenticated");const i=e.toLowerCase(),{data:r,error:s}=await de.from("quizzes").select("*").eq("user_id",t.id).or(`title.ilike.%${i}%,description.ilike.%${i}%,subject.ilike.%${i}%`).order("updated_at",{ascending:!1});if(s)throw s;return r.map(this._mapQuizFromDatabase)}catch(t){throw console.error("Error searching quizzes:",t),t}}async getQuizStatistics(e){try{const{user:t}=await ge.getCurrentUser();if(!t)throw new Error("Not authenticated");const{data:i,error:r}=await de.from("quiz_attempts").select("score, total_questions, completed_at").eq("quiz_id",e).eq("user_id",t.id);if(r)throw r;if(i.length===0)return{totalAttempts:0,bestScore:0,averageScore:0,lastAttempt:null};const s=i.map(a=>a.score/a.total_questions*100);return{totalAttempts:i.length,bestScore:Math.max(...s),averageScore:s.reduce((a,o)=>a+o,0)/s.length,lastAttempt:i[0].completed_at}}catch(t){throw console.error("Error fetching quiz statistics:",t),t}}_mapQuizFromDatabase(e){return{id:e.id,userId:e.user_id,title:e.title,description:e.description,subject:e.subject,sourceFileId:e.source_file_id,questionCount:e.question_count,bestScore:e.best_score,isFavorite:e.is_favorite,tags:e.tags||[],createdAt:e.created_at,updatedAt:e.updated_at}}_mapQuestionFromDatabase(e){let t=e.options||[];if(typeof t=="string")try{t=JSON.parse(t)}catch(i){console.error("Failed to parse options:",i),t=[]}return{id:e.id,quizId:e.quiz_id,type:e.question_type,question:e.question_text,options:Array.isArray(t)?t:[],correctAnswer:e.correct_answer,explanation:e.explanation,difficulty:e.difficulty,orderIndex:e.order_index,createdAt:e.created_at}}_mapAttemptFromDatabase(e){return{id:e.id,quizId:e.quiz_id,userId:e.user_id,score:e.score,totalQuestions:e.total_questions,percentage:e.score/e.total_questions*100,answers:e.answers,timeSpentSeconds:e.time_spent_seconds,completedAt:e.completed_at}}}const xs=new GW;class XW{async search(e,t={}){const{types:i=["notes","flashcards","decks","quizzes"],limit:r=50}=t;if(!e||e.trim().length===0)return{notes:[],flashcards:[],decks:[],quizzes:[],total:0};const s=[];i.includes("notes")?s.push(this.searchNotes(e,{limit:r})):s.push(Promise.resolve([])),i.includes("flashcards")?s.push(this.searchFlashcards(e,{limit:r})):s.push(Promise.resolve([])),i.includes("decks")?s.push(this.searchDecks(e,{limit:r})):s.push(Promise.resolve([])),i.includes("quizzes")?s.push(this.searchQuizzes(e,{limit:r})):s.push(Promise.resolve([]));const[a,o,c,l]=await Promise.all(s);return{notes:a,flashcards:o,decks:c,quizzes:l,total:a.length+o.length+c.length+l.length}}async searchNotes(e,t={}){try{const{user:i}=await ge.getCurrentUser();if(!i)return[];const r=e.toLowerCase(),{data:s,error:a}=await de.from("notes").select("*").eq("user_id",i.id).or(`title.ilike.%${r}%,content.ilike.%${r}%,subject.ilike.%${r}%`).limit(t.limit||50).order("updated_at",{ascending:!1});if(a)throw a;return(s||[]).map(o=>({...o,resultType:"note",matchText:this._highlightMatch(o.content||"",e,200)}))}catch(i){return console.error("Error searching notes:",i),[]}}async searchFlashcards(e,t={}){try{const{user:i}=await ge.getCurrentUser();if(!i)return[];const r=e.toLowerCase(),{data:s,error:a}=await de.from("flashcards").select("*, decks(title, subject)").eq("user_id",i.id).or(`front.ilike.%${r}%,back.ilike.%${r}%,hint.ilike.%${r}%`).limit(t.limit||50).order("created_at",{ascending:!1});if(a)throw a;return(s||[]).map(o=>{var c,l;return{...o,resultType:"flashcard",deckTitle:(c=o.decks)==null?void 0:c.title,deckSubject:(l=o.decks)==null?void 0:l.subject,matchText:this._highlightMatch(o.front+" "+o.back,e,100)}})}catch(i){return console.error("Error searching flashcards:",i),[]}}async searchDecks(e,t={}){try{const{user:i}=await ge.getCurrentUser();if(!i)return[];const r=e.toLowerCase(),{data:s,error:a}=await de.from("decks").select("*, flashcards(count)").eq("user_id",i.id).or(`title.ilike.%${r}%,description.ilike.%${r}%,subject.ilike.%${r}%`).limit(t.limit||50).order("updated_at",{ascending:!1});if(a)throw a;return(s||[]).map(o=>{var c,l;return{...o,resultType:"deck",cardCount:((l=(c=o.flashcards)==null?void 0:c[0])==null?void 0:l.count)||0,matchText:this._highlightMatch(o.description||"",e,150)}})}catch(i){return console.error("Error searching decks:",i),[]}}async searchQuizzes(e,t={}){try{return await xs.searchQuizzes(e)}catch(i){return console.error("Error searching quizzes:",i),[]}}_highlightMatch(e,t,i=200){if(!e||!t)return"";const r=e.toLowerCase(),s=t.toLowerCase(),a=r.indexOf(s);if(a===-1)return e.substring(0,i)+(e.length>i?"...":"");const o=Math.max(0,a-50),c=Math.min(e.length,a+t.length+i-50);let l=e.substring(o,c);return o>0&&(l="..."+l),c<e.length&&(l=l+"..."),l}async getSuggestions(e,t=5){var i,r,s;try{const{user:a}=await ge.getCurrentUser();if(!a)return[];const o=e.toLowerCase(),[c,l,d]=await Promise.all([de.from("notes").select("title").eq("user_id",a.id).ilike("title",`%${o}%`).limit(t),de.from("quizzes").select("title").eq("user_id",a.id).ilike("title",`%${o}%`).limit(t),de.from("notes").select("subject").eq("user_id",a.id).ilike("subject",`%${o}%`).limit(t)]),h=new Set;return(i=c.data)==null||i.forEach(f=>h.add(f.title)),(r=l.data)==null||r.forEach(f=>h.add(f.title)),(s=d.data)==null||s.forEach(f=>h.add(f.subject)),Array.from(h).slice(0,t)}catch(a){return console.error("Error getting suggestions:",a),[]}}}const YW=new XW,M6=ee.createContext(null);function KW({children:n}){const[e,t]=ee.useState([]),[i,r]=ee.useState(!0),[s,a]=ee.useState([]),[o,c]=ee.useState([]),[l,d]=ee.useState(!0),[h,f]=ee.useState([]),[g,v]=ee.useState(!0);ee.useEffect(()=>{y(),A(),B();const ce=ge.onAuthStateChange((le,Y)=>{le==="SIGNED_IN"?(y(),A(),B()):le==="SIGNED_OUT"&&(t([]),a([]),c([]),f([]))});return()=>{ce.unsubscribe()}},[]);const y=async()=>{r(!0);try{const ce=await no.getAllNotes();t(ce)}catch(ce){console.error("Failed to load notes:",ce)}finally{r(!1)}},x=async ce=>{try{const le=await no.createNote(ce);return le&&t(Y=>[le,...Y]),le}catch(le){return console.error("Failed to add note:",le),null}},m=async(ce,le)=>{try{const Y=await no.updateNote(ce,le);return Y&&t(ae=>ae.map(C=>C.id===ce?Y:C)),Y}catch(Y){return console.error("Failed to update note:",Y),null}},b=async ce=>{try{const le=await no.deleteNote(ce);return le&&t(Y=>Y.filter(ae=>ae.id!==ce)),le}catch(le){return console.error("Failed to delete note:",le),!1}},w=async ce=>await no.searchNotes(ce),_=async ce=>await no.getNotesBySubject(ce),D=async ce=>{try{const le=await no.toggleFavorite(ce);return le&&t(Y=>Y.map(ae=>ae.id===ce?le:ae)),le}catch(le){return console.error("Failed to toggle favorite:",le),null}},A=async()=>{d(!0);try{const ce=await bi.getAllDecks();a(ce);const le=[];for(const Y of ce){const ae=await bi.getCardsByDeck(Y.id);le.push(...ae)}c(le)}catch(ce){console.error("Failed to load flashcards:",ce)}finally{d(!1)}},E=async ce=>{try{const le=await bi.createDeck(ce);return le&&a(Y=>[le,...Y]),le}catch(le){return console.error("Failed to add deck:",le),null}},F=async(ce,le)=>{try{const Y=await bi.updateDeck(ce,le);return Y&&a(ae=>ae.map(C=>C.id===ce?Y:C)),Y}catch(Y){return console.error("Failed to update deck:",Y),null}},I=async ce=>{try{const le=await bi.deleteDeck(ce);return le&&(a(Y=>Y.filter(ae=>ae.id!==ce)),await A()),le}catch(le){return console.error("Failed to delete deck:",le),!1}},z=async ce=>{try{const le=await bi.createCard(ce);return le&&(c(Y=>[...Y,le]),a(Y=>Y.map(ae=>ae.id===ce.deckId?{...ae,cardIds:[...ae.cardIds,le.id]}:ae))),le}catch(le){return console.error("Failed to add card:",le),null}},H=async(ce,le)=>{try{const Y=await bi.updateCard(ce,le);return Y&&c(ae=>ae.map(C=>C.id===ce?Y:C)),Y}catch(Y){return console.error("Failed to update card:",Y),null}},k=async ce=>{try{const le=await bi.deleteCard(ce);return le&&(c(Y=>Y.filter(ae=>ae.id!==ce)),await A()),le}catch(le){return console.error("Failed to delete card:",le),!1}},W=async(ce,le)=>{try{const Y=await bi.createDeckWithCards(ce,le);return Y&&(a(ae=>[Y.deck,...ae]),c(ae=>[...ae,...Y.cards])),Y}catch(Y){return console.error("Failed to add deck with cards:",Y),null}},S=async(ce,le)=>{try{const Y=await bi.recordReview(ce,le);return Y&&c(ae=>ae.map(C=>C.id===ce?Y:C)),Y}catch(Y){return console.error("Failed to record review:",Y),null}},G=async(ce=null)=>await bi.getDueCards(ce),j=async ce=>await bi.getCardsByDeck(ce),M=async ce=>await bi.getDeckStats(ce),R=async()=>await no.getStatistics(),N=async()=>await bi.getOverallStats(),B=async()=>{v(!0);try{const ce=await xs.getAllQuizzes();f(ce)}catch(ce){console.error("Failed to load quizzes:",ce)}finally{v(!1)}},xe={notes:e,notesLoading:i,addNote:x,updateNote:m,deleteNote:b,searchNotes:w,getNotesBySubject:_,toggleNoteFavorite:D,getNotesStats:R,loadNotes:y,decks:s,flashcards:o,flashcardsLoading:l,addDeck:E,updateDeck:F,deleteDeck:I,addCard:z,updateCard:H,deleteCard:k,addDeckWithCards:W,recordCardReview:S,getDueCards:G,getCardsByDeck:j,getDeckStats:M,getFlashcardsStats:N,loadFlashcards:A,quizzes:h,quizzesLoading:g,addQuiz:async ce=>{try{const le=await xs.createQuiz(ce);return le&&f(Y=>[le,...Y]),le}catch(le){return console.error("Failed to add quiz:",le),null}},updateQuiz:async(ce,le)=>{try{const Y=await xs.updateQuiz(ce,le);return Y&&f(ae=>ae.map(C=>C.id===ce?Y:C)),Y}catch(Y){return console.error("Failed to update quiz:",Y),null}},deleteQuiz:async ce=>{try{const le=await xs.deleteQuiz(ce);return le&&f(Y=>Y.filter(ae=>ae.id!==ce)),le}catch(le){return console.error("Failed to delete quiz:",le),!1}},recordQuizAttempt:async(ce,le)=>{try{const Y=await xs.recordAttempt(ce,le);return await B(),Y}catch(Y){return console.error("Failed to record quiz attempt:",Y),null}},getQuizById:async ce=>await xs.getQuizById(ce),toggleQuizFavorite:async ce=>{try{const le=await xs.toggleQuizFavorite(ce);return le&&f(Y=>Y.map(ae=>ae.id===ce?le:ae)),le}catch(le){return console.error("Failed to toggle quiz favorite:",le),null}},getQuizStatistics:async ce=>await xs.getQuizStatistics(ce),loadQuizzes:B,searchAll:async(ce,le={})=>await YW.search(ce,le)};return p.jsx(M6.Provider,{value:xe,children:n})}function Sg(){const n=ee.useContext(M6);if(!n)throw new Error("useStudy must be used within a StudyProvider");return n}const QW=({onClose:n,onCapture:e,initialScanMode:t="homework"})=>{var L;const{addNote:i,addDeckWithCards:r}=Sg(),[s,a]=ee.useState(t),[o,c]=ee.useState("camera"),[l,d]=ee.useState(null),[h,f]=ee.useState(null),[g,v]=ee.useState(null),[y,x]=ee.useState(null),[m,b]=ee.useState(!1),[w,_]=ee.useState(""),[D,A]=ee.useState(null),[E,F]=ee.useState(!1),I=ee.useRef(null),z=ee.useRef(null),H=ee.useRef(null),k=async()=>{try{const P=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1});I.current&&(I.current.srcObject=P,z.current=P)}catch(P){console.error("Camera access error:",P),Ne.error("Unable to access camera. Please check permissions.")}},W=()=>{z.current&&(z.current.getTracks().forEach(P=>P.stop()),z.current=null)},S=()=>{if(I.current){const P=document.createElement("canvas");P.width=I.current.videoWidth,P.height=I.current.videoHeight,P.getContext("2d").drawImage(I.current,0,0);const Q=P.toDataURL("image/jpeg");d(Q),c("processing"),W(),j(Q)}},G=P=>{const q=P.target.files[0];if(q){const Q=new FileReader;Q.onload=se=>{const be=se.target.result;d(be),c("processing"),j(be)},Q.readAsDataURL(q)}},j=async P=>{b(!0),A(null);try{if(s==="homework"){_("Analyzing assignment...");const q=await $d.processHomeworkAssignment(P);f(q)}else if(s==="notes"){_("Reading handwriting...");const q=await $d.processHandwrittenNotes(P);v(q)}else if(s==="flashcards"){_("Generating flashcards...");const q=await $d.processTextbookToFlashcards(P);x(q)}c("result")}catch(q){console.error("Processing error:",q),A(q.message||"Failed to process image. Please try again.")}finally{b(!1),_("")}},M=async()=>{if(h){F(!0),A(null);try{const{error:P}=await Ii.createAssignment({title:h.title,subject:h.subject,dueDate:h.dueDate,priority:h.priority||"medium",timeEstimate:h.estimatedTime||h.timeEstimate,description:h.description,aiCaptured:!0,source:"scanner"});if(P)throw P;e&&e(h),n()}catch(P){console.error("Failed to save assignment:",P),A("Failed to save assignment. Please try again.")}finally{F(!1)}}},R=async()=>{if(g){F(!0),A(null);try{const P=typeof g.formattedContent=="string"&&g.formattedContent.includes("{")?g.rawText:g.formattedContent||g.rawText;await i({title:g.customTitle||g.title,content:P,rawText:g.rawText,sourceImage:l,subject:g.subject,tags:g.tags})?n():A("Failed to save note. Please try again.")}catch(P){A(P.message||"Failed to save note. Please try again.")}finally{F(!1)}}},N=async()=>{if(y){F(!0),A(null);try{await r({title:y.title,description:"Generated from scanned image",subject:y.subject,sourceImage:l},y.flashcards)?n():A("Failed to save flashcards. Please try again.")}catch(P){A(P.message||"Failed to save flashcards. Please try again.")}finally{F(!1)}}},B=()=>{d(null),f(null),v(null),x(null),A(null),c("camera"),k()};return ee.useEffect(()=>(o==="camera"&&k(),()=>W()),[o]),p.jsx("div",{className:"fixed inset-0 z-50 bg-surface-base flex items-center justify-center",children:p.jsxs("div",{className:"w-full h-full max-w-4xl mx-auto relative",children:[p.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 p-4 bg-gradient-to-b from-surface-base to-transparent",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("button",{onClick:n,className:"w-10 h-10 rounded-lg bg-surface-elevated border border-border flex items-center justify-center text-text-primary hover:bg-surface-overlay transition-colors",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),p.jsxs("h2",{className:"text-text-primary font-bold text-lg",children:[s==="homework"&&"Scan Homework",s==="notes"&&"Scan Notes",s==="flashcards"&&"Scan Textbook"]}),p.jsx("div",{className:"w-10"})]})}),o==="camera"&&p.jsxs("div",{className:"relative w-full h-full",children:[p.jsx("video",{ref:I,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),p.jsx("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 z-20",children:p.jsx("div",{className:"flex gap-2 bg-surface-base/90 backdrop-blur-sm p-1.5 rounded-lg border border-border",children:["homework","notes","flashcards"].map(P=>p.jsx("button",{onClick:()=>a(P),className:`py-2 px-4 rounded-md text-sm font-medium transition-colors ${s===P?"bg-primary text-white":"text-text-secondary hover:text-text-primary"}`,children:P.charAt(0).toUpperCase()+P.slice(1)},P))})}),p.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:p.jsx("div",{className:"w-[85%] h-[70%] border-2 border-primary/50 rounded-xl"})}),p.jsxs("div",{className:"absolute bottom-0 left-0 right-0 pb-8 bg-gradient-to-t from-surface-base to-transparent",children:[p.jsxs("div",{className:"flex items-center justify-center gap-6",children:[p.jsx("button",{onClick:()=>{var P;return(P=H.current)==null?void 0:P.click()},className:"w-14 h-14 rounded-lg bg-surface-elevated border border-border flex items-center justify-center text-text-primary hover:bg-surface-overlay transition-colors",children:p.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),p.jsx("button",{onClick:S,className:"w-20 h-20 rounded-full bg-primary flex items-center justify-center hover:bg-primary-hover transition-colors",children:p.jsx("div",{className:"w-16 h-16 rounded-full bg-white flex items-center justify-center",children:p.jsxs("svg",{className:"w-8 h-8 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),p.jsx("div",{className:"w-14 h-14"})]}),p.jsxs("p",{className:"text-text-muted text-sm text-center mt-4",children:[s==="homework"&&"Align your homework within the frame",s==="notes"&&"Capture your handwritten notes",s==="flashcards"&&"Point at the textbook page"]})]}),p.jsx("input",{ref:H,type:"file",accept:"image/*",onChange:G,className:"hidden"})]}),(o==="processing"||o==="result")&&p.jsxs("div",{className:"w-full h-full flex flex-col md:flex-row gap-6 p-6 pt-20",children:[p.jsx("div",{className:"flex-shrink-0 md:w-1/2",children:p.jsx("img",{src:l,alt:"Captured",className:"w-full h-64 md:h-full max-h-[500px] object-cover rounded-xl border border-border"})}),m?p.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[p.jsx("div",{className:"w-16 h-16 mb-4",children:p.jsx("div",{className:"w-full h-full rounded-full border-4 border-primary/30 border-t-primary animate-spin"})}),p.jsx("h3",{className:"text-text-primary font-bold text-xl mb-2",children:"Processing..."}),p.jsx("p",{className:"text-text-muted text-sm text-center",children:w})]}):D?p.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[p.jsx("div",{className:"w-16 h-16 rounded-full bg-error/20 flex items-center justify-center mb-4",children:p.jsx("svg",{className:"w-8 h-8 text-error",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),p.jsx("h3",{className:"text-text-primary font-bold text-xl mb-2",children:"Processing Failed"}),p.jsx("p",{className:"text-text-muted text-sm text-center mb-6 max-w-sm",children:D}),p.jsx("button",{onClick:B,className:"px-6 py-3 bg-surface-elevated border border-border text-text-primary font-medium rounded-lg hover:bg-surface-overlay transition-colors",children:"Try Again"})]}):p.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4",children:[h&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"flex justify-center",children:p.jsxs("span",{className:"px-3 py-1 rounded-full bg-success/20 text-success text-sm font-medium",children:[Math.round(h.confidence*100),"% Confidence"]})}),p.jsxs("div",{className:"bg-surface-elevated rounded-xl p-4 border border-border",children:[p.jsx("h3",{className:"text-text-primary font-bold text-lg mb-2",children:h.title}),p.jsxs("div",{className:"flex items-center gap-3 text-sm text-text-muted mb-3",children:[p.jsx("span",{children:h.subject}),p.jsx("span",{children:""}),p.jsxs("span",{children:["Due ",new Date(h.dueDate).toLocaleDateString()]})]}),p.jsx("p",{className:"text-text-secondary text-sm mb-3",children:h.description}),p.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[p.jsx("span",{className:"text-text-muted",children:h.estimatedTime}),p.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${h.priority==="high"?"bg-error/20 text-error":h.priority==="medium"?"bg-warning/20 text-warning":"bg-success/20 text-success"}`,children:h.priority})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("button",{onClick:M,disabled:E,className:"w-full py-3 bg-primary text-white font-medium rounded-lg hover:bg-primary-hover transition-colors disabled:opacity-50",children:E?"Saving...":"Add to Assignments"}),p.jsx("button",{onClick:B,disabled:E,className:"w-full py-3 bg-surface-elevated border border-border text-text-primary font-medium rounded-lg hover:bg-surface-overlay transition-colors disabled:opacity-50",children:"Retake Photo"})]})]}),g&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"flex justify-center",children:p.jsxs("span",{className:"px-3 py-1 rounded-full bg-success/20 text-success text-sm font-medium",children:[Math.round(g.confidence*100),"% Confidence"]})}),p.jsxs("div",{className:"bg-surface-elevated rounded-xl p-4 border border-border",children:[p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{className:"block text-text-muted text-sm mb-1",children:"Note Title"}),p.jsx("input",{type:"text",defaultValue:g.title,onChange:P=>{g.customTitle=P.target.value},placeholder:"Enter a name...",className:"w-full px-3 py-2 bg-surface-base border border-border rounded-lg text-text-primary placeholder:text-text-muted focus:outline-none focus:border-primary"})]}),p.jsx("div",{className:"flex items-center gap-2 text-sm text-text-muted mb-3",children:p.jsx("span",{children:g.subject})}),p.jsx("div",{className:"bg-surface-base rounded-lg p-3 max-h-48 overflow-y-auto",children:p.jsx("p",{className:"text-text-secondary text-sm whitespace-pre-wrap",children:typeof g.formattedContent=="string"&&g.formattedContent.includes("{")?g.rawText:g.formattedContent||g.rawText})}),((L=g.tags)==null?void 0:L.length)>0&&p.jsx("div",{className:"flex flex-wrap gap-1 mt-3",children:g.tags.map((P,q)=>p.jsx("span",{className:"px-2 py-0.5 rounded bg-accent/20 text-accent text-xs",children:P},q))})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("button",{onClick:R,disabled:E,className:"w-full py-3 bg-primary text-white font-medium rounded-lg hover:bg-primary-hover transition-colors disabled:opacity-50",children:E?"Saving...":"Save to Notes"}),p.jsx("button",{onClick:B,disabled:E,className:"w-full py-3 bg-surface-elevated border border-border text-text-primary font-medium rounded-lg hover:bg-surface-overlay transition-colors disabled:opacity-50",children:"Retake Photo"})]})]}),y&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"bg-primary rounded-xl p-4",children:[p.jsx("h3",{className:"text-white font-bold text-lg",children:y.title}),p.jsxs("div",{className:"flex items-center gap-2 text-sm text-white/80 mt-1",children:[p.jsx("span",{children:y.subject}),p.jsx("span",{children:""}),p.jsxs("span",{children:[y.flashcards.length," cards"]})]})]}),p.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:y.flashcards.map((P,q)=>p.jsx("div",{className:"bg-surface-elevated rounded-lg p-3 border border-border",children:p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx("span",{className:"w-6 h-6 rounded bg-accent/20 text-accent text-xs flex items-center justify-center font-bold flex-shrink-0",children:q+1}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"text-text-primary text-sm font-medium mb-1",children:P.front}),p.jsx("p",{className:"text-text-muted text-sm",children:P.back})]})]})},q))}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("button",{onClick:N,disabled:E,className:"w-full py-3 bg-primary text-white font-medium rounded-lg hover:bg-primary-hover transition-colors disabled:opacity-50",children:E?"Saving...":`Save Deck (${y.flashcards.length} cards)`}),p.jsx("button",{onClick:B,disabled:E,className:"w-full py-3 bg-surface-elevated border border-border text-text-primary font-medium rounded-lg hover:bg-surface-overlay transition-colors disabled:opacity-50",children:"Retake Photo"})]})]})]})]})]})})},JW=()=>{var Q,se,be,ye;const{addNote:n,addDeckWithCards:e}=Sg(),[t,i]=ee.useState("homework"),[r,s]=ee.useState(null),[a,o]=ee.useState(null),[c,l]=ee.useState(null),[d,h]=ee.useState(null),[f,g]=ee.useState(!1),[v,y]=ee.useState(""),[x,m]=ee.useState(null),[b,w]=ee.useState(!1),[_,D]=ee.useState(!1),[A,E]=ee.useState(null),F=ee.useRef(null),I=ee.useRef(null),z=ee.useRef(null),H=ee.useRef(null);ee.useEffect(()=>()=>{H.current&&H.current.getTracks().forEach(fe=>fe.stop())},[]);const k=async()=>{E(null);try{const fe=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}}});H.current=fe,I.current&&(I.current.srcObject=fe),D(!0)}catch(fe){console.error("Camera error:",fe),E("Could not access camera. Please check permissions.")}},W=()=>{H.current&&(H.current.getTracks().forEach(fe=>fe.stop()),H.current=null),D(!1)},S=()=>{if(!I.current||!z.current)return;const fe=I.current,xe=z.current;xe.width=fe.videoWidth,xe.height=fe.videoHeight,xe.getContext("2d").drawImage(fe,0,0);const le=xe.toDataURL("image/jpeg",.9);W(),s(le),j(le)},G=fe=>{const xe=fe.target.files[0];if(xe){const ce=new FileReader;ce.onload=le=>{const Y=le.target.result;s(Y),j(Y)},ce.readAsDataURL(xe)}},j=async fe=>{g(!0),m(null),o(null),l(null),h(null);try{if(t==="homework"){y("Analyzing assignment...");const xe=await $d.processHomeworkAssignment(fe);o(xe)}else if(t==="notes"){y("Reading handwriting...");const xe=await $d.processHandwrittenNotes(fe);l(xe)}else if(t==="flashcards"){y("Generating flashcards...");const xe=await $d.processTextbookToFlashcards(fe);h(xe)}}catch(xe){console.error("Processing error:",xe),m(xe.message||"Failed to process image. Please try again.")}finally{g(!1),y("")}},M=async()=>{if(a){w(!0);try{await Ii.createAssignment({title:a.title||"Untitled Assignment",subject:a.subject||"General",dueDate:a.dueDate||null,priority:a.priority||"medium",timeEstimate:a.estimatedTime||null,source:"scanner"}),Ne.success("Assignment saved!"),B()}catch{Ne.error("Failed to save assignment")}finally{w(!1)}}},R=async()=>{if(c){w(!0);try{await n({title:c.title||"Scanned Notes",content:c.content||c.text||"",subject:c.subject||"General"}),Ne.success("Notes saved!"),B()}catch{Ne.error("Failed to save notes")}finally{w(!1)}}},N=async()=>{var fe;if((fe=d==null?void 0:d.cards)!=null&&fe.length){w(!0);try{await e({name:d.deckName||"Scanned Flashcards",description:d.description||"",subject:d.subject||"General"},d.cards),Ne.success(`Created deck with ${d.cards.length} cards!`),B()}catch{Ne.error("Failed to save flashcards")}finally{w(!1)}}},B=()=>{W(),s(null),o(null),l(null),h(null),m(null),E(null),F.current&&(F.current.value="")},L=()=>{l(null),s(null)},P=()=>{if(!c)return;const fe=c.title||"Scanned Notes",xe=c.content||c.text||"",ce=c.subject||"General",le=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),Y=`# ${fe}

**Subject:** ${ce}  
**Date:** ${le}

---

${xe}`,ae=new Blob([Y],{type:"text/markdown"}),C=URL.createObjectURL(ae),ie=document.createElement("a");ie.href=C,ie.download=`${fe.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.md`,document.body.appendChild(ie),ie.click(),document.body.removeChild(ie),URL.revokeObjectURL(C),Ne.success("Notes downloaded!")},q=[{id:"homework",label:"Homework",icon:"",description:"Scan assignments to track"},{id:"notes",label:"Notes",icon:"",description:"Digitize handwritten notes"},{id:"flashcards",label:"Flashcards",icon:"",description:"Generate study cards"}];return p.jsxs("div",{className:"min-h-screen p-6 md:p-8 lg:p-10 max-w-4xl mx-auto",children:[p.jsxs("header",{className:"mb-8 animate-fade-up",children:[p.jsx("h1",{className:"text-3xl font-semibold text-text-primary tracking-tight",children:"Scan"}),p.jsx("p",{className:"text-text-secondary mt-1",children:"Import homework, notes, or create flashcards"})]}),p.jsx("div",{className:"grid grid-cols-3 gap-3 mb-8 animate-fade-up",children:q.map(fe=>p.jsxs("button",{onClick:()=>{i(fe.id),B()},className:`p-4 rounded-xl border transition-all text-left ${t===fe.id?"bg-primary/10 border-primary/30 text-primary":"bg-surface-elevated border-border text-text-muted hover:border-primary/20"}`,children:[p.jsx("div",{className:"text-2xl mb-2",children:fe.icon}),p.jsx("div",{className:"font-medium text-sm",children:fe.label}),p.jsx("div",{className:"text-xs mt-1 opacity-70",children:fe.description})]},fe.id))}),p.jsx("canvas",{ref:z,className:"hidden"}),_&&!r&&!f&&p.jsxs("div",{className:"animate-fade-up",children:[p.jsxs("div",{className:"relative rounded-2xl overflow-hidden bg-black",children:[p.jsx("video",{ref:I,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full aspect-[4/3] object-cover"}),p.jsxs("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center gap-4",children:[p.jsx("button",{onClick:W,className:"w-12 h-12 rounded-full bg-surface-elevated/90 backdrop-blur text-text-primary flex items-center justify-center hover:bg-surface-overlay transition-colors",children:p.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),p.jsx("button",{onClick:S,className:"w-16 h-16 rounded-full bg-white flex items-center justify-center hover:scale-105 transition-transform shadow-lg",children:p.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-primary"})}),p.jsx("div",{className:"w-12 h-12"})," "]})]}),p.jsx("p",{className:"text-center text-text-muted text-sm mt-3",children:"Position your document and tap to capture"})]}),!r&&!f&&!_&&p.jsxs("div",{className:"animate-fade-up space-y-4",children:[p.jsx("input",{type:"file",ref:F,onChange:G,accept:"image/*",className:"hidden"}),A&&p.jsx("div",{className:"bg-error/10 border border-error/20 rounded-xl p-3 text-center",children:p.jsx("p",{className:"text-error text-sm",children:A})}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsx("button",{onClick:k,className:"p-8 rounded-2xl border-2 border-dashed border-border hover:border-primary/50 bg-surface-elevated hover:bg-surface-overlay transition-all group",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"w-14 h-14 mx-auto mb-3 rounded-2xl bg-primary/10 flex items-center justify-center group-hover:scale-110 transition-transform",children:p.jsxs("svg",{className:"w-7 h-7 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),p.jsx("p",{className:"text-text-primary font-medium mb-1",children:"Take Photo"}),p.jsx("p",{className:"text-text-muted text-xs",children:"Use your camera"})]})}),p.jsx("button",{onClick:()=>{var fe;return(fe=F.current)==null?void 0:fe.click()},className:"p-8 rounded-2xl border-2 border-dashed border-border hover:border-primary/50 bg-surface-elevated hover:bg-surface-overlay transition-all group",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"w-14 h-14 mx-auto mb-3 rounded-2xl bg-primary/10 flex items-center justify-center group-hover:scale-110 transition-transform",children:p.jsx("svg",{className:"w-7 h-7 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),p.jsx("p",{className:"text-text-primary font-medium mb-1",children:"Upload Image"}),p.jsx("p",{className:"text-text-muted text-xs",children:"Browse files"})]})})]})]}),f&&p.jsxs("div",{className:"text-center py-16 animate-fade-up",children:[p.jsx("div",{className:"w-12 h-12 mx-auto mb-4 border-2 border-primary/30 border-t-primary rounded-full animate-spin"}),p.jsx("p",{className:"text-text-primary font-medium",children:v}),p.jsx("p",{className:"text-text-muted text-sm mt-1",children:"This may take a moment..."})]}),x&&p.jsxs("div",{className:"bg-error/10 border border-error/20 rounded-xl p-4 mb-6 animate-fade-up",children:[p.jsx("p",{className:"text-error text-sm",children:x}),p.jsx("button",{onClick:B,className:"mt-2 text-sm text-error/70 hover:text-error underline",children:"Try again"})]}),a&&!f&&p.jsxs("div",{className:"bg-surface-elevated rounded-2xl p-6 border border-border animate-fade-up",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[p.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center",children:p.jsx("span",{className:"text-xl",children:""})}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold text-text-primary",children:"Assignment Detected"}),p.jsx("p",{className:"text-xs text-text-muted",children:"Review and save to your tasks"})]})]}),p.jsxs("div",{className:"space-y-3 mb-6",children:[p.jsxs("div",{className:"p-3 bg-surface-base rounded-lg",children:[p.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Title"}),p.jsx("p",{className:"text-text-primary font-medium",children:a.title||"Untitled"})]}),a.subject&&p.jsxs("div",{className:"p-3 bg-surface-base rounded-lg",children:[p.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Subject"}),p.jsx("p",{className:"text-text-primary",children:a.subject})]}),a.dueDate&&p.jsxs("div",{className:"p-3 bg-surface-base rounded-lg",children:[p.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Due Date"}),p.jsx("p",{className:"text-text-primary",children:a.dueDate})]}),a.description&&p.jsxs("div",{className:"p-3 bg-surface-base rounded-lg",children:[p.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Description"}),p.jsx("p",{className:"text-text-secondary text-sm",children:a.description})]})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:B,className:"flex-1 py-2.5 px-4 rounded-xl bg-surface-base text-text-secondary font-medium hover:bg-surface-overlay transition-colors",children:"Scan Another"}),p.jsx("button",{onClick:M,disabled:b,className:"flex-1 py-2.5 px-4 rounded-xl bg-primary text-white font-medium hover:bg-primary-hover transition-colors disabled:opacity-50",children:b?"Saving...":"Save Assignment"})]})]}),c&&!f&&p.jsxs("div",{className:"animate-fade-up",children:[p.jsxs("div",{className:"bg-surface-elevated rounded-2xl border border-border overflow-hidden shadow-lg shadow-black/5",children:[p.jsxs("div",{className:"relative bg-gradient-to-r from-accent-warm/10 via-accent-warm/5 to-transparent p-6 border-b border-border",children:[p.jsx("button",{onClick:L,className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-surface-base/80 hover:bg-surface-overlay flex items-center justify-center text-text-muted hover:text-text-primary transition-colors",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),p.jsxs("div",{className:"flex items-start gap-4",children:[p.jsx("div",{className:"w-12 h-12 rounded-xl bg-accent-warm/20 flex items-center justify-center flex-shrink-0",children:p.jsx("svg",{className:"w-6 h-6 text-accent-warm",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),p.jsxs("div",{className:"flex-1 min-w-0 pr-8",children:[p.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-1",children:c.title||"Scanned Notes"}),p.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.subject&&p.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-accent-warm/20 text-accent-warm",children:c.subject}),p.jsx("span",{className:"text-xs text-text-muted",children:new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]})]})]}),p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"bg-surface-base rounded-xl p-6 min-h-[200px] max-h-[400px] overflow-y-auto border border-border/50",children:[p.jsx("div",{className:"w-12 h-1 bg-accent-warm/30 rounded-full mb-4"}),p.jsx("div",{className:"prose prose-sm max-w-none",children:p.jsx("p",{className:"text-text-primary whitespace-pre-wrap leading-relaxed text-[15px]",children:c.content||c.text||"No text detected"})})]}),p.jsxs("p",{className:"text-xs text-text-muted mt-3 text-right",children:[(c.content||c.text||"").split(/\s+/).filter(Boolean).length," words"]})]}),p.jsx("div",{className:"px-6 pb-6",children:p.jsxs("div",{className:"flex gap-3",children:[p.jsxs("button",{onClick:P,className:"flex items-center justify-center gap-2 py-2.5 px-4 rounded-xl bg-surface-base hover:bg-surface-overlay text-text-secondary font-medium transition-colors",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download"]}),p.jsx("button",{onClick:B,className:"flex-1 py-2.5 px-4 rounded-xl bg-surface-base hover:bg-surface-overlay text-text-secondary font-medium transition-colors",children:"Scan Another"}),p.jsx("button",{onClick:R,disabled:b,className:"flex-1 py-2.5 px-4 rounded-xl bg-accent-warm text-white font-medium hover:opacity-90 transition-colors disabled:opacity-50",children:b?"Saving...":"Save to Library"})]})})]}),r&&p.jsxs("div",{className:"mt-4 flex items-center gap-3 p-3 bg-surface-elevated rounded-xl border border-border",children:[p.jsx("img",{src:r,alt:"Source",className:"w-16 h-16 rounded-lg object-cover border border-border"}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"text-sm font-medium text-text-primary",children:"Source Image"}),p.jsx("p",{className:"text-xs text-text-muted",children:"Original scan used for extraction"})]})]})]}),d&&!f&&p.jsxs("div",{className:"bg-surface-elevated rounded-2xl p-6 border border-border animate-fade-up",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[p.jsx("div",{className:"w-10 h-10 rounded-xl bg-accent-cool/10 flex items-center justify-center",children:p.jsx("span",{className:"text-xl",children:""})}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold text-text-primary",children:"Flashcards Generated"}),p.jsxs("p",{className:"text-xs text-text-muted",children:[((Q=d.cards)==null?void 0:Q.length)||0," cards created"]})]})]}),p.jsxs("div",{className:"space-y-2 mb-6 max-h-64 overflow-y-auto",children:[(se=d.cards)==null?void 0:se.slice(0,5).map((fe,xe)=>p.jsxs("div",{className:"p-3 bg-surface-base rounded-lg",children:[p.jsxs("p",{className:"text-xs text-text-muted mb-1",children:["Card ",xe+1]}),p.jsx("p",{className:"text-text-primary text-sm font-medium",children:fe.front}),p.jsx("p",{className:"text-text-secondary text-sm mt-1",children:fe.back})]},xe)),((be=d.cards)==null?void 0:be.length)>5&&p.jsxs("p",{className:"text-center text-text-muted text-sm py-2",children:["+",d.cards.length-5," more cards"]})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:B,className:"flex-1 py-2.5 px-4 rounded-xl bg-surface-base text-text-secondary font-medium hover:bg-surface-overlay transition-colors",children:"Scan Another"}),p.jsx("button",{onClick:N,disabled:b||!((ye=d.cards)!=null&&ye.length),className:"flex-1 py-2.5 px-4 rounded-xl bg-accent-cool text-white font-medium hover:opacity-90 transition-colors disabled:opacity-50",children:b?"Saving...":"Save Deck"})]})]}),r&&!f&&!c&&p.jsxs("div",{className:"mt-6 animate-fade-up",children:[p.jsx("p",{className:"text-xs text-text-muted mb-2",children:"Scanned Image"}),p.jsx("img",{src:r,alt:"Scanned",className:"w-full max-w-md rounded-xl border border-border"})]})]})},ZW=({card:n,className:e="",showDifficulty:t=!1})=>{const[i,r]=ee.useState(!1);ee.useEffect(()=>{r(!1)},[n.id]);const s=()=>{r(!i)};ee.useEffect(()=>{const c=l=>{(l.code==="Space"||l.code==="Enter")&&(l.preventDefault(),r(d=>!d))};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[]);const o=(c=>{switch(c==null?void 0:c.toLowerCase()){case"easy":return{bg:"bg-success/15",text:"text-success",label:"Easy"};case"medium":return{bg:"bg-warning/15",text:"text-warning",label:"Medium"};case"hard":return{bg:"bg-error/15",text:"text-error",label:"Hard"};default:return{bg:"bg-accent-cool/15",text:"text-accent-cool",label:"Standard"}}})(n.difficulty);return p.jsx("div",{className:`group ${e}`,style:{perspective:"2000px"},children:p.jsxs("div",{onClick:s,tabIndex:0,role:"button","aria-label":i?"Show question":"Show answer",className:"relative w-full aspect-[16/10] cursor-pointer focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 rounded-3xl",style:{transformStyle:"preserve-3d",transform:i?"rotateY(180deg)":"rotateY(0deg)",transition:"transform 0.6s cubic-bezier(0.4, 0, 0.2, 1)"},children:[p.jsxs("div",{className:"absolute inset-0 rounded-3xl overflow-hidden",style:{backfaceVisibility:"hidden"},children:[p.jsx("div",{className:"absolute inset-0 bg-surface-elevated border border-border"}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-accent-cool/5"}),p.jsxs("div",{className:"relative h-full flex flex-col p-8 lg:p-12",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsx("span",{className:"text-xs font-semibold uppercase tracking-widest text-text-muted",children:"Question"}),t&&n.difficulty&&p.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${o.bg} ${o.text}`,children:o.label})]}),p.jsx("div",{className:"flex-1 flex items-center justify-center overflow-y-auto",children:p.jsx("p",{className:"text-2xl lg:text-3xl xl:text-4xl font-medium text-text-primary text-center leading-relaxed max-w-3xl",children:n.front})}),n.hint&&p.jsx("div",{className:"mt-6 px-4 py-3 rounded-xl bg-warning/10 border border-warning/20",children:p.jsxs("div",{className:"flex items-center gap-2 text-warning text-sm",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),p.jsx("span",{children:"Hint available"})]})}),p.jsx("div",{className:"mt-6 flex items-center justify-center gap-3 text-text-muted",children:p.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-surface-overlay/50 group-hover:bg-surface-overlay transition-colors",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),p.jsx("span",{className:"text-sm font-medium",children:"Click or press Space"})]})})]})]}),p.jsxs("div",{className:"absolute inset-0 rounded-3xl overflow-hidden",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary via-primary to-primary-hover"}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/10 via-transparent to-white/5"}),p.jsxs("div",{className:"relative h-full flex flex-col p-8 lg:p-12",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsx("span",{className:"text-xs font-semibold uppercase tracking-widest text-white/70",children:"Answer"}),t&&n.difficulty&&p.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-white/20 text-white",children:o.label})]}),p.jsx("div",{className:"flex-1 flex items-center justify-center overflow-y-auto",children:p.jsx("p",{className:"text-2xl lg:text-3xl xl:text-4xl font-medium text-white text-center leading-relaxed max-w-3xl",children:n.back})}),n.hint&&p.jsx("div",{className:"mt-6 px-4 py-3 rounded-xl bg-white/15 backdrop-blur-sm border border-white/20",children:p.jsxs("div",{className:"flex items-center gap-2 text-white/90 text-sm",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),p.jsx("span",{children:n.hint})]})}),p.jsx("div",{className:"mt-6 flex items-center justify-center gap-3 text-white/60",children:p.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-white/10 group-hover:bg-white/15 transition-colors",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),p.jsx("span",{className:"text-sm font-medium",children:"Click or press Space"})]})})]})]})]})})},eq=({deckId:n,cards:e,onComplete:t,onExit:i})=>{const{recordCardReview:r}=Sg(),[s,a]=ee.useState(e),[o,c]=ee.useState(0),[l,d]=ee.useState({needsWork:0,mastered:0}),[h,f]=ee.useState([]),[g,v]=ee.useState(!1),[y,x]=ee.useState(0),[m,b]=ee.useState(0),[w,_]=ee.useState([]),[D,A]=ee.useState(!1),[E,F]=ee.useState(null),[I]=ee.useState(Date.now()),[z,H]=ee.useState(Date.now()),[k,W]=ee.useState([]),S=s[o],G=ee.useCallback(L=>{if(D)return;const P=Date.now()-z;if(W(q=>[...q,P]),H(Date.now()),r(S.id,L),L<=2&&f(q=>[...q,S]),_(q=>[...q,L>=4?"mastered":"needsWork"]),L>=4){const q=y+1;x(q),q>m&&b(q)}else x(0);d(q=>({needsWork:q.needsWork+(L<=2?1:0),mastered:q.mastered+(L>=4?1:0)})),A(!0),F(L>=4?"right":"left"),setTimeout(()=>{o<s.length-1?c(o+1):v(!0),F(null),A(!1)},300)},[D,z,S,o,s.length,y,m,r]);ee.useEffect(()=>{const L=P=>{if(!(g||D))switch(P.code){case"ArrowLeft":case"KeyA":case"Digit1":P.preventDefault(),G(2);break;case"ArrowRight":case"KeyD":case"Digit2":P.preventDefault(),G(5);break;case"Escape":P.preventDefault(),i();break}};return window.addEventListener("keydown",L),()=>window.removeEventListener("keydown",L)},[G,g,D,i]);const j=()=>{h.length>0&&(a([...h]),c(0),d({needsWork:0,mastered:0}),f([]),v(!1),x(0),H(Date.now()),_([]))},M=s.length>0?Math.round(l.mastered/s.length*100):0,R=Date.now()-I,N=Math.floor(R/6e4),B=Math.floor(R%6e4/1e3);return k.length>0&&Math.round(k.reduce((L,P)=>L+P,0)/k.length/1e3),!S||g?p.jsx("div",{className:"fixed inset-0 z-50 bg-surface-base flex items-center justify-center p-6 animate-fade-in",children:p.jsx("div",{className:"w-full max-w-2xl",children:p.jsxs("div",{className:"bg-surface-elevated rounded-3xl p-8 lg:p-12 border border-border animate-scale-in",children:[p.jsxs("div",{className:"text-center mb-10",children:[p.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-primary/10 mb-6",children:p.jsx("svg",{className:"w-10 h-10 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),p.jsx("h2",{className:"text-3xl font-semibold text-text-primary mb-2",children:"Session Complete"}),p.jsxs("p",{className:"text-text-secondary",children:[s.length," cards reviewed"]})]}),p.jsx("div",{className:"flex justify-center mb-10",children:p.jsxs("div",{className:"relative w-40 h-40",children:[p.jsxs("svg",{className:"w-40 h-40 transform -rotate-90",viewBox:"0 0 160 160",children:[p.jsx("circle",{cx:"80",cy:"80",r:"70",fill:"none",stroke:"currentColor",strokeWidth:"8",className:"text-surface-overlay"}),p.jsx("circle",{cx:"80",cy:"80",r:"70",fill:"none",stroke:"currentColor",strokeWidth:"8",strokeDasharray:`${M/100*440} 440`,strokeLinecap:"round",className:M>=80?"text-success":M>=60?"text-warning":"text-error",style:{transition:"stroke-dasharray 1s ease-out"}})]}),p.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[p.jsxs("span",{className:`text-4xl font-bold ${M>=80?"text-success":M>=60?"text-warning":"text-error"}`,children:[M,"%"]}),p.jsx("span",{className:"text-sm text-text-muted",children:"Accuracy"})]})]})}),p.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-10",children:[p.jsxs("div",{className:"bg-surface-overlay rounded-2xl p-4 text-center",children:[p.jsx("div",{className:"text-2xl font-bold text-success",children:l.mastered}),p.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Mastered"})]}),p.jsxs("div",{className:"bg-surface-overlay rounded-2xl p-4 text-center",children:[p.jsx("div",{className:"text-2xl font-bold text-warning",children:l.needsWork}),p.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Needs Work"})]}),p.jsxs("div",{className:"bg-surface-overlay rounded-2xl p-4 text-center",children:[p.jsxs("div",{className:"text-2xl font-bold text-accent-cool",children:[N,":",B.toString().padStart(2,"0")]}),p.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Duration"})]}),p.jsxs("div",{className:"bg-surface-overlay rounded-2xl p-4 text-center",children:[p.jsx("div",{className:"text-2xl font-bold text-accent-warm",children:m}),p.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Best Streak"})]})]}),p.jsxs("div",{className:"space-y-3",children:[h.length>0&&p.jsxs("button",{onClick:j,className:"w-full py-4 bg-warning/10 hover:bg-warning/20 text-warning font-medium rounded-xl transition-colors flex items-center justify-center gap-2",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Review ",h.length," Missed Card",h.length!==1?"s":""]}),p.jsx("button",{onClick:t||i,className:"w-full py-4 bg-primary hover:bg-primary-hover text-text-inverse font-medium rounded-xl transition-colors",children:h.length>0?"Finish Later":"Done"})]})]})})}):p.jsxs("div",{className:"fixed inset-0 z-50 bg-surface-base flex flex-col",children:[p.jsx("header",{className:"flex-shrink-0 border-b border-border bg-surface-base/95 backdrop-blur-sm",children:p.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-4",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("button",{onClick:i,className:"p-2 -ml-2 rounded-xl hover:bg-surface-overlay text-text-muted hover:text-text-primary transition-colors",children:p.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})}),y>0&&p.jsx("div",{className:"px-4 py-2 rounded-full bg-accent-warm/10 animate-scale-in",children:p.jsxs("span",{className:"text-accent-warm font-semibold flex items-center gap-2",children:[p.jsx("span",{children:""}),p.jsx("span",{children:y})]})}),p.jsxs("div",{className:"text-sm font-medium text-text-secondary",children:[o+1," / ",s.length]})]}),p.jsx("div",{className:"flex gap-1",children:s.map((L,P)=>{let q="bg-surface-overlay";return P<o?q=w[P]==="mastered"?"bg-success":"bg-warning":P===o&&(q="bg-primary animate-pulse-soft"),p.jsx("div",{className:`h-1.5 flex-1 rounded-full transition-all duration-300 ${q}`},P)})})]})}),p.jsx("main",{className:"flex-1 flex items-center justify-center p-6 lg:p-12 overflow-hidden",children:p.jsx("div",{className:"w-full max-w-4xl transition-all duration-300",style:{transform:E?`translateX(${E==="right"?"120%":"-120%"}) rotate(${E==="right"?"10deg":"-10deg"})`:"translateX(0) rotate(0)",opacity:E?0:1},children:p.jsx(ZW,{card:S,showDifficulty:!0})})}),p.jsx("footer",{className:"flex-shrink-0 border-t border-border bg-surface-base/95 backdrop-blur-sm",children:p.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-6",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("button",{onClick:()=>G(2),disabled:D,className:"flex-1 group relative py-4 px-6 bg-surface-elevated hover:bg-warning/10 border border-border hover:border-warning/30 rounded-2xl transition-all disabled:opacity-50",children:p.jsxs("div",{className:"flex items-center justify-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 rounded-xl bg-warning/10 group-hover:bg-warning/20 flex items-center justify-center transition-colors",children:p.jsx("svg",{className:"w-5 h-5 text-warning",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),p.jsxs("div",{className:"text-left",children:[p.jsx("div",{className:"font-medium text-text-primary",children:"Needs Work"}),p.jsx("div",{className:"text-xs text-text-muted",children:" or A"})]})]})}),p.jsx("button",{onClick:()=>G(5),disabled:D,className:"flex-1 group relative py-4 px-6 bg-surface-elevated hover:bg-success/10 border border-border hover:border-success/30 rounded-2xl transition-all disabled:opacity-50",children:p.jsxs("div",{className:"flex items-center justify-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 rounded-xl bg-success/10 group-hover:bg-success/20 flex items-center justify-center transition-colors",children:p.jsx("svg",{className:"w-5 h-5 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),p.jsxs("div",{className:"text-left",children:[p.jsx("div",{className:"font-medium text-text-primary",children:"Mastered"}),p.jsx("div",{className:"text-xs text-text-muted",children:" or D"})]})]})})]}),p.jsx("div",{className:"mt-4 text-center",children:p.jsxs("p",{className:"text-xs text-text-muted",children:["Press ",p.jsx("kbd",{className:"px-1.5 py-0.5 bg-surface-overlay rounded text-text-secondary",children:"Space"})," to flip the card"]})})]})})]})},tq=({quiz:n,onComplete:e,onExit:t})=>{var I;const{recordQuizAttempt:i}=Sg(),[r,s]=ee.useState(0),[a,o]=ee.useState({}),[c,l]=ee.useState(!1),[d]=ee.useState(Date.now()),[h,f]=ee.useState(null),g=n.questions[r],v=(r+1)/n.questions.length*100,y=z=>z?z.toLowerCase().replace(/[.,!?;:'"()\[\]{}\-_]/g," ").replace(/\s+/g," ").trim():"",x=z=>{const H=new Set(["a","an","the","is","are","was","were","be","been","being","have","has","had","do","does","did","will","would","could","should","may","might","must","shall","can","need","dare","ought","used","to","of","in","for","on","with","at","by","from","as","into","through","during","before","after","above","below","between","under","again","further","then","once","here","there","when","where","why","how","all","each","few","more","most","other","some","such","no","nor","not","only","own","same","so","than","too","very","just","and","but","if","or","because","until","while","although","though","after","before","it","its","this","that","these","those","i","you","he","she","we","they","what","which","who","whom","whose","also"]);return y(z).split(" ").filter(W=>W.length>1&&!H.has(W))},m=(z,H)=>{const k=y(z),W=y(H);if(k===W)return 1;if(k.includes(W)||W.includes(k))return .9;const S=x(z),G=x(H);if(S.length===0||G.length===0)return k===W?1:0;let j=0;for(const L of S)for(const P of G)if(L===P||L.length>3&&P.length>3&&(L.includes(P)||P.includes(L))){j++;break}const M=Math.max(S.length,G.length),R=Math.min(S.length,G.length),N=j/M,B=j/R;return Math.min(1,N*.6+B*.4)},b=(z,H)=>{if(!z||!z.trim())return{isCorrect:!1,similarity:0};const k=m(z,H);return{isCorrect:k>=.6,similarity:k}},w=z=>{o(H=>({...H,[g.id]:z}))},_=()=>{r<n.questions.length-1?s(r+1):A()},D=()=>{r>0&&s(r-1)},A=async()=>{const z=Math.floor((Date.now()-d)/1e3);let H=0;const k=n.questions.map(S=>{const G=a[S.id];let j=!1,M=null;if(S.questionType==="multiple_choice"||S.type==="multiple_choice")j=G===S.correctAnswer;else if(S.questionType==="true_false"||S.type==="true_false")j=G===S.correctAnswer;else if(S.questionType==="short_answer"||S.type==="short_answer"){const R=b(G,S.correctAnswer);j=R.isCorrect,M=R.similarity}return j&&H++,{questionId:S.id,question:S.questionText||S.question,questionType:S.questionType||S.type,userAnswer:G,correctAnswer:S.correctAnswer,isCorrect:j,similarity:M,explanation:S.explanation}}),W={score:H,totalQuestions:n.questions.length,percentage:H/n.questions.length*100,timeSpentSeconds:z,detailedAnswers:k};f(W),l(!0);try{await i(n.id,{score:H,totalQuestions:n.questions.length,answers:k,timeSpentSeconds:z})}catch(S){console.error("Failed to record attempt:",S)}},E=z=>z.questionType||z.type,F=z=>z.questionText||z.question;return c&&h?p.jsx("div",{className:"min-h-screen bg-surface-base p-6 lg:p-8",children:p.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[p.jsxs("div",{className:"text-center py-8",children:[p.jsx("div",{className:`w-32 h-32 mx-auto rounded-full flex items-center justify-center mb-6 ${h.percentage>=80?"bg-success/20":h.percentage>=60?"bg-warning/20":"bg-error/20"}`,children:p.jsx("div",{className:"text-center",children:p.jsxs("div",{className:`text-5xl font-bold ${h.percentage>=80?"text-success":h.percentage>=60?"text-warning":"text-error"}`,children:[Math.round(h.percentage),"%"]})})}),p.jsx("h2",{className:"text-3xl font-bold text-text-primary mb-3",children:"Quiz Complete!"}),p.jsxs("p",{className:"text-text-muted text-lg",children:[h.score," out of ",h.totalQuestions," correct",p.jsx("span",{className:"mx-2",children:""}),Math.floor(h.timeSpentSeconds/60),":",(h.timeSpentSeconds%60).toString().padStart(2,"0")]})]}),p.jsxs("div",{className:"bg-surface-elevated rounded-2xl border border-border overflow-hidden",children:[p.jsx("div",{className:"p-5 border-b border-border",children:p.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Question Breakdown"})}),p.jsx("div",{className:"divide-y divide-border",children:h.detailedAnswers.map((z,H)=>{var k;return p.jsx("div",{className:`p-5 ${z.isCorrect?"bg-success/5":"bg-error/5"}`,children:p.jsxs("div",{className:"flex items-start gap-4",children:[p.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${z.isCorrect?"bg-success/20":"bg-error/20"}`,children:z.isCorrect?p.jsx("svg",{className:"w-5 h-5 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):p.jsx("svg",{className:"w-5 h-5 text-error",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[p.jsxs("p",{className:"font-medium text-text-primary",children:[p.jsxs("span",{className:"text-text-muted",children:["Q",H+1,":"]})," ",z.question]}),p.jsx("span",{className:`px-2.5 py-1 rounded-lg text-xs font-medium flex-shrink-0 ${z.questionType==="short_answer"?"bg-warning/15 text-warning":z.questionType==="true_false"?"bg-accent-cool/15 text-accent-cool":"bg-primary/15 text-primary"}`,children:(k=z.questionType)==null?void 0:k.replace("_"," ")})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:`p-3 rounded-xl ${z.isCorrect?"bg-success/10 border border-success/20":"bg-error/10 border border-error/20"}`,children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsx("span",{className:"text-xs font-medium text-text-muted uppercase tracking-wide",children:"Your Answer"}),z.similarity!==null&&p.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${z.isCorrect?"bg-success/20 text-success":"bg-error/20 text-error"}`,children:[Math.round(z.similarity*100),"% match"]})]}),p.jsx("p",{className:`${z.isCorrect?"text-success":"text-error"}`,children:z.userAnswer||"(No answer provided)"})]}),!z.isCorrect&&p.jsxs("div",{className:"p-3 rounded-xl bg-success/10 border border-success/20",children:[p.jsx("span",{className:"text-xs font-medium text-text-muted uppercase tracking-wide block mb-1",children:"Correct Answer"}),p.jsx("p",{className:"text-success",children:z.correctAnswer})]}),z.explanation&&p.jsxs("div",{className:"p-3 rounded-xl bg-surface-base border border-border mt-3",children:[p.jsx("span",{className:"text-xs font-medium text-text-muted uppercase tracking-wide block mb-1",children:"Explanation"}),p.jsx("p",{className:"text-text-secondary text-sm",children:z.explanation})]})]})]})]})},H)})})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsxs("button",{onClick:()=>{s(0),o({}),l(!1),f(null)},className:"flex-1 py-3.5 px-6 bg-primary hover:bg-primary-hover text-text-inverse font-medium rounded-xl transition-all flex items-center justify-center gap-2",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Retake Quiz"]}),p.jsx("button",{onClick:e||t,className:"flex-1 py-3.5 px-6 bg-surface-elevated border border-border text-text-primary font-medium rounded-xl hover:bg-surface-overlay transition-all",children:"Return to Study Hub"})]})]})}):p.jsx("div",{className:"min-h-screen bg-surface-base p-6 lg:p-8",children:p.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-semibold text-text-primary",children:n.title}),p.jsxs("p",{className:"text-text-muted mt-1",children:["Question ",r+1," of ",n.questions.length]})]}),p.jsx("button",{onClick:t,className:"w-10 h-10 rounded-xl bg-surface-elevated border border-border flex items-center justify-center hover:bg-surface-overlay hover:border-error/50 transition-all group",children:p.jsx("svg",{className:"w-5 h-5 text-text-muted group-hover:text-error transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsx("div",{className:"w-full bg-surface-elevated rounded-full h-2",children:p.jsx("div",{className:"h-full bg-gradient-to-r from-success to-accent-cool rounded-full transition-all duration-300",style:{width:`${v}%`}})}),p.jsxs("div",{className:"bg-surface-elevated rounded-2xl border border-border overflow-hidden",children:[p.jsxs("div",{className:"p-6 border-b border-border",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[p.jsx("span",{className:`px-3 py-1.5 rounded-lg text-xs font-semibold ${g.difficulty==="easy"?"bg-success/15 text-success":g.difficulty==="hard"?"bg-error/15 text-error":"bg-warning/15 text-warning"}`,children:g.difficulty}),p.jsx("span",{className:`px-3 py-1.5 rounded-lg text-xs font-semibold ${E(g)==="short_answer"?"bg-warning/15 text-warning":E(g)==="true_false"?"bg-accent-cool/15 text-accent-cool":"bg-primary/15 text-primary"}`,children:(I=E(g))==null?void 0:I.replace("_"," ")})]}),p.jsx("h3",{className:"text-xl font-medium text-text-primary leading-relaxed",children:F(g)})]}),p.jsxs("div",{className:"p-6",children:[E(g)==="multiple_choice"&&p.jsx("div",{className:"space-y-3",children:g.options.map((z,H)=>p.jsxs("label",{className:`flex items-center gap-4 p-4 rounded-xl border-2 cursor-pointer transition-all ${a[g.id]===H.toString()?"border-primary bg-primary/10":"border-border hover:border-primary/50 hover:bg-surface-overlay"}`,children:[p.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition-all ${a[g.id]===H.toString()?"border-primary bg-primary":"border-border"}`,children:a[g.id]===H.toString()&&p.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),p.jsx("span",{className:"flex-1 text-text-primary",children:z}),p.jsx("span",{className:"text-text-muted text-sm font-medium",children:String.fromCharCode(65+H)})]},H))}),E(g)==="true_false"&&p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("button",{onClick:()=>w("true"),className:`py-8 rounded-xl border-2 font-semibold transition-all flex flex-col items-center gap-3 ${a[g.id]==="true"?"border-success bg-success/15 text-success":"border-border text-text-primary hover:border-success/50 hover:bg-success/5"}`,children:[p.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${a[g.id]==="true"?"bg-success/20":"bg-surface-base"}`,children:p.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),p.jsx("span",{className:"text-lg",children:"True"})]}),p.jsxs("button",{onClick:()=>w("false"),className:`py-8 rounded-xl border-2 font-semibold transition-all flex flex-col items-center gap-3 ${a[g.id]==="false"?"border-error bg-error/15 text-error":"border-border text-text-primary hover:border-error/50 hover:bg-error/5"}`,children:[p.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${a[g.id]==="false"?"bg-error/20":"bg-surface-base"}`,children:p.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),p.jsx("span",{className:"text-lg",children:"False"})]})]}),E(g)==="short_answer"&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"relative",children:[p.jsx("textarea",{value:a[g.id]||"",onChange:z=>w(z.target.value),placeholder:"Type your answer here...",className:"w-full h-40 p-5 bg-surface-base border-2 border-border rounded-xl text-text-primary placeholder-text-muted resize-none focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all text-lg"}),p.jsx("div",{className:"absolute bottom-4 right-4 flex items-center gap-2",children:a[g.id]&&p.jsxs("span",{className:"text-xs text-text-muted",children:[a[g.id].length," characters"]})})]}),p.jsxs("div",{className:"flex items-start gap-3 p-4 bg-primary/5 border border-primary/20 rounded-xl",children:[p.jsx("svg",{className:"w-5 h-5 text-primary flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-medium text-primary",children:"Flexible Grading"}),p.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Your answer will be graded on meaning, not exact wording. Minor spelling or punctuation differences are okay."})]})]})]})]})]}),p.jsxs("div",{className:"flex justify-between items-center bg-surface-elevated rounded-xl border border-border p-4",children:[p.jsxs("button",{onClick:D,disabled:r===0,className:"flex items-center gap-2 px-5 py-2.5 bg-surface-base border border-border text-text-primary font-medium rounded-lg hover:bg-surface-overlay transition-all disabled:opacity-40 disabled:cursor-not-allowed",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Previous"]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("span",{className:"text-sm text-text-muted",children:[Object.keys(a).length," of ",n.questions.length," answered"]}),p.jsx("div",{className:"flex gap-1",children:n.questions.map((z,H)=>p.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${a[n.questions[H].id]?"bg-success":H===r?"bg-primary":"bg-border"}`},H))})]}),p.jsxs("button",{onClick:_,disabled:!a[g.id],className:"flex items-center gap-2 px-5 py-2.5 bg-success hover:bg-success/90 text-white font-medium rounded-lg transition-all disabled:opacity-40 disabled:cursor-not-allowed",children:[r===n.questions.length-1?"Finish Quiz":"Next",p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})})},Bi=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),oE=[.001,0,0,.001,0,0],k_=1.35,Pr={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Rc={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},ay="pdfjs_internal_editor_",Pe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},rt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},nq={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},cE={TRIANGLES:1,LATTICE:2},Qn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},ix={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},bn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Oh={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},I1={ERRORS:0,WARNINGS:1,INFOS:5},oy={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},qg={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},iq={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let P1=I1.WARNINGS;function rq(n){Number.isInteger(n)&&(P1=n)}function sq(){return P1}function z1(n){P1>=I1.INFOS&&console.info(`Info: ${n}`)}function Be(n){P1>=I1.WARNINGS&&console.warn(`Warning: ${n}`)}function Rt(n){throw new Error(n)}function st(n,e){n||Rt(e)}function aq(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function B6(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const r=n.match(/\./g);(r==null?void 0:r.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=dq(n)}catch{}}const i=e?URL.parse(n,e):URL.parse(n);return aq(i)?i:null}function L6(n,e,t=!1){const i=URL.parse(n);return i?(i.hash=e,i.href):t&&B6(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Le(n,e,t,i=!1){return Object.defineProperty(n,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const uh=function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();class MU extends uh{constructor(e,t){super(e,"PasswordException"),this.code=t}}class U_ extends uh{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class lE extends uh{constructor(e){super(e,"InvalidPDFException")}}class A2 extends uh{constructor(e,t,i){super(e,"ResponseException"),this.status=t,this.missing=i}}class oq extends uh{constructor(e){super(e,"FormatError")}}class $l extends uh{constructor(e){super(e,"AbortException")}}function I6(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Rt("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const i=[];for(let r=0;r<e;r+=t){const s=Math.min(r+t,e),a=n.subarray(r,s);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function T0(n){typeof n!="string"&&Rt("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=n.charCodeAt(i)&255;return t}function cq(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function lq(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function uq(){try{return new Function(""),!0}catch{return!1}}class hi{static get isLittleEndian(){return Le(this,"isLittleEndian",lq())}static get isEvalSupported(){return Le(this,"isEvalSupported",uq())}static get isOffscreenCanvasSupported(){return Le(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Le(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Le(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Le(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Le(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return Le(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const N_=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var ec,rx,uE;class Ee{static makeHexColor(e,t,i){return`#${N_[e]}${N_[t]}${N_[i]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,i=0){const r=e[i],s=e[i+1];e[i]=r*t[0]+s*t[2]+t[4],e[i+1]=r*t[1]+s*t[3]+t[5]}static applyTransformToBezier(e,t,i=0){const r=t[0],s=t[1],a=t[2],o=t[3],c=t[4],l=t[5];for(let d=0;d<6;d+=2){const h=e[i+d],f=e[i+d+1];e[i+d]=h*r+f*a+c,e[i+d+1]=h*s+f*o+l}}static applyInverseTransform(e,t){const i=e[0],r=e[1],s=t[0]*t[3]-t[1]*t[2];e[0]=(i*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/s,e[1]=(-i*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/s}static axialAlignedBoundingBox(e,t,i){const r=t[0],s=t[1],a=t[2],o=t[3],c=t[4],l=t[5],d=e[0],h=e[1],f=e[2],g=e[3];let v=r*d+c,y=v,x=r*f+c,m=x,b=o*h+l,w=b,_=o*g+l,D=_;if(s!==0||a!==0){const A=s*d,E=s*f,F=a*h,I=a*g;v+=F,m+=F,x+=I,y+=I,b+=A,D+=A,_+=E,w+=E}i[0]=Math.min(i[0],v,x,y,m),i[1]=Math.min(i[1],b,_,w,D),i[2]=Math.max(i[2],v,x,y,m),i[3]=Math.max(i[3],b,_,w,D)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const i=e[0],r=e[1],s=e[2],a=e[3],o=i**2+r**2,c=i*s+r*a,l=s**2+a**2,d=(o+l)/2,h=Math.sqrt(d**2-(o*l-c**2));t[0]=Math.sqrt(d+h||1),t[1]=Math.sqrt(d-h||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>r)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>a?null:[i,s,r,a]}static pointBoundingBox(e,t,i){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],t),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],t)}static rectBoundingBox(e,t,i,r,s){s[0]=Math.min(s[0],e,i),s[1]=Math.min(s[1],t,r),s[2]=Math.max(s[2],e,i),s[3]=Math.max(s[3],t,r)}static bezierBoundingBox(e,t,i,r,s,a,o,c,l){l[0]=Math.min(l[0],e,o),l[1]=Math.min(l[1],t,c),l[2]=Math.max(l[2],e,o),l[3]=Math.max(l[3],t,c),O(this,ec,uE).call(this,e,i,s,o,t,r,a,c,3*(-e+3*(i-s)+o),6*(e-2*i+s),3*(i-e),l),O(this,ec,uE).call(this,e,i,s,o,t,r,a,c,3*(-t+3*(r-a)+c),6*(t-2*r+a),3*(r-t),l)}}ec=new WeakSet,rx=function(e,t,i,r,s,a,o,c,l,d){if(l<=0||l>=1)return;const h=1-l,f=l*l,g=f*l,v=h*(h*(h*e+3*l*t)+3*f*i)+g*r,y=h*(h*(h*s+3*l*a)+3*f*o)+g*c;d[0]=Math.min(d[0],v),d[1]=Math.min(d[1],y),d[2]=Math.max(d[2],v),d[3]=Math.max(d[3],y)},uE=function(e,t,i,r,s,a,o,c,l,d,h,f){if(Math.abs(l)<1e-12){Math.abs(d)>=1e-12&&O(this,ec,rx).call(this,e,t,i,r,s,a,o,c,-h/d,f);return}const g=d**2-4*h*l;if(g<0)return;const v=Math.sqrt(g),y=2*l;O(this,ec,rx).call(this,e,t,i,r,s,a,o,c,(-d+v)/y,f),O(this,ec,rx).call(this,e,t,i,r,s,a,o,c,(-d-v)/y,f)},U(Ee,ec);function dq(n){return decodeURIComponent(escape(n))}let j_=null,BU=null;function hq(n){return j_||(j_=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,BU=new Map([["","t"]])),n.replaceAll(j_,(e,t,i)=>t?t.normalize("NFKC"):BU.get(i))}function P6(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),I6(n)}const tf="pdfjs_internal_id_";function fq(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[i,r,...s]=t;if(!n(i)&&!Number.isInteger(i)||!e(r))return!1;const a=s.length;let o=!0;switch(r.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;o=!1;break;default:return!1}for(const c of s)if(!(typeof c=="number"||o&&c===null))return!1;return!0}function Li(n,e,t){return Math.min(Math.max(n,e),t)}function z6(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(I6(n))}function pq(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):T0(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class cy{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function r(s){var c;if(!s)return;let a=null;const o=s.name;if(o==="#text")a=s.value;else if(cy.shouldBuildText(o))(c=s==null?void 0:s.attributes)!=null&&c.textContent?a=s.attributes.textContent:s.value&&(a=s.value);else return;if(a!==null&&t.push({str:a}),!!s.children)for(const l of s.children)r(l)}return r(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class W6{static setupStorage(e,t,i,r,s){const a=r.getValue(t,{value:null});switch(i.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),s==="print")break;e.addEventListener("input",o=>{r.setValue(t,{value:o.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(a.value===i.attributes.xfaOn?e.setAttribute("checked",!0):a.value===i.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",o=>{r.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),s==="print")break;e.addEventListener("input",o=>{r.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of i.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const c=o.target.options,l=c.selectedIndex===-1?"":c[c.selectedIndex].value;r.setValue(t,{value:l})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:r,linkService:s}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${r}`);for(const[c,l]of Object.entries(a))if(l!=null)switch(c){case"class":l.length&&e.setAttribute(c,l.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",l);break;case"style":Object.assign(e.style,l);break;case"textContent":e.textContent=l;break;default:(!o||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,l)}o&&s.addLinkAttributes(e,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(e,a.dataId,t,i)}static render(e){var h,f;const t=e.annotationStorage,i=e.linkService,r=e.xfaHtml,s=e.intent||"display",a=document.createElement(r.name);r.attributes&&this.setAttributes({html:a,element:r,intent:s,linkService:i});const o=s!=="richText",c=e.div;if(c.append(a),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=g}o&&c.setAttribute("class","xfaLayer xfaFont");const l=[];if(r.children.length===0){if(r.value){const g=document.createTextNode(r.value);a.append(g),o&&cy.shouldBuildText(r.name)&&l.push(g)}return{textDivs:l}}const d=[[r,-1,a]];for(;d.length>0;){const[g,v,y]=d.at(-1);if(v+1===g.children.length){d.pop();continue}const x=g.children[++d.at(-1)[1]];if(x===null)continue;const{name:m}=x;if(m==="#text"){const w=document.createTextNode(x.value);l.push(w),y.append(w);continue}const b=(h=x==null?void 0:x.attributes)!=null&&h.xmlns?document.createElementNS(x.attributes.xmlns,m):document.createElement(m);if(y.append(b),x.attributes&&this.setAttributes({html:b,element:x,storage:t,intent:s,linkService:i}),((f=x.children)==null?void 0:f.length)>0)d.push([x,-1,b]);else if(x.value){const w=document.createTextNode(x.value);o&&cy.shouldBuildText(m)&&l.push(w),b.append(w)}}for(const g of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:l}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const io="http://www.w3.org/2000/svg",xu=class xu{};ve(xu,"CSS",96),ve(xu,"PDF",72),ve(xu,"PDF_TO_CSS_UNITS",xu.CSS/xu.PDF);let Hl=xu;async function C0(n,e="text"){if(om(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}class k0{constructor({viewBox:e,userUnit:t,scale:i,rotation:r,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=t,this.scale=i,this.rotation=r,this.offsetX=s,this.offsetY=a,i*=t;const c=(e[2]+e[0])/2,l=(e[3]+e[1])/2;let d,h,f,g;switch(r%=360,r<0&&(r+=360),r){case 180:d=-1,h=0,f=0,g=1;break;case 90:d=0,h=1,f=1,g=0;break;case 270:d=0,h=-1,f=-1,g=0;break;case 0:d=1,h=0,f=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(f=-f,g=-g);let v,y,x,m;d===0?(v=Math.abs(l-e[1])*i+s,y=Math.abs(c-e[0])*i+a,x=(e[3]-e[1])*i,m=(e[2]-e[0])*i):(v=Math.abs(c-e[0])*i+s,y=Math.abs(l-e[1])*i+a,x=(e[2]-e[0])*i,m=(e[3]-e[1])*i),this.transform=[d*i,h*i,f*i,g*i,v-d*i*c-f*i*l,y-h*i*c-g*i*l],this.width=x,this.height=m}get rawDims(){const e=this.viewBox;return Le(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:s=!1}={}){return new k0({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:s})}convertToViewportPoint(e,t){const i=[e,t];return Ee.applyTransform(i,this.transform),i}convertToViewportRectangle(e){const t=[e[0],e[1]];Ee.applyTransform(t,this.transform);const i=[e[2],e[3]];return Ee.applyTransform(i,this.transform),[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){const i=[e,t];return Ee.applyInverseTransform(i,this.transform),i}}class eC extends uh{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function W1(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function tC(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function gq(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function mq(n,e="document.pdf"){if(typeof n!="string")return e;if(W1(n))return Be('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const i=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(n);if(!i)return e;const r=o=>{try{let c=decodeURIComponent(o);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:o):c}catch{return o}},s=/\.pdf$/i,a=i.pathname.split("/").at(-1);if(s.test(a))return r(a);if(i.searchParams.size>0){const o=Array.from(i.searchParams.values()).reverse();for(const l of o)if(s.test(l))return r(l);const c=Array.from(i.searchParams.keys()).reverse();for(const l of c)if(s.test(l))return r(l)}if(i.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(c)return r(c[0])}return e}class LU{constructor(){ve(this,"started",Object.create(null));ve(this,"times",[])}time(e){e in this.started&&Be(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Be(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:r,end:s}of this.times)e.push(`${i.padEnd(t)} ${s-r}ms
`);return e.join("")}}function om(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Os(n){n.preventDefault()}function ln(n){n.preventDefault(),n.stopPropagation()}function yq(n){console.log("Deprecated API usage: "+n)}var Ay;class E2{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;u(this,Ay)||T(this,Ay,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=u(this,Ay).exec(e);if(!t)return null;const i=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const l=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,l==="-"?(a+=d,o+=h):l==="+"&&(a-=d,o-=h),new Date(Date.UTC(i,r,s,a,o,c))}}Ay=new WeakMap,U(E2,Ay);function bq(n,{scale:e=1,rotation:t=0}){const{width:i,height:r}=n.attributes.style,s=[0,0,parseInt(i),parseInt(r)];return new k0({viewBox:s,userUnit:1,scale:e,rotation:t})}function U0(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Be(`Not a valid color format: "${n}"`),[0,0,0])}function vq(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;n.set(t,U0(i))}e.remove()}function en(n){const{a:e,b:t,c:i,d:r,e:s,f:a}=n.getTransform();return[e,t,i,r,s,a]}function ca(n){const{a:e,b:t,c:i,d:r,e:s,f:a}=n.getTransform().invertSelf();return[e,t,i,r,s,a]}function Jd(n,e,t=!1,i=!0){if(e instanceof k0){const{pageWidth:r,pageHeight:s}=e.rawDims,{style:a}=n,o=hi.isCSSRoundSupported,c=`var(--total-scale-factor) * ${r}px`,l=`var(--total-scale-factor) * ${s}px`,d=o?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,h=o?`round(down, ${l}, var(--scale-round-y))`:`calc(${l})`;!t||e.rotation%180===0?(a.width=d,a.height=h):(a.width=h,a.height=d)}i&&n.setAttribute("data-main-rotation",e.rotation)}class Wa{constructor(){const{pixelRatio:e}=Wa;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,i,r,s=-1){let a=1/0,o=1/0,c=1/0;i=Wa.capPixels(i,s),i>0&&(a=Math.sqrt(i/(e*t))),r!==-1&&(o=r/e,c=r/t);const l=Math.min(a,o,c);return this.sx>l||this.sy>l?(this.sx=l,this.sy=l,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,i):i}return e}}const dE=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class xq{static get isDarkMode(){var e;return Le(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class wq{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:i}=window.getComputedStyle(e);return e.remove(),Le(this,"commentForegroundColor",U0(i))}}function _q(n,e,t,i){i=Math.min(Math.max(i??1,0),1);const r=255*(1-i);return n=Math.round(n*i+r),e=Math.round(e*i+r),t=Math.round(t*i+r),[n,e,t]}function IU(n,e){const t=n[0]/255,i=n[1]/255,r=n[2]/255,s=Math.max(t,i,r),a=Math.min(t,i,r),o=(s+a)/2;if(s===a)e[0]=e[1]=0;else{const c=s-a;switch(e[1]=o<.5?c/(s+a):c/(2-s-a),s){case t:e[0]=((i-r)/c+(i<r?6:0))*60;break;case i:e[0]=((r-t)/c+2)*60;break;case r:e[0]=((t-i)/c+4)*60;break}}e[2]=o}function hE(n,e){const t=n[0],i=n[1],r=n[2],s=(1-Math.abs(2*r-1))*i,a=s*(1-Math.abs(t/60%2-1)),o=r-s/2;switch(Math.floor(t/60)){case 0:e[0]=s+o,e[1]=a+o,e[2]=o;break;case 1:e[0]=a+o,e[1]=s+o,e[2]=o;break;case 2:e[0]=o,e[1]=s+o,e[2]=a+o;break;case 3:e[0]=o,e[1]=a+o,e[2]=s+o;break;case 4:e[0]=a+o,e[1]=o,e[2]=s+o;break;case 5:case 6:e[0]=s+o,e[1]=o,e[2]=a+o;break}}function PU(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function zU(n,e,t){hE(n,t),t.map(PU);const i=.2126*t[0]+.7152*t[1]+.0722*t[2];hE(e,t),t.map(PU);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];return i>r?(i+.05)/(r+.05):(r+.05)/(i+.05)}const WU=new Map;function Dq(n,e){const t=n[0]+n[1]*256+n[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let i=WU.get(t);if(i)return i;const r=new Float32Array(9),s=r.subarray(0,3),a=r.subarray(3,6);IU(n,a);const o=r.subarray(6,9);IU(e,o);const c=o[2]<.5,l=c?12:4.5;if(a[2]=c?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),zU(a,o,s)<l){let d,h;c?(d=a[2],h=1):(d=0,h=a[2]);const f=.005;for(;h-d>f;){const g=a[2]=(d+h)/2;c===zU(a,o,s)<l?d=g:h=g}a[2]=c?h:d}return hE(a,s),i=Ee.makeHexColor(Math.round(s[0]*255),Math.round(s[1]*255),Math.round(s[2]*255)),WU.set(t,i),i}function q6({html:n,dir:e,className:t},i){const r=document.createDocumentFragment();if(typeof n=="string"){const s=document.createElement("p");s.dir=e||"auto";const a=n.split(/(?:\r\n?|\n)/);for(let o=0,c=a.length;o<c;++o){const l=a[o];s.append(document.createTextNode(l)),o<c-1&&s.append(document.createElement("br"))}r.append(s)}else W6.render({xfaHtml:n,div:r,intent:"richText"});r.firstElementChild.classList.add("richText",t),i.append(r)}function $6(n){const e=new Path2D;if(!n)return e;for(let t=0,i=n.length;t<i;)switch(n[t++]){case qg.moveTo:e.moveTo(n[t++],n[t++]);break;case qg.lineTo:e.lineTo(n[t++],n[t++]);break;case qg.curveTo:e.bezierCurveTo(n[t++],n[t++],n[t++],n[t++],n[t++],n[t++]);break;case qg.quadraticCurveTo:e.quadraticCurveTo(n[t++],n[t++],n[t++],n[t++]);break;case qg.closePath:e.closePath();break;default:Be(`Unrecognized drawing path operator: ${n[t-1]}`);break}return e}var Fc,Oc,os,cs,Ey,Mc,Df,Af,Sy,Y2,H6,li,V6,G6,Mh,cm;const ao=class ao{constructor(e){U(this,li);U(this,Fc,null);U(this,Oc,null);U(this,os);U(this,cs,null);U(this,Ey,null);U(this,Mc,null);U(this,Df,null);U(this,Af,null);T(this,os,e),u(ao,Sy)||T(ao,Sy,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=T(this,Fc,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=u(this,os)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Os,{signal:t}),e.addEventListener("pointerdown",O(ao,Y2,H6),{signal:t}));const i=T(this,cs,document.createElement("div"));i.className="buttons",e.append(i);const r=u(this,os).toolbarPosition;if(r){const{style:s}=e,a=u(this,os)._uiManager.direction==="ltr"?1-r[0]:r[0];s.insetInlineEnd=`${100*a}%`,s.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return u(this,Fc)}hide(){var e;u(this,Fc).classList.add("hidden"),(e=u(this,Oc))==null||e.hideDropdown()}show(){var e,t;u(this,Fc).classList.remove("hidden"),(e=u(this,Ey))==null||e.shown(),(t=u(this,Mc))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=u(this,os),i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",u(ao,Sy)[e]),O(this,li,Mh).call(this,i)&&i.addEventListener("click",r=>{t.delete()},{signal:t._signal}),u(this,cs).append(i)}async addAltText(e){const t=await e.render();O(this,li,Mh).call(this,t),u(this,cs).append(t,u(this,li,cm)),T(this,Ey,e)}addComment(e,t=null){if(u(this,Mc))return;const i=e.renderForToolbar();if(!i)return;O(this,li,Mh).call(this,i);const r=T(this,Df,u(this,li,cm));t?(u(this,cs).insertBefore(i,t),u(this,cs).insertBefore(r,t)):u(this,cs).append(i,r),T(this,Mc,e),e.toolbar=this}addColorPicker(e){if(u(this,Oc))return;T(this,Oc,e);const t=e.renderButton();O(this,li,Mh).call(this,t),u(this,cs).append(t,u(this,li,cm))}async addEditSignatureButton(e){const t=T(this,Af,await e.renderEditButton(u(this,os)));O(this,li,Mh).call(this,t),u(this,cs).append(t,u(this,li,cm))}removeButton(e){var t,i;switch(e){case"comment":(t=u(this,Mc))==null||t.removeToolbarCommentButton(),T(this,Mc,null),(i=u(this,Df))==null||i.remove(),T(this,Df,null);break}}async addButton(e,t){switch(e){case"colorPicker":t&&this.addColorPicker(t);break;case"altText":t&&await this.addAltText(t);break;case"editSignature":t&&await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":t&&this.addComment(t);break}}async addButtonBefore(e,t,i){if(!t&&e==="comment")return;const r=u(this,cs).querySelector(i);r&&e==="comment"&&this.addComment(t,r)}updateEditSignatureButton(e){u(this,Af)&&(u(this,Af).title=e)}remove(){var e;u(this,Fc).remove(),(e=u(this,Oc))==null||e.destroy(),T(this,Oc,null)}};Fc=new WeakMap,Oc=new WeakMap,os=new WeakMap,cs=new WeakMap,Ey=new WeakMap,Mc=new WeakMap,Df=new WeakMap,Af=new WeakMap,Sy=new WeakMap,Y2=new WeakSet,H6=function(e){e.stopPropagation()},li=new WeakSet,V6=function(e){u(this,os)._focusEventsAllowed=!1,ln(e)},G6=function(e){u(this,os)._focusEventsAllowed=!0,ln(e)},Mh=function(e){const t=u(this,os)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",O(this,li,V6).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",O(this,li,G6).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Os,{signal:t}),!0)},cm=function(){const e=document.createElement("div");return e.className="divider",e},U(ao,Y2),U(ao,Sy,null);let fE=ao;var Ty,Au,lo,dc,X6,Y6,pE;class Aq{constructor(e){U(this,dc);U(this,Ty,null);U(this,Au,null);U(this,lo);T(this,lo,e)}show(e,t,i){const[r,s]=O(this,dc,Y6).call(this,t,i),{style:a}=u(this,Au)||T(this,Au,O(this,dc,X6).call(this));e.append(u(this,Au)),a.insetInlineEnd=`${100*r}%`,a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,Au).remove()}}Ty=new WeakMap,Au=new WeakMap,lo=new WeakMap,dc=new WeakSet,X6=function(){const e=T(this,Au,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=u(this,lo)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Os,{signal:t});const i=T(this,Ty,document.createElement("div"));return i.className="buttons",e.append(i),u(this,lo).hasCommentManager()&&O(this,dc,pE).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{u(this,lo).commentSelection("floating_button")}),O(this,dc,pE).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{u(this,lo).highlightSelection("floating_button")}),e},Y6=function(e,t){let i=0,r=0;for(const s of e){const a=s.y+s.height;if(a<i)continue;const o=s.x+(t?s.width:0);if(a>i){r=o,i=a;continue}t?o>r&&(r=o):o<r&&(r=o)}return[t?1-r:r,i]},pE=function(e,t,i,r){const s=document.createElement("button");s.classList.add("basic",e),s.tabIndex=0,s.setAttribute("data-l10n-id",t);const a=document.createElement("span");s.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id",i);const o=u(this,lo)._signal;o instanceof AbortSignal&&!o.aborted&&(s.addEventListener("contextmenu",Os,{signal:o}),s.addEventListener("click",r,{signal:o})),u(this,Ty).append(s)};function K6(n,e,t){for(const i of t)e.addEventListener(i,n[i].bind(n))}var Eu,Su,Ef,Tu;const _t=class _t{static initializeAndAddPointerId(e){(u(_t,Su)||T(_t,Su,new Set)).add(e)}static setPointer(e,t){u(_t,Eu)||T(_t,Eu,t),u(_t,Tu)??T(_t,Tu,e)}static setTimeStamp(e){T(_t,Ef,e)}static isSamePointerId(e){return u(_t,Eu)===e}static isSamePointerIdOrRemove(e){var t;return u(_t,Eu)===e?!0:((t=u(_t,Su))==null||t.delete(e),!1)}static isSamePointerType(e){return u(_t,Tu)===e}static isInitializedAndDifferentPointerType(e){return u(_t,Tu)!==null&&!_t.isSamePointerType(e)}static isSameTimeStamp(e){return u(_t,Ef)===e}static isUsingMultiplePointers(){var e;return((e=u(_t,Su))==null?void 0:e.size)>=1}static clearPointerType(){T(_t,Tu,null)}static clearPointerIds(){T(_t,Eu,NaN),T(_t,Su,null)}static clearTimeStamp(){T(_t,Ef,NaN)}};Eu=new WeakMap,Su=new WeakMap,Ef=new WeakMap,Tu=new WeakMap,U(_t,Eu,NaN),U(_t,Su,null),U(_t,Ef,NaN),U(_t,Tu,null);let vi=_t;var K2;class Eq{constructor(){U(this,K2,0)}get id(){return`${ay}${Tn(this,K2)._++}`}}K2=new WeakMap;var Sf,Cy,xi,Tf,sx;const Ck=class Ck{constructor(){U(this,Tf);U(this,Sf,P6());U(this,Cy,0);U(this,xi,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const s=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return Le(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:t,name:i,size:r,type:s}=e;return O(this,Tf,sx).call(this,`${t}_${i}_${r}_${s}`,e)}async getFromUrl(e){return O(this,Tf,sx).call(this,e,e)}async getFromBlob(e,t){const i=await t;return O(this,Tf,sx).call(this,e,i)}async getFromId(e){u(this,xi)||T(this,xi,new Map);const t=u(this,xi).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:i}=t;return delete t.blobPromise,this.getFromBlob(t.id,i)}return this.getFromUrl(t.url)}getFromCanvas(e,t){u(this,xi)||T(this,xi,new Map);let i=u(this,xi).get(e);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${u(this,Sf)}_${Tn(this,Cy)._++}`,refCounter:1,isSvg:!1},u(this,xi).set(e,i),u(this,xi).set(i.id,i),i}getSvgUrl(e){const t=u(this,xi).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;u(this,xi)||T(this,xi,new Map);const t=u(this,xi).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:i}=t;if(!t.url&&!t.file){const s=new OffscreenCanvas(i.width,i.height);s.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=s.convertToBlob()}(r=i.close)==null||r.call(i),t.bitmap=null}isValidId(e){return e.startsWith(`image_${u(this,Sf)}_`)}};Sf=new WeakMap,Cy=new WeakMap,xi=new WeakMap,Tf=new WeakSet,sx=async function(e,t){u(this,xi)||T(this,xi,new Map);let i=u(this,xi).get(e);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${u(this,Sf)}_${Tn(this,Cy)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(i.url=t,r=await C0(t,"blob")):t instanceof File?r=i.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const s=Ck._isSVGFittingCanvas,a=new FileReader,o=new Image,c=new Promise((l,d)=>{o.onload=()=>{i.bitmap=o,i.isSvg=!0,l()},a.onload=async()=>{const h=i.svgUrl=a.result;o.src=await s?`${h}#svgView(preserveAspectRatio(none))`:h},o.onerror=a.onerror=d});a.readAsDataURL(r),await c}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){Be(r),i=null}return u(this,xi).set(e,i),i&&u(this,xi).set(i.id,i),i};let gE=Ck;var dn,Bc,ky,Zt;class Sq{constructor(e=128){U(this,dn,[]);U(this,Bc,!1);U(this,ky);U(this,Zt,-1);T(this,ky,e)}add({cmd:e,undo:t,post:i,mustExec:r,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(r&&e(),u(this,Bc))return;const c={cmd:e,undo:t,post:i,type:s};if(u(this,Zt)===-1){u(this,dn).length>0&&(u(this,dn).length=0),T(this,Zt,0),u(this,dn).push(c);return}if(a&&u(this,dn)[u(this,Zt)].type===s){o&&(c.undo=u(this,dn)[u(this,Zt)].undo),u(this,dn)[u(this,Zt)]=c;return}const l=u(this,Zt)+1;l===u(this,ky)?u(this,dn).splice(0,1):(T(this,Zt,l),l<u(this,dn).length&&u(this,dn).splice(l)),u(this,dn).push(c)}undo(){if(u(this,Zt)===-1)return;T(this,Bc,!0);const{undo:e,post:t}=u(this,dn)[u(this,Zt)];e(),t==null||t(),T(this,Bc,!1),T(this,Zt,u(this,Zt)-1)}redo(){if(u(this,Zt)<u(this,dn).length-1){T(this,Zt,u(this,Zt)+1),T(this,Bc,!0);const{cmd:e,post:t}=u(this,dn)[u(this,Zt)];e(),t==null||t(),T(this,Bc,!1)}}hasSomethingToUndo(){return u(this,Zt)!==-1}hasSomethingToRedo(){return u(this,Zt)<u(this,dn).length-1}cleanType(e){if(u(this,Zt)!==-1){for(let t=u(this,Zt);t>=0;t--)if(u(this,dn)[t].type!==e){u(this,dn).splice(t+1,u(this,Zt)-t),T(this,Zt,t);return}u(this,dn).length=0,T(this,Zt,-1)}}destroy(){T(this,dn,null)}}dn=new WeakMap,Bc=new WeakMap,ky=new WeakMap,Zt=new WeakMap;var Q2,Q6;class N0{constructor(e){U(this,Q2);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=hi.platform;for(const[i,r,s={}]of e)for(const a of i){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:r,options:s}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:r,options:s}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(O(this,Q2,Q6).call(this,t));if(!i)return;const{callback:r,options:{bubbles:s=!1,args:a=[],checker:o=null}}=i;o&&!o(e,t)||(r.bind(e,...a,t)(),s||ln(t))}}Q2=new WeakSet,Q6=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const J2=class J2{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return vq(e),Le(this,"_colors",e)}convert(e){const t=U0(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,r]of this._colors)if(r.every((s,a)=>s===t[a]))return J2._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?Ee.makeHexColor(...t):e}};ve(J2,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let mE=J2;var Cf,_r,kf,rn,Un,Uf,ls,Nf,us,wi,Lc,Ic,jf,Pc,ha,ds,Cu,Uy,Ny,Rf,jy,fa,zc,Ff,Wc,pa,Z2,qc,Of,Ry,$c,ku,Mf,Hc,Fy,xn,mt,uo,Vc,Gc,Oy,Bf,My,Xc,ga,ho,By,Ly,hs,_e,ax,yE,J6,Z6,lm,eF,tF,nF,bE,iF,rF,sF,aF,Ni,ro,oF,cF,vE,lF,um,xE;const af=class af{constructor(e,t,i,r,s,a,o,c,l,d,h,f,g,v,y,x){U(this,_e);U(this,Cf,new AbortController);U(this,_r,null);U(this,kf,null);U(this,rn,new Map);U(this,Un,new Map);U(this,Uf,null);U(this,ls,null);U(this,Nf,null);U(this,us,new Sq);U(this,wi,null);U(this,Lc,null);U(this,Ic,null);U(this,jf,0);U(this,Pc,new Set);U(this,ha,null);U(this,ds,null);U(this,Cu,new Set);ve(this,"_editorUndoBar",null);U(this,Uy,!1);U(this,Ny,!1);U(this,Rf,!1);U(this,jy,null);U(this,fa,null);U(this,zc,null);U(this,Ff,null);U(this,Wc,!1);U(this,pa,null);U(this,Z2,new Eq);U(this,qc,!1);U(this,Of,!1);U(this,Ry,!1);U(this,$c,null);U(this,ku,null);U(this,Mf,null);U(this,Hc,null);U(this,Fy,null);U(this,xn,Pe.NONE);U(this,mt,new Set);U(this,uo,null);U(this,Vc,null);U(this,Gc,null);U(this,Oy,null);U(this,Bf,null);U(this,My,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});U(this,Xc,[0,0]);U(this,ga,null);U(this,ho,null);U(this,By,null);U(this,Ly,null);U(this,hs,null);const m=this._signal=u(this,Cf).signal;T(this,ho,e),T(this,By,t),T(this,Ly,i),T(this,Uf,r),T(this,wi,s),T(this,Vc,a),T(this,Bf,c),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:m}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),o._on("setpreference",this.onSetPreference.bind(this),{signal:m}),o._on("switchannotationeditorparams",b=>this.updateParams(b.type,b.value),{signal:m}),window.addEventListener("pointerdown",()=>{T(this,Of,!0)},{capture:!0,signal:m}),window.addEventListener("pointerup",()=>{T(this,Of,!1)},{capture:!0,signal:m}),O(this,_e,eF).call(this),O(this,_e,aF).call(this),O(this,_e,bE).call(this),T(this,ls,c.annotationStorage),T(this,jy,c.filterFactory),T(this,Gc,l),T(this,Ff,d||null),T(this,Uy,h),T(this,Ny,f),T(this,Rf,g),T(this,Fy,v||null),this.viewParameters={realScale:Hl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=y||null,this._supportsPinchToZoom=x!==!1,s==null||s.setSidebarUiManager(this)}static get _keyboardManager(){const e=af.prototype,t=a=>u(a,ho).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),i=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:c}=o;return c!=="text"&&c!=="number"}return!0},r=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return Le(this,"_keyboardManager",new N0([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&u(a,ho).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&u(a,ho).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}destroy(){var e,t,i,r,s,a,o,c,l;(e=u(this,hs))==null||e.resolve(),T(this,hs,null),(t=u(this,Cf))==null||t.abort(),T(this,Cf,null),this._signal=null;for(const d of u(this,Un).values())d.destroy();u(this,Un).clear(),u(this,rn).clear(),u(this,Cu).clear(),(i=u(this,Hc))==null||i.clear(),T(this,_r,null),u(this,mt).clear(),u(this,us).destroy(),(r=u(this,Uf))==null||r.destroy(),(s=u(this,wi))==null||s.destroy(),(a=u(this,Vc))==null||a.destroy(),(o=u(this,pa))==null||o.hide(),T(this,pa,null),(c=u(this,Mf))==null||c.destroy(),T(this,Mf,null),T(this,kf,null),u(this,fa)&&(clearTimeout(u(this,fa)),T(this,fa,null)),u(this,ga)&&(clearTimeout(u(this,ga)),T(this,ga,null)),(l=this._editorUndoBar)==null||l.destroy(),T(this,Bf,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return u(this,Fy)}get useNewAltTextFlow(){return u(this,Ny)}get useNewAltTextWhenAddingImage(){return u(this,Rf)}get hcmFilter(){return Le(this,"hcmFilter",u(this,Gc)?u(this,jy).addHCMFilter(u(this,Gc).foreground,u(this,Gc).background):"none")}get direction(){return Le(this,"direction",getComputedStyle(u(this,ho)).direction)}get _highlightColors(){return Le(this,"_highlightColors",u(this,Ff)?new Map(u(this,Ff).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Le(this,"highlightColors",null);const t=new Map,i=!!u(this,Gc);for(const[r,s]of e){const a=r.endsWith("_HCM");if(i&&a){t.set(r.replace("_HCM",""),s);continue}!i&&!a&&t.set(r,s)}return Le(this,"highlightColors",t)}get highlightColorNames(){return Le(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),T(this,Ic,e)}setMainHighlightColorPicker(e){T(this,Mf,e)}editAltText(e,t=!1){var i;(i=u(this,Uf))==null||i.editAltText(this,e,t)}hasCommentManager(){return!!u(this,wi)}editComment(e,t,i,r){var s;(s=u(this,wi))==null||s.showDialog(this,e,t,i,r)}selectComment(e,t){const i=u(this,Un).get(e),r=i==null?void 0:i.getEditorByUID(t);r==null||r.toggleComment(!0,!0)}updateComment(e){var t;(t=u(this,wi))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=u(this,wi))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=u(this,wi))==null||t.removeComments([e.uid])}toggleComment(e,t,i=void 0){var r;(r=u(this,wi))==null||r.toggleCommentPopup(e,t,i)}makeCommentColor(e,t){var i;return e&&((i=u(this,wi))==null?void 0:i.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=u(this,wi))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(u(this,Un).has(e-1))return;const{resolve:t,promise:i}=Promise.withResolvers(),r=s=>{s.pageNumber===e&&(this._eventBus._off("editorsrendered",r),t())};this._eventBus.on("editorsrendered",r),await i}getSignature(e){var t;(t=u(this,Vc))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return u(this,Vc)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":T(this,Rf,t);break}}onPageChanging({pageNumber:e}){T(this,jf,e-1)}focusMainContainer(){u(this,ho).focus()}findParent(e,t){for(const i of u(this,Un).values()){const{x:r,y:s,width:a,height:o}=i.div.getBoundingClientRect();if(e>=r&&e<=r+a&&t>=s&&t<=s+o)return i}return null}disableUserSelect(e=!1){u(this,By).classList.toggle("noUserSelect",e)}addShouldRescale(e){u(this,Cu).add(e)}removeShouldRescale(e){u(this,Cu).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Hl.PDF_TO_CSS_UNITS;for(const i of u(this,Cu))i.onScaleChanging();(t=u(this,Ic))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:r,anchorOffset:s,focusNode:a,focusOffset:o}=i,c=i.toString(),d=O(this,_e,ax).call(this,i).closest(".textLayer"),h=this.getSelectionBoxes(d);if(!h)return;i.empty();const f=O(this,_e,yE).call(this,d),g=u(this,xn)===Pe.NONE,v=()=>{const y=f==null?void 0:f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:r,anchorOffset:s,focusNode:a,focusOffset:o,text:c});g&&this.showAllEditors("highlight",!0,!0),t&&(y==null||y.editComment())};if(g){this.switchToMode(Pe.HIGHLIGHT,v);return}v()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!u(this,ls))return null;const t=`${ay}${e}`,i=u(this,ls).getRawValue(t);return i&&u(this,ls).remove(t),i}addToAnnotationStorage(e){!e.isEmpty()&&u(this,ls)&&!u(this,ls).has(e.id)&&u(this,ls).setValue(e.id,e)}a11yAlert(e,t=null){const i=u(this,Ly);i&&(i.setAttribute("data-l10n-id",e),t?i.setAttribute("data-l10n-args",JSON.stringify(t)):i.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,u(this,Wc)&&(T(this,Wc,!1),O(this,_e,lm).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of u(this,mt))if(t.div.contains(e)){T(this,ku,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!u(this,ku))return;const[e,t]=u(this,ku);T(this,ku,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){O(this,_e,bE).call(this),this.setEditingState(!0)}removeEditListeners(){O(this,_e,iF).call(this),this.setEditingState(!1)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of u(this,ds))if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of u(this,ds))if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var i;if(e.preventDefault(),(i=u(this,_r))==null||i.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of u(this,mt)){const s=r.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const a of u(this,ds))if(a.isHandlingMimeForPasting(s.type)){a.paste(s,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(s){Be(`paste: "${s.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const s=[];for(const c of i){const l=await r.deserialize(c);if(!l)return;s.push(l)}const a=()=>{for(const c of s)O(this,_e,vE).call(this,c);O(this,_e,xE).call(this,s)},o=()=>{for(const c of s)c.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(s){Be(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,xn)!==Pe.NONE&&!this.isEditorHandlingKeyboard&&af._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,Wc)&&(T(this,Wc,!1),O(this,_e,lm).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(O(this,_e,tF).call(this),O(this,_e,rF).call(this),O(this,_e,Ni).call(this,{isEditing:u(this,xn)!==Pe.NONE,isEmpty:O(this,_e,um).call(this),hasSomethingToUndo:u(this,us).hasSomethingToUndo(),hasSomethingToRedo:u(this,us).hasSomethingToRedo(),hasSelectedEditor:!1})):(O(this,_e,nF).call(this),O(this,_e,sF).call(this),O(this,_e,Ni).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!u(this,ds)){T(this,ds,e);for(const t of u(this,ds))O(this,_e,ro).call(this,t.defaultPropertiesToUpdate)}}getId(){return u(this,Z2).id}get currentLayer(){return u(this,Un).get(u(this,jf))}getLayer(e){return u(this,Un).get(e)}get currentPageIndex(){return u(this,jf)}addLayer(e){u(this,Un).set(e.pageIndex,e),u(this,qc)?e.enable():e.disable()}removeLayer(e){u(this,Un).delete(e.pageIndex)}async updateMode(e,t=null,i=!1,r=!1,s=!1){var a,o,c,l,d,h;if(u(this,xn)!==e&&!(u(this,hs)&&(await u(this,hs).promise,!u(this,hs)))){if(T(this,hs,Promise.withResolvers()),(a=u(this,Ic))==null||a.commitOrRemove(),u(this,xn)===Pe.POPUP&&((o=u(this,wi))==null||o.hideSidebar()),(c=u(this,wi))==null||c.destroyPopup(),T(this,xn,e),e===Pe.NONE){this.setEditingState(!1),O(this,_e,cF).call(this);for(const f of u(this,rn).values())f.hideStandaloneCommentButton();(l=this._editorUndoBar)==null||l.hide(),this.toggleComment(null),u(this,hs).resolve();return}for(const f of u(this,rn).values())f.addStandaloneCommentButton();e===Pe.SIGNATURE&&await((d=u(this,Vc))==null?void 0:d.loadSignatures()),this.setEditingState(!0),await O(this,_e,oF).call(this),this.unselectAll();for(const f of u(this,Un).values())f.updateMode(e);if(e===Pe.POPUP){u(this,kf)||T(this,kf,await u(this,Bf).getAnnotationsByType(new Set(u(this,ds).map(v=>v._editorType))));const f=new Set,g=[];for(const v of u(this,rn).values()){const{annotationElementId:y,hasComment:x,deleted:m}=v;y&&f.add(y),x&&!m&&g.push(v.getData())}for(const v of u(this,kf)){const{id:y,popupRef:x,contentsObj:m}=v;x&&(m!=null&&m.str)&&!f.has(y)&&!u(this,Pc).has(y)&&g.push(v)}(h=u(this,wi))==null||h.showSidebar(g)}if(!t){i&&this.addNewEditorFromKeyboard(),u(this,hs).resolve();return}for(const f of u(this,rn).values())f.uid===t?(this.setSelected(f),s?f.editComment():r?f.enterInEditMode():f.focus()):f.unselect();u(this,hs).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==u(this,xn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(u(this,ds)){switch(e){case rt.CREATE:this.currentLayer.addNewEditor(t);return;case rt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,Oy)||T(this,Oy,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const i of u(this,mt))i.updateParams(e,t);else for(const i of u(this,ds))i.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){var s;for(const a of u(this,rn).values())a.editorType===e&&a.show(t);(((s=u(this,Oy))==null?void 0:s.get(rt.HIGHLIGHT_SHOW_ALL))??!0)!==t&&O(this,_e,ro).call(this,[[rt.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(u(this,Ry)!==e){T(this,Ry,e);for(const t of u(this,Un).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of u(this,rn).values())t.pageIndex===e&&(yield t)}getEditor(e){return u(this,rn).get(e)}addEditor(e){u(this,rn).set(e.id,e)}removeEditor(e){var t,i;e.div.contains(document.activeElement)&&(u(this,fa)&&clearTimeout(u(this,fa)),T(this,fa,setTimeout(()=>{this.focusMainContainer(),T(this,fa,null)},0))),u(this,rn).delete(e.id),e.annotationElementId&&((t=u(this,Hc))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!u(this,Pc).has(e.annotationElementId))&&((i=u(this,ls))==null||i.remove(e.id))}addDeletedAnnotationElement(e){u(this,Pc).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return u(this,Pc).has(e)}removeDeletedAnnotationElement(e){u(this,Pc).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){u(this,_r)!==e&&(T(this,_r,e),e&&O(this,_e,ro).call(this,e.propertiesToUpdate))}updateUI(e){u(this,_e,lF)===e&&O(this,_e,ro).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){O(this,_e,ro).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(u(this,mt).has(e)){u(this,mt).delete(e),e.unselect(),O(this,_e,Ni).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,mt).add(e),e.select(),O(this,_e,ro).call(this,e.propertiesToUpdate),O(this,_e,Ni).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.uid}),(t=u(this,Ic))==null||t.commitOrRemove();for(const i of u(this,mt))i!==e&&i.unselect();u(this,mt).clear(),u(this,mt).add(e),e.select(),O(this,_e,ro).call(this,e.propertiesToUpdate),O(this,_e,Ni).call(this,{hasSelectedEditor:!0})}isSelected(e){return u(this,mt).has(e)}get firstSelectedEditor(){return u(this,mt).values().next().value}unselect(e){e.unselect(),u(this,mt).delete(e),O(this,_e,Ni).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,mt).size!==0}get isEnterHandled(){return u(this,mt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;u(this,us).undo(),O(this,_e,Ni).call(this,{hasSomethingToUndo:u(this,us).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:O(this,_e,um).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){u(this,us).redo(),O(this,_e,Ni).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,us).hasSomethingToRedo(),isEmpty:O(this,_e,um).call(this)})}addCommands(e){u(this,us).add(e),O(this,_e,Ni).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:O(this,_e,um).call(this)})}cleanUndoStack(e){u(this,us).cleanType(e)}delete(){var s;this.commitOrRemove();const e=(s=this.currentLayer)==null?void 0:s.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...u(this,mt)],i=()=>{var a;(a=this._editorUndoBar)==null||a.show(r,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},r=()=>{for(const a of t)O(this,_e,vE).call(this,a)};this.addCommands({cmd:i,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=u(this,_r))==null||e.commitOrRemove()}hasSomethingToControl(){return u(this,_r)||this.hasSelection}selectAll(){for(const e of u(this,mt))e.commit();O(this,_e,xE).call(this,u(this,rn).values())}unselectAll(){var e;if(!(u(this,_r)&&(u(this,_r).commitOrRemove(),u(this,xn)!==Pe.NONE))&&!((e=u(this,Ic))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of u(this,mt))t.unselect();u(this,mt).clear(),O(this,_e,Ni).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;u(this,Xc)[0]+=e,u(this,Xc)[1]+=t;const[r,s]=u(this,Xc),a=[...u(this,mt)],o=1e3;u(this,ga)&&clearTimeout(u(this,ga)),T(this,ga,setTimeout(()=>{T(this,ga,null),u(this,Xc)[0]=u(this,Xc)[1]=0,this.addCommands({cmd:()=>{for(const c of a)u(this,rn).has(c.id)&&(c.translateInPage(r,s),c.translationDone())},undo:()=>{for(const c of a)u(this,rn).has(c.id)&&(c.translateInPage(-r,-s),c.translationDone())},mustExec:!1})},o));for(const c of a)c.translateInPage(e,t),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),T(this,ha,new Map);for(const e of u(this,mt))u(this,ha).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,ha))return!1;this.disableUserSelect(!1);const e=u(this,ha);T(this,ha,null);let t=!1;for(const[{x:r,y:s,pageIndex:a},o]of e)o.newX=r,o.newY=s,o.newPageIndex=a,t||(t=r!==o.savedX||s!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const i=(r,s,a,o)=>{if(u(this,rn).has(r.id)){const c=u(this,Un).get(o);c?r._setParentAndPosition(c,s,a):(r.pageIndex=o,r.x=s,r.y=a)}};return this.addCommands({cmd:()=>{for(const[r,{newX:s,newY:a,newPageIndex:o}]of e)i(r,s,a,o)},undo:()=>{for(const[r,{savedX:s,savedY:a,savedPageIndex:o}]of e)i(r,s,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(u(this,ha))for(const i of u(this,ha).keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||u(this,mt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return u(this,_r)===e}getActive(){return u(this,_r)}getMode(){return u(this,xn)}isEditingMode(){return u(this,xn)!==Pe.NONE}get imageManager(){return Le(this,"imageManager",new gE)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let l=0,d=t.rangeCount;l<d;l++)if(!e.contains(t.getRangeAt(l).commonAncestorContainer))return null;const{x:i,y:r,width:s,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(l,d,h,f)=>({x:(d-r)/a,y:1-(l+h-i)/s,width:f/a,height:h/s});break;case"180":o=(l,d,h,f)=>({x:1-(l+h-i)/s,y:1-(d+f-r)/a,width:h/s,height:f/a});break;case"270":o=(l,d,h,f)=>({x:1-(d+f-r)/a,y:(l-i)/s,width:f/a,height:h/s});break;default:o=(l,d,h,f)=>({x:(l-i)/s,y:(d-r)/a,width:h/s,height:f/a});break}const c=[];for(let l=0,d=t.rangeCount;l<d;l++){const h=t.getRangeAt(l);if(!h.collapsed)for(const{x:f,y:g,width:v,height:y}of h.getClientRects())v===0||y===0||c.push(o(f,g,v,y))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(u(this,Nf)||T(this,Nf,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=u(this,Nf))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=u(this,Nf))==null?void 0:r.get(e.data.id);if(!t)return;const i=u(this,ls).getRawValue(t);i&&(u(this,xn)===Pe.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}setMissingCanvas(e,t,i){var s;const r=(s=u(this,Hc))==null?void 0:s.get(e);r&&(r.setCanvas(t,i),u(this,Hc).delete(e))}addMissingCanvas(e,t){(u(this,Hc)||T(this,Hc,new Map)).set(e,t)}};Cf=new WeakMap,_r=new WeakMap,kf=new WeakMap,rn=new WeakMap,Un=new WeakMap,Uf=new WeakMap,ls=new WeakMap,Nf=new WeakMap,us=new WeakMap,wi=new WeakMap,Lc=new WeakMap,Ic=new WeakMap,jf=new WeakMap,Pc=new WeakMap,ha=new WeakMap,ds=new WeakMap,Cu=new WeakMap,Uy=new WeakMap,Ny=new WeakMap,Rf=new WeakMap,jy=new WeakMap,fa=new WeakMap,zc=new WeakMap,Ff=new WeakMap,Wc=new WeakMap,pa=new WeakMap,Z2=new WeakMap,qc=new WeakMap,Of=new WeakMap,Ry=new WeakMap,$c=new WeakMap,ku=new WeakMap,Mf=new WeakMap,Hc=new WeakMap,Fy=new WeakMap,xn=new WeakMap,mt=new WeakMap,uo=new WeakMap,Vc=new WeakMap,Gc=new WeakMap,Oy=new WeakMap,Bf=new WeakMap,My=new WeakMap,Xc=new WeakMap,ga=new WeakMap,ho=new WeakMap,By=new WeakMap,Ly=new WeakMap,hs=new WeakMap,_e=new WeakSet,ax=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},yE=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const i of u(this,Un).values())if(i.hasTextLayer(e))return i;return null},J6=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=O(this,_e,ax).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(u(this,pa)||T(this,pa,new Aq(this)),u(this,pa).show(i,r,this.direction==="ltr"))},Z6=function(){var s,a,o;const e=document.getSelection();if(!e||e.isCollapsed){u(this,uo)&&((s=u(this,pa))==null||s.hide(),T(this,uo,null),O(this,_e,Ni).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===u(this,uo))return;const r=O(this,_e,ax).call(this,e).closest(".textLayer");if(!r){u(this,uo)&&((a=u(this,pa))==null||a.hide(),T(this,uo,null),O(this,_e,Ni).call(this,{hasSelectedText:!1}));return}if((o=u(this,pa))==null||o.hide(),T(this,uo,t),O(this,_e,Ni).call(this,{hasSelectedText:!0}),!(u(this,xn)!==Pe.HIGHLIGHT&&u(this,xn)!==Pe.NONE)&&(u(this,xn)===Pe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),T(this,Wc,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=u(this,xn)===Pe.HIGHLIGHT?O(this,_e,yE).call(this,r):null;if(c==null||c.toggleDrawing(),u(this,Of)){const l=new AbortController,d=this.combinedSignal(l),h=f=>{f.type==="pointerup"&&f.button!==0||(l.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&O(this,_e,lm).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("blur",h,{signal:d})}else c==null||c.toggleDrawing(!0),O(this,_e,lm).call(this,"main_toolbar")}},lm=function(e=""){u(this,xn)===Pe.HIGHLIGHT?this.highlightSelection(e):u(this,Uy)&&O(this,_e,J6).call(this)},eF=function(){document.addEventListener("selectionchange",O(this,_e,Z6).bind(this),{signal:this._signal})},tF=function(){if(u(this,zc))return;T(this,zc,new AbortController);const e=this.combinedSignal(u(this,zc));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},nF=function(){var e;(e=u(this,zc))==null||e.abort(),T(this,zc,null)},bE=function(){if(u(this,$c))return;T(this,$c,new AbortController);const e=this.combinedSignal(u(this,$c));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},iF=function(){var e;(e=u(this,$c))==null||e.abort(),T(this,$c,null)},rF=function(){if(u(this,Lc))return;T(this,Lc,new AbortController);const e=this.combinedSignal(u(this,Lc));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},sF=function(){var e;(e=u(this,Lc))==null||e.abort(),T(this,Lc,null)},aF=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Ni=function(e){Object.entries(e).some(([i,r])=>u(this,My)[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,My),e)}),u(this,xn)===Pe.HIGHLIGHT&&e.hasSelectedEditor===!1&&O(this,_e,ro).call(this,[[rt.HIGHLIGHT_FREE,!0]]))},ro=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},oF=async function(){if(!u(this,qc)){T(this,qc,!0);const e=[];for(const t of u(this,Un).values())e.push(t.enable());await Promise.all(e);for(const t of u(this,rn).values())t.enable()}},cF=function(){if(this.unselectAll(),u(this,qc)){T(this,qc,!1);for(const e of u(this,Un).values())e.disable();for(const e of u(this,rn).values())e.disable()}},vE=function(e){const t=u(this,Un).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},lF=function(){let e=null;for(e of u(this,mt));return e},um=function(){if(u(this,rn).size===0)return!0;if(u(this,rn).size===1)for(const e of u(this,rn).values())return e.isEmpty();return!1},xE=function(e){for(const t of u(this,mt))t.unselect();u(this,mt).clear();for(const t of e)t.isEmpty()||(u(this,mt).add(t),t.select());O(this,_e,Ni).call(this,{hasSelectedEditor:this.hasSelection})},ve(af,"TRANSLATE_SMALL",1),ve(af,"TRANSLATE_BIG",10);let Zd=af;var Mn,ma,zs,Lf,ya,Dr,If,ba,Ji,fo,Uu,va,Yc,ta,dm,ox;const ji=class ji{constructor(e){U(this,ta);U(this,Mn,null);U(this,ma,!1);U(this,zs,null);U(this,Lf,null);U(this,ya,null);U(this,Dr,null);U(this,If,!1);U(this,ba,null);U(this,Ji,null);U(this,fo,null);U(this,Uu,null);U(this,va,!1);T(this,Ji,e),T(this,va,e._uiManager.useNewAltTextFlow),u(ji,Yc)||T(ji,Yc,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){ji._l10n??(ji._l10n=e)}async render(){const e=T(this,zs,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=T(this,Lf,document.createElement("span"));e.append(t),u(this,va)?(e.classList.add("new"),e.setAttribute("data-l10n-id",u(ji,Yc).missing),t.setAttribute("data-l10n-id",u(ji,Yc)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=u(this,Ji)._uiManager._signal;e.addEventListener("contextmenu",Os,{signal:i}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:i});const r=s=>{s.preventDefault(),u(this,Ji)._uiManager.editAltText(u(this,Ji)),u(this,va)&&u(this,Ji)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:u(this,ta,dm)}})};return e.addEventListener("click",r,{capture:!0,signal:i}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(T(this,If,!0),r(s))},{signal:i}),await O(this,ta,ox).call(this),e}finish(){u(this,zs)&&(u(this,zs).focus({focusVisible:u(this,If)}),T(this,If,!1))}isEmpty(){return u(this,va)?u(this,Mn)===null:!u(this,Mn)&&!u(this,ma)}hasData(){return u(this,va)?u(this,Mn)!==null||!!u(this,fo):this.isEmpty()}get guessedText(){return u(this,fo)}async setGuessedText(e){u(this,Mn)===null&&(T(this,fo,e),T(this,Uu,await ji._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),O(this,ta,ox).call(this))}toggleAltTextBadge(e=!1){var t;if(!u(this,va)||u(this,Mn)){(t=u(this,ba))==null||t.remove(),T(this,ba,null);return}if(!u(this,ba)){const i=T(this,ba,document.createElement("div"));i.className="noAltTextBadge",u(this,Ji).div.append(i)}u(this,ba).classList.toggle("hidden",!e)}serialize(e){let t=u(this,Mn);return!e&&u(this,fo)===t&&(t=u(this,Uu)),{altText:t,decorative:u(this,ma),guessedText:u(this,fo),textWithDisclaimer:u(this,Uu)}}get data(){return{altText:u(this,Mn),decorative:u(this,ma)}}set data({altText:e,decorative:t,guessedText:i,textWithDisclaimer:r,cancel:s=!1}){i&&(T(this,fo,i),T(this,Uu,r)),!(u(this,Mn)===e&&u(this,ma)===t)&&(s||(T(this,Mn,e),T(this,ma,t)),O(this,ta,ox).call(this))}toggle(e=!1){u(this,zs)&&(!e&&u(this,Dr)&&(clearTimeout(u(this,Dr)),T(this,Dr,null)),u(this,zs).disabled=!e)}shown(){u(this,Ji)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:u(this,ta,dm)}})}destroy(){var e,t;(e=u(this,zs))==null||e.remove(),T(this,zs,null),T(this,Lf,null),T(this,ya,null),(t=u(this,ba))==null||t.remove(),T(this,ba,null)}};Mn=new WeakMap,ma=new WeakMap,zs=new WeakMap,Lf=new WeakMap,ya=new WeakMap,Dr=new WeakMap,If=new WeakMap,ba=new WeakMap,Ji=new WeakMap,fo=new WeakMap,Uu=new WeakMap,va=new WeakMap,Yc=new WeakMap,ta=new WeakSet,dm=function(){return u(this,Mn)&&"added"||u(this,Mn)===null&&this.guessedText&&"review"||"missing"},ox=async function(){var r,s,a;const e=u(this,zs);if(!e)return;if(u(this,va)){if(e.classList.toggle("done",!!u(this,Mn)),e.setAttribute("data-l10n-id",u(ji,Yc)[u(this,ta,dm)]),(r=u(this,Lf))==null||r.setAttribute("data-l10n-id",u(ji,Yc)[`${u(this,ta,dm)}-label`]),!u(this,Mn)){(s=u(this,ya))==null||s.remove();return}}else{if(!u(this,Mn)&&!u(this,ma)){e.classList.remove("done"),(a=u(this,ya))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=u(this,ya);if(!t){T(this,ya,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${u(this,Ji).id}`;const o=100,c=u(this,Ji)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(u(this,Dr)),T(this,Dr,null)},{once:!0}),e.addEventListener("mouseenter",()=>{T(this,Dr,setTimeout(()=>{T(this,Dr,null),u(this,ya).classList.add("show"),u(this,Ji)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:c}),e.addEventListener("mouseleave",()=>{var l;u(this,Dr)&&(clearTimeout(u(this,Dr)),T(this,Dr,null)),(l=u(this,ya))==null||l.classList.remove("show")},{signal:c})}u(this,ma)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=u(this,Mn)),t.parentNode||e.append(t);const i=u(this,Ji).getElementForAltText();i==null||i.setAttribute("aria-describedby",t.id)},U(ji,Yc,null),ve(ji,"_l10n",null);let S2=ji;var Zn,fs,Nu,Bt,Iy,ju,Ws,Ru,Fu,Ou,Py,wE,a4;let bv=(a4=class{constructor(e){U(this,Py);U(this,Zn,null);U(this,fs,null);U(this,Nu,!1);U(this,Bt,null);U(this,Iy,null);U(this,ju,null);U(this,Ws,null);U(this,Ru,null);U(this,Fu,!1);U(this,Ou,null);T(this,Bt,e)}renderForToolbar(){const e=T(this,fs,document.createElement("button"));return e.className="comment",O(this,Py,wE).call(this,e,!1)}renderForStandalone(){const e=T(this,Zn,document.createElement("button"));e.className="annotationCommentButton";const t=u(this,Bt).commentButtonPosition;if(t){const{style:i}=e;i.insetInlineEnd=`calc(${100*(u(this,Bt)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const r=u(this,Bt).commentButtonColor;r&&(i.backgroundColor=r)}return O(this,Py,wE).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=u(this,Zn)??u(this,fs))==null||e.focus()},0)}onUpdatedColor(){if(!u(this,Zn))return;const e=u(this,Bt).commentButtonColor;e&&(u(this,Zn).style.backgroundColor=e),u(this,Bt)._uiManager.updatePopupColor(u(this,Bt))}get commentButtonWidth(){var e;return(((e=u(this,Zn))==null?void 0:e.getBoundingClientRect().width)??0)/u(this,Bt).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(u(this,Ou))return u(this,Ou);if(!u(this,Zn))return null;const{x:e,y:t,height:i}=u(this,Zn).getBoundingClientRect(),{x:r,y:s,width:a,height:o}=u(this,Bt).parent.boundingClientRect;return[(e-r)/a,(t+i-s)/o]}set commentPopupPositionInLayer(e){T(this,Ou,e)}hasDefaultPopupPosition(){return u(this,Ou)===null}removeStandaloneCommentButton(){var e;(e=u(this,Zn))==null||e.remove(),T(this,Zn,null)}removeToolbarCommentButton(){var e;(e=u(this,fs))==null||e.remove(),T(this,fs,null)}setCommentButtonStates({selected:e,hasPopup:t}){u(this,Zn)&&(u(this,Zn).classList.toggle("selected",e),u(this,Zn).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let i,r;if(t)[i,r]=t;else{[i,r]=u(this,Bt).commentButtonPosition;const{width:d,height:h,x:f,y:g}=u(this,Bt);i=f+i*d,r=g+r*h}const s=u(this,Bt).parent.boundingClientRect,{x:a,y:o,width:c,height:l}=s;u(this,Bt)._uiManager.editComment(u(this,Bt),a+i*c,o+r*l,{...e,parentDimensions:s})}finish(){u(this,fs)&&(u(this,fs).focus({focusVisible:u(this,Nu)}),T(this,Nu,!1))}isDeleted(){return u(this,Fu)||u(this,Ws)===""}isEmpty(){return u(this,Ws)===null}hasBeenEdited(){return this.isDeleted()||u(this,Ws)!==u(this,Iy)}serialize(){return this.data}get data(){return{text:u(this,Ws),richText:u(this,ju),date:u(this,Ru),deleted:this.isDeleted()}}set data(e){if(e!==u(this,Ws)&&T(this,ju,null),e===null){T(this,Ws,""),T(this,Fu,!0);return}T(this,Ws,e),T(this,Ru,new Date),T(this,Fu,!1)}setInitialText(e,t=null){T(this,Iy,e),this.data=e,T(this,Ru,null),T(this,ju,t)}shown(){}destroy(){var e,t;(e=u(this,fs))==null||e.remove(),T(this,fs,null),(t=u(this,Zn))==null||t.remove(),T(this,Zn,null),T(this,Ws,""),T(this,ju,null),T(this,Ru,null),T(this,Bt,null),T(this,Nu,!1),T(this,Fu,!1)}},Zn=new WeakMap,fs=new WeakMap,Nu=new WeakMap,Bt=new WeakMap,Iy=new WeakMap,ju=new WeakMap,Ws=new WeakMap,Ru=new WeakMap,Fu=new WeakMap,Ou=new WeakMap,Py=new WeakSet,wE=function(e,t){if(!u(this,Bt)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[u(this,Bt)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const i=u(this,Bt)._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return e;e.addEventListener("contextmenu",Os,{signal:i}),t&&(e.addEventListener("focusin",s=>{u(this,Bt)._focusEventsAllowed=!1,ln(s)},{capture:!0,signal:i}),e.addEventListener("focusout",s=>{u(this,Bt)._focusEventsAllowed=!0,ln(s)},{capture:!0,signal:i})),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:i});const r=s=>{s.preventDefault(),e===u(this,fs)?this.edit():u(this,Bt).toggleComment(!0)};return e.addEventListener("click",r,{capture:!0,signal:i}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(T(this,Nu,!0),r(s))},{signal:i}),e.addEventListener("pointerenter",()=>{u(this,Bt).toggleComment(!1,!0)},{signal:i}),e.addEventListener("pointerleave",()=>{u(this,Bt).toggleComment(!1,!1)},{signal:i}),e},a4);var Pf,Mu,zy,Wy,qy,$y,Hy,po,Bu,go,Lu,mo,Xl,uF,dF,hF;const kk=class kk{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:i=null,onPinchStart:r=null,onPinching:s=null,onPinchEnd:a=null,signal:o}){U(this,Xl);U(this,Pf);U(this,Mu,!1);U(this,zy,null);U(this,Wy);U(this,qy);U(this,$y);U(this,Hy);U(this,po,null);U(this,Bu);U(this,go,null);U(this,Lu);U(this,mo,null);T(this,Pf,e),T(this,zy,i),T(this,Wy,t),T(this,qy,r),T(this,$y,s),T(this,Hy,a),T(this,Lu,new AbortController),T(this,Bu,AbortSignal.any([o,u(this,Lu).signal])),e.addEventListener("touchstart",O(this,Xl,uF).bind(this),{passive:!1,signal:u(this,Bu)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Wa.pixelRatio}destroy(){var e,t;(e=u(this,Lu))==null||e.abort(),T(this,Lu,null),(t=u(this,po))==null||t.abort(),T(this,po,null)}};Pf=new WeakMap,Mu=new WeakMap,zy=new WeakMap,Wy=new WeakMap,qy=new WeakMap,$y=new WeakMap,Hy=new WeakMap,po=new WeakMap,Bu=new WeakMap,go=new WeakMap,Lu=new WeakMap,mo=new WeakMap,Xl=new WeakSet,uF=function(e){var r,s,a;if((r=u(this,Wy))!=null&&r.call(this))return;if(e.touches.length===1){if(u(this,po))return;const o=T(this,po,new AbortController),c=AbortSignal.any([u(this,Bu),o.signal]),l=u(this,Pf),d={capture:!0,signal:c,passive:!1},h=f=>{var g;f.pointerType==="touch"&&((g=u(this,po))==null||g.abort(),T(this,po,null))};l.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ln(f),h(f))},d),l.addEventListener("pointerup",h,d),l.addEventListener("pointercancel",h,d);return}if(!u(this,mo)){T(this,mo,new AbortController);const o=AbortSignal.any([u(this,Bu),u(this,mo).signal]),c=u(this,Pf),l={signal:o,capture:!1,passive:!1};c.addEventListener("touchmove",O(this,Xl,dF).bind(this),l);const d=O(this,Xl,hF).bind(this);c.addEventListener("touchend",d,l),c.addEventListener("touchcancel",d,l),l.capture=!0,c.addEventListener("pointerdown",ln,l),c.addEventListener("pointermove",ln,l),c.addEventListener("pointercancel",ln,l),c.addEventListener("pointerup",ln,l),(s=u(this,qy))==null||s.call(this)}if(ln(e),e.touches.length!==2||(a=u(this,zy))!=null&&a.call(this)){T(this,go,null);return}let[t,i]=e.touches;t.identifier>i.identifier&&([t,i]=[i,t]),T(this,go,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:i.screenX,touch1Y:i.screenY})},dF=function(e){var _;if(!u(this,go)||e.touches.length!==2)return;ln(e);let[t,i]=e.touches;t.identifier>i.identifier&&([t,i]=[i,t]);const{screenX:r,screenY:s}=t,{screenX:a,screenY:o}=i,c=u(this,go),{touch0X:l,touch0Y:d,touch1X:h,touch1Y:f}=c,g=h-l,v=f-d,y=a-r,x=o-s,m=Math.hypot(y,x)||1,b=Math.hypot(g,v)||1;if(!u(this,Mu)&&Math.abs(b-m)<=kk.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=r,c.touch0Y=s,c.touch1X=a,c.touch1Y=o,!u(this,Mu)){T(this,Mu,!0);return}const w=[(r+a)/2,(s+o)/2];(_=u(this,$y))==null||_.call(this,w,b,m)},hF=function(e){var t;e.touches.length>=2||(u(this,mo)&&(u(this,mo).abort(),T(this,mo,null),(t=u(this,Hy))==null||t.call(this)),u(this,go)&&(ln(e),T(this,go,null),T(this,Mu,!1)))};let T2=kk;var Iu,qs,Xt,Ut,yo,zf,Kc,Vy,ei,Pu,bo,ps,Qc,Gy,zu,Ar,Xy,Wu,vo,xa,Wf,qf,gs,qu,Yy,e1,Fe,_E,Ky,DE,cx,fF,pF,AE,lx,EE,gF,mF,yF,SE,bF,TE,vF,xF,wF,CE,hm;const Ie=class Ie{constructor(e){U(this,Fe);U(this,Iu,null);U(this,qs,null);U(this,Xt,null);U(this,Ut,null);U(this,yo,null);U(this,zf,!1);U(this,Kc,null);U(this,Vy,"");U(this,ei,null);U(this,Pu,null);U(this,bo,null);U(this,ps,null);U(this,Qc,null);U(this,Gy,"");U(this,zu,!1);U(this,Ar,null);U(this,Xy,!1);U(this,Wu,!1);U(this,vo,!1);U(this,xa,null);U(this,Wf,0);U(this,qf,0);U(this,gs,null);U(this,qu,null);ve(this,"isSelected",!1);ve(this,"_isCopy",!1);ve(this,"_editToolbar",null);ve(this,"_initialOptions",Object.create(null));ve(this,"_initialData",null);ve(this,"_isVisible",!0);ve(this,"_uiManager",null);ve(this,"_focusEventsAllowed",!0);U(this,Yy,!1);U(this,e1,Ie._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:t,rawDims:{pageWidth:i,pageHeight:r,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[s,a];const[o,c]=this.parentDimensions;this.x=e.x/o,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Ie.prototype._resizeWithKeyboard,t=Zd.TRANSLATE_SMALL,i=Zd.TRANSLATE_BIG;return Le(this,"_resizerKeyboardManager",new N0([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],Ie.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Le(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Tq({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Ie._l10n??(Ie._l10n=e),Ie._l10nResizer||(Ie._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ie._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Ie._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Rt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,Yy)}set _isDraggable(e){var t;T(this,Yy,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,e1)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(O(this,Fe,hm).call(this),(t=u(this,ps))==null||t.remove(),T(this,ps,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(u(this,zu)?T(this,zu,!1):this.parent.setSelected(this))}focusout(e){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,r){const[s,a]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(e+i)/s,this.y=(t+r)/a,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[i,r]=this.parentDimensions;this.setAt(e*i,t*r,this.width*i,this.height*r),this._onTranslated()}translate(e,t){O(this,Fe,_E).call(this,this.parentDimensions,e,t)}translateInPage(e,t){u(this,Ar)||T(this,Ar,[this.x,this.y,this.width,this.height]),O(this,Fe,_E).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){u(this,Ar)||T(this,Ar,[this.x,this.y,this.width,this.height]);const{div:i,parentDimensions:[r,s]}=this;if(this.x+=e/r,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[c,l]=this.getBaseTranslation();a+=c,o+=l;const{style:d}=i;d.left=`${(100*a).toFixed(2)}%`,d.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),i.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!u(this,Ar)&&(u(this,Ar)[0]!==this.x||u(this,Ar)[1]!==this.y)}get _hasBeenResized(){return!!u(this,Ar)&&(u(this,Ar)[2]!==this.width||u(this,Ar)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=Ie,r=i/e,s=i/t;switch(this.rotation){case 90:return[-r,s];case 180:return[r,s];case 270:return[r,-s];default:return[-r,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[i,r]}=this;let{x:s,y:a,width:o,height:c}=this;if(o*=i,c*=r,s*=i,a*=r,this._mustFixPosition)switch(e){case 0:s=Li(s,0,i-o),a=Li(a,0,r-c);break;case 90:s=Li(s,0,i-c),a=Li(a,o,r);break;case 180:s=Li(s,o,i),a=Li(a,c,r);break;case 270:s=Li(s,c,i),a=Li(a,0,r-o);break}this.x=s/=i,this.y=a/=r;const[l,d]=this.getBaseTranslation();s+=l,a+=d,t.left=`${(100*s).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var i;return O(i=Ie,Ky,DE).call(i,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var i;return O(i=Ie,Ky,DE).call(i,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(){const{div:{style:e},width:t,height:i}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=u(this,Xt))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||u(this,Wu))return this._editToolbar;this._editToolbar=new fE(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,i]of e)await this._editToolbar.addButton(t,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=u(this,Xt))==null||t.destroy()}addContainer(e){var i;const t=(i=this._editToolbar)==null?void 0:i.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return u(this,Xt)||(S2.initialize(Ie._l10n),T(this,Xt,new S2(this)),u(this,Iu)&&(u(this,Xt).data=u(this,Iu),T(this,Iu,null))),u(this,Xt)}get altTextData(){var e;return(e=u(this,Xt))==null?void 0:e.data}set altTextData(e){u(this,Xt)&&(u(this,Xt).data=e)}get guessedAltText(){var e;return(e=u(this,Xt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=u(this,Xt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=u(this,Xt))==null?void 0:t.serialize(e)}hasAltText(){return!!u(this,Xt)&&!u(this,Xt).isEmpty()}hasAltTextData(){var e;return((e=u(this,Xt))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=u(this,Ut))==null||e.focusButton()}addCommentButton(){return this.canAddComment?u(this,Ut)||T(this,Ut,new bv(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(u(this,yo)){this._uiManager.isEditingMode()&&u(this,yo).classList.remove("hidden");return}this.hasComment&&(T(this,yo,u(this,Ut).renderForStandalone()),this.div.append(u(this,yo)))}}removeStandaloneCommentButton(){u(this,Ut).removeStandaloneCommentButton(),T(this,yo,null)}hideStandaloneCommentButton(){var e;(e=u(this,yo))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:i,deleted:r}}=u(this,Ut);return{text:t,richText:e,date:i,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){u(this,Ut)||T(this,Ut,new bv(this)),u(this,Ut).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:i}){if(!t||(u(this,Ut)||T(this,Ut,new bv(this)),u(this,Ut).setInitialText(e,i),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){var e;return(e=u(this,Ut))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=u(this,Ut))==null?void 0:e.isDeleted()}get hasComment(){return!!u(this,Ut)&&!u(this,Ut).isEmpty()&&!u(this,Ut).isDeleted()}async editComment(e){u(this,Ut)||T(this,Ut,new bv(this)),u(this,Ut).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){u(this,Ut).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,r]=e.rect,[s]=this.pageDimensions,[a]=this.pageTranslation,o=a+s+1,c=r-100,l=o+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[o,c,l,r]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){u(this,Ut).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var a;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=u(this,zf)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),O(this,Fe,TE).call(this);const[t,i]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*i/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/i).toFixed(2)}%`);const[r,s]=this.getInitialTranslation();return this.translate(r,s),K6(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(u(this,qu)||T(this,qu,new T2({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:O(this,Fe,gF).bind(this),onPinching:O(this,Fe,mF).bind(this),onPinchEnd:O(this,Fe,yF).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(a=this._uiManager._editorUndoBar)==null||a.hide(),e}pointerdown(e){const{isMac:t}=hi.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(T(this,zu,!0),this._isDraggable){O(this,Fe,bF).call(this,e);return}O(this,Fe,SE).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){u(this,xa)&&clearTimeout(u(this,xa)),T(this,xa,setTimeout(()=>{var e;T(this,xa,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,i=this.rotation){const r=this.parentScale,[s,a]=this.pageDimensions,[o,c]=this.pageTranslation,l=e/r,d=t/r,h=this.x*s,f=this.y*a,g=this.width*s,v=this.height*a;switch(i){case 0:return[h+l+o,a-f-d-v+c,h+l+g+o,a-f-d+c];case 90:return[h+d+o,a-f+l+c,h+d+v+o,a-f+l+g+c];case 180:return[h-l-g+o,a-f+d+c,h-l+o,a-f+d+v+c];case 270:return[h-d-v+o,a-f-l-g+c,h-d+o,a-f-l+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,r,s,a]=e,o=s-i,c=a-r;switch(this.rotation){case 0:return[i,t-a,o,c];case 90:return[i,t-r,c,o];case 180:return[s,t-r,o,c];case 270:return[s,t-a,c,o];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Ie._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=u(this,Ut))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:i,opacity:r,deleted:s,richText:a},uid:o,pageIndex:c,creationDate:l,modificationDate:d}=this;return{id:o,pageIndex:c,rect:this.getPDFRect(),richText:a,contentsObj:{str:e},creationDate:l,modificationDate:i||d,popupRef:!s,color:t,opacity:r}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),T(this,Wu,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),T(this,Wu,!1),!0):!1}isInEditMode(){return u(this,Wu)}shouldGetKeyboardEvents(){return u(this,vo)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:i,right:r}=this.getClientDimensions(),{innerHeight:s,innerWidth:a}=window;return t<a&&r>0&&e<s&&i>0}rebuild(){O(this,Fe,TE).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var i;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((i=this._initialData)==null?void 0:i.popupRef)||""}}static async deserialize(e,t,i){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});r.rotation=e.rotation,T(r,Iu,e.accessibilityData),r._isCopy=e.isCopy||!1;const[s,a]=r.pageDimensions,[o,c,l,d]=r.getRectInCurrentCoords(e.rect,a);return r.x=o/s,r.y=c/a,r.width=l/s,r.height=d/a,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t,i;if((e=u(this,Qc))==null||e.abort(),T(this,Qc,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),u(this,xa)&&(clearTimeout(u(this,xa)),T(this,xa,null)),O(this,Fe,hm).call(this),this.removeEditToolbar(),u(this,gs)){for(const r of u(this,gs).values())clearTimeout(r);T(this,gs,null)}this.parent=null,(t=u(this,qu))==null||t.destroy(),T(this,qu,null),(i=u(this,ps))==null||i.remove(),T(this,ps,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(O(this,Fe,fF).call(this),u(this,ei).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[i,r,s,a]=this.getPDFRect();return[Ie._round(i+(s-i)*e),Ie._round(r+(a-r)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return u(this,Ut).commentPopupPositionInLayer}set commentPopupPosition(e){u(this,Ut).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return u(this,Ut).hasDefaultPopupPosition()}get commentButtonWidth(){return u(this,Ut).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){var t;(t=u(this,Ut))==null||t.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),T(this,bo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=u(this,ei).children;if(!u(this,qs)){T(this,qs,Array.from(t));const a=O(this,Fe,vF).bind(this),o=O(this,Fe,xF).bind(this),c=this._uiManager._signal;for(const l of u(this,qs)){const d=l.getAttribute("data-resizer-name");l.setAttribute("role","spinbutton"),l.addEventListener("keydown",a,{signal:c}),l.addEventListener("blur",o,{signal:c}),l.addEventListener("focus",O(this,Fe,wF).bind(this,d),{signal:c}),l.setAttribute("data-l10n-id",Ie._l10nResizer[d])}}const i=u(this,qs)[0];let r=0;for(const a of t){if(a===i)break;r++}const s=(360-this.rotation+this.parentRotation)%360/90*(u(this,qs).length/4);if(s!==r){if(s<r)for(let o=0;o<r-s;o++)u(this,ei).append(u(this,ei).firstElementChild);else if(s>r)for(let o=0;o<s-r;o++)u(this,ei).firstElementChild.before(u(this,ei).lastElementChild);let a=0;for(const o of t){const l=u(this,qs)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",Ie._l10nResizer[l])}}O(this,Fe,CE).call(this,0),T(this,vo,!0),u(this,ei).firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){u(this,vo)&&O(this,Fe,EE).call(this,u(this,Gy),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){O(this,Fe,hm).call(this),this.div.focus()}select(){var e,t,i;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,s;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(t=this._editToolbar)==null||t.show(),(i=u(this,Xt))==null||i.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,i,r,s;this.isSelected&&(this.isSelected=!1,(e=u(this,ei))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(s=u(this,Xt))==null||s.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return u(this,Xy)}set isEditing(e){T(this,Xy,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){u(this,gs)||T(this,gs,new Map);const{action:i}=e;let r=u(this,gs).get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),u(this,gs).delete(i),u(this,gs).size===0&&T(this,gs,null)},Ie._telemetryTimeout),u(this,gs).set(i,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),T(this,zf,!1)}disable(){this.div&&(this.div.tabIndex=-1),T(this,zf,!0)}updateFakeAnnotationElement(e){if(!u(this,ps)&&!this.deleted){T(this,ps,e.addFakeAnnotation(this));return}if(this.deleted){u(this,ps).remove(),T(this,ps,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&u(this,ps).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstElementChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Iu=new WeakMap,qs=new WeakMap,Xt=new WeakMap,Ut=new WeakMap,yo=new WeakMap,zf=new WeakMap,Kc=new WeakMap,Vy=new WeakMap,ei=new WeakMap,Pu=new WeakMap,bo=new WeakMap,ps=new WeakMap,Qc=new WeakMap,Gy=new WeakMap,zu=new WeakMap,Ar=new WeakMap,Xy=new WeakMap,Wu=new WeakMap,vo=new WeakMap,xa=new WeakMap,Wf=new WeakMap,qf=new WeakMap,gs=new WeakMap,qu=new WeakMap,Yy=new WeakMap,e1=new WeakMap,Fe=new WeakSet,_E=function([e,t],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Ky=new WeakSet,DE=function(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},cx=function(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}},fF=function(){if(u(this,ei))return;T(this,ei,document.createElement("div")),u(this,ei).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const r=document.createElement("div");u(this,ei).append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",O(this,Fe,pF).bind(this,i),{signal:t}),r.addEventListener("contextmenu",Os,{signal:t}),r.tabIndex=-1}this.div.prepend(u(this,ei))},pF=function(e,t){var d;t.preventDefault();const{isMac:i}=hi.platform;if(t.button!==0||t.ctrlKey&&i)return;(d=u(this,Xt))==null||d.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,T(this,Pu,[t.screenX,t.screenY]);const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",O(this,Fe,EE).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",ln,{passive:!1,signal:a}),window.addEventListener("contextmenu",Os,{signal:a}),T(this,bo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const l=()=>{var h;s.abort(),this.parent.togglePointerEvents(!0),(h=u(this,Xt))==null||h.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=o,this.div.style.cursor=c,O(this,Fe,lx).call(this)};window.addEventListener("pointerup",l,{signal:a}),window.addEventListener("blur",l,{signal:a})},AE=function(e,t,i,r){this.width=i,this.height=r,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},lx=function(){if(!u(this,bo))return;const{savedX:e,savedY:t,savedWidth:i,savedHeight:r}=u(this,bo);T(this,bo,null);const s=this.x,a=this.y,o=this.width,c=this.height;s===e&&a===t&&o===i&&c===r||this.addCommands({cmd:O(this,Fe,AE).bind(this,s,a,o,c),undo:O(this,Fe,AE).bind(this,e,t,i,r),mustExec:!0})},EE=function(e,t){const[i,r]=this.parentDimensions,s=this.x,a=this.y,o=this.width,c=this.height,l=Ie.MIN_SIZE/i,d=Ie.MIN_SIZE/r,h=O(this,Fe,cx).call(this,this.rotation),f=(j,M)=>[h[0]*j+h[2]*M,h[1]*j+h[3]*M],g=O(this,Fe,cx).call(this,360-this.rotation),v=(j,M)=>[g[0]*j+g[2]*M,g[1]*j+g[3]*M];let y,x,m=!1,b=!1;switch(e){case"topLeft":m=!0,y=(j,M)=>[0,0],x=(j,M)=>[j,M];break;case"topMiddle":y=(j,M)=>[j/2,0],x=(j,M)=>[j/2,M];break;case"topRight":m=!0,y=(j,M)=>[j,0],x=(j,M)=>[0,M];break;case"middleRight":b=!0,y=(j,M)=>[j,M/2],x=(j,M)=>[0,M/2];break;case"bottomRight":m=!0,y=(j,M)=>[j,M],x=(j,M)=>[0,0];break;case"bottomMiddle":y=(j,M)=>[j/2,M],x=(j,M)=>[j/2,0];break;case"bottomLeft":m=!0,y=(j,M)=>[0,M],x=(j,M)=>[j,0];break;case"middleLeft":b=!0,y=(j,M)=>[0,M/2],x=(j,M)=>[j,M/2];break}const w=y(o,c),_=x(o,c);let D=f(..._);const A=Ie._round(s+D[0]),E=Ie._round(a+D[1]);let F=1,I=1,z,H;if(t.fromKeyboard)({deltaX:z,deltaY:H}=t);else{const{screenX:j,screenY:M}=t,[R,N]=u(this,Pu);[z,H]=this.screenToPageTranslation(j-R,M-N),u(this,Pu)[0]=j,u(this,Pu)[1]=M}if([z,H]=v(z/i,H/r),m){const j=Math.hypot(o,c);F=I=Math.max(Math.min(Math.hypot(_[0]-w[0]-z,_[1]-w[1]-H)/j,1/o,1/c),l/o,d/c)}else b?F=Li(Math.abs(_[0]-w[0]-z),l,1)/o:I=Li(Math.abs(_[1]-w[1]-H),d,1)/c;const k=Ie._round(o*F),W=Ie._round(c*I);D=f(...x(k,W));const S=A-D[0],G=E-D[1];u(this,Ar)||T(this,Ar,[this.x,this.y,this.width,this.height]),this.width=k,this.height=W,this.x=S,this.y=G,this.setDims(),this.fixAndSetPosition(),this._onResizing()},gF=function(){var e;T(this,bo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=u(this,Xt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},mF=function(e,t,i){let s=.7*(i/t)+1-.7;if(s===1)return;const a=O(this,Fe,cx).call(this,this.rotation),o=(A,E)=>[a[0]*A+a[2]*E,a[1]*A+a[3]*E],[c,l]=this.parentDimensions,d=this.x,h=this.y,f=this.width,g=this.height,v=Ie.MIN_SIZE/c,y=Ie.MIN_SIZE/l;s=Math.max(Math.min(s,1/f,1/g),v/f,y/g);const x=Ie._round(f*s),m=Ie._round(g*s);if(x===f&&m===g)return;u(this,Ar)||T(this,Ar,[d,h,f,g]);const b=o(f/2,g/2),w=Ie._round(d+b[0]),_=Ie._round(h+b[1]),D=o(x/2,m/2);this.x=w-D[0],this.y=_-D[1],this.width=x,this.height=m,this.setDims(),this.fixAndSetPosition(),this._onResizing()},yF=function(){var e;(e=u(this,Xt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),O(this,Fe,lx).call(this)},SE=function(e){const{isMac:t}=hi.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},bF=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let i=!1;const r=new AbortController,s=this._uiManager.combinedSignal(r),a={capture:!0,passive:!1,signal:s},o=l=>{r.abort(),T(this,Kc,null),T(this,zu,!1),this._uiManager.endDragSession()||O(this,Fe,SE).call(this,l),i&&this._onStopDragging()};t&&(T(this,Wf,e.clientX),T(this,qf,e.clientY),T(this,Kc,e.pointerId),T(this,Vy,e.pointerType),window.addEventListener("pointermove",l=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:d,clientY:h,pointerId:f}=l;if(f!==u(this,Kc)){ln(l);return}const[g,v]=this.screenToPageTranslation(d-u(this,Wf),h-u(this,qf));T(this,Wf,d),T(this,qf,h),this._uiManager.dragSelectedEditors(g,v)},a),window.addEventListener("touchmove",ln,a),window.addEventListener("pointerdown",l=>{l.pointerType===u(this,Vy)&&(u(this,qu)||l.isPrimary)&&o(l),ln(l)},a));const c=l=>{if(!u(this,Kc)||u(this,Kc)===l.pointerId){o(l);return}ln(l)};window.addEventListener("pointerup",c,{signal:s}),window.addEventListener("blur",c,{signal:s})},TE=function(){if(u(this,Qc)||!this.div)return;T(this,Qc,new AbortController);const e=this._uiManager.combinedSignal(u(this,Qc));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},vF=function(e){Ie._resizerKeyboardManager.exec(this,e)},xF=function(e){var t;u(this,vo)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==u(this,ei)&&O(this,Fe,hm).call(this)},wF=function(e){T(this,Gy,u(this,vo)?e:"")},CE=function(e){if(u(this,qs))for(const t of u(this,qs))t.tabIndex=e},hm=function(){T(this,vo,!1),O(this,Fe,CE).call(this,-1),O(this,Fe,lx).call(this)},U(Ie,Ky),ve(Ie,"_l10n",null),ve(Ie,"_l10nResizer",null),ve(Ie,"_borderLineWidth",-1),ve(Ie,"_colorManager",new mE),ve(Ie,"_zIndex",1),ve(Ie,"_telemetryTimeout",1e3);let Lt=Ie;class Tq extends Lt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const qU=3285377520,is=4294901760,la=65535;class _F{constructor(e){this.h1=e?e&4294967295:qU,this.h2=e?e&4294967295:qU}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let y=0,x=e.length;y<x;y++){const m=e.charCodeAt(y);m<=255?t[i++]=m:(t[i++]=m>>>8,t[i++]=m&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=i>>2,s=i-r*4,a=new Uint32Array(t.buffer,0,r);let o=0,c=0,l=this.h1,d=this.h2;const h=3432918353,f=461845907,g=h&la,v=f&la;for(let y=0;y<r;y++)y&1?(o=a[y],o=o*h&is|o*g&la,o=o<<15|o>>>17,o=o*f&is|o*v&la,l^=o,l=l<<13|l>>>19,l=l*5+3864292196):(c=a[y],c=c*h&is|c*g&la,c=c<<15|c>>>17,c=c*f&is|c*v&la,d^=c,d=d<<13|d>>>19,d=d*5+3864292196);switch(o=0,s){case 3:o^=t[r*4+2]<<16;case 2:o^=t[r*4+1]<<8;case 1:o^=t[r*4],o=o*h&is|o*g&la,o=o<<15|o>>>17,o=o*f&is|o*v&la,r&1?l^=o:d^=o}this.h1=l,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&is|e*36045&la,t=t*4283543511&is|((t<<16|e>>>16)*2950163797&is)>>>16,e^=t>>>1,e=e*444984403&is|e*60499&la,t=t*3301882366&is|((t<<16|e>>>16)*3120437893&is)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const kE=Object.freeze({map:null,hash:"",transfer:void 0});var $u,Hu,xo,ti,t1,DF;class nC{constructor(){U(this,t1);U(this,$u,!1);U(this,Hu,null);U(this,xo,null);U(this,ti,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=u(this,ti).get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return u(this,ti).get(e)}remove(e){const t=u(this,ti).get(e);if(t!==void 0&&(t instanceof Lt&&u(this,xo).delete(t.annotationElementId),u(this,ti).delete(e),u(this,ti).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const i of u(this,ti).values())if(i instanceof Lt)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=u(this,ti).get(e);let r=!1;if(i!==void 0)for(const[s,a]of Object.entries(t))i[s]!==a&&(r=!0,i[s]=a);else r=!0,u(this,ti).set(e,t);r&&O(this,t1,DF).call(this),t instanceof Lt&&((u(this,xo)||T(this,xo,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return u(this,ti).has(e)}get size(){return u(this,ti).size}resetModified(){u(this,$u)&&(T(this,$u,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new AF(this)}get serializable(){if(u(this,ti).size===0)return kE;const e=new Map,t=new _F,i=[],r=Object.create(null);let s=!1;for(const[a,o]of u(this,ti)){const c=o instanceof Lt?o.serialize(!1,r):o;c&&(e.set(a,c),t.update(`${a}:${JSON.stringify(c)}`),s||(s=!!c.bitmap))}if(s)for(const a of e.values())a.bitmap&&i.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:kE}get editorStats(){let e=null;const t=new Map;let i=0,r=0;for(const s of u(this,ti).values()){if(!(s instanceof Lt)){s.popup&&(s.popup.deleted?r+=1:i+=1);continue}s.isCommentDeleted?r+=1:s.hasEditedComment&&(i+=1);const a=s.telemetryFinalData;if(!a)continue;const{type:o}=a;t.has(o)||t.set(o,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const c=e[o]||(e[o]=new Map);for(const[l,d]of Object.entries(a)){if(l==="type")continue;let h=c.get(l);h||(h=new Map,c.set(l,h));const f=h.get(d)??0;h.set(d,f+1)}}if((r>0||i>0)&&(e||(e=Object.create(null)),e.comments={deleted:r,edited:i}),!e)return null;for(const[s,a]of t)e[s]=a.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){T(this,Hu,null)}updateEditor(e,t){var r;const i=(r=u(this,xo))==null?void 0:r.get(e);return i?(i.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=u(this,xo))==null?void 0:t.get(e))||null}get modifiedIds(){if(u(this,Hu))return u(this,Hu);const e=[];if(u(this,xo))for(const t of u(this,xo).values())t.serialize()&&e.push(t.annotationElementId);return T(this,Hu,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return u(this,ti).entries()}}$u=new WeakMap,Hu=new WeakMap,xo=new WeakMap,ti=new WeakMap,t1=new WeakSet,DF=function(){u(this,$u)||(T(this,$u,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Qy;class AF extends nC{constructor(t){super();U(this,Qy);const{map:i,hash:r,transfer:s}=t.serializable,a=structuredClone(i,s?{transfer:s}:null);T(this,Qy,{map:a,hash:r,transfer:s})}get print(){Rt("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,Qy)}get modifiedIds(){return Le(this,"modifiedIds",{ids:new Set,hash:""})}}Qy=new WeakMap;var $f;class Cq{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){U(this,$f,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),u(this,$f).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:i}){if(!(!e||u(this,$f).has(e.loadedName))){if(st(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:s,style:a}=e,o=new FontFace(r,s,a);this.addNativeFontFace(o);try{await o.load(),u(this,$f).add(r),i==null||i(e)}catch{Be(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Rt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw Be(`Failed to load font '${i.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Le(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Le(this,"isSyncFontLoadingSupported",Bi||hi.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(st(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const s=i.shift();setTimeout(s.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:t,callback:e};return i.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Le(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(_,D){return _.charCodeAt(D)<<24|_.charCodeAt(D+1)<<16|_.charCodeAt(D+2)<<8|_.charCodeAt(D+3)&255}function r(_,D,A,E){const F=_.substring(0,D),I=_.substring(D+A);return F+E+I}let s,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const c=o.getContext("2d");let l=0;function d(_,D){if(++l>30){Be("Load test font never loaded."),D();return}if(c.font="30px "+_,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(d.bind(null,_,D))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=r(f,976,h.length,h);const v=16,y=1482184792;let x=i(f,v);for(s=0,a=h.length-3;s<a;s+=4)x=x-y+i(h,s)|0;s<h.length&&(x=x-y+i(h+"XXX",s)|0),f=r(f,v,4,cq(x));const m=`url(data:font/opentype;base64,${btoa(f)});`,b=`@font-face {font-family:"${h}";src:${m}}`;this.insertRule(b);const w=this._document.createElement("div");w.style.visibility="hidden",w.style.width=w.style.height="10px",w.style.position="absolute",w.style.top=w.style.left="0px";for(const _ of[e.loadedName,h]){const D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=_,w.append(D)}this._document.body.append(w),d(h,()=>{w.remove(),t.complete()})}}$f=new WeakMap;var Dt;class kq{constructor(e,t=null,i,r){U(this,Dt);this.compiledGlyphs=Object.create(null),T(this,Dt,e),this._inspectFont=t,i&&Object.assign(this,i),r&&(this.charProcOperatorList=r)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${z6(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(i=this._inspectFont)==null||i.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const i=this.loadedName+"_path_"+t;let r;try{r=e.get(i)}catch(a){Be(`getPathGenerator - ignoring character: "${a}".`)}const s=$6(r);return this.fontExtraProperties||e.delete(i),this.compiledGlyphs[t]=s}get black(){return u(this,Dt).black}get bold(){return u(this,Dt).bold}get disableFontFace(){return u(this,Dt).disableFontFace??!1}set disableFontFace(e){Le(this,"disableFontFace",!!e)}get fontExtraProperties(){return u(this,Dt).fontExtraProperties??!1}get isInvalidPDFjsFont(){return u(this,Dt).isInvalidPDFjsFont}get isType3Font(){return u(this,Dt).isType3Font}get italic(){return u(this,Dt).italic}get missingFile(){return u(this,Dt).missingFile}get remeasure(){return u(this,Dt).remeasure}get vertical(){return u(this,Dt).vertical}get ascent(){return u(this,Dt).ascent}get defaultWidth(){return u(this,Dt).defaultWidth}get descent(){return u(this,Dt).descent}get bbox(){return u(this,Dt).bbox}set bbox(e){Le(this,"bbox",e)}get fontMatrix(){return u(this,Dt).fontMatrix}get fallbackName(){return u(this,Dt).fallbackName}get loadedName(){return u(this,Dt).loadedName}get mimetype(){return u(this,Dt).mimetype}get name(){return u(this,Dt).name}get data(){return u(this,Dt).data}clearData(){u(this,Dt).clearData()}get cssFontInfo(){return u(this,Dt).cssFontInfo}get systemFontInfo(){return u(this,Dt).systemFontInfo}get defaultVMetrics(){return u(this,Dt).defaultVMetrics}}Dt=new WeakMap;var Hf,Vf,Jy,Gf,ux;const of=class of{constructor(e){U(this,Gf);U(this,Hf);U(this,Vf);U(this,Jy);T(this,Hf,e),T(this,Vf,new DataView(u(this,Hf))),T(this,Jy,new TextDecoder)}static write(e){const t=new TextEncoder,i={};let r=0;for(const l of of.strings){const d=t.encode(e[l]);i[l]=d,r+=4+d.length}const s=new ArrayBuffer(r),a=new Uint8Array(s),o=new DataView(s);let c=0;for(const l of of.strings){const d=i[l],h=d.length;o.setUint32(c,h),a.set(d,c+4),c+=4+h}return st(c===s.byteLength,"CssFontInfo.write: Buffer overflow"),s}get fontFamily(){return O(this,Gf,ux).call(this,0)}get fontWeight(){return O(this,Gf,ux).call(this,1)}get italicAngle(){return O(this,Gf,ux).call(this,2)}};Hf=new WeakMap,Vf=new WeakMap,Jy=new WeakMap,Gf=new WeakSet,ux=function(e){st(e<of.strings.length,"Invalid string index");let t=0;for(let r=0;r<e;r++)t+=u(this,Vf).getUint32(t)+4;const i=u(this,Vf).getUint32(t);return u(this,Jy).decode(new Uint8Array(u(this,Hf),t+4,i))},ve(of,"strings",["fontFamily","fontWeight","italicAngle"]);let C2=of;var Jc,wa,Vu,Gu,fm;const cf=class cf{constructor(e){U(this,Gu);U(this,Jc);U(this,wa);U(this,Vu);T(this,Jc,e),T(this,wa,new DataView(u(this,Jc))),T(this,Vu,new TextDecoder)}static write(e){const t=new TextEncoder,i={};let r=0;for(const f of cf.strings){const g=t.encode(e[f]);i[f]=g,r+=4+g.length}r+=4;let s,a,o=1+r;e.style&&(s=t.encode(e.style.style),a=t.encode(e.style.weight),o+=4+s.length+4+a.length);const c=new ArrayBuffer(o),l=new Uint8Array(c),d=new DataView(c);let h=0;d.setUint8(h++,e.guessFallback?1:0),d.setUint32(h,0),h+=4,r=0;for(const f of cf.strings){const g=i[f],v=g.length;r+=4+v,d.setUint32(h,v),l.set(g,h+4),h+=4+v}return d.setUint32(h-r-4,r),e.style&&(d.setUint32(h,s.length),l.set(s,h+4),h+=4+s.length,d.setUint32(h,a.length),l.set(a,h+4),h+=4+a.length),st(h<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(h)}get guessFallback(){return u(this,wa).getUint8(0)!==0}get css(){return O(this,Gu,fm).call(this,0)}get loadedName(){return O(this,Gu,fm).call(this,1)}get baseFontName(){return O(this,Gu,fm).call(this,2)}get src(){return O(this,Gu,fm).call(this,3)}get style(){let e=1;e+=4+u(this,wa).getUint32(e);const t=u(this,wa).getUint32(e),i=u(this,Vu).decode(new Uint8Array(u(this,Jc),e+4,t));e+=4+t;const r=u(this,wa).getUint32(e),s=u(this,Vu).decode(new Uint8Array(u(this,Jc),e+4,r));return{style:i,weight:s}}};Jc=new WeakMap,wa=new WeakMap,Vu=new WeakMap,Gu=new WeakSet,fm=function(e){st(e<cf.strings.length,"Invalid string index");let t=5;for(let r=0;r<e;r++)t+=u(this,wa).getUint32(t)+4;const i=u(this,wa).getUint32(t);return u(this,Vu).decode(new Uint8Array(u(this,Jc),t+4,i))},ve(cf,"strings",["css","loadedName","baseFontName","src"]);let k2=cf;var Xf,Yf,Kf,Qf,Er,_a,Zy,At,cn,Ls,dx,pm;const qe=class qe{constructor({data:e,extra:t}){U(this,cn);U(this,_a);U(this,Zy);U(this,At);T(this,_a,e),T(this,Zy,new TextDecoder),T(this,At,new DataView(u(this,_a))),t&&Object.assign(this,t)}get black(){return O(this,cn,Ls).call(this,0)}get bold(){return O(this,cn,Ls).call(this,1)}get disableFontFace(){return O(this,cn,Ls).call(this,2)}get fontExtraProperties(){return O(this,cn,Ls).call(this,3)}get isInvalidPDFjsFont(){return O(this,cn,Ls).call(this,4)}get isType3Font(){return O(this,cn,Ls).call(this,5)}get italic(){return O(this,cn,Ls).call(this,6)}get missingFile(){return O(this,cn,Ls).call(this,7)}get remeasure(){return O(this,cn,Ls).call(this,8)}get vertical(){return O(this,cn,Ls).call(this,9)}get ascent(){return O(this,cn,dx).call(this,0)}get defaultWidth(){return O(this,cn,dx).call(this,1)}get descent(){return O(this,cn,dx).call(this,2)}get bbox(){let e=u(qe,Yf);if(u(this,At).getUint8(e)===0)return;e+=1;const i=[];for(let r=0;r<4;r++)i.push(u(this,At).getInt16(e,!0)),e+=2;return i}get fontMatrix(){let e=u(qe,Kf);if(u(this,At).getUint8(e)===0)return;e+=1;const i=[];for(let r=0;r<6;r++)i.push(u(this,At).getFloat64(e,!0)),e+=8;return i}get defaultVMetrics(){let e=u(qe,Qf);if(u(this,At).getUint8(e)===0)return;e+=1;const i=[];for(let r=0;r<3;r++)i.push(u(this,At).getInt16(e,!0)),e+=2;return i}get fallbackName(){return O(this,cn,pm).call(this,0)}get loadedName(){return O(this,cn,pm).call(this,1)}get mimetype(){return O(this,cn,pm).call(this,2)}get name(){return O(this,cn,pm).call(this,3)}get data(){let e=u(qe,Er);const t=u(this,At).getUint32(e);e+=4+t;const i=u(this,At).getUint32(e);e+=4+i;const r=u(this,At).getUint32(e);e+=4+r;const s=u(this,At).getUint32(e);if(s!==0)return new Uint8Array(u(this,_a),e+4,s)}clearData(){let e=u(qe,Er);const t=u(this,At).getUint32(e);e+=4+t;const i=u(this,At).getUint32(e);e+=4+i;const r=u(this,At).getUint32(e);e+=4+r;const s=u(this,At).getUint32(e);new Uint8Array(u(this,_a),e+4,s).fill(0),u(this,At).setUint32(e,0)}get cssFontInfo(){let e=u(qe,Er);const t=u(this,At).getUint32(e);e+=4+t;const i=u(this,At).getUint32(e);e+=4+i;const r=u(this,At).getUint32(e);if(r===0)return null;const s=new Uint8Array(r);return s.set(new Uint8Array(u(this,_a),e+4,r)),new C2(s.buffer)}get systemFontInfo(){let e=u(qe,Er);const t=u(this,At).getUint32(e);e+=4+t;const i=u(this,At).getUint32(e);if(i===0)return null;const r=new Uint8Array(i);return r.set(new Uint8Array(u(this,_a),e+4,i)),new k2(r.buffer)}static write(e){const t=e.systemFontInfo?k2.write(e.systemFontInfo):null,i=e.cssFontInfo?C2.write(e.cssFontInfo):null,r=new TextEncoder,s={};let a=0;for(const y of qe.strings)s[y]=r.encode(e[y]),a+=4+s[y].length;const o=u(qe,Er)+4+a+4+(t?t.byteLength:0)+4+(i?i.byteLength:0)+4+(e.data?e.data.length:0),c=new ArrayBuffer(o),l=new Uint8Array(c),d=new DataView(c);let h=0;const f=qe.bools.length;let g=0,v=0;for(let y=0;y<f;y++){const x=e[qe.bools[y]];g|=(x===void 0?0:x?2:1)<<v,v+=2,(v===8||y===f-1)&&(d.setUint8(h++,g),g=0,v=0)}st(h===u(qe,Xf),"FontInfo.write: Boolean properties offset mismatch");for(const y of qe.numbers)d.setFloat64(h,e[y]),h+=8;if(st(h===u(qe,Yf),"FontInfo.write: Number properties offset mismatch"),e.bbox){d.setUint8(h++,4);for(const y of e.bbox)d.setInt16(h,y,!0),h+=2}else d.setUint8(h++,0),h+=2*4;if(st(h===u(qe,Kf),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){d.setUint8(h++,6);for(const y of e.fontMatrix)d.setFloat64(h,y,!0),h+=8}else d.setUint8(h++,0),h+=8*6;if(st(h===u(qe,Qf),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){d.setUint8(h++,1);for(const y of e.defaultVMetrics)d.setInt16(h,y,!0),h+=2}else d.setUint8(h++,0),h+=3*2;st(h===u(qe,Er),"FontInfo.write: DefaultVMetrics properties offset mismatch"),d.setUint32(u(qe,Er),0),h+=4;for(const y of qe.strings){const x=s[y],m=x.length;d.setUint32(h,m),l.set(x,h+4),h+=4+m}if(d.setUint32(u(qe,Er),h-u(qe,Er)-4),!t)d.setUint32(h,0),h+=4;else{const y=t.byteLength;d.setUint32(h,y),st(h+4+y<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),l.set(new Uint8Array(t),h+4),h+=4+y}if(!i)d.setUint32(h,0),h+=4;else{const y=i.byteLength;d.setUint32(h,y),st(h+4+y<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),l.set(new Uint8Array(i),h+4),h+=4+y}return e.data===void 0?(d.setUint32(h,0),h+=4):(d.setUint32(h,e.data.length),l.set(e.data,h+4),h+=4+e.data.length),st(h<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(h)}};Xf=new WeakMap,Yf=new WeakMap,Kf=new WeakMap,Qf=new WeakMap,Er=new WeakMap,_a=new WeakMap,Zy=new WeakMap,At=new WeakMap,cn=new WeakSet,Ls=function(e){st(e<qe.bools.length,"Invalid boolean index");const t=Math.floor(e/4),i=e*2%8,r=u(this,At).getUint8(t)>>i&3;return r===0?void 0:r===2},dx=function(e){return st(e<qe.numbers.length,"Invalid number index"),u(this,At).getFloat64(u(qe,Xf)+e*8)},pm=function(e){st(e<qe.strings.length,"Invalid string index");let t=u(qe,Er)+4;for(let s=0;s<e;s++)t+=u(this,At).getUint32(t)+4;const i=u(this,At).getUint32(t),r=new Uint8Array(i);return r.set(new Uint8Array(u(this,_a),t+4,i)),u(this,Zy).decode(r)},ve(qe,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),ve(qe,"numbers",["ascent","defaultWidth","descent"]),ve(qe,"strings",["fallbackName","loadedName","mimetype","name"]),U(qe,Xf,Math.ceil(qe.bools.length*2/8)),U(qe,Yf,u(qe,Xf)+qe.numbers.length*8),U(qe,Kf,u(qe,Yf)+1+2*4),U(qe,Qf,u(qe,Kf)+1+8*6),U(qe,Er,u(qe,Qf)+1+2*3);let UE=qe;var eb,tb,nb,ib,rb,sb,ab,ob;const Mt=class Mt{constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,i=null,r=[],s=[],a=[],o=[],c=null,l=null;switch(e[0]){case"RadialAxial":t=e[1]==="axial"?1:2,i=e[2],a=e[3],t===1?r.push(...e[4],...e[5]):r.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,c=e[1],r=e[2],s=e[3],o=e[4]||[],i=e[6],l=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const d=Math.floor(r.length/2),h=Math.floor(s.length/3),f=a.length,g=o.length;let v=0;for(const D of o)v+=1,v=Math.ceil(v/4)*4,v+=4+D.coords.length*4,v+=4+D.colors.length*4,D.verticesPerRow!==void 0&&(v+=4);const y=20+d*8+h*3+f*8+(i?16:0)+(l?3:0)+v,x=new ArrayBuffer(y),m=new DataView(x),b=new Uint8Array(x);m.setUint8(u(Mt,eb),t),m.setUint8(u(Mt,tb),i?1:0),m.setUint8(u(Mt,nb),l?1:0),m.setUint8(u(Mt,ib),c),m.setUint32(u(Mt,rb),d,!0),m.setUint32(u(Mt,sb),h,!0),m.setUint32(u(Mt,ab),f,!0),m.setUint32(u(Mt,ob),g,!0);let w=20;new Float32Array(x,w,d*2).set(r),w+=d*8,b.set(s,w),w+=h*3;for(const[D,A]of a)m.setFloat32(w,D,!0),w+=4,m.setUint32(w,parseInt(A.slice(1),16),!0),w+=4;if(i)for(const D of i)m.setFloat32(w,D,!0),w+=4;l&&(b.set(l,w),w+=3);for(let D=0;D<o.length;D++){const A=o[D];m.setUint8(w,A.type),w+=1,w=Math.ceil(w/4)*4,m.setUint32(w,A.coords.length,!0),w+=4,new Int32Array(x,w,A.coords.length).set(A.coords),w+=A.coords.length*4,m.setUint32(w,A.colors.length,!0),w+=4,new Int32Array(x,w,A.colors.length).set(A.colors),w+=A.colors.length*4,A.verticesPerRow!==void 0&&(m.setUint32(w,A.verticesPerRow,!0),w+=4)}return x}getIR(){const e=this.view,t=this.data[u(Mt,eb)],i=!!this.data[u(Mt,tb)],r=!!this.data[u(Mt,nb)],s=e.getUint32(u(Mt,rb),!0),a=e.getUint32(u(Mt,sb),!0),o=e.getUint32(u(Mt,ab),!0),c=e.getUint32(u(Mt,ob),!0);let l=20;const d=new Float32Array(this.buffer,l,s*2);l+=s*8;const h=new Uint8Array(this.buffer,l,a*3);l+=a*3;const f=[];for(let x=0;x<o;++x){const m=e.getFloat32(l,!0);l+=4;const b=e.getUint32(l,!0);l+=4,f.push([m,`#${b.toString(16).padStart(6,"0")}`])}let g=null;if(i){g=[];for(let x=0;x<4;++x)g.push(e.getFloat32(l,!0)),l+=4}let v=null;r&&(v=new Uint8Array(this.buffer,l,3),l+=3);const y=[];for(let x=0;x<c;++x){const m=e.getUint8(l);l+=1,l=Math.ceil(l/4)*4;const b=e.getUint32(l,!0);l+=4;const w=new Int32Array(this.buffer,l,b);l+=b*4;const _=e.getUint32(l,!0);l+=4;const D=new Int32Array(this.buffer,l,_);l+=_*4;const A={type:m,coords:w,colors:D};m===cE.LATTICE&&(A.verticesPerRow=e.getUint32(l,!0),l+=4),y.push(A)}if(t===1)return["RadialAxial","axial",g,f,Array.from(d.slice(0,2)),Array.from(d.slice(2,4)),null,null];if(t===2)return["RadialAxial","radial",g,f,[d[0],d[1]],[d[3],d[4]],d[2],d[5]];if(t===3){const x=this.data[u(Mt,ib)];let m=null;if(d.length>0){let b=d[0],w=d[0],_=d[1],D=d[1];for(let A=0;A<d.length;A+=2){const E=d[A],F=d[A+1];b=b>E?E:b,_=_>F?F:_,w=w<E?E:w,D=D<F?F:D}m=[b,_,w,D]}return["Mesh",x,d,h,y,m,g,v]}throw new Error(`Unsupported pattern kind: ${t}`)}};eb=new WeakMap,tb=new WeakMap,nb=new WeakMap,ib=new WeakMap,rb=new WeakMap,sb=new WeakMap,ab=new WeakMap,ob=new WeakMap,U(Mt,eb,0),U(Mt,tb,1),U(Mt,nb,2),U(Mt,ib,3),U(Mt,rb,4),U(Mt,sb,8),U(Mt,ab,12),U(Mt,ob,16);let NE=Mt;function Uq(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Bi)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Nq(n){if(Bi&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return T0(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function vv(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const jE=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,jq=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",Rq=fq.bind(null,jE,jq);var wo,n1;class Fq{constructor(){U(this,wo,new Map);U(this,n1,Promise.resolve())}postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};u(this,n1).then(()=>{for(const[r]of u(this,wo))r.call(this,i)})}addEventListener(e,t,i=null){let r=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:s}=i;if(s.aborted){Be("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);r=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}u(this,wo).set(t,r)}removeEventListener(e,t){const i=u(this,wo).get(t);i==null||i(),u(this,wo).delete(t)}terminate(){for(const[,e]of u(this,wo))e==null||e();u(this,wo).clear()}}wo=new WeakMap,n1=new WeakMap;const xv={DATA:1,ERROR:2},yn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function $U(){}function Ki(n){if(n instanceof $l||n instanceof lE||n instanceof MU||n instanceof A2||n instanceof U_)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||Rt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new $l(n.message);case"InvalidPDFException":return new lE(n.message);case"PasswordException":return new MU(n.message,n.code);case"ResponseException":return new A2(n.message,n.status,n.missing);case"UnknownErrorException":return new U_(n.message,n.details)}return new U_(n.message,n.toString())}var Jf,Rs,EF,SF,TF,hx;class gm{constructor(e,t,i){U(this,Rs);U(this,Jf,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",O(this,Rs,EF).bind(this),{signal:u(this,Jf).signal})}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const r=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},i)}catch(a){s.reject(a)}return s.promise}sendWithStream(e,t,i,r){const s=this.streamId++,a=this.sourceName,o=this.targetName,c=this.comObj;return new ReadableStream({start:l=>{const d=Promise.withResolvers();return this.streamControllers[s]={controller:l,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:o,action:e,streamId:s,data:t,desiredSize:l.desiredSize},r),d.promise},pull:l=>{const d=Promise.withResolvers();return this.streamControllers[s].pullCall=d,c.postMessage({sourceName:a,targetName:o,stream:yn.PULL,streamId:s,desiredSize:l.desiredSize}),d.promise},cancel:l=>{st(l instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[s].cancelCall=d,this.streamControllers[s].isClosed=!0,c.postMessage({sourceName:a,targetName:o,stream:yn.CANCEL,streamId:s,reason:Ki(l)}),d.promise}},i)}destroy(){var e;(e=u(this,Jf))==null||e.abort(),T(this,Jf,null)}}Jf=new WeakMap,Rs=new WeakSet,EF=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){O(this,Rs,TF).call(this,e);return}if(e.callback){const i=e.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===xv.DATA)r.resolve(e.data);else if(e.callback===xv.ERROR)r.reject(Ki(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,r=e.sourceName,s=this.comObj;Promise.try(t,e.data).then(function(a){s.postMessage({sourceName:i,targetName:r,callback:xv.DATA,callbackId:e.callbackId,data:a})},function(a){s.postMessage({sourceName:i,targetName:r,callback:xv.ERROR,callbackId:e.callbackId,reason:Ki(a)})});return}if(e.streamId){O(this,Rs,SF).call(this,e);return}t(e.data)},SF=function(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,s=this.comObj,a=this,o=this.actionHandler[e.action],c={enqueue(l,d=1,h){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=d,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:i,targetName:r,stream:yn.ENQUEUE,streamId:t,chunk:l},h)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:yn.CLOSE,streamId:t}),delete a.streamSinks[t])},error(l){st(l instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:yn.ERROR,streamId:t,reason:Ki(l)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(o,e.data,c).then(function(){s.postMessage({sourceName:i,targetName:r,stream:yn.START_COMPLETE,streamId:t,success:!0})},function(l){s.postMessage({sourceName:i,targetName:r,stream:yn.START_COMPLETE,streamId:t,reason:Ki(l)})})},TF=function(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,s=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case yn.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Ki(e.reason));break;case yn.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Ki(e.reason));break;case yn.PULL:if(!o){s.postMessage({sourceName:i,targetName:r,stream:yn.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||$U).then(function(){s.postMessage({sourceName:i,targetName:r,stream:yn.PULL_COMPLETE,streamId:t,success:!0})},function(l){s.postMessage({sourceName:i,targetName:r,stream:yn.PULL_COMPLETE,streamId:t,reason:Ki(l)})});break;case yn.ENQUEUE:if(st(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case yn.CLOSE:if(st(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),O(this,Rs,hx).call(this,a,t);break;case yn.ERROR:st(a,"error should have stream controller"),a.controller.error(Ki(e.reason)),O(this,Rs,hx).call(this,a,t);break;case yn.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Ki(e.reason)),O(this,Rs,hx).call(this,a,t);break;case yn.CANCEL:if(!o)break;const c=Ki(e.reason);Promise.try(o.onCancel||$U,c).then(function(){s.postMessage({sourceName:i,targetName:r,stream:yn.CANCEL_COMPLETE,streamId:t,success:!0})},function(l){s.postMessage({sourceName:i,targetName:r,stream:yn.CANCEL_COMPLETE,streamId:t,reason:Ki(l)})}),o.sinkCapability.reject(c),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},hx=async function(e,t){var i,r,s;await Promise.allSettled([(i=e.startCall)==null?void 0:i.promise,(r=e.pullCall)==null?void 0:r.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[t]};var cb;class CF{constructor({enableHWA:e=!1}){U(this,cb,!1);T(this,cb,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!u(this,cb)})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Rt("Abstract method `_createCanvas` called.")}}cb=new WeakMap;class Oq extends CF{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}class kF{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Rt("Abstract method `_fetch` called.")}}class HU extends kF{async _fetch(e){const t=await C0(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):T0(t)}}class UF{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,r,s){return"none"}destroy(e=!1){}}var Xu,Zf,_o,Do,_i,Yu,Ku,De,yi,mm,Bh,fx,Lh,NF,RE,Ih,ym,bm,FE,vm;class Mq extends UF{constructor({docId:t,ownerDocument:i=globalThis.document}){super();U(this,De);U(this,Xu);U(this,Zf);U(this,_o);U(this,Do);U(this,_i);U(this,Yu);U(this,Ku,0);T(this,Do,t),T(this,_i,i)}addFilter(t){if(!t)return"none";let i=u(this,De,yi).get(t);if(i)return i;const[r,s,a]=O(this,De,fx).call(this,t),o=t.length===1?r:`${r}${s}${a}`;if(i=u(this,De,yi).get(o),i)return u(this,De,yi).set(t,i),i;const c=`g_${u(this,Do)}_transfer_map_${Tn(this,Ku)._++}`,l=O(this,De,Lh).call(this,c);u(this,De,yi).set(t,l),u(this,De,yi).set(o,l);const d=O(this,De,Ih).call(this,c);return O(this,De,bm).call(this,r,s,a,d),l}addHCMFilter(t,i){var v;const r=`${t}-${i}`,s="base";let a=u(this,De,mm).get(s);if((a==null?void 0:a.key)===r||(a?((v=a.filter)==null||v.remove(),a.key=r,a.url="none",a.filter=null):(a={key:r,url:"none",filter:null},u(this,De,mm).set(s,a)),!t||!i))return a.url;const o=O(this,De,vm).call(this,t);t=Ee.makeHexColor(...o);const c=O(this,De,vm).call(this,i);if(i=Ee.makeHexColor(...c),u(this,De,Bh).style.color="",t==="#000000"&&i==="#ffffff"||t===i)return a.url;const l=new Array(256);for(let y=0;y<=255;y++){const x=y/255;l[y]=x<=.03928?x/12.92:((x+.055)/1.055)**2.4}const d=l.join(","),h=`g_${u(this,Do)}_hcm_filter`,f=a.filter=O(this,De,Ih).call(this,h);O(this,De,bm).call(this,d,d,d,f),O(this,De,RE).call(this,f);const g=(y,x)=>{const m=o[y]/255,b=c[y]/255,w=new Array(x+1);for(let _=0;_<=x;_++)w[_]=m+_/x*(b-m);return w.join(",")};return O(this,De,bm).call(this,g(0,5),g(1,5),g(2,5),f),a.url=O(this,De,Lh).call(this,h),a.url}addAlphaFilter(t){let i=u(this,De,yi).get(t);if(i)return i;const[r]=O(this,De,fx).call(this,[t]),s=`alpha_${r}`;if(i=u(this,De,yi).get(s),i)return u(this,De,yi).set(t,i),i;const a=`g_${u(this,Do)}_alpha_map_${Tn(this,Ku)._++}`,o=O(this,De,Lh).call(this,a);u(this,De,yi).set(t,o),u(this,De,yi).set(s,o);const c=O(this,De,Ih).call(this,a);return O(this,De,FE).call(this,r,c),o}addLuminosityFilter(t){let i=u(this,De,yi).get(t||"luminosity");if(i)return i;let r,s;if(t?([r]=O(this,De,fx).call(this,[t]),s=`luminosity_${r}`):s="luminosity",i=u(this,De,yi).get(s),i)return u(this,De,yi).set(t,i),i;const a=`g_${u(this,Do)}_luminosity_map_${Tn(this,Ku)._++}`,o=O(this,De,Lh).call(this,a);u(this,De,yi).set(t,o),u(this,De,yi).set(s,o);const c=O(this,De,Ih).call(this,a);return O(this,De,NF).call(this,c),t&&O(this,De,FE).call(this,r,c),o}addHighlightHCMFilter(t,i,r,s,a){var b;const o=`${i}-${r}-${s}-${a}`;let c=u(this,De,mm).get(t);if((c==null?void 0:c.key)===o||(c?((b=c.filter)==null||b.remove(),c.key=o,c.url="none",c.filter=null):(c={key:o,url:"none",filter:null},u(this,De,mm).set(t,c)),!i||!r))return c.url;const[l,d]=[i,r].map(O(this,De,vm).bind(this));let h=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[g,v]=[s,a].map(O(this,De,vm).bind(this));f<h&&([h,f,g,v]=[f,h,v,g]),u(this,De,Bh).style.color="";const y=(w,_,D)=>{const A=new Array(256),E=(f-h)/D,F=w/255,I=(_-w)/(255*D);let z=0;for(let H=0;H<=D;H++){const k=Math.round(h+H*E),W=F+H*I;for(let S=z;S<=k;S++)A[S]=W;z=k+1}for(let H=z;H<256;H++)A[H]=A[z-1];return A.join(",")},x=`g_${u(this,Do)}_hcm_${t}_filter`,m=c.filter=O(this,De,Ih).call(this,x);return O(this,De,RE).call(this,m),O(this,De,bm).call(this,y(g[0],v[0],5),y(g[1],v[1],5),y(g[2],v[2],5),m),c.url=O(this,De,Lh).call(this,x),c.url}destroy(t=!1){var i,r,s,a;t&&((i=u(this,Yu))!=null&&i.size)||((r=u(this,_o))==null||r.parentNode.parentNode.remove(),T(this,_o,null),(s=u(this,Zf))==null||s.clear(),T(this,Zf,null),(a=u(this,Yu))==null||a.clear(),T(this,Yu,null),T(this,Ku,0))}}Xu=new WeakMap,Zf=new WeakMap,_o=new WeakMap,Do=new WeakMap,_i=new WeakMap,Yu=new WeakMap,Ku=new WeakMap,De=new WeakSet,yi=function(){return u(this,Zf)||T(this,Zf,new Map)},mm=function(){return u(this,Yu)||T(this,Yu,new Map)},Bh=function(){if(!u(this,_o)){const t=u(this,_i).createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const r=u(this,_i).createElementNS(io,"svg");r.setAttribute("width",0),r.setAttribute("height",0),T(this,_o,u(this,_i).createElementNS(io,"defs")),t.append(r),r.append(u(this,_o)),u(this,_i).body.append(t)}return u(this,_o)},fx=function(t){if(t.length===1){const l=t[0],d=new Array(256);for(let f=0;f<256;f++)d[f]=l[f]/255;const h=d.join(",");return[h,h,h]}const[i,r,s]=t,a=new Array(256),o=new Array(256),c=new Array(256);for(let l=0;l<256;l++)a[l]=i[l]/255,o[l]=r[l]/255,c[l]=s[l]/255;return[a.join(","),o.join(","),c.join(",")]},Lh=function(t){if(u(this,Xu)===void 0){T(this,Xu,"");const i=u(this,_i).URL;i!==u(this,_i).baseURI&&(W1(i)?Be('#createUrl: ignore "data:"-URL for performance reasons.'):T(this,Xu,L6(i,"")))}return`url(${u(this,Xu)}#${t})`},NF=function(t){const i=u(this,_i).createElementNS(io,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)},RE=function(t){const i=u(this,_i).createElementNS(io,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)},Ih=function(t){const i=u(this,_i).createElementNS(io,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),u(this,De,Bh).append(i),i},ym=function(t,i,r){const s=u(this,_i).createElementNS(io,i);s.setAttribute("type","discrete"),s.setAttribute("tableValues",r),t.append(s)},bm=function(t,i,r,s){const a=u(this,_i).createElementNS(io,"feComponentTransfer");s.append(a),O(this,De,ym).call(this,a,"feFuncR",t),O(this,De,ym).call(this,a,"feFuncG",i),O(this,De,ym).call(this,a,"feFuncB",r)},FE=function(t,i){const r=u(this,_i).createElementNS(io,"feComponentTransfer");i.append(r),O(this,De,ym).call(this,r,"feFuncA",t)},vm=function(t){return u(this,De,Bh).style.color=t,U0(getComputedStyle(u(this,De,Bh)).getPropertyValue("color"))};class jF{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Rt("Abstract method `_fetch` called.")}}class VU extends jF{async _fetch(e){const t=await C0(e,"arraybuffer");return new Uint8Array(t)}}class RF{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Rt("Abstract method `_fetch` called.")}}class GU extends RF{async _fetch(e){const t=await C0(e,"arraybuffer");return new Uint8Array(t)}}Bi&&Be("Please use the `legacy` build in Node.js environments.");async function iC(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class Bq extends UF{}class Lq extends CF{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class Iq extends kF{async _fetch(e){return iC(e)}}class Pq extends jF{async _fetch(e){return iC(e)}}class zq extends RF{async _fetch(e){return iC(e)}}const Dh="__forcedDependency",{floor:XU,ceil:YU}=Math;function wv(n,e,t,i,r,s){n[e*4+0]=Math.min(n[e*4+0],t),n[e*4+1]=Math.min(n[e*4+1],i),n[e*4+2]=Math.max(n[e*4+2],r),n[e*4+3]=Math.max(n[e*4+3],s)}const OE=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var ep,Zc;class Wq{constructor(e,t){U(this,ep);U(this,Zc);T(this,ep,e),T(this,Zc,t)}get length(){return u(this,ep).length}isEmpty(e){return u(this,ep)[e]===OE}minX(e){return u(this,Zc)[e*4+0]/256}minY(e){return u(this,Zc)[e*4+1]/256}maxX(e){return(u(this,Zc)[e*4+2]+1)/256}maxY(e){return(u(this,Zc)[e*4+3]+1)/256}}ep=new WeakMap,Zc=new WeakMap;const _v=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};var Zi,er,Qu,$s,Ju,Ao,yt,Et,Eo,tr,lb,tp,Zu,ed,So,Di,Da,ub,ME;class qq{constructor(e,t,i=!1){U(this,ub);U(this,Zi,{__proto__:null});U(this,er,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Dh]:[]});U(this,Qu,new Map);U(this,$s,[]);U(this,Ju,[]);U(this,Ao,[[1,0,0,1,0,0]]);U(this,yt,[-1/0,-1/0,1/0,1/0]);U(this,Et,new Float64Array([1/0,1/0,-1/0,-1/0]));U(this,Eo,-1);U(this,tr,new Set);U(this,lb,new Map);U(this,tp,new Map);U(this,Zu);U(this,ed);U(this,So);U(this,Di);U(this,Da);T(this,Zu,e.width),T(this,ed,e.height),O(this,ub,ME).call(this,t),i&&T(this,Da,new Map)}growOperationsCount(e){e>=u(this,Di).length&&O(this,ub,ME).call(this,e,u(this,Di))}save(e){return T(this,Zi,{__proto__:u(this,Zi)}),T(this,er,{__proto__:u(this,er),transform:{__proto__:u(this,er).transform},moveText:{__proto__:u(this,er).moveText},sameLineText:{__proto__:u(this,er).sameLineText},[Dh]:{__proto__:u(this,er)[Dh]}}),T(this,yt,{__proto__:u(this,yt)}),u(this,$s).push(e),this}restore(e){var r;const t=Object.getPrototypeOf(u(this,Zi));if(t===null)return this;T(this,Zi,t),T(this,er,Object.getPrototypeOf(u(this,er))),T(this,yt,Object.getPrototypeOf(u(this,yt)));const i=u(this,$s).pop();return i!==void 0&&((r=_v(u(this,Da),e))==null||r.dependencies.add(i),u(this,Di)[e]=u(this,Di)[i]),this}recordOpenMarker(e){return u(this,$s).push(e),this}getOpenMarker(){return u(this,$s).length===0?null:u(this,$s).at(-1)}recordCloseMarker(e){var i;const t=u(this,$s).pop();return t!==void 0&&((i=_v(u(this,Da),e))==null||i.dependencies.add(t),u(this,Di)[e]=u(this,Di)[t]),this}beginMarkedContent(e){return u(this,Ju).push(e),this}endMarkedContent(e){var i;const t=u(this,Ju).pop();return t!==void 0&&((i=_v(u(this,Da),e))==null||i.dependencies.add(t),u(this,Di)[e]=u(this,Di)[t]),this}pushBaseTransform(e){return u(this,Ao).push(Ee.multiplyByDOMMatrix(u(this,Ao).at(-1),e.getTransform())),this}popBaseTransform(){return u(this,Ao).length>1&&u(this,Ao).pop(),this}recordSimpleData(e,t){return u(this,Zi)[e]=t,this}recordIncrementalData(e,t){return u(this,er)[e].push(t),this}resetIncrementalData(e,t){return u(this,er)[e].length=0,this}recordNamedData(e,t){return u(this,Qu).set(e,t),this}recordSimpleDataFromNamed(e,t,i){u(this,Zi)[e]=u(this,Qu).get(t)??i}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Dh,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in u(this,Zi)&&this.recordFutureForcedDependency(t,u(this,Zi)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of u(this,tr))this.recordFutureForcedDependency(Dh,e);return this}resetBBox(e){return u(this,Eo)!==e&&(T(this,Eo,e),u(this,Et)[0]=1/0,u(this,Et)[1]=1/0,u(this,Et)[2]=-1/0,u(this,Et)[3]=-1/0),this}recordClipBox(e,t,i,r,s,a){const o=Ee.multiplyByDOMMatrix(u(this,Ao).at(-1),t.getTransform()),c=[1/0,1/0,-1/0,-1/0];Ee.axialAlignedBoundingBox([i,s,r,a],o,c);const l=Ee.intersect(u(this,yt),c);return l?(u(this,yt)[0]=l[0],u(this,yt)[1]=l[1],u(this,yt)[2]=l[2],u(this,yt)[3]=l[3]):(u(this,yt)[0]=u(this,yt)[1]=1/0,u(this,yt)[2]=u(this,yt)[3]=-1/0),this}recordBBox(e,t,i,r,s,a){const o=u(this,yt);if(o[0]===1/0)return this;const c=Ee.multiplyByDOMMatrix(u(this,Ao).at(-1),t.getTransform());if(o[0]===-1/0)return Ee.axialAlignedBoundingBox([i,s,r,a],c,u(this,Et)),this;const l=[1/0,1/0,-1/0,-1/0];return Ee.axialAlignedBoundingBox([i,s,r,a],c,l),u(this,Et)[0]=Math.min(u(this,Et)[0],Math.max(l[0],o[0])),u(this,Et)[1]=Math.min(u(this,Et)[1],Math.max(l[1],o[1])),u(this,Et)[2]=Math.max(u(this,Et)[2],Math.min(l[2],o[2])),u(this,Et)[3]=Math.max(u(this,Et)[3],Math.min(l[3],o[3])),this}recordCharacterBBox(e,t,i,r=1,s=0,a=0,o){const c=i.bbox;let l,d;if(c&&(l=c[2]!==c[0]&&c[3]!==c[1]&&u(this,tp).get(i),l!==!1&&(d=[0,0,0,0],Ee.axialAlignedBoundingBox(c,i.fontMatrix,d),(r!==1||s!==0||a!==0)&&Ee.scaleMinMax([r,0,0,-r,s,a],d),l)))return this.recordBBox(e,t,d[0],d[2],d[1],d[3]);if(!o)return this.recordFullPageBBox(e);const h=o();return c&&d&&l===void 0&&(l=d[0]<=s-h.actualBoundingBoxLeft&&d[2]>=s+h.actualBoundingBoxRight&&d[1]<=a-h.actualBoundingBoxAscent&&d[3]>=a+h.actualBoundingBoxDescent,u(this,tp).set(i,l),l)?this.recordBBox(e,t,d[0],d[2],d[1],d[3]):this.recordBBox(e,t,s-h.actualBoundingBoxLeft,s+h.actualBoundingBoxRight,a-h.actualBoundingBoxAscent,a+h.actualBoundingBoxDescent)}recordFullPageBBox(e){return u(this,Et)[0]=Math.max(0,u(this,yt)[0]),u(this,Et)[1]=Math.max(0,u(this,yt)[1]),u(this,Et)[2]=Math.min(u(this,Zu),u(this,yt)[2]),u(this,Et)[3]=Math.min(u(this,ed),u(this,yt)[3]),this}getSimpleIndex(e){return u(this,Zi)[e]}recordDependencies(e,t){const i=u(this,tr),r=u(this,Zi),s=u(this,er);for(const a of t)a in u(this,Zi)?i.add(r[a]):a in s&&s[a].forEach(i.add,i);return this}recordNamedDependency(e,t){return u(this,Qu).has(t)&&u(this,tr).add(u(this,Qu).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[Dh]),u(this,Da)){const i=_v(u(this,Da),e),{dependencies:r}=i;u(this,tr).forEach(r.add,r),u(this,$s).forEach(r.add,r),u(this,Ju).forEach(r.add,r),r.delete(e),i.isRenderingOperation=!0}if(u(this,Eo)===e){const i=XU(u(this,Et)[0]*256/u(this,Zu)),r=XU(u(this,Et)[1]*256/u(this,ed)),s=YU(u(this,Et)[2]*256/u(this,Zu)),a=YU(u(this,Et)[3]*256/u(this,ed));wv(u(this,So),e,i,r,s,a);for(const o of u(this,tr))o!==e&&wv(u(this,So),o,i,r,s,a);for(const o of u(this,$s))o!==e&&wv(u(this,So),o,i,r,s,a);for(const o of u(this,Ju))o!==e&&wv(u(this,So),o,i,r,s,a);t||(u(this,tr).clear(),T(this,Eo,-1))}return this}recordShowTextOperation(e,t=!1){const i=Array.from(u(this,tr));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const r of i)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(e,t=!1){return u(this,Eo)===e&&(T(this,Eo,-1),u(this,yt)[0]=Math.max(u(this,yt)[0],u(this,Et)[0]),u(this,yt)[1]=Math.max(u(this,yt)[1],u(this,Et)[1]),u(this,yt)[2]=Math.min(u(this,yt)[2],u(this,Et)[2]),u(this,yt)[3]=Math.min(u(this,yt)[3],u(this,Et)[3]),t||u(this,tr).clear()),this}_takePendingDependencies(){const e=u(this,tr);return T(this,tr,new Set),e}_extractOperation(e){const t=u(this,lb).get(e);return u(this,lb).delete(e),t}_pushPendingDependencies(e){for(const t of e)u(this,tr).add(t)}take(){return u(this,tp).clear(),new Wq(u(this,Di),u(this,So))}takeDebugMetadata(){return u(this,Da)}}Zi=new WeakMap,er=new WeakMap,Qu=new WeakMap,$s=new WeakMap,Ju=new WeakMap,Ao=new WeakMap,yt=new WeakMap,Et=new WeakMap,Eo=new WeakMap,tr=new WeakMap,lb=new WeakMap,tp=new WeakMap,Zu=new WeakMap,ed=new WeakMap,So=new WeakMap,Di=new WeakMap,Da=new WeakMap,ub=new WeakSet,ME=function(e,t){const i=new ArrayBuffer(e*4);T(this,So,new Uint8ClampedArray(i)),T(this,Di,new Uint32Array(i)),t&&t.length>0?(u(this,Di).set(t),u(this,Di).fill(OE,t.length)):u(this,Di).fill(OE)};var Nt,sn,Hs,np,ip;const Uk=class Uk{constructor(e,t,i){U(this,Nt);U(this,sn);U(this,Hs);U(this,np,0);U(this,ip,0);if(e instanceof Uk&&u(e,Hs)===!!i)return e;T(this,Nt,e),T(this,sn,t),T(this,Hs,!!i)}growOperationsCount(){throw new Error("Unreachable")}save(e){return Tn(this,ip)._++,u(this,Nt).save(u(this,sn)),this}restore(e){return u(this,ip)>0&&(u(this,Nt).restore(u(this,sn)),Tn(this,ip)._--),this}recordOpenMarker(e){return Tn(this,np)._++,this}getOpenMarker(){return u(this,np)>0?u(this,sn):u(this,Nt).getOpenMarker()}recordCloseMarker(e){return Tn(this,np)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return u(this,Nt).pushBaseTransform(e),this}popBaseTransform(){return u(this,Nt).popBaseTransform(),this}recordSimpleData(e,t){return u(this,Nt).recordSimpleData(e,u(this,sn)),this}recordIncrementalData(e,t){return u(this,Nt).recordIncrementalData(e,u(this,sn)),this}resetIncrementalData(e,t){return u(this,Nt).resetIncrementalData(e,u(this,sn)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,i){return u(this,Nt).recordSimpleDataFromNamed(e,t,u(this,sn)),this}recordFutureForcedDependency(e,t){return u(this,Nt).recordFutureForcedDependency(e,u(this,sn)),this}inheritSimpleDataAsFutureForcedDependencies(e){return u(this,Nt).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return u(this,Nt).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return u(this,Hs)||u(this,Nt).resetBBox(u(this,sn)),this}recordClipBox(e,t,i,r,s,a){return u(this,Hs)||u(this,Nt).recordClipBox(u(this,sn),t,i,r,s,a),this}recordBBox(e,t,i,r,s,a){return u(this,Hs)||u(this,Nt).recordBBox(u(this,sn),t,i,r,s,a),this}recordCharacterBBox(e,t,i,r,s,a,o){return u(this,Hs)||u(this,Nt).recordCharacterBBox(u(this,sn),t,i,r,s,a,o),this}recordFullPageBBox(e){return u(this,Hs)||u(this,Nt).recordFullPageBBox(u(this,sn)),this}getSimpleIndex(e){return u(this,Nt).getSimpleIndex(e)}recordDependencies(e,t){return u(this,Nt).recordDependencies(u(this,sn),t),this}recordNamedDependency(e,t){return u(this,Nt).recordNamedDependency(u(this,sn),t),this}recordOperation(e){return u(this,Nt).recordOperation(u(this,sn),!0),this}recordShowTextOperation(e){return u(this,Nt).recordShowTextOperation(u(this,sn),!0),this}bboxToClipBoxDropOperation(e){return u(this,Hs)||u(this,Nt).bboxToClipBoxDropOperation(u(this,sn),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Nt=new WeakMap,sn=new WeakMap,Hs=new WeakMap,np=new WeakMap,ip=new WeakMap;let U2=Uk;const rs={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},si={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function BE(n,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,i),n.clip(r)}class rC{isModifyingCurrentTransform(){return!1}getPattern(){Rt("Abstract method `getPattern` called.")}}class $q extends rC{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,r){let s;if(r===si.STROKE||r===si.FILL){const a=t.current.getClippedPathBoundingBox(r,en(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,l=t.cachedCanvases.getCanvas("pattern",o,c),d=l.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-a[0],-a[1]),i=Ee.transform(i,[1,0,0,1,a[0],a[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),BE(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),s=e.createPattern(l.canvas,"no-repeat");const h=new DOMMatrix(i);s.setTransform(h)}else BE(e,this._bbox),s=this._createGradient(e);return s}}function R_(n,e,t,i,r,s,a,o){const c=e.coords,l=e.colors,d=n.data,h=n.width*4;let f;c[t+1]>c[i+1]&&(f=t,t=i,i=f,f=s,s=a,a=f),c[i+1]>c[r+1]&&(f=i,i=r,r=f,f=a,a=o,o=f),c[t+1]>c[i+1]&&(f=t,t=i,i=f,f=s,s=a,a=f);const g=(c[t]+e.offsetX)*e.scaleX,v=(c[t+1]+e.offsetY)*e.scaleY,y=(c[i]+e.offsetX)*e.scaleX,x=(c[i+1]+e.offsetY)*e.scaleY,m=(c[r]+e.offsetX)*e.scaleX,b=(c[r+1]+e.offsetY)*e.scaleY;if(v>=b)return;const w=l[s],_=l[s+1],D=l[s+2],A=l[a],E=l[a+1],F=l[a+2],I=l[o],z=l[o+1],H=l[o+2],k=Math.round(v),W=Math.round(b);let S,G,j,M,R,N,B,L;for(let P=k;P<=W;P++){if(P<x){const ye=P<v?0:(v-P)/(v-x);S=g-(g-y)*ye,G=w-(w-A)*ye,j=_-(_-E)*ye,M=D-(D-F)*ye}else{let ye;P>b?ye=1:x===b?ye=0:ye=(x-P)/(x-b),S=y-(y-m)*ye,G=A-(A-I)*ye,j=E-(E-z)*ye,M=F-(F-H)*ye}let q;P<v?q=0:P>b?q=1:q=(v-P)/(v-b),R=g-(g-m)*q,N=w-(w-I)*q,B=_-(_-z)*q,L=D-(D-H)*q;const Q=Math.round(Math.min(S,R)),se=Math.round(Math.max(S,R));let be=h*P+Q*4;for(let ye=Q;ye<=se;ye++)q=(S-ye)/(S-R),q<0?q=0:q>1&&(q=1),d[be++]=G-(G-N)*q|0,d[be++]=j-(j-B)*q|0,d[be++]=M-(M-L)*q|0,d[be++]=255}}function Hq(n,e,t){const i=e.coords,r=e.colors;let s,a;switch(e.type){case cE.LATTICE:const o=e.verticesPerRow,c=Math.floor(i.length/o)-1,l=o-1;for(s=0;s<c;s++){let d=s*o;for(let h=0;h<l;h++,d++)R_(n,t,i[d],i[d+1],i[d+o],r[d],r[d+1],r[d+o]),R_(n,t,i[d+o+1],i[d+1],i[d+o],r[d+o+1],r[d+1],r[d+o])}break;case cE.TRIANGLES:for(s=0,a=i.length;s<a;s+=3)R_(n,t,i[s],i[s+1],i[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class Vq extends rC{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,i){const o=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),l=Math.ceil(this._bounds[2])-o,d=Math.ceil(this._bounds[3])-c,h=Math.min(Math.ceil(Math.abs(l*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),g=l/h,v=d/f,y={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-c,scaleX:1/g,scaleY:1/v},x=h+2*2,m=f+2*2,b=i.getCanvas("mesh",x,m),w=b.context,_=w.createImageData(h,f);if(t){const A=_.data;for(let E=0,F=A.length;E<F;E+=4)A[E]=t[0],A[E+1]=t[1],A[E+2]=t[2],A[E+3]=255}for(const A of this._figures)Hq(_,A,y);return w.putImageData(_,2,2),{canvas:b.canvas,offsetX:o-2*g,offsetY:c-2*v,scaleX:g,scaleY:v}}isModifyingCurrentTransform(){return!0}getPattern(e,t,i,r){BE(e,this._bbox);const s=new Float32Array(2);if(r===si.SHADING)Ee.singularValueDecompose2dScale(en(e),s);else if(this.matrix){Ee.singularValueDecompose2dScale(this.matrix,s);const[o,c]=s;Ee.singularValueDecompose2dScale(t.baseTransform,s),s[0]*=o,s[1]*=c}else Ee.singularValueDecompose2dScale(t.baseTransform,s);const a=this._createMeshCanvas(s,r===si.SHADING?null:this._background,t.cachedCanvases);return r!==si.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class Gq extends rC{getPattern(){return"hotpink"}}function Xq(n){switch(n[0]){case"RadialAxial":return new $q(n);case"Mesh":return new Vq(n);case"Dummy":return new Gq}throw new Error(`Unknown IR type: ${n[0]}`)}const KU={COLORED:1,UNCOLORED:2},i1=class i1{constructor(e,t,i,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(e,t){var N,B;const{bbox:i,operatorList:r,paintType:s,tilingType:a,color:o,canvasGraphicsFactory:c}=this;let{xstep:l,ystep:d}=this;l=Math.abs(l),d=Math.abs(d),z1("TilingType: "+a);const h=i[0],f=i[1],g=i[2],v=i[3],y=g-h,x=v-f,m=new Float32Array(2);Ee.singularValueDecompose2dScale(this.matrix,m);const[b,w]=m;Ee.singularValueDecompose2dScale(this.baseTransform,m);const _=b*m[0],D=w*m[1];let A=y,E=x,F=!1,I=!1;const z=Math.ceil(l*_),H=Math.ceil(d*D),k=Math.ceil(y*_),W=Math.ceil(x*D);z>=k?A=l:F=!0,H>=W?E=d:I=!0;const S=this.getSizeAndScale(A,this.ctx.canvas.width,_),G=this.getSizeAndScale(E,this.ctx.canvas.height,D),j=e.cachedCanvases.getCanvas("pattern",S.size,G.size),M=j.context,R=c.createCanvasGraphics(M,t);if(R.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(R,s,o),M.translate(-S.scale*h,-G.scale*f),R.transform(0,S.scale,0,0,G.scale,0,0),M.save(),(N=R.dependencyTracker)==null||N.save(),this.clipBbox(R,h,f,g,v),R.baseTransform=en(R.ctx),R.executeOperatorList(r),R.endDrawing(),(B=R.dependencyTracker)==null||B.restore(),M.restore(),F||I){const L=j.canvas;F&&(A=l),I&&(E=d);const P=this.getSizeAndScale(A,this.ctx.canvas.width,_),q=this.getSizeAndScale(E,this.ctx.canvas.height,D),Q=P.size,se=q.size,be=e.cachedCanvases.getCanvas("pattern-workaround",Q,se),ye=be.context,fe=F?Math.floor(y/l):0,xe=I?Math.floor(x/d):0;for(let ce=0;ce<=fe;ce++)for(let le=0;le<=xe;le++)ye.drawImage(L,Q*ce,se*le,Q,se,0,0,Q,se);return{canvas:be.canvas,scaleX:P.scale,scaleY:q.scale,offsetX:h,offsetY:f}}return{canvas:j.canvas,scaleX:S.scale,scaleY:G.scale,offsetX:h,offsetY:f}}getSizeAndScale(e,t,i){const r=Math.max(i1.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*i);return s>=r?s=r:i=s/e,{scale:i,size:s}}clipBbox(e,t,i,r,s){const a=r-t,o=s-i;e.ctx.rect(t,i,a,o),Ee.axialAlignedBoundingBox([t,i,r,s],en(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const r=e.ctx,s=e.current;switch(t){case KU.COLORED:const{fillStyle:a,strokeStyle:o}=this.ctx;r.fillStyle=s.fillColor=a,r.strokeStyle=s.strokeColor=o;break;case KU.UNCOLORED:r.fillStyle=r.strokeStyle=i,s.fillColor=s.strokeColor=i;break;default:throw new oq(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,i,r,s){let a=i;r!==si.SHADING&&(a=Ee.transform(a,t.baseTransform),this.matrix&&(a=Ee.transform(a,this.matrix)));const o=this.createPatternCanvas(t,s);let c=new DOMMatrix(a);c=c.translate(o.offsetX,o.offsetY),c=c.scale(1/o.scaleX,1/o.scaleY);const l=e.createPattern(o.canvas,"repeat");return l.setTransform(c),l}};ve(i1,"MAX_PATTERN_SIZE",3e3);let LE=i1;function Yq({src:n,srcPos:e=0,dest:t,width:i,height:r,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const o=hi.isLittleEndian?4278190080:255,[c,l]=a?[s,o]:[o,s],d=i>>3,h=i&7,f=n.length;t=new Uint32Array(t.buffer);let g=0;for(let v=0;v<r;v++){for(const x=e+d;e<x;e++){const m=e<f?n[e]:255;t[g++]=m&128?l:c,t[g++]=m&64?l:c,t[g++]=m&32?l:c,t[g++]=m&16?l:c,t[g++]=m&8?l:c,t[g++]=m&4?l:c,t[g++]=m&2?l:c,t[g++]=m&1?l:c}if(h===0)continue;const y=e<f?n[e++]:255;for(let x=0;x<h;x++)t[g++]=y&1<<7-x?l:c}return{srcPos:e,destPos:g}}const QU=16,JU=100,Kq=15,ZU=10,cr=16,F_=new DOMMatrix,Wr=new Float32Array(2),nf=new Float32Array([1/0,1/0,-1/0,-1/0]);function Qq(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,i){e.translate(t,i),this.__originalTranslate(t,i)},n.scale=function(t,i){e.scale(t,i),this.__originalScale(t,i)},n.transform=function(t,i,r,s,a,o){e.transform(t,i,r,s,a,o),this.__originalTransform(t,i,r,s,a,o)},n.setTransform=function(t,i,r,s,a,o){e.setTransform(t,i,r,s,a,o),this.__originalSetTransform(t,i,r,s,a,o)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},n.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},n.bezierCurveTo=function(t,i,r,s,a,o){e.bezierCurveTo(t,i,r,s,a,o),this.__originalBezierCurveTo(t,i,r,s,a,o)},n.rect=function(t,i,r,s){e.rect(t,i,r,s),this.__originalRect(t,i,r,s)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class Jq{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,i)):(r=this.canvasFactory.create(t,i),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Dv(n,e,t,i,r,s,a,o,c,l){const[d,h,f,g,v,y]=en(n);if(h===0&&f===0){const b=a*d+v,w=Math.round(b),_=o*g+y,D=Math.round(_),A=(a+c)*d+v,E=Math.abs(Math.round(A)-w)||1,F=(o+l)*g+y,I=Math.abs(Math.round(F)-D)||1;return n.setTransform(Math.sign(d),0,0,Math.sign(g),w,D),n.drawImage(e,t,i,r,s,0,0,E,I),n.setTransform(d,h,f,g,v,y),[E,I]}if(d===0&&g===0){const b=o*f+v,w=Math.round(b),_=a*h+y,D=Math.round(_),A=(o+l)*f+v,E=Math.abs(Math.round(A)-w)||1,F=(a+c)*h+y,I=Math.abs(Math.round(F)-D)||1;return n.setTransform(0,Math.sign(h),Math.sign(f),0,w,D),n.drawImage(e,t,i,r,s,0,0,I,E),n.setTransform(d,h,f,g,v,y),[I,E]}n.drawImage(e,t,i,r,s,a,o,c,l);const x=Math.hypot(d,h),m=Math.hypot(f,g);return[x*c,m*l]}class eN{constructor(e,t,i){ve(this,"alphaIsShape",!1);ve(this,"fontSize",0);ve(this,"fontSizeScale",1);ve(this,"textMatrix",null);ve(this,"textMatrixScale",1);ve(this,"fontMatrix",oE);ve(this,"leading",0);ve(this,"x",0);ve(this,"y",0);ve(this,"lineX",0);ve(this,"lineY",0);ve(this,"charSpacing",0);ve(this,"wordSpacing",0);ve(this,"textHScale",1);ve(this,"textRenderingMode",Qn.FILL);ve(this,"textRise",0);ve(this,"fillColor","#000000");ve(this,"strokeColor","#000000");ve(this,"patternFill",!1);ve(this,"patternStroke",!1);ve(this,"fillAlpha",1);ve(this,"strokeAlpha",1);ve(this,"lineWidth",1);ve(this,"activeSMask",null);ve(this,"transferMaps","none");i==null||i(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=nf.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=si.FILL,t=null){const i=this.minMax.slice();if(e===si.STROKE){t||Rt("Stroke bounding box must include transform."),Ee.singularValueDecompose2dScale(t,Wr);const r=Wr[0]*this.lineWidth/2,s=Wr[1]*this.lineWidth/2;i[0]-=r,i[1]-=s,i[2]+=r,i[3]+=s}return i}updateClipFromPath(){const e=Ee.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(nf,0)}getClippedPathBoundingBox(e=si.FILL,t=null){return Ee.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function tN(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,i=e.width,r=t%cr,s=(t-r)/cr,a=r===0?s:s+1,o=n.createImageData(i,cr);let c=0,l;const d=e.data,h=o.data;let f,g,v,y;if(e.kind===ix.GRAYSCALE_1BPP){const x=d.byteLength,m=new Uint32Array(h.buffer,0,h.byteLength>>2),b=m.length,w=i+7>>3,_=4294967295,D=hi.isLittleEndian?4278190080:255;for(f=0;f<a;f++){for(v=f<s?cr:r,l=0,g=0;g<v;g++){const A=x-c;let E=0;const F=A>w?i:A*8-7,I=F&-8;let z=0,H=0;for(;E<I;E+=8)H=d[c++],m[l++]=H&128?_:D,m[l++]=H&64?_:D,m[l++]=H&32?_:D,m[l++]=H&16?_:D,m[l++]=H&8?_:D,m[l++]=H&4?_:D,m[l++]=H&2?_:D,m[l++]=H&1?_:D;for(;E<F;E++)z===0&&(H=d[c++],z=128),m[l++]=H&z?_:D,z>>=1}for(;l<b;)m[l++]=0;n.putImageData(o,0,f*cr)}}else if(e.kind===ix.RGBA_32BPP){for(g=0,y=i*cr*4,f=0;f<s;f++)h.set(d.subarray(c,c+y)),c+=y,n.putImageData(o,0,g),g+=cr;f<a&&(y=i*r*4,h.set(d.subarray(c,c+y)),n.putImageData(o,0,g))}else if(e.kind===ix.RGB_24BPP)for(v=cr,y=i*v,f=0;f<a;f++){for(f>=s&&(v=r,y=i*v),l=0,g=y;g--;)h[l++]=d[c++],h[l++]=d[c++],h[l++]=d[c++],h[l++]=255;n.putImageData(o,0,f*cr)}else throw new Error(`bad image kind: ${e.kind}`)}function nN(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,r=t%cr,s=(t-r)/cr,a=r===0?s:s+1,o=n.createImageData(i,cr);let c=0;const l=e.data,d=o.data;for(let h=0;h<a;h++){const f=h<s?cr:r;({srcPos:c}=Yq({src:l,srcPos:c,dest:d,width:i,height:f,nonBlackColor:0})),n.putImageData(o,0,h*cr)}}function $g(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)n[i]!==void 0&&(e[i]=n[i]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Av(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function iN(n,e){if(e)return!0;Ee.singularValueDecompose2dScale(n,Wr);const t=Math.fround(Wa.pixelRatio*Hl.PDF_TO_CSS_UNITS);return Wr[0]<=t&&Wr[1]<=t}const Zq=["butt","round","square"],e$=["miter","round","bevel"],t$={},rN={};var ia,IE,PE,zE;const Nk=class Nk{constructor(e,t,i,r,s,{optionalContentConfig:a,markedContentStack:o=null},c,l,d){U(this,ia);this.ctx=e,this.current=new eN(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=r,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new Jq(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=l,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=d??null}getObject(e,t,i=null){var r;return typeof t=="string"?((r=this.dependencyTracker)==null||r.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):i}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:r=null}){const s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=o,i){const c=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...en(this.compositeCtx))}this.ctx.save(),Av(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=en(this.ctx)}executeOperatorList(e,t,i,r,s){var m;const a=e.argsArray,o=e.fnArray;let c=t||0;const l=a.length;if(l===c)return c;const d=l-c>ZU&&typeof i=="function",h=d?Date.now()+Kq:0;let f=0;const g=this.commonObjs,v=this.objs;let y,x;for(;;){if(r!==void 0&&c===r.nextBreakPoint)return r.breakIt(c,i),c;if(!s||s(c))if(y=o[c],x=a[c]??null,y!==oy.dependency)x===null?this[y](c):this[y](c,...x);else for(const b of x){(m=this.dependencyTracker)==null||m.recordNamedData(b,c);const w=b.startsWith("g_")?g:v;if(!w.has(b))return w.get(b,i),c}if(c++,c===l)return c;if(d&&++f>ZU){if(Date.now()>h)return i(),c;f=0}}}endDrawing(){O(this,ia,IE).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),O(this,ia,PE).call(this)}_scaleImage(e,t){const i=e.width??e.displayWidth,r=e.height??e.displayHeight;let s=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=i,c=r,l="prescale1",d,h;for(;s>2&&o>1||a>2&&c>1;){let f=o,g=c;s>2&&o>1&&(f=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),s/=o/f),a>2&&c>1&&(g=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/g),d=this.cachedCanvases.getCanvas(l,f,g),h=d.context,h.clearRect(0,0,f,g),h.drawImage(e,0,0,o,c,0,0,f,g),e=d.canvas,o=f,c=g,l=l==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:c}}_createMaskCanvas(e,t){var z,H;const i=this.ctx,{width:r,height:s}=t,a=this.current.fillColor,o=this.current.patternFill,c=en(i);let l,d,h,f;if((t.bitmap||t.data)&&t.count>1){const k=t.bitmap||t.data.buffer;d=JSON.stringify(o?c:[c.slice(0,4),a]),l=this._cachedBitmapsMap.get(k),l||(l=new Map,this._cachedBitmapsMap.set(k,l));const W=l.get(d);if(W&&!o){const S=Math.round(Math.min(c[0],c[2])+c[4]),G=Math.round(Math.min(c[1],c[3])+c[5]);return(z=this.dependencyTracker)==null||z.recordDependencies(e,rs.transformAndFill),{canvas:W,offsetX:S,offsetY:G}}h=W}h||(f=this.cachedCanvases.getCanvas("maskCanvas",r,s),nN(f.context,t));let g=Ee.transform(c,[1/r,0,0,-1/s,0,0]);g=Ee.transform(g,[1,0,0,1,0,-s]);const v=nf.slice();Ee.axialAlignedBoundingBox([0,0,r,s],g,v);const[y,x,m,b]=v,w=Math.round(m-y)||1,_=Math.round(b-x)||1,D=this.cachedCanvases.getCanvas("fillCanvas",w,_),A=D.context,E=y,F=x;A.translate(-E,-F),A.transform(...g),h||(h=this._scaleImage(f.canvas,ca(A)),h=h.img,l&&o&&l.set(d,h)),A.imageSmoothingEnabled=iN(en(A),t.interpolate),Dv(A,h,0,0,h.width,h.height,0,0,r,s),A.globalCompositeOperation="source-in";const I=Ee.transform(ca(A),[1,0,0,1,-E,-F]);return A.fillStyle=o?a.getPattern(i,this,I,si.FILL,e):a,A.fillRect(0,0,r,s),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(d,D.canvas)),(H=this.dependencyTracker)==null||H.recordDependencies(e,rs.transformAndFill),{canvas:D.canvas,offsetX:Math.round(E),offsetY:Math.round(F)}}setLineWidth(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("lineCap",e),this.ctx.lineCap=Zq[t]}setLineJoin(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("lineJoin",e),this.ctx.lineJoin=e$[t]}setMiterLimit(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,i){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("dash",e);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(t),r.lineDashOffset=i)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var i,r,s,a,o;for(const[c,l]of t)switch(c){case"LW":this.setLineWidth(e,l);break;case"LC":this.setLineCap(e,l);break;case"LJ":this.setLineJoin(e,l);break;case"ML":this.setMiterLimit(e,l);break;case"D":this.setDash(e,l[0],l[1]);break;case"RI":this.setRenderingIntent(e,l);break;case"FL":this.setFlatness(e,l);break;case"Font":this.setFont(e,l[0],l[1]);break;case"CA":(i=this.dependencyTracker)==null||i.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=l;break;case"ca":(r=this.dependencyTracker)==null||r.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=l;break;case"BM":(s=this.dependencyTracker)==null||s.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=l;break;case"SMask":(a=this.dependencyTracker)==null||a.recordSimpleData("SMask",e),this.current.activeSMask=l?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(o=this.dependencyTracker)==null||o.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(l);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,i=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(r,t,i);this.suspendedCtx=this.ctx;const a=this.ctx=s.context;a.setTransform(this.suspendedCtx.getTransform()),$g(this.suspendedCtx,a),Qq(a,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),$g(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,r){const s=r[0],a=r[1],o=r[2]-s,c=r[3]-a;o===0||c===0||(this.genericComposeSMask(t.context,i,o,c,t.subtype,t.backdrop,t.transferMap,s,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,r,s,a,o,c,l,d,h){let f=e.canvas,g=c-d,v=l-h;if(a)if(g<0||v<0||g+i>f.width||v+r>f.height){const x=this.cachedCanvases.getCanvas("maskExtension",i,r),m=x.context;m.drawImage(f,-g,-v),m.globalCompositeOperation="destination-atop",m.fillStyle=a,m.fillRect(0,0,i,r),m.globalCompositeOperation="source-over",f=x.canvas,g=v=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const x=new Path2D;x.rect(g,v,i,r),e.clip(x),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(g,v,i,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const y=new Path2D;y.rect(c,l,i,r),t.clip(y),t.globalCompositeOperation="destination-in",t.drawImage(f,g,v,i,r,c,l,i,r),t.restore()}save(e){var i;this.inSMaskMode&&$g(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(i=this.dependencyTracker)==null||i.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&$g(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,i,r,s,a,o){var c;(c=this.dependencyTracker)==null||c.recordIncrementalData("transform",e),this.ctx.transform(t,i,r,s,a,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i,r){let[s]=i;if(!r){s||(s=i[0]=new Path2D),this[t](e,s);return}if(this.dependencyTracker!==null){const a=t===oy.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,r[0]-a,r[2]+a,r[1]-a,r[3]+a).recordDependencies(e,["transform"])}s instanceof Path2D||(s=i[0]=$6(s)),Ee.axialAlignedBoundingBox(r,en(this.ctx),this.current.minMax),this[t](e,s),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,i=!0){var a;const r=this.ctx,s=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s!=null&&s.getPattern)){const o=s.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=s.getPattern(r,this,ca(r),si.STROKE,e),o){const c=new Path2D;c.addPath(t,r.getTransform().invertSelf().multiplySelf(o)),t=c}this.rescaleAndStroke(t,!1),r.restore()}else this.rescaleAndStroke(t,!0);(a=this.dependencyTracker)==null||a.recordDependencies(e,rs.stroke),i&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(si.STROKE,en(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,i=!0){var l,d,h;const r=this.ctx,s=this.current.fillColor,a=this.current.patternFill;let o=!1;if(a){const f=s.isModifyingCurrentTransform()?r.getTransform():null;if((l=this.dependencyTracker)==null||l.save(e),r.save(),r.fillStyle=s.getPattern(r,this,ca(r),si.FILL,e),f){const g=new Path2D;g.addPath(t,r.getTransform().invertSelf().multiplySelf(f)),t=g}o=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(r.fill(t,"evenodd"),this.pendingEOFill=!1):r.fill(t)),(d=this.dependencyTracker)==null||d.recordDependencies(e,rs.fill),o&&(r.restore(),(h=this.dependencyTracker)==null||h.restore(e)),i&&this.consumePath(e,t,c)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var i;this.ctx.fill(t),(i=this.dependencyTracker)==null||i.recordDependencies(e,rs.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=t$}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=rN}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;t!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",e),r.recordCloseMarker(e)}if(t!==void 0){const r=new Path2D,s=i.getTransform().invertSelf();for(const{transform:a,x:o,y:c,fontSize:l,path:d}of t)d&&r.addPath(d,new DOMMatrix(a).preMultiplySelf(s).translate(o,c).scale(l,-l));i.clip(r)}delete this.pendingTextPaths}setCharSpacing(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,i){var h,f;(h=this.dependencyTracker)==null||h.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const r=this.commonObjs.get(t),s=this.current;if(!r)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=r.fontMatrix||oE,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&Be("Invalid font matrix for font "+t),i<0?(i=-i,s.fontDirection=-1):s.fontDirection=1,this.current.font=r,this.current.fontSize=i,r.isType3Font)return;const a=r.loadedName||"sans-serif",o=((f=r.systemFontInfo)==null?void 0:f.css)||`"${a}", ${r.fallbackName}`;let c="normal";r.black?c="900":r.bold&&(c="bold");const l=r.italic?"italic":"normal";let d=i;i<QU?d=QU:i>JU&&(d=JU),this.current.fontSizeScale=i/d,this.ctx.font=`${l} ${c} ${d}px ${o}`}setTextRenderingMode(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,i){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=i}setLeadingMoveText(e,t,i){this.setLeading(e,-i),this.moveText(e,t,i)}setTextMatrix(e,t){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:i}=this;i.textMatrix=t,i.textMatrixScale=Math.hypot(t[0],t[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,i,r,s,a){var m,b,w,_;const o=this.ctx,c=this.current,l=c.font,d=c.textRenderingMode,h=c.fontSize/c.fontSizeScale,f=d&Qn.FILL_STROKE_MASK,g=!!(d&Qn.ADD_TO_PATH_FLAG),v=c.patternFill&&!l.missingFile,y=c.patternStroke&&!l.missingFile;let x;if((l.disableFontFace||g||v||y)&&!l.missingFile&&(x=l.getPathGenerator(this.commonObjs,t)),x&&(l.disableFontFace||v||y)){o.save(),o.translate(i,r),o.scale(h,-h),(m=this.dependencyTracker)==null||m.recordCharacterBBox(e,o,l);let D;if(f===Qn.FILL||f===Qn.FILL_STROKE)if(s){D=o.getTransform(),o.setTransform(...s);const A=O(this,ia,zE).call(this,x,D,s);o.fill(A)}else o.fill(x);if(f===Qn.STROKE||f===Qn.FILL_STROKE)if(a){D||(D=o.getTransform()),o.setTransform(...a);const{a:A,b:E,c:F,d:I}=D,z=Ee.inverseTransform(a),H=Ee.transform([A,E,F,I,0,0],z);Ee.singularValueDecompose2dScale(H,Wr),o.lineWidth*=Math.max(Wr[0],Wr[1])/h,o.stroke(O(this,ia,zE).call(this,x,D,a))}else o.lineWidth/=h,o.stroke(x);o.restore()}else(f===Qn.FILL||f===Qn.FILL_STROKE)&&(o.fillText(t,i,r),(b=this.dependencyTracker)==null||b.recordCharacterBBox(e,o,l,h,i,r,()=>o.measureText(t))),(f===Qn.STROKE||f===Qn.FILL_STROKE)&&(this.dependencyTracker&&((w=this.dependencyTracker)==null||w.recordCharacterBBox(e,o,l,h,i,r,()=>o.measureText(t)).recordDependencies(e,rs.stroke)),o.strokeText(t,i,r));g&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:en(o),x:i,y:r,fontSize:h,path:x}),(_=this.dependencyTracker)==null||_.recordCharacterBBox(e,o,l,h,i,r))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){i=!0;break}return Le(this,"isFontSubpixelAAEnabled",i)}showText(e,t){var F,I,z,H;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,rs.showText).resetBBox(e),this.current.textRenderingMode&Qn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,r=i.font;if(r.isType3Font){this.showType3Text(e,t),(F=this.dependencyTracker)==null||F.recordShowTextOperation(e);return}const s=i.fontSize;if(s===0){(I=this.dependencyTracker)==null||I.recordOperation(e);return}const a=this.ctx,o=i.fontSizeScale,c=i.charSpacing,l=i.wordSpacing,d=i.fontDirection,h=i.textHScale*d,f=t.length,g=r.vertical,v=g?1:-1,y=r.defaultVMetrics,x=s*i.fontMatrix[0],m=i.textRenderingMode===Qn.FILL&&!r.disableFontFace&&!i.patternFill;a.save(),i.textMatrix&&a.transform(...i.textMatrix),a.translate(i.x,i.y+i.textRise),d>0?a.scale(h,-1):a.scale(h,1);let b,w;if(i.patternFill){a.save();const k=i.fillColor.getPattern(a,this,ca(a),si.FILL,e);b=en(a),a.restore(),a.fillStyle=k}if(i.patternStroke){a.save();const k=i.strokeColor.getPattern(a,this,ca(a),si.STROKE,e);w=en(a),a.restore(),a.strokeStyle=k}let _=i.lineWidth;const D=i.textMatrixScale;if(D===0||_===0){const k=i.textRenderingMode&Qn.FILL_STROKE_MASK;(k===Qn.STROKE||k===Qn.FILL_STROKE)&&(_=this.getSinglePixelWidth())}else _/=D;if(o!==1&&(a.scale(o,o),_/=o),a.lineWidth=_,r.isInvalidPDFjsFont){const k=[];let W=0;for(const G of t)k.push(G.unicode),W+=G.width;const S=k.join("");if(a.fillText(S,0,0),this.dependencyTracker!==null){const G=a.measureText(S);this.dependencyTracker.recordBBox(e,this.ctx,-G.actualBoundingBoxLeft,G.actualBoundingBoxRight,-G.actualBoundingBoxAscent,G.actualBoundingBoxDescent).recordShowTextOperation(e)}i.x+=W*x*h,a.restore(),this.compose();return}let A=0,E;for(E=0;E<f;++E){const k=t[E];if(typeof k=="number"){A+=v*k*s/1e3;continue}let W=!1;const S=(k.isSpace?l:0)+c,G=k.fontChar,j=k.accent;let M,R,N=k.width;if(g){const P=k.vmetric||y,q=-(k.vmetric?P[1]:N*.5)*x,Q=P[2]*x;N=P?-P[0]:N,M=q/o,R=(A+Q)/o}else M=A/o,R=0;let B;if(r.remeasure&&N>0){B=a.measureText(G);const P=B.width*1e3/s*o;if(N<P&&this.isFontSubpixelAAEnabled){const q=N/P;W=!0,a.save(),a.scale(q,1),M/=q}else N!==P&&(M+=(N-P)/2e3*s/o)}if(this.contentVisible&&(k.isInFont||r.missingFile)){if(m&&!j)a.fillText(G,M,R),(z=this.dependencyTracker)==null||z.recordCharacterBBox(e,a,B?{bbox:null}:r,s/o,M,R,()=>B??a.measureText(G));else if(this.paintChar(e,G,M,R,b,w),j){const P=M+s*j.offset.x/o,q=R-s*j.offset.y/o;this.paintChar(e,j.fontChar,P,q,b,w)}}const L=g?N*x-S*d:N*x+S*d;A+=L,W&&a.restore()}g?i.y-=A:i.x+=A*h,a.restore(),this.compose(),(H=this.dependencyTracker)==null||H.recordShowTextOperation(e)}showType3Text(e,t){const i=this.ctx,r=this.current,s=r.font,a=r.fontSize,o=r.fontDirection,c=s.vertical?1:-1,l=r.charSpacing,d=r.wordSpacing,h=r.textHScale*o,f=r.fontMatrix||oE,g=t.length,v=r.textRenderingMode===Qn.INVISIBLE;let y,x,m,b;if(v||a===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),r.textMatrix&&i.transform(...r.textMatrix),i.translate(r.x,r.y+r.textRise),i.scale(h,o);const w=this.dependencyTracker;for(this.dependencyTracker=w?new U2(w,e):null,y=0;y<g;++y){if(x=t[y],typeof x=="number"){b=c*x*a/1e3,this.ctx.translate(b,0),r.x+=b*h;continue}const _=(x.isSpace?d:0)+l,D=s.charProcOperatorList[x.operatorListId];D?this.contentVisible&&(this.save(),i.scale(a,a),i.transform(...f),this.executeOperatorList(D),this.restore()):Be(`Type3 character "${x.operatorListId}" is not available.`);const A=[x.width,0];Ee.applyTransform(A,f),m=A[0]*a+_,i.translate(m,0),r.x+=m*h}i.restore(),w&&(this.dependencyTracker=w)}setCharWidth(e,t,i){}setCharWidthAndBounds(e,t,i,r,s,a,o){var l;const c=new Path2D;c.rect(r,s,a-r,o-s),this.ctx.clip(c),(l=this.dependencyTracker)==null||l.recordBBox(e,this.ctx,r,a,s,o).recordClipBox(e,this.ctx,r,a,s,o),this.endPath(e)}getColorN_Pattern(e,t){let i;if(t[0]==="TilingPattern"){const r=this.baseTransform||en(this.ctx),s={createCanvasGraphics:(a,o)=>new Nk(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new U2(this.dependencyTracker,o,!0):null)};i=new LE(t,this.ctx,s,r)}else i=this._getPattern(e,t[1],t[2]);return i}setStrokeColorN(e,...t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,i=null){let r;return this.cachedPatterns.has(t)?r=this.cachedPatterns.get(t):(r=Xq(this.getObject(e,t)),this.cachedPatterns.set(t,r)),i&&(r.matrix=i),r}shadingFill(e,t){var a;if(!this.contentVisible)return;const i=this.ctx;this.save(e);const r=this._getPattern(e,t);i.fillStyle=r.getPattern(i,this,ca(i),si.SHADING,e);const s=ca(i);if(s){const{width:o,height:c}=i.canvas,l=nf.slice();Ee.axialAlignedBoundingBox([0,0,o,c],s,l);const[d,h,f,g]=l;this.ctx.fillRect(d,h,f-d,g-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(a=this.dependencyTracker)==null||a.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,rs.transform).recordDependencies(e,rs.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Rt("Should not call beginInlineImage")}beginImageData(){Rt("Should not call beginImageData")}paintFormXObjectBegin(e,t,i){var r;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=en(this.ctx),i)){Ee.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[s,a,o,c]=i,l=new Path2D;l.rect(s,a,o-s,c-a),this.ctx.clip(l),(r=this.dependencyTracker)==null||r.recordClipBox(e,this.ctx,s,o,a,c),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var w;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;t.isolated||z1("TODO: Support non-isolated groups."),t.knockout&&Be("Knockout groups not supported.");const r=en(i);if(t.matrix&&i.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=nf.slice();Ee.axialAlignedBoundingBox(t.bbox,en(i),s);const a=[0,0,i.canvas.width,i.canvas.height];s=Ee.intersect(s,a)||[0,0,0,0];const o=Math.floor(s[0]),c=Math.floor(s[1]),l=Math.max(Math.ceil(s[2])-o,1),d=Math.max(Math.ceil(s[3])-c,1);this.current.startNewPathAndClipBox([0,0,l,d]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(h,l,d),g=f.context;g.translate(-o,-c),g.transform(...r);let v=new Path2D;const[y,x,m,b]=t.bbox;if(v.rect(y,x,m-y,b-x),t.matrix){const _=new Path2D;_.addPath(v,new DOMMatrix(t.matrix)),v=_}g.clip(v),t.smask&&this.smaskStack.push({canvas:f.canvas,context:g,offsetX:o,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(o,c),i.save()),$g(i,g),this.ctx=g,(w=this.dependencyTracker)==null||w.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(e,t){var s;if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,(s=this.dependencyTracker)==null||s.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=en(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...a);const o=nf.slice();Ee.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],a,o),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,i,r,s,a){if(O(this,ia,IE).call(this),Av(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const o=i[2]-i[0],c=i[3]-i[1];if(a&&this.annotationCanvasMap){r=r.slice(),r[4]-=i[0],r[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=o,i[3]=c,Ee.singularValueDecompose2dScale(en(this.ctx),Wr);const{viewportScale:l}=this,d=Math.ceil(o*this.outputScaleX*l),h=Math.ceil(c*this.outputScaleY*l);this.annotationCanvas=this.canvasFactory.create(d,h);const{canvas:f,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(Wr[0],0,0,-Wr[1],0,c*Wr[1]),Av(this.ctx)}else{Av(this.ctx),this.endPath(e);const l=new Path2D;l.rect(i[0],i[1],o,c),this.ctx.clip(l)}}this.current=new eN(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...r),this.transform(e,...s)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),O(this,ia,PE).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var o;if(!this.contentVisible)return;const i=t.count;t=this.getObject(e,t.data,t),t.count=i;const r=this.ctx,s=this._createMaskCanvas(e,t),a=s.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(a,s.offsetX,s.offsetY),(o=this.dependencyTracker)==null||o.resetBBox(e).recordBBox(e,this.ctx,s.offsetX,s.offsetX+a.width,s.offsetY,s.offsetY+a.height).recordOperation(e),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i,r=0,s=0,a,o){var h,f,g;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const c=this.ctx;c.save();const l=en(c);c.transform(i,r,s,a,0,0);const d=this._createMaskCanvas(e,t);c.setTransform(1,0,0,1,d.offsetX-l[4],d.offsetY-l[5]),(h=this.dependencyTracker)==null||h.resetBBox(e);for(let v=0,y=o.length;v<y;v+=2){const x=Ee.transform(l,[i,r,s,a,o[v],o[v+1]]);c.drawImage(d.canvas,x[4],x[5]),(f=this.dependencyTracker)==null||f.recordBBox(e,this.ctx,x[4],x[4]+d.canvas.width,x[5],x[5]+d.canvas.height)}c.restore(),this.compose(),(g=this.dependencyTracker)==null||g.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var a,o,c;if(!this.contentVisible)return;const i=this.ctx,r=this.current.fillColor,s=this.current.patternFill;(a=this.dependencyTracker)==null||a.resetBBox(e).recordDependencies(e,rs.transformAndFill);for(const l of t){const{data:d,width:h,height:f,transform:g}=l,v=this.cachedCanvases.getCanvas("maskCanvas",h,f),y=v.context;y.save();const x=this.getObject(e,d,l);nN(y,x),y.globalCompositeOperation="source-in",y.fillStyle=s?r.getPattern(y,this,ca(i),si.FILL,e):r,y.fillRect(0,0,h,f),y.restore(),i.save(),i.transform(...g),i.scale(1,-1),Dv(i,v.canvas,0,0,h,f,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,i,0,h,0,f),i.restore()}this.compose(),(c=this.dependencyTracker)==null||c.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const i=this.getObject(e,t);if(!i){Be("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,i)}paintImageXObjectRepeat(e,t,i,r,s){if(!this.contentVisible)return;const a=this.getObject(e,t);if(!a){Be("Dependent image isn't ready yet");return}const o=a.width,c=a.height,l=[];for(let d=0,h=s.length;d<h;d+=2)l.push({transform:[i,0,0,r,s[d],s[d+1]],x:0,y:0,w:o,h:c});this.paintInlineImageXObjectGroup(e,a,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:r}=e,s=this.cachedCanvases.getCanvas("inlineImage",i,r),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",s.canvas}paintInlineImageXObject(e,t){var l;if(!this.contentVisible)return;const i=t.width,r=t.height,s=this.ctx;this.save(e);const{filter:a}=s;a!=="none"&&a!==""&&(s.filter="none"),s.scale(1/i,-1/r);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",i,r).context;tN(h,t),o=this.applyTransferMapsToCanvas(h)}const c=this._scaleImage(o,ca(s));s.imageSmoothingEnabled=iN(en(s),t.interpolate),(l=this.dependencyTracker)==null||l.resetBBox(e).recordBBox(e,s,0,i,-r,0).recordDependencies(e,rs.imageXObject).recordOperation(e),Dv(s,c.img,0,0,c.paintWidth,c.paintHeight,0,-r,i,r),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,i){var a,o,c;if(!this.contentVisible)return;const r=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const l=t.width,d=t.height,f=this.cachedCanvases.getCanvas("inlineImage",l,d).context;tN(f,t),s=this.applyTransferMapsToCanvas(f)}(a=this.dependencyTracker)==null||a.resetBBox(e);for(const l of i)r.save(),r.transform(...l.transform),r.scale(1,-1),Dv(r,s,l.x,l.y,l.w,l.h,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,r,0,1,-1,0),r.restore();(c=this.dependencyTracker)==null||c.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,rs.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,i){}beginMarkedContent(e,t){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,i){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,i){var a,o;const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const s=this.ctx;this.pendingClip?(r||(this.pendingClip===rN?s.clip(t,"evenodd"):s.clip(t)),this.pendingClip=null,(a=this.dependencyTracker)==null||a.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(o=this.dependencyTracker)==null||o.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=en(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:r,d:s}=this.ctx.getTransform();let a,o;if(i===0&&r===0){const c=Math.abs(t),l=Math.abs(s);if(c===l)if(e===0)a=o=1/c;else{const d=c*e;a=o=d<1?1/d:1}else if(e===0)a=1/c,o=1/l;else{const d=c*e,h=l*e;a=d<1?1/d:1,o=h<1?1/h:1}}else{const c=Math.abs(t*s-i*r),l=Math.hypot(t,i),d=Math.hypot(r,s);if(e===0)a=d/c,o=l/c;else{const h=e*c;a=d>h?d/h:1,o=l>h?l/h:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:i,current:{lineWidth:r}}=this,[s,a]=this.getScaleForStroking();if(s===a){i.lineWidth=(r||1)*s,i.stroke(e);return}const o=i.getLineDash();t&&i.save(),i.scale(s,a),F_.a=1/s,F_.d=1/a;const c=new Path2D;if(c.addPath(e,F_),o.length>0){const l=Math.max(s,a);i.setLineDash(o.map(d=>d/l)),i.lineDashOffset/=l}i.lineWidth=r||1,i.stroke(c),t&&i.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};ia=new WeakSet,IE=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},PE=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},zE=function(e,t,i){const r=new Path2D;return r.addPath(e,new DOMMatrix(i).invertSelf().multiplySelf(t)),r};let xf=Nk;for(const n in oy)xf.prototype[n]!==void 0&&(xf.prototype[oy[n]]=xf.prototype[n]);var db,hb;class Fa{static get workerPort(){return u(this,db)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");T(this,db,e)}static get workerSrc(){return u(this,hb)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");T(this,hb,e)}}db=new WeakMap,hb=new WeakMap,U(Fa,db,null),U(Fa,hb,"");var rp,fb;class n${constructor({parsedData:e,rawData:t}){U(this,rp);U(this,fb);T(this,rp,e),T(this,fb,t)}getRaw(){return u(this,fb)}get(e){return u(this,rp).get(e)??null}[Symbol.iterator](){return u(this,rp).entries()}}rp=new WeakMap,fb=new WeakMap;const Ph=Symbol("INTERNAL");var pb,gb,mb,sp;class i${constructor(e,{name:t,intent:i,usage:r,rbGroups:s}){U(this,pb,!1);U(this,gb,!1);U(this,mb,!1);U(this,sp,!0);T(this,pb,!!(e&Pr.DISPLAY)),T(this,gb,!!(e&Pr.PRINT)),this.name=t,this.intent=i,this.usage=r,this.rbGroups=s}get visible(){if(u(this,mb))return u(this,sp);if(!u(this,sp))return!1;const{print:e,view:t}=this.usage;return u(this,pb)?(t==null?void 0:t.viewState)!=="OFF":u(this,gb)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,i=!1){e!==Ph&&Rt("Internal method `_setVisible` called."),T(this,mb,i),T(this,sp,t)}}pb=new WeakMap,gb=new WeakMap,mb=new WeakMap,sp=new WeakMap;var el,St,ap,op,yb,WE;class r${constructor(e,t=Pr.DISPLAY){U(this,yb);U(this,el,null);U(this,St,new Map);U(this,ap,null);U(this,op,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,T(this,op,e.order);for(const i of e.groups)u(this,St).set(i.id,new i$(t,i));if(e.baseState==="OFF")for(const i of u(this,St).values())i._setVisible(Ph,!1);for(const i of e.on)u(this,St).get(i)._setVisible(Ph,!0);for(const i of e.off)u(this,St).get(i)._setVisible(Ph,!1);T(this,ap,this.getHash())}}isVisible(e){if(u(this,St).size===0)return!0;if(!e)return z1("Optional content group not defined."),!0;if(e.type==="OCG")return u(this,St).has(e.id)?u(this,St).get(e.id).visible:(Be(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return O(this,yb,WE).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!u(this,St).has(t))return Be(`Optional content group not found: ${t}`),!0;if(u(this,St).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!u(this,St).has(t))return Be(`Optional content group not found: ${t}`),!0;if(!u(this,St).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!u(this,St).has(t))return Be(`Optional content group not found: ${t}`),!0;if(!u(this,St).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!u(this,St).has(t))return Be(`Optional content group not found: ${t}`),!0;if(u(this,St).get(t).visible)return!1}return!0}return Be(`Unknown optional content policy ${e.policy}.`),!0}return Be(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){var s;const r=u(this,St).get(e);if(!r){Be(`Optional content group not found: ${e}`);return}if(i&&t&&r.rbGroups.length)for(const a of r.rbGroups)for(const o of a)o!==e&&((s=u(this,St).get(o))==null||s._setVisible(Ph,!1,!0));r._setVisible(Ph,!!t,!0),T(this,el,null)}setOCGState({state:e,preserveRB:t}){let i;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const s=u(this,St).get(r);if(s)switch(i){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!s.visible,t);break}}T(this,el,null)}get hasInitialVisibility(){return u(this,ap)===null||this.getHash()===u(this,ap)}getOrder(){return u(this,St).size?u(this,op)?u(this,op).slice():[...u(this,St).keys()]:null}getGroup(e){return u(this,St).get(e)||null}getHash(){if(u(this,el)!==null)return u(this,el);const e=new _F;for(const[t,i]of u(this,St))e.update(`${t}:${i.visible}`);return T(this,el,e.hexdigest())}[Symbol.iterator](){return u(this,St).entries()}}el=new WeakMap,St=new WeakMap,ap=new WeakMap,op=new WeakMap,yb=new WeakSet,WE=function(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let r=1;r<t;r++){const s=e[r];let a;if(Array.isArray(s))a=O(this,yb,WE).call(this,s);else if(u(this,St).has(s))a=u(this,St).get(s).visible;else return Be(`Optional content group not found: ${s}`),!0;switch(i){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return i==="And"};class s${constructor(e,{disableRange:t=!1,disableStream:i=!1}){st(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(s==null?void 0:s.length)>0){const c=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,l)=>{this._onReceiveData({begin:c,chunk:l})}),e.addProgressListener((c,l)=>{this._onProgress({loaded:c,total:l})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(i),!0)});st(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,i,r,s;e.total===void 0?(i=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||i.call(t,{loaded:e.loaded}):(s=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||s.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){st(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new a$(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new o$(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeReaders.slice(0))i.cancel(e);this._pdfDataRangeTransport.abort()}}class a${constructor(e,t,i=!1,r=null){this._stream=e,this._done=i||!1,this._filename=tC(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class o${constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function c$(n){let e=!0,t=i("filename\\*","i").exec(n);if(t){t=t[1];let d=o(t);return d=unescape(d),d=c(d),d=l(d),s(d)}if(t=a(n),t){const d=l(t);return s(d)}if(t=i("filename","i").exec(n),t){t=t[1];let d=o(t);return d=l(d),s(d)}function i(d,h){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function r(d,h){if(d){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const f=new TextDecoder(d,{fatal:!0}),g=T0(h);h=f.decode(g),e=!1}catch{}}return h}function s(d){return e&&/[\x80-\xff]/.test(d)&&(d=r("utf-8",d),e&&(d=r("iso-8859-1",d))),d}function a(d){const h=[];let f;const g=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=g.exec(d))!==null;){let[,y,x,m]=f;if(y=parseInt(y,10),y in h){if(y===0)break;continue}h[y]=[x,m]}const v=[];for(let y=0;y<h.length&&y in h;++y){let[x,m]=h[y];m=o(m),x&&(m=unescape(m),y===0&&(m=c(m))),v.push(m)}return v.join("")}function o(d){if(d.startsWith('"')){const h=d.slice(1).split('\\"');for(let f=0;f<h.length;++f){const g=h[f].indexOf('"');g!==-1&&(h[f]=h[f].slice(0,g),h.length=f+1),h[f]=h[f].replaceAll(/\\(.)/g,"$1")}d=h.join('"')}return d}function c(d){const h=d.indexOf("'");if(h===-1)return d;const f=d.slice(0,h),v=d.slice(h+1).replace(/^[^']*'/,"");return r(f,v)}function l(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,f,g,v){if(g==="q"||g==="Q")return v=v.replaceAll("_"," "),v=v.replaceAll(/=([0-9a-fA-F]{2})/g,function(y,x){return String.fromCharCode(parseInt(x,16))}),r(f,v);try{v=atob(v)}catch{}return r(f,v)})}return""}function FF(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const i in e){const r=e[i];r!==void 0&&t.append(i,r)}return t}function q1(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function OF({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(n.get("Content-Length"),10);return!Number.isInteger(s)||(r.suggestedLength=s,s<=2*t)||i||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function MF(n){const e=n.get("Content-Disposition");if(e){let t=c$(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(tC(t))return t}return null}function j0(n,e){return new A2(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function BF(n){return n===200||n===206}function LF(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function IF(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Be(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class l${constructor(e){ve(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=FF(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return st(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new u$(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new d$(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class u${constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const i=new Headers(e.headers),r=t.url;fetch(r,LF(i,this._withCredentials,this._abortController)).then(s=>{if(e._responseOrigin=q1(s.url),!BF(s.status))throw j0(s.status,r);this._reader=s.body.getReader(),this._headersCapability.resolve();const a=s.headers,{allowRangeRequests:o,suggestedLength:c}=OF({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=c||this._contentLength,this._filename=MF(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new $l("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:IF(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class d${constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${t}-${i-1}`);const a=r.url;fetch(a,LF(s,this._withCredentials,this._abortController)).then(o=>{const c=q1(o.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!BF(o.status))throw j0(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:IF(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const O_=200,M_=206;function h$(n){const e=n.response;return typeof e!="string"?e:T0(e).buffer}class f${constructor({url:e,httpHeaders:t,withCredentials:i}){ve(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=FF(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,a]of this.headers)t.setRequestHeader(s,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=M_):r.expectedStatus=O_,t.responseType="arraybuffer",st(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var r;const i=this.pendingRequests[e];i&&((r=i.onProgress)==null||r.call(i,t))}onStateChange(e,t){const i=this.pendingRequests[e];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){i.onError(r.status);return}const s=r.status||O_;if(!(s===O_&&i.expectedStatus===M_)&&s!==i.expectedStatus){i.onError(r.status);return}const o=h$(r);if(s===M_){const c=r.getResponseHeader("Content-Range"),l=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);l?i.onDone({begin:parseInt(l[1],10),chunk:o}):(Be('Missing or invalid "Content-Range" header.'),i.onError(0))}else o?i.onDone({begin:0,chunk:o}):i.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class p${constructor(e){this._source=e,this._manager=new f$(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return st(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new g$(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new m$(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class g${constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=q1(t.responseURL);const i=t.getAllResponseHeaders(),r=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[c,...l]=o.split(": ");return[c,l.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:a}=OF({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=MF(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=j0(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class m${constructor(e,t,i){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=q1((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=j0(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const y$=/^[a-z][a-z0-9\-+.]+:/i;function b$(n){if(y$.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class v${constructor(e){this.source=e,this.url=b$(e.url),st(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return st(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new x$(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new w$(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class x${constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=j0(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new $l("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class w${constructor(e,t,i){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Hg=Symbol("INITIAL_DATA");var Sr,bb,qE;class PF{constructor(){U(this,bb);U(this,Sr,Object.create(null))}get(e,t=null){if(t){const r=O(this,bb,qE).call(this,e);return r.promise.then(()=>t(r.data)),null}const i=u(this,Sr)[e];if(!i||i.data===Hg)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=u(this,Sr)[e];return!!t&&t.data!==Hg}delete(e){const t=u(this,Sr)[e];return!t||t.data===Hg?!1:(delete u(this,Sr)[e],!0)}resolve(e,t=null){const i=O(this,bb,qE).call(this,e);i.data=t,i.resolve()}clear(){var e;for(const t in u(this,Sr)){const{data:i}=u(this,Sr)[t];(e=i==null?void 0:i.bitmap)==null||e.close()}T(this,Sr,Object.create(null))}*[Symbol.iterator](){for(const e in u(this,Sr)){const{data:t}=u(this,Sr)[e];t!==Hg&&(yield[e,t])}}}Sr=new WeakMap,bb=new WeakSet,qE=function(e){var t;return(t=u(this,Sr))[e]||(t[e]={...Promise.withResolvers(),data:Hg})};const _$=1e5,sN=30;var o4,tl,nr,vb,xb,td,To,wb,_b,nd,cp,lp,nl,up,Db,dp,id,Ab,Eb,hp,rd,Sb,il,fp,hc,zF,WF,$E,Jr,px,HE,qF,$F;const Cn=class Cn{constructor({textContentSource:e,container:t,viewport:i}){U(this,hc);U(this,tl,Promise.withResolvers());U(this,nr,null);U(this,vb,!1);U(this,xb,!!((o4=globalThis.FontInspector)!=null&&o4.enabled));U(this,td,null);U(this,To,null);U(this,wb,0);U(this,_b,0);U(this,nd,null);U(this,cp,null);U(this,lp,0);U(this,nl,0);U(this,up,Object.create(null));U(this,Db,[]);U(this,dp,null);U(this,id,[]);U(this,Ab,new WeakMap);U(this,Eb,null);var c;if(e instanceof ReadableStream)T(this,dp,e);else if(typeof e=="object")T(this,dp,new ReadableStream({start(l){l.enqueue(e),l.close()}}));else throw new Error('No "textContentSource" parameter specified.');T(this,nr,T(this,cp,t)),T(this,nl,i.scale*Wa.pixelRatio),T(this,lp,i.rotation),T(this,To,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:s,pageX:a,pageY:o}=i.rawDims;T(this,Eb,[1,0,0,-1,-a,o+s]),T(this,_b,r),T(this,wb,s),O(c=Cn,Jr,qF).call(c),Jd(t,i),u(this,tl).promise.finally(()=>{u(Cn,fp).delete(this),T(this,To,null),T(this,up,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=hi.platform;return Le(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{u(this,nd).read().then(({value:t,done:i})=>{if(i){u(this,tl).resolve();return}u(this,td)??T(this,td,t.lang),Object.assign(u(this,up),t.styles),O(this,hc,zF).call(this,t.items),e()},u(this,tl).reject)};return T(this,nd,u(this,dp).getReader()),u(Cn,fp).add(this),e(),u(this,tl).promise}update({viewport:e,onBefore:t=null}){var s;const i=e.scale*Wa.pixelRatio,r=e.rotation;if(r!==u(this,lp)&&(t==null||t(),T(this,lp,r),Jd(u(this,cp),{rotation:r})),i!==u(this,nl)){t==null||t(),T(this,nl,i);const a={div:null,properties:null,ctx:O(s=Cn,Jr,px).call(s,u(this,td))};for(const o of u(this,id))a.properties=u(this,Ab).get(o),a.div=o,O(this,hc,$E).call(this,a)}}cancel(){var t;const e=new $l("TextLayer task cancelled.");(t=u(this,nd))==null||t.cancel(e).catch(()=>{}),T(this,nd,null),u(this,tl).reject(e)}get textDivs(){return u(this,id)}get textContentItemsStr(){return u(this,Db)}static cleanup(){if(!(u(this,fp).size>0)){u(this,hp).clear();for(const{canvas:e}of u(this,rd).values())e.remove();u(this,rd).clear()}}};tl=new WeakMap,nr=new WeakMap,vb=new WeakMap,xb=new WeakMap,td=new WeakMap,To=new WeakMap,wb=new WeakMap,_b=new WeakMap,nd=new WeakMap,cp=new WeakMap,lp=new WeakMap,nl=new WeakMap,up=new WeakMap,Db=new WeakMap,dp=new WeakMap,id=new WeakMap,Ab=new WeakMap,Eb=new WeakMap,hp=new WeakMap,rd=new WeakMap,Sb=new WeakMap,il=new WeakMap,fp=new WeakMap,hc=new WeakSet,zF=function(e){var r,s;if(u(this,vb))return;(s=u(this,To)).ctx??(s.ctx=O(r=Cn,Jr,px).call(r,u(this,td)));const t=u(this,id),i=u(this,Db);for(const a of e){if(t.length>_$){Be("Ignoring additional textDivs for performance reasons."),T(this,vb,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=u(this,nr);T(this,nr,document.createElement("span")),u(this,nr).classList.add("markedContent"),a.id&&u(this,nr).setAttribute("id",`${a.id}`),o.append(u(this,nr))}else a.type==="endMarkedContent"&&T(this,nr,u(this,nr).parentNode);continue}i.push(a.str),O(this,hc,WF).call(this,a)}},WF=function(e){var y;const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};u(this,id).push(t);const r=Ee.transform(u(this,Eb),e.transform);let s=Math.atan2(r[1],r[0]);const a=u(this,up)[e.fontName];a.vertical&&(s+=Math.PI/2);let o=u(this,xb)&&a.fontSubstitution||a.fontFamily;o=Cn.fontFamilyMap.get(o)||o;const c=Math.hypot(r[2],r[3]),l=c*O(y=Cn,Jr,$F).call(y,o,a,u(this,td));let d,h;s===0?(d=r[4],h=r[5]-l):(d=r[4]+l*Math.sin(s),h=r[5]-l*Math.cos(s));const f="calc(var(--total-scale-factor) *",g=t.style;u(this,nr)===u(this,cp)?(g.left=`${(100*d/u(this,_b)).toFixed(2)}%`,g.top=`${(100*h/u(this,wb)).toFixed(2)}%`):(g.left=`${f}${d.toFixed(2)}px)`,g.top=`${f}${h.toFixed(2)}px)`),g.fontSize=`${f}${(u(Cn,il)*c).toFixed(2)}px)`,g.fontFamily=o,i.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,u(this,xb)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),s!==0&&(i.angle=s*(180/Math.PI));let v=!1;if(e.str.length>1)v=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const x=Math.abs(e.transform[0]),m=Math.abs(e.transform[3]);x!==m&&Math.max(x,m)/Math.min(x,m)>1.5&&(v=!0)}if(v&&(i.canvasWidth=a.vertical?e.height:e.width),u(this,Ab).set(t,i),u(this,To).div=t,u(this,To).properties=i,O(this,hc,$E).call(this,u(this,To)),i.hasText&&u(this,nr).append(t),i.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),u(this,nr).append(x)}},$E=function(e){var o;const{div:t,properties:i,ctx:r}=e,{style:s}=t;let a="";if(u(Cn,il)>1&&(a=`scale(${1/u(Cn,il)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:c}=s,{canvasWidth:l,fontSize:d}=i;O(o=Cn,Jr,HE).call(o,r,d*u(this,nl),c);const{width:h}=r.measureText(t.textContent);h>0&&(a=`scaleX(${l*u(this,nl)/h}) ${a}`)}i.angle!==0&&(a=`rotate(${i.angle}deg) ${a}`),a.length>0&&(s.transform=a)},Jr=new WeakSet,px=function(e=null){let t=u(this,rd).get(e||(e=""));if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,rd).set(e,t),u(this,Sb).set(t,{size:0,family:""})}return t},HE=function(e,t,i){const r=u(this,Sb).get(e);t===r.size&&i===r.family||(e.font=`${t}px ${i}`,r.size=t,r.family=i)},qF=function(){if(u(this,il)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),T(this,il,e.getBoundingClientRect().height),e.remove()},$F=function(e,t,i){const r=u(this,hp).get(e);if(r)return r;const s=O(this,Jr,px).call(this,i);s.canvas.width=s.canvas.height=sN,O(this,Jr,HE).call(this,s,sN,e);const a=s.measureText(""),o=a.fontBoundingBoxAscent,c=Math.abs(a.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let l=.8;return o?l=o/(o+c):(hi.platform.isFirefox&&Be("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?l=t.ascent:t.descent&&(l=1+t.descent)),u(this,hp).set(e,l),l},U(Cn,Jr),U(Cn,hp,new Map),U(Cn,rd,new Map),U(Cn,Sb,new WeakMap),U(Cn,il,null),U(Cn,fp,new Set);let ly=Cn;const D$=100;function HF(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new VE,{docId:t}=e,i=n.url?Uq(n.url):null,r=n.data?Nq(n.data):null,s=n.httpHeaders||null,a=n.withCredentials===!0,o=n.password??null,c=n.range instanceof VF?n.range:null,l=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let d=n.worker instanceof uy?n.worker:null;const h=n.verbosity,f=typeof n.docBaseUrl=="string"&&!W1(n.docBaseUrl)?n.docBaseUrl:null,g=vv(n.cMapUrl),v=n.cMapPacked!==!1,y=n.CMapReaderFactory||(Bi?Iq:HU),x=vv(n.iccUrl),m=vv(n.standardFontDataUrl),b=n.StandardFontDataFactory||(Bi?Pq:VU),w=vv(n.wasmUrl),_=n.WasmFactory||(Bi?zq:GU),D=n.stopAtErrors!==!0,A=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,E=n.isEvalSupported!==!1,F=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Bi,I=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Bi&&(hi.platform.isFirefox||!globalThis.chrome),z=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,H=typeof n.disableFontFace=="boolean"?n.disableFontFace:Bi,k=n.fontExtraProperties===!0,W=n.enableXfa===!0,S=n.ownerDocument||globalThis.document,G=n.disableRange===!0,j=n.disableStream===!0,M=n.disableAutoFetch===!0,R=n.pdfBug===!0,N=n.CanvasFactory||(Bi?Lq:Oq),B=n.FilterFactory||(Bi?Bq:Mq),L=n.enableHWA===!0,P=n.useWasm!==!1,q=c?c.length:n.length??NaN,Q=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Bi&&!H,se=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(y===HU&&b===VU&&_===GU&&g&&m&&w&&om(g,document.baseURI)&&om(m,document.baseURI)&&om(w,document.baseURI)),be=null;rq(h);const ye={canvasFactory:new N({ownerDocument:S,enableHWA:L}),filterFactory:new B({docId:t,ownerDocument:S}),cMapReaderFactory:se?null:new y({baseUrl:g,isCompressed:v}),standardFontDataFactory:se?null:new b({baseUrl:m}),wasmFactory:se?null:new _({baseUrl:w})};d||(d=uy.create({verbosity:h,port:Fa.workerPort}),e._worker=d);const fe={docId:t,apiVersion:"5.4.449",data:r,password:o,disableAutoFetch:M,rangeChunkSize:l,length:q,docBaseUrl:f,enableXfa:W,evaluatorOptions:{maxImageSize:A,disableFontFace:H,ignoreErrors:D,isEvalSupported:E,isOffscreenCanvasSupported:F,isImageDecoderSupported:I,canvasMaxAreaInBytes:z,fontExtraProperties:k,useSystemFonts:Q,useWasm:P,useWorkerFetch:se,cMapUrl:g,iccUrl:x,standardFontDataUrl:m,wasmUrl:w}},xe={ownerDocument:S,pdfBug:R,styleElement:be,loadingParams:{disableAutoFetch:M,enableXfa:W}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const ce=d.messageHandler.sendWithPromise("GetDocRequest",fe,r?[r.buffer]:null);let le;if(c)le=new s$(c,{disableRange:G,disableStream:j});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");const Y=om(i)?l$:Bi?v$:p$;le=new Y({url:i,length:q,httpHeaders:s,withCredentials:a,rangeChunkSize:l,disableRange:G,disableStream:j})}return ce.then(Y=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const ae=new gm(t,Y,d.port),C=new S$(ae,e,le,xe,ye,L);e._transport=C,ae.send("Ready",null)})}).catch(e._capability.reject),e}var r1;const s1=class s1{constructor(){ve(this,"_capability",Promise.withResolvers());ve(this,"_transport",null);ve(this,"_worker",null);ve(this,"docId",`d${Tn(s1,r1)._++}`);ve(this,"destroyed",!1);ve(this,"onPassword",null);ve(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,i,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,s}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};r1=new WeakMap,U(s1,r1,0);let VE=s1;var sd,Tb,Cb,kb,Ub;class VF{constructor(e,t,i=!1,r=null){U(this,sd,Promise.withResolvers());U(this,Tb,[]);U(this,Cb,[]);U(this,kb,[]);U(this,Ub,[]);this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=r}addRangeListener(e){u(this,Ub).push(e)}addProgressListener(e){u(this,kb).push(e)}addProgressiveReadListener(e){u(this,Cb).push(e)}addProgressiveDoneListener(e){u(this,Tb).push(e)}onDataRange(e,t){for(const i of u(this,Ub))i(e,t)}onDataProgress(e,t){u(this,sd).promise.then(()=>{for(const i of u(this,kb))i(e,t)})}onDataProgressiveRead(e){u(this,sd).promise.then(()=>{for(const t of u(this,Cb))t(e)})}onDataProgressiveDone(){u(this,sd).promise.then(()=>{for(const e of u(this,Tb))e()})}transportReady(){u(this,sd).resolve()}requestDataRange(e,t){Rt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}sd=new WeakMap,Tb=new WeakMap,Cb=new WeakMap,kb=new WeakMap,Ub=new WeakMap;class A${constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Le(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Co,ad,xm;class E${constructor(e,t,i,r=!1){U(this,ad);U(this,Co,!1);this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=r?new LU:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new PF,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:s=!1}={}){return new k0({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Le(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:i,intent:r="display",annotationMode:s=Rc.ENABLE,transform:a=null,background:o=null,optionalContentConfigPromise:c=null,annotationCanvasMap:l=null,pageColors:d=null,printAnnotationStorage:h=null,isEditing:f=!1,recordOperations:g=!1,operationsFilter:v=null}){var I,z,H;(I=this._stats)==null||I.time("Overall");const y=this._transport.getRenderingIntent(r,s,h,f),{renderingIntent:x,cacheKey:m}=y;T(this,Co,!1),c||(c=this._transport.getOptionalContentConfig(x));let b=this._intentStates.get(m);b||(b=Object.create(null),this._intentStates.set(m,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const w=!!(x&Pr.PRINT);b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(z=this._stats)==null||z.time("Page Request"),this._pumpOperatorList(y));const _=!!(this._pdfBug&&((H=globalThis.StepperManager)!=null&&H.enabled)),D=!this.recordedBBoxes&&(g||_),A=k=>{var W,S;if(b.renderTasks.delete(E),D){const G=(W=E.gfx)==null?void 0:W.dependencyTracker.take();G&&(E.stepper&&E.stepper.setOperatorBBoxes(G,E.gfx.dependencyTracker.takeDebugMetadata()),g&&(this.recordedBBoxes=G))}w&&T(this,Co,!0),O(this,ad,xm).call(this),k?(E.capability.reject(k),this._abortOperatorList({intentState:b,reason:k instanceof Error?k:new Error(k)})):E.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(S=globalThis.Stats)!=null&&S.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},E=new GE({callback:A,params:{canvas:t,canvasContext:e,dependencyTracker:D?new qq(t,b.operatorList.length,_):null,viewport:i,transform:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!w,pdfBug:this._pdfBug,pageColors:d,enableHWA:this._transport.enableHWA,operationsFilter:v});(b.renderTasks||(b.renderTasks=new Set)).add(E);const F=E.task;return Promise.all([b.displayReadyCapability.promise,c]).then(([k,W])=>{var S;if(this.destroyed){A();return}if((S=this._stats)==null||S.time("Rendering"),!(W.renderingIntent&x))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");E.initializeGraphics({transparency:k,optionalContentConfig:W}),E.operatorListChanged()}).catch(A),F}getOperatorList({intent:e="display",annotationMode:t=Rc.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){var l;function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(c))}const a=this._transport.getRenderingIntent(e,t,i,r,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let c;return o.opListReadCapability||(c=Object.create(null),c.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(c),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(l=this._stats)==null||l.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>cy.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,r){function s(){a.read().then(function({value:c,done:l}){if(l){i(o);return}o.lang??(o.lang=c.lang),Object.assign(o.styles,c.styles),o.items.push(...c.items),s()},r)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),T(this,Co,!1),Promise.all(e)}cleanup(e=!1){T(this,Co,!0);const t=O(this,ad,xm).call(this);return e&&t&&this._stats&&(this._stats=new LU),t}_startRenderPage(e,t){var r,s;const i=this._intentStates.get(t);i&&((r=this._stats)==null||r.timeEnd("Page Request"),(s=i.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,t){for(let i=0,r=e.length;i<r;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&O(this,ad,xm).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:r}){const{map:s,transfer:a}=i,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:r},a).getReader(),l=this._intentStates.get(t);l.streamReader=c;const d=()=>{c.read().then(({value:h,done:f})=>{if(f){l.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,l),d())},h=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const f of l.renderTasks)f.operatorListChanged();O(this,ad,xm).call(this)}if(l.displayReadyCapability)l.displayReadyCapability.reject(h);else if(l.opListReadCapability)l.opListReadCapability.reject(h);else throw h}})};d()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof eC){let r=D$;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new $l(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,s]of this._intentStates)if(s===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}Co=new WeakMap,ad=new WeakSet,xm=function(){if(!u(this,Co)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),T(this,Co,!1),!0};var rl,Vs,ko,od,a1,cd,ld,zi,gx,GF,XF,wm,pp,mx;const Gt=class Gt{constructor({name:e=null,port:t=null,verbosity:i=sq()}={}){U(this,zi);U(this,rl,Promise.withResolvers());U(this,Vs,null);U(this,ko,null);U(this,od,null);if(this.name=e,this.destroyed=!1,this.verbosity=i,t){if(u(Gt,ld).has(t))throw new Error("Cannot use more than one PDFWorker per port.");u(Gt,ld).set(t,this),O(this,zi,GF).call(this,t)}else O(this,zi,XF).call(this)}get promise(){return u(this,rl).promise}get port(){return u(this,ko)}get messageHandler(){return u(this,Vs)}destroy(){var e,t;this.destroyed=!0,(e=u(this,od))==null||e.terminate(),T(this,od,null),u(Gt,ld).delete(u(this,ko)),T(this,ko,null),(t=u(this,Vs))==null||t.destroy(),T(this,Vs,null)}static create(e){const t=u(this,ld).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Gt(e)}static get workerSrc(){if(Fa.workerSrc)return Fa.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Le(this,"_setupFakeWorkerGlobal",(async()=>u(this,pp,mx)?u(this,pp,mx):(await import(this.workerSrc)).WorkerMessageHandler)())}};rl=new WeakMap,Vs=new WeakMap,ko=new WeakMap,od=new WeakMap,a1=new WeakMap,cd=new WeakMap,ld=new WeakMap,zi=new WeakSet,gx=function(){u(this,rl).resolve(),u(this,Vs).send("configure",{verbosity:this.verbosity})},GF=function(e){T(this,ko,e),T(this,Vs,new gm("main","worker",e)),u(this,Vs).on("ready",()=>{}),O(this,zi,gx).call(this)},XF=function(){if(u(Gt,cd)||u(Gt,pp,mx)){O(this,zi,wm).call(this);return}let{workerSrc:e}=Gt;try{Gt._isSameOrigin(window.location,e)||(e=Gt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new gm("main","worker",t),r=()=>{s.abort(),i.destroy(),t.terminate(),this.destroyed?u(this,rl).reject(new Error("Worker was destroyed")):O(this,zi,wm).call(this)},s=new AbortController;t.addEventListener("error",()=>{u(this,od)||r()},{signal:s.signal}),i.on("test",o=>{if(s.abort(),this.destroyed||!o){r();return}T(this,Vs,i),T(this,ko,t),T(this,od,t),O(this,zi,gx).call(this)}),i.on("ready",o=>{if(s.abort(),this.destroyed){r();return}try{a()}catch{O(this,zi,wm).call(this)}});const a=()=>{const o=new Uint8Array;i.send("test",o,[o.buffer])};a();return}catch{z1("The worker has been disabled.")}O(this,zi,wm).call(this)},wm=function(){u(Gt,cd)||(Be("Setting up fake worker."),T(Gt,cd,!0)),Gt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){u(this,rl).reject(new Error("Worker was destroyed"));return}const t=new Fq;T(this,ko,t);const i=`fake${Tn(Gt,a1)._++}`,r=new gm(i+"_worker",i,t);e.setup(r,t),T(this,Vs,new gm(i,i+"_worker",t)),O(this,zi,gx).call(this)}).catch(e=>{u(this,rl).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},pp=new WeakSet,mx=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},U(Gt,pp),U(Gt,a1,0),U(Gt,cd,!1),U(Gt,ld,new WeakMap),Bi&&(T(Gt,cd,!0),Fa.workerSrc||(Fa.workerSrc="./pdf.worker.mjs")),Gt._isSameOrigin=(e,t)=>{const i=URL.parse(e);if(!(i!=null&&i.origin)||i.origin==="null")return!1;const r=new URL(t,i);return i.origin===r.origin},Gt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Gt.fromPort=e=>{if(yq("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Gt.create(e)};let uy=Gt;var Uo,Aa,gp,mp,No,ud,_m;class S${constructor(e,t,i,r,s,a){U(this,ud);U(this,Uo,new Map);U(this,Aa,new Map);U(this,gp,new Map);U(this,mp,new Map);U(this,No,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new PF,this.fontLoader=new Cq({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}get annotationStorage(){return Le(this,"annotationStorage",new nC)}getRenderingIntent(e,t=Rc.ENABLE,i=null,r=!1,s=!1){let a=Pr.DISPLAY,o=kE;switch(e){case"any":a=Pr.ANY;break;case"display":break;case"print":a=Pr.PRINT;break;default:Be(`getRenderingIntent - invalid intent: ${e}`)}const c=a&Pr.PRINT&&i instanceof AF?i:this.annotationStorage;switch(t){case Rc.DISABLE:a+=Pr.ANNOTATIONS_DISABLE;break;case Rc.ENABLE:break;case Rc.ENABLE_FORMS:a+=Pr.ANNOTATIONS_FORMS;break;case Rc.ENABLE_STORAGE:a+=Pr.ANNOTATIONS_STORAGE,o=c.serializable;break;default:Be(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(a+=Pr.IS_EDITING),s&&(a+=Pr.OPLIST);const{ids:l,hash:d}=c.modifiedIds,h=[a,o.hash,d];return{renderingIntent:a,cacheKey:h.join("_"),annotationStorageSerializable:o,modifiedIds:l}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=u(this,No))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of u(this,Aa).values())e.push(r._destroy());u(this,Aa).clear(),u(this,gp).clear(),u(this,mp).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,s;this.commonObjs.clear(),this.fontLoader.clear(),u(this,Uo).clear(),this.filterFactory.destroy(),ly.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new $l("Worker was terminated.")),(s=this.messageHandler)==null||s.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,r)=>{st(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},r.onPull=()=>{this._fullReader.read().then(function({value:s,done:a}){if(a){r.close();return}st(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{r.error(s)})},r.onCancel=s=>{this._fullReader.cancel(s),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async i=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:s,contentLength:a}=this._fullReader;return(!r||!s)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var l;(l=t.onProgress)==null||l.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:r,isRangeSupported:s,contentLength:a}}),e.on("GetRangeReader",(i,r)=>{st(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(i.begin,i.end);if(!s){r.close();return}r.onPull=()=>{s.read().then(function({value:a,done:o}){if(o){r.close();return}st(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{s.cancel(a),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new A$(i,this))}),e.on("DocException",i=>{t._capability.reject(Ki(i))}),e.on("PasswordRequest",i=>{T(this,No,Promise.withResolvers());try{if(!t.onPassword)throw Ki(i);const r=s=>{s instanceof Error?u(this,No).reject(s):u(this,No).resolve({password:s})};t.onPassword(r,i.code)}catch(r){u(this,No).reject(r)}return u(this,No).promise}),e.on("DataLoaded",i=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;u(this,Aa).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,r,s])=>{var a;if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":if("error"in s){const f=s.error;Be(`Error during font loading: ${f}`),this.commonObjs.resolve(i,f);break}const o=new UE(s),c=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(f,g)=>globalThis.FontInspector.fontAdded(f,g):null,l=new kq(o,c,s.extra,s.charProcOperatorList);this.fontLoader.bind(l).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!l.fontExtraProperties&&l.data&&l.clearData(),this.commonObjs.resolve(i,l)});break;case"CopyLocalImage":const{imageRef:d}=s;st(d,"The imageRef must be defined.");for(const f of u(this,Aa).values())for(const[,g]of f.objs)if((g==null?void 0:g.ref)===d)return g.dataLen?(this.commonObjs.resolve(i,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":this.commonObjs.resolve(i,s);break;case"Pattern":const h=new NE(s);this.commonObjs.resolve(i,h.getIR());break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([i,r,s,a])=>{var c;if(this.destroyed)return;const o=u(this,Aa).get(r);if(!o.objs.has(i)){if(o._intentStates.size===0){(c=a==null?void 0:a.bitmap)==null||c.close();return}switch(s){case"Image":case"Pattern":o.objs.resolve(i,a);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",i=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:i.loaded,total:i.total})}),e.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[i.type];if(!r)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&Be("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((i=this._fullReader)==null?void 0:i.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=u(this,gp).get(t);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&u(this,mp).set(s.refStr,e);const a=new E$(t,s,this,this._params.pdfBug);return u(this,Aa).set(t,a),a});return u(this,gp).set(t,r),r}getPageIndex(e){return jE(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return O(this,ud,_m).call(this,"GetFieldObjects")}hasJSActions(){return O(this,ud,_m).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return O(this,ud,_m).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return O(this,ud,_m).call(this,"GetOptionalContentConfig").then(t=>new r$(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=u(this,Uo).get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(r=>{var s,a;return{info:r[0],metadata:r[1]?new n$(r[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null,hasStructTree:r[2]}});return u(this,Uo).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of u(this,Aa).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),u(this,Uo).clear(),this.filterFactory.destroy(!0),ly.cleanup()}}cachedPageNumber(e){if(!jE(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return u(this,mp).get(t)??null}}Uo=new WeakMap,Aa=new WeakMap,gp=new WeakMap,mp=new WeakMap,No=new WeakMap,ud=new WeakSet,_m=function(e,t=null){const i=u(this,Uo).get(e);if(i)return i;const r=this.messageHandler.sendWithPromise(e,t);return u(this,Uo).set(e,r),r};var sl;class T${constructor(e){U(this,sl,null);ve(this,"onContinue",null);ve(this,"onError",null);T(this,sl,e)}get promise(){return u(this,sl).capability.promise}cancel(e=0){u(this,sl).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=u(this,sl).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=u(this,sl);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}sl=new WeakMap;var al,dd;const wu=class wu{constructor({callback:e,params:t,objs:i,commonObjs:r,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:c,filterFactory:l,useRequestAnimationFrame:d=!1,pdfBug:h=!1,pageColors:f=null,enableHWA:g=!1,operationsFilter:v=null}){U(this,al,null);this.callback=e,this.params=t,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=c,this.filterFactory=l,this._pdfBug=h,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new T$(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=g,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=v}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var c,l;if(this.cancelled)return;if(this._canvas){if(u(wu,dd).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(wu,dd).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:r,background:s,dependencyTracker:a}=this.params,o=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new xf(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,a),this.gfx.beginDrawing({transform:r,viewport:i,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,t=0){var i,r,s;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),u(this,al)&&(window.cancelAnimationFrame(u(this,al)),T(this,al,null)),u(wu,dd).delete(this._canvas),e||(e=new eC(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(s=(r=this.task).onError)==null||s.call(r,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?T(this,al,window.requestAnimationFrame(()=>{T(this,al,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(wu,dd).delete(this._canvas),this.callback())))}};al=new WeakMap,dd=new WeakMap,U(wu,dd,new WeakSet);let GE=wu;const C$="5.4.449",k$="f44e5f0e6";var Tr,hd,yp,Nn,Nb,bp,jo,jb,ol,Gs,Rb,kt,XE,YE,KE,gu,YF,Dc;const Qi=class Qi{constructor({editor:e=null,uiManager:t=null}){U(this,kt);U(this,Tr,null);U(this,hd,null);U(this,yp);U(this,Nn,null);U(this,Nb,!1);U(this,bp,!1);U(this,jo,null);U(this,jb);U(this,ol,null);U(this,Gs,null);var i,r;e?(T(this,bp,!1),T(this,jo,e)):T(this,bp,!0),T(this,Gs,(e==null?void 0:e._uiManager)||t),T(this,jb,u(this,Gs)._eventBus),T(this,yp,((i=e==null?void 0:e.color)==null?void 0:i.toUpperCase())||((r=u(this,Gs))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),u(Qi,Rb)||T(Qi,Rb,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Le(this,"_keyboardManager",new N0([[["Escape","mac+Escape"],Qi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Qi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Qi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Qi.prototype._moveToPrevious],[["Home","mac+Home"],Qi.prototype._moveToBeginning],[["End","mac+End"],Qi.prototype._moveToEnd]]))}renderButton(){const e=T(this,Tr,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",u(this,jo)&&(e.ariaControls=`${u(this,jo).id}_colorpicker_dropdown`);const t=u(this,Gs)._signal;e.addEventListener("click",O(this,kt,gu).bind(this),{signal:t}),e.addEventListener("keydown",O(this,kt,KE).bind(this),{signal:t});const i=T(this,hd,document.createElement("span"));return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=u(this,yp),e.append(i),e}renderMainDropdown(){const e=T(this,Nn,O(this,kt,XE).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===u(this,Tr)){O(this,kt,gu).call(this,e);return}const t=e.target.getAttribute("data-color");t&&O(this,kt,YE).call(this,t,e)}_moveToNext(e){var t,i;if(!u(this,kt,Dc)){O(this,kt,gu).call(this,e);return}if(e.target===u(this,Tr)){(t=u(this,Nn).firstElementChild)==null||t.focus();return}(i=e.target.nextSibling)==null||i.focus()}_moveToPrevious(e){var t,i;if(e.target===((t=u(this,Nn))==null?void 0:t.firstElementChild)||e.target===u(this,Tr)){u(this,kt,Dc)&&this._hideDropdownFromKeyboard();return}u(this,kt,Dc)||O(this,kt,gu).call(this,e),(i=e.target.previousSibling)==null||i.focus()}_moveToBeginning(e){var t;if(!u(this,kt,Dc)){O(this,kt,gu).call(this,e);return}(t=u(this,Nn).firstElementChild)==null||t.focus()}_moveToEnd(e){var t;if(!u(this,kt,Dc)){O(this,kt,gu).call(this,e);return}(t=u(this,Nn).lastElementChild)==null||t.focus()}hideDropdown(){var e,t;(e=u(this,Nn))==null||e.classList.add("hidden"),u(this,Tr).ariaExpanded="false",(t=u(this,ol))==null||t.abort(),T(this,ol,null)}_hideDropdownFromKeyboard(){var e;if(!u(this,bp)){if(!u(this,kt,Dc)){(e=u(this,jo))==null||e.unselect();return}this.hideDropdown(),u(this,Tr).focus({preventScroll:!0,focusVisible:u(this,Nb)})}}updateColor(e){if(u(this,hd)&&(u(this,hd).style.backgroundColor=e),!u(this,Nn))return;const t=u(this,Gs).highlightColors.values();for(const i of u(this,Nn).children)i.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=u(this,Tr))==null||e.remove(),T(this,Tr,null),T(this,hd,null),(t=u(this,Nn))==null||t.remove(),T(this,Nn,null)}};Tr=new WeakMap,hd=new WeakMap,yp=new WeakMap,Nn=new WeakMap,Nb=new WeakMap,bp=new WeakMap,jo=new WeakMap,jb=new WeakMap,ol=new WeakMap,Gs=new WeakMap,Rb=new WeakMap,kt=new WeakSet,XE=function(){const e=document.createElement("div"),t=u(this,Gs)._signal;e.addEventListener("contextmenu",Os,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),u(this,jo)&&(e.id=`${u(this,jo).id}_colorpicker_dropdown`);for(const[i,r]of u(this,Gs).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",r),s.title=i,s.setAttribute("data-l10n-id",u(Qi,Rb)[i]);const a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=r,s.ariaSelected=r===u(this,yp),s.addEventListener("click",O(this,kt,YE).bind(this,r),{signal:t}),e.append(s)}return e.addEventListener("keydown",O(this,kt,KE).bind(this),{signal:t}),e},YE=function(e,t){t.stopPropagation(),u(this,jb).dispatch("switchannotationeditorparams",{source:this,type:rt.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},KE=function(e){Qi._keyboardManager.exec(this,e)},gu=function(e){if(u(this,kt,Dc)){this.hideDropdown();return}if(T(this,Nb,e.detail===0),u(this,ol)||(T(this,ol,new AbortController),window.addEventListener("pointerdown",O(this,kt,YF).bind(this),{signal:u(this,Gs).combinedSignal(u(this,ol))})),u(this,Tr).ariaExpanded="true",u(this,Nn)){u(this,Nn).classList.remove("hidden");return}const t=T(this,Nn,O(this,kt,XE).call(this));u(this,Tr).append(t)},YF=function(e){var t;(t=u(this,Nn))!=null&&t.contains(e.target)||this.hideDropdown()},Dc=function(){return u(this,Nn)&&!u(this,Nn).classList.contains("hidden")},U(Qi,Rb,null);let N2=Qi;var Ea,Fb,vp,Ob;const _u=class _u{constructor(e){U(this,Ea,null);U(this,Fb,null);U(this,vp,null);T(this,Fb,e),T(this,vp,e._uiManager),u(_u,Ob)||T(_u,Ob,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(u(this,Ea))return u(this,Ea);const{editorType:e,colorType:t,color:i}=u(this,Fb),r=T(this,Ea,document.createElement("input"));return r.type="color",r.value=i||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",u(_u,Ob)[e]),r.addEventListener("input",()=>{u(this,vp).updateParams(t,r.value)},{signal:u(this,vp)._signal}),r}update(e){u(this,Ea)&&(u(this,Ea).value=e)}destroy(){var e;(e=u(this,Ea))==null||e.remove(),T(this,Ea,null)}hideDropdown(){}};Ea=new WeakMap,Fb=new WeakMap,vp=new WeakMap,Ob=new WeakMap,U(_u,Ob,null);let j2=_u;function aN(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Vg(n){return Math.max(0,Math.min(255,255*n))}class oN{static CMYK_G([e,t,i,r]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Vg(e),[e,e,e]}static G_HTML([e]){const t=aN(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(Vg)}static RGB_HTML(e){return`#${e.map(aN).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,i+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,i,r]){return[Vg(1-Math.min(1,e+r)),Vg(1-Math.min(1,i+r)),Vg(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const r=1-e,s=1-t,a=1-i,o=Math.min(r,s,a);return["CMYK",r,s,a,o]}}class U${create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Rt("Abstract method `_createSVG` called.")}}class R2 extends U${_createSVG(e){return document.createElementNS(io,e)}}const N$=9,eh=new WeakSet,j$=new Date().getTimezoneOffset()*60*1e3;class B_{static create(e){switch(e.data.annotationType){case bn.LINK:return new sC(e);case bn.TEXT:return new F$(e);case bn.WIDGET:switch(e.data.fieldType){case"Tx":return new O$(e);case"Btn":return e.data.radioButton?new JF(e):e.data.checkBox?new B$(e):new L$(e);case"Ch":return new I$(e);case"Sig":return new M$(e)}return new dh(e);case bn.POPUP:return new JE(e);case bn.FREETEXT:return new iO(e);case bn.LINE:return new z$(e);case bn.SQUARE:return new W$(e);case bn.CIRCLE:return new q$(e);case bn.POLYLINE:return new rO(e);case bn.CARET:return new H$(e);case bn.INK:return new aC(e);case bn.POLYGON:return new $$(e);case bn.HIGHLIGHT:return new sO(e);case bn.UNDERLINE:return new V$(e);case bn.SQUIGGLY:return new G$(e);case bn.STRIKEOUT:return new X$(e);case bn.STAMP:return new aO(e);case bn.FILEATTACHMENT:return new Y$(e);default:return new tn(e)}}}var fd,xp,ms,Mb,QE;const jk=class jk{constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){U(this,Mb);U(this,fd,null);U(this,xp,!1);U(this,ms,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return jk._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var i;const{data:e}=this,t=(i=this.annotationStorage)==null?void 0:i.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var o;const e=(o=this.annotationStorage)==null?void 0:o.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:i,rect:r}=this.data;let s=-1/0,a=-1/0;if((t==null?void 0:t.length)>=8){for(let c=0;c<t.length;c+=8)t[c+1]>a?(a=t[c+1],s=t[c+2]):t[c+1]===a&&(s=Math.max(s,t[c+2]));return[s,a]}if((i==null?void 0:i.length)>=1){for(const c of i)for(let l=0,d=c.length;l<d;l+=2)c[l+1]>a?(a=c[l+1],s=c[l]):c[l+1]===a&&(s=Math.max(s,c[l]));if(s!==1/0)return[s,a]}return r?[r[2],r[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:i,pageHeight:r,pageX:s,pageY:a}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-s)/i,e[1]=100*(e[1]-a)/r,e}get commentText(){var t,i,r;const{data:e}=this;return((i=(t=this.annotationStorage.getRawValue(`${ay}${e.id}`))==null?void 0:t.popup)==null?void 0:i.contents)||((r=e.contentsObj)==null?void 0:r.str)||""}set commentText(e){const{data:t}=this,i={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:i})||this.annotationStorage.setValue(`${ay}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:i,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=u(this,ms))==null?void 0:e.popup)||this.popup)==null||t.remove(),T(this,ms,this.popup=null)}updateEdited(e){var s;if(!this.container)return;e.rect&&(u(this,fd)||T(this,fd,{rect:this.data.rect.slice(0)}));const{rect:t,popup:i}=e;t&&O(this,Mb,QE).call(this,t);let r=((s=u(this,ms))==null?void 0:s.popup)||this.popup;!r&&(i!=null&&i.text)&&(this._createPopup(i),r=u(this,ms).popup),r&&(r.updateEdited(e),i!=null&&i.deleted&&(r.remove(),T(this,ms,null),this.popup=null))}resetEdited(){var e;u(this,fd)&&(O(this,Mb,QE).call(this,u(this,fd).rect),(e=u(this,ms))==null||e.popup.resetEdited(),T(this,fd,null))}_createContainer(e){const{data:t,parent:{page:i,viewport:r}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),!(this instanceof dh)&&!(this instanceof sC)&&(s.tabIndex=0);const{style:a}=s;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof JE){const{rotation:y}=t;return!t.hasOwnCanvas&&y!==0&&this.setRotation(y,s),s}const{width:o,height:c}=this;if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const y=t.borderStyle.horizontalCornerRadius,x=t.borderStyle.verticalCornerRadius;if(y>0||x>0){const b=`calc(${y}px * var(--total-scale-factor)) / calc(${x}px * var(--total-scale-factor))`;a.borderRadius=b}else if(this instanceof JF){const b=`calc(${o}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;a.borderRadius=b}switch(t.borderStyle.style){case Oh.SOLID:a.borderStyle="solid";break;case Oh.DASHED:a.borderStyle="dashed";break;case Oh.BEVELED:Be("Unimplemented border style: beveled");break;case Oh.INSET:Be("Unimplemented border style: inset");break;case Oh.UNDERLINE:a.borderBottomStyle="solid";break}const m=t.borderColor||null;m?(T(this,xp,!0),a.borderColor=Ee.makeHexColor(m[0]|0,m[1]|0,m[2]|0)):a.borderWidth=0}const l=Ee.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:d,pageHeight:h,pageX:f,pageY:g}=r.rawDims;a.left=`${100*(l[0]-f)/d}%`,a.top=`${100*(l[1]-g)/h}%`;const{rotation:v}=t;return t.hasOwnCanvas||v===0?(a.width=`${100*o/d}%`,a.height=`${100*c/h}%`):this.setRotation(v,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims;let{width:s,height:a}=this;e%180!==0&&([s,a]=[a,s]),t.style.width=`${100*s/i}%`,t.style.height=`${100*a/r}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,r)=>{const s=r.detail[t],a=s[0],o=s.slice(1);r.target.style[i]=oN[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[i]:oN[`${a}_rgb`](o)})};return Le(this,"_commonActions",{display:t=>{const{display:i}=t.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const r of Object.keys(t.detail)){const s=e[r]||i[r];s==null||s(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[r,s]of Object.entries(t)){const a=i[r];if(a){const o={detail:{[r]:s},target:e};a(o),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,r,s]=this.data.rect.map(y=>Math.fround(y));if(e.length===8){const[y,x,m,b]=e.subarray(2,6);if(r===y&&s===x&&t===m&&i===b)return}const{style:a}=this.container;let o;if(u(this,xp)){const{borderColor:y,borderWidth:x}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${y}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const c=r-t,l=s-i,{svgFactory:d}=this,h=d.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";const f=d.createElement("defs");h.append(f);const g=d.createElement("clipPath"),v=`clippath_${this.data.id}`;g.setAttribute("id",v),g.setAttribute("clipPathUnits","objectBoundingBox"),f.append(g);for(let y=2,x=e.length;y<x;y+=8){const m=e[y],b=e[y+1],w=e[y+2],_=e[y+3],D=d.createElement("rect"),A=(w-t)/c,E=(s-b)/l,F=(m-w)/c,I=(b-_)/l;D.setAttribute("x",A),D.setAttribute("y",E),D.setAttribute("width",F),D.setAttribute("height",I),g.append(D),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${A}" y="${E}" width="${F}" height="${I}"/>`)}u(this,xp)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(h),this.container.style.clipPath=`url(#${v})`}_createPopup(e=null){const{data:t}=this;let i,r;e?(i={str:e.text},r=e.date):(i=t.contentsObj,r=t.modificationDate),T(this,ms,new JE({data:{color:t.color,titleObj:t.titleObj,modificationDate:r,contentsObj:i,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(u(this,ms)||this.popup||this.data.popupRef)}get extraPopupElement(){return u(this,ms)}render(){Rt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:s,id:a,exportValues:o}of r){if(s===-1||a===t)continue;const c=typeof o=="string"?o:null,l=document.querySelector(`[data-element-id="${a}"]`);if(l&&!eh.has(l)){Be(`_getElementsByName - element not allowed: ${a}`);continue}i.push({id:a,exportValue:c,domElement:l})}return i}for(const r of document.getElementsByName(e)){const{exportValue:s}=r,a=r.getAttribute("data-element-id");a!==t&&eh.has(r)&&i.push({id:a,exportValue:s,domElement:r})}return i}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};fd=new WeakMap,xp=new WeakMap,ms=new WeakMap,Mb=new WeakSet,QE=function(e){const{container:{style:t},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:c}}}}=this;i==null||i.splice(0,4,...e),t.left=`${100*(e[0]-o)/s}%`,t.top=`${100*(a-e[3]+c)/a}%`,r===0?(t.width=`${100*(e[2]-e[0])/s}%`,t.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(r)};let tn=jk;class R$ extends tn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var $r,mu,KF,QF;class sC extends tn{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});U(this,$r);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let s=!1;return t.url?(i.addLinkAttributes(r,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(r,t.action,t.overlaidText),s=!0):t.attachment?(O(this,$r,KF).call(this,r,t.attachment,t.overlaidText,t.attachmentDest),s=!0):t.setOCGState?(O(this,$r,QF).call(this,r,t.setOCGState,t.overlaidText),s=!0):t.dest?(this._bindLink(r,t.dest,t.overlaidText),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),s=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(r,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&(this.contentElement=r,this.container.append(r)),this.container}_bindLink(t,i,r=""){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&O(this,$r,mu).call(this),r&&(t.title=r)}_bindNamedAction(t,i,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),r&&(t.title=r),O(this,$r,mu).call(this)}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(i.actions)){const a=r.get(s);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:s}}),!1})}i.overlaidText&&(t.title=i.overlaidText),t.onclick||(t.onclick=()=>!1),O(this,$r,mu).call(this)}_bindResetFormAction(t,i){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),O(this,$r,mu).call(this),!this._fieldObjects){Be('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var h;r==null||r();const{fields:s,refs:a,include:o}=i,c=[];if(s.length!==0||a.length!==0){const f=new Set(a);for(const g of s){const v=this._fieldObjects[g]||[];for(const{id:y}of v)f.add(y)}for(const g of Object.values(this._fieldObjects))for(const v of g)f.has(v.id)===o&&c.push(v)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const l=this.annotationStorage,d=[];for(const f of c){const{id:g}=f;switch(d.push(g),f.type){case"text":{const y=f.defaultValue||"";l.setValue(g,{value:y});break}case"checkbox":case"radiobutton":{const y=f.defaultValue===f.exportValues;l.setValue(g,{value:y});break}case"combobox":case"listbox":{const y=f.defaultValue||"";l.setValue(g,{value:y});break}default:continue}const v=document.querySelector(`[data-element-id="${g}"]`);if(v){if(!eh.has(v)){Be(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}$r=new WeakSet,mu=function(){this.container.setAttribute("data-internal-link","")},KF=function(t,i,r="",s=null){t.href=this.linkService.getAnchorUrl(""),i.description?t.title=i.description:r&&(t.title=r),t.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(i.content,i.filename,s),!1},O(this,$r,mu).call(this)},QF=function(t,i,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),r&&(t.title=r),O(this,$r,mu).call(this)};class F$ extends tn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class dh extends tn{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return hi.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,r,s){i.includes("mouse")?e.addEventListener(i,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(i,a=>{var o;if(i==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}s&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(a)}}))})}_setEventListeners(e,t,i,r){var s,a,o;for(const[c,l]of i)(l==="Action"||(s=this.data.actions)!=null&&s[l])&&((l==="Focus"||l==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,l,r),l==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):l==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Ee.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||N$,s=e.style;let a;const o=2,c=l=>Math.round(10*l)/10;if(this.data.multiLine){const l=Math.abs(this.data.rect[3]-this.data.rect[1]-o),d=Math.round(l/(k_*r))||1,h=l/d;a=Math.min(r,c(h/k_))}else{const l=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(r,c(l/k_))}s.fontSize=`calc(${a}px * var(--total-scale-factor))`,s.color=Ee.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class O$ extends dh{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,r){const s=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=i),s.setValue(a.id,{[r]:i})}render(){var r,s;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let l=a.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=l??o,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",l??o),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),eh.add(i),this.contentElement=i,i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:h,datetimeType:f,timeStep:g}=this.data,v=!!f&&this.enableScripting;h&&(i.title=h),this._setRequired(i,this.data.required),c&&(i.maxLength=c),i.addEventListener("input",x=>{e.setValue(t,{value:x.target.value}),this.setPropertyOnSiblings(i,"value",x.target.value,"value"),d.formattedValue=null}),i.addEventListener("resetform",x=>{const m=this.data.defaultFieldValue??"";i.value=d.userValue=m,d.formattedValue=null});let y=x=>{const{formattedValue:m}=d;m!=null&&(x.target.value=m),x.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",m=>{var w;if(d.focused)return;const{target:b}=m;if(v&&(b.type=f,g&&(b.step=g)),d.userValue){const _=d.userValue;if(v)if(f==="time"){const D=new Date(_),A=[D.getHours(),D.getMinutes(),D.getSeconds()];b.value=A.map(E=>E.toString().padStart(2,"0")).join(":")}else b.value=new Date(_-j$).toISOString().split(f==="date"?"T":".",1)[0];else b.value=_}d.lastCommittedValue=b.value,d.commitKey=1,(w=this.data.actions)!=null&&w.Focus||(d.focused=!0)}),i.addEventListener("updatefromsandbox",m=>{this.showElementAndHideCanvas(m.target);const b={value(w){d.userValue=w.detail.value??"",v||e.setValue(t,{value:d.userValue.toString()}),w.target.value=d.userValue},formattedValue(w){const{formattedValue:_}=w.detail;d.formattedValue=_,_!=null&&w.target!==document.activeElement&&(w.target.value=_);const D={formattedValue:_};v&&(D.value=_),e.setValue(t,D)},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{var E;const{charLimit:_}=w.detail,{target:D}=w;if(_===0){D.removeAttribute("maxLength");return}D.setAttribute("maxLength",_);let A=d.userValue;!A||A.length<=_||(A=A.slice(0,_),D.value=d.userValue=A,e.setValue(t,{value:A}),(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:1,selStart:D.selectionStart,selEnd:D.selectionEnd}}))}};this._dispatchEventFromSandbox(b,m)}),i.addEventListener("keydown",m=>{var _;d.commitKey=1;let b=-1;if(m.key==="Escape"?b=0:m.key==="Enter"&&!this.data.multiLine?b=2:m.key==="Tab"&&(d.commitKey=3),b===-1)return;const{value:w}=m.target;d.lastCommittedValue!==w&&(d.lastCommittedValue=w,d.userValue=w,(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,willCommit:!0,commitKey:b,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}}))});const x=y;y=null,i.addEventListener("blur",m=>{var _,D;if(!d.focused||!m.relatedTarget)return;(_=this.data.actions)!=null&&_.Blur||(d.focused=!1);const{target:b}=m;let{value:w}=b;if(v){if(w&&f==="time"){const A=w.split(":").map(E=>parseInt(E,10));w=new Date(2e3,0,1,A[0],A[1],A[2]||0).valueOf(),b.step=""}else w.includes("T")||(w=`${w}T00:00`),w=new Date(w).valueOf();b.type="text"}d.userValue=w,d.lastCommittedValue!==w&&((D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,willCommit:!0,commitKey:d.commitKey,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}})),x(m)}),(s=this.data.actions)!=null&&s.Keystroke&&i.addEventListener("beforeinput",m=>{var I;d.lastCommittedValue=null;const{data:b,target:w}=m,{value:_,selectionStart:D,selectionEnd:A}=w;let E=D,F=A;switch(m.inputType){case"deleteWordBackward":{const z=_.substring(0,D).match(/\w*[^\w]*$/);z&&(E-=z[0].length);break}case"deleteWordForward":{const z=_.substring(D).match(/^[^\w]*\w*/);z&&(F+=z[0].length);break}case"deleteContentBackward":D===A&&(E-=1);break;case"deleteContentForward":D===A&&(F+=1);break}m.preventDefault(),(I=this.linkService.eventBus)==null||I.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,change:b||"",willCommit:!1,selStart:E,selEnd:F}})}),this._setEventListeners(i,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],m=>m.target.value)}if(y&&i.addEventListener("blur",y),this.data.comb){const m=(this.data.rect[2]-this.data.rect[0])/c;i.classList.add("comb"),i.style.letterSpacing=`calc(${m}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class M$ extends dh{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class B$ extends dh{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return eh.add(s),s.setAttribute("data-element-id",i),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=0,s.addEventListener("change",a=>{const{name:o,checked:c}=a.target;for(const l of this._getElementsByName(o,i)){const d=c&&l.exportValue===t.exportValue;l.domElement&&(l.domElement.checked=d),e.setValue(l.id,{value:d})}e.setValue(i,{value:c})}),s.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",a=>{const o={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(i,{value:c.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class JF extends dh{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(i,{value:r})),r)for(const a of this._getElementsByName(t.fieldName,i))e.setValue(a.id,{value:!1});const s=document.createElement("input");if(eh.add(s),s.setAttribute("data-element-id",i),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",a=>{const{name:o,checked:c}=a.target;for(const l of this._getElementsByName(o,i))e.setValue(l.id,{value:!1});e.setValue(i,{value:c})}),s.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;s.addEventListener("updatefromsandbox",o=>{const c={value:l=>{const d=a===l.detail.value;for(const h of this._getElementsByName(l.target.name)){const f=d&&h.id===i;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class L$ extends sC{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class I$ extends dh{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");eh.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",d=>{const h=this.data.defaultFieldValue;for(const f of r.options)f.selected=f.value===h});for(const d of this.data.options){const h=document.createElement("option");h.textContent=d.displayValue,h.value=d.exportValue,i.value.includes(d.exportValue)&&(h.setAttribute("selected",!0),s=!1),r.append(h)}let a=null;if(s){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),r.prepend(d),a=()=>{d.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}const o=d=>{const h=d?"value":"textContent",{options:f,multiple:g}=r;return g?Array.prototype.filter.call(f,v=>v.selected).map(v=>v[h]):f.selectedIndex===-1?null:f[f.selectedIndex][h]};let c=o(!1);const l=d=>{const h=d.target.options;return Array.prototype.map.call(h,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",d=>{const h={value(f){a==null||a();const g=f.detail.value,v=new Set(Array.isArray(g)?g:[g]);for(const y of r.options)y.selected=v.has(y.value);e.setValue(t,{value:o(!0)}),c=o(!1)},multipleSelection(f){r.multiple=!0},remove(f){const g=r.options,v=f.detail.remove;g[v].selected=!1,r.remove(v),g.length>0&&Array.prototype.findIndex.call(g,x=>x.selected)===-1&&(g[0].selected=!0),e.setValue(t,{value:o(!0),items:l(f)}),c=o(!1)},clear(f){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),c=o(!1)},insert(f){const{index:g,displayValue:v,exportValue:y}=f.detail.insert,x=r.children[g],m=document.createElement("option");m.textContent=v,m.value=y,x?x.before(m):r.append(m),e.setValue(t,{value:o(!0),items:l(f)}),c=o(!1)},items(f){const{items:g}=f.detail;for(;r.length!==0;)r.remove(0);for(const v of g){const{displayValue:y,exportValue:x}=v,m=document.createElement("option");m.textContent=y,m.value=x,r.append(m)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:o(!0),items:l(f)}),c=o(!1)},indices(f){const g=new Set(f.detail.indices);for(const v of f.target.options)v.selected=g.has(v.index);e.setValue(t,{value:o(!0)}),c=o(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(h,d)}),r.addEventListener("input",d=>{var g;const h=o(!0),f=o(!1);e.setValue(t,{value:h}),d.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:f,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):r.addEventListener("input",function(d){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}var Bb,ZE;class JE extends tn{constructor(t){const{data:i,elements:r,parent:s}=t,a=!!s._commentManager;super(t,{isRenderable:!a&&tn._hasPopupData(i)});U(this,Bb);if(this.elements=r,a&&tn._hasPopupData(i)){const o=this.popup=O(this,Bb,ZE).call(this);for(const c of r)c.popup=o}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const i=this.popup=O(this,Bb,ZE).call(this),r=[];for(const s of this.elements)s.popup=i,s.container.ariaHasPopup="dialog",r.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(s=>`${tf}${s}`).join(",")),this.container}}Bb=new WeakSet,ZE=function(){return new P$({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Cr,cl,o1,c1,wp,_p,an,Sa,ll,pd,Dp,Ap,Ta,kr,Ro,Fo,on,Oo,ul,Lb,Mo,Ep,gd,dl,Bn,hl,Ge,yx,eS,tS,nS,bx,iS,ZF,eO,tO,nO,vx,xx,rS;class P${constructor({container:e,color:t,elements:i,titleObj:r,modificationDate:s,contentsObj:a,richText:o,parent:c,rect:l,parentRect:d,open:h,commentManager:f=null}){U(this,Ge);U(this,Cr,null);U(this,cl,O(this,Ge,tO).bind(this));U(this,o1,O(this,Ge,rS).bind(this));U(this,c1,O(this,Ge,xx).bind(this));U(this,wp,O(this,Ge,vx).bind(this));U(this,_p,null);U(this,an,null);U(this,Sa,null);U(this,ll,null);U(this,pd,null);U(this,Dp,null);U(this,Ap,null);U(this,Ta,!1);U(this,kr,null);U(this,Ro,null);U(this,Fo,null);U(this,on,null);U(this,Oo,null);U(this,ul,null);U(this,Lb,null);U(this,Mo,null);U(this,Ep,null);U(this,gd,null);U(this,dl,!1);U(this,Bn,null);U(this,hl,null);T(this,an,e),T(this,Ep,r),T(this,Sa,a),T(this,Mo,o),T(this,Dp,c),T(this,_p,t),T(this,Lb,l),T(this,Ap,d),T(this,pd,i),T(this,Cr,f),T(this,Bn,i[0]),T(this,ll,E2.toDateObject(s)),this.trigger=i.flatMap(g=>g.getElementsToTriggerPopup()),f||(O(this,Ge,yx).call(this),u(this,an).hidden=!0,h&&O(this,Ge,vx).call(this))}renderCommentButton(){if(u(this,on)){u(this,on).parentNode||u(this,Bn).container.after(u(this,on));return}if(u(this,Oo)||O(this,Ge,eS).call(this),!u(this,Oo))return;const{signal:e}=T(this,Ro,new AbortController),t=u(this,Bn).hasOwnCommentButton,i=()=>{u(this,Cr).toggleCommentPopup(this,!0,void 0,!t)},r=()=>{u(this,Cr).toggleCommentPopup(this,!1,!0,!t)},s=()=>{u(this,Cr).toggleCommentPopup(this,!1,!1)};if(t){T(this,on,u(this,Bn).container);for(const a of this.trigger)a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.addEventListener("keydown",u(this,cl),{signal:e}),a.addEventListener("click",i,{signal:e}),a.addEventListener("pointerenter",r,{signal:e}),a.addEventListener("pointerleave",s,{signal:e}),a.classList.add("popupTriggerArea")}else{const a=T(this,on,document.createElement("button"));a.className="annotationCommentButton";const o=u(this,Bn).container;a.style.zIndex=o.style.zIndex+1,a.tabIndex=0,a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.setAttribute("data-l10n-id","pdfjs-show-comment-button"),O(this,Ge,nS).call(this),O(this,Ge,tS).call(this),a.addEventListener("keydown",u(this,cl),{signal:e}),a.addEventListener("click",i,{signal:e}),a.addEventListener("pointerenter",r,{signal:e}),a.addEventListener("pointerleave",s,{signal:e}),o.after(a)}}get commentButtonColor(){const{color:e,opacity:t}=u(this,Bn).commentData;return e?u(this,Dp)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=u(this,on))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:i,creationDate:r,modificationDate:s}=u(this,Bn).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:i,creationDate:r,modificationDate:s}}get elementBeforePopup(){return u(this,on)}get comment(){return u(this,hl)||T(this,hl,u(this,Bn).commentText),u(this,hl)}set comment(e){e!==this.comment&&(u(this,Bn).commentText=T(this,hl,e))}focus(){var e;(e=u(this,Bn).container)==null||e.focus()}get parentBoundingClientRect(){return u(this,Bn).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){u(this,on)&&(u(this,on).classList.toggle("selected",e),u(this,on).ariaExpanded=t)}setSelectedCommentButton(e){u(this,on).classList.toggle("selected",e)}get commentPopupPosition(){if(u(this,ul))return u(this,ul);const{x:e,y:t,height:i}=u(this,on).getBoundingClientRect(),{x:r,y:s,width:a,height:o}=u(this,Bn).layer.getBoundingClientRect();return[(e-r)/a,(t+i-s)/o]}set commentPopupPosition(e){T(this,ul,e)}hasDefaultPopupPosition(){return u(this,ul)===null}get commentButtonPosition(){return u(this,Oo)}get commentButtonWidth(){return u(this,on).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,i]=u(this,ul)||this.commentButtonPosition.map(l=>l/100),r=this.parentBoundingClientRect,{x:s,y:a,width:o,height:c}=r;u(this,Cr).showDialog(null,this,s+t*o,a+i*c,{...e,parentDimensions:r})}render(){var i,r;if(u(this,kr))return;const e=T(this,kr,document.createElement("div"));if(e.className="popup",u(this,_p)){const s=e.style.outlineColor=Ee.makeHexColor(...u(this,_p));e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const t=document.createElement("span");if(t.className="header",(i=u(this,Ep))!=null&&i.str){const s=document.createElement("span");s.className="title",t.append(s),{dir:s.dir,str:s.textContent}=u(this,Ep)}if(e.append(t),u(this,ll)){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:u(this,ll).valueOf()})),s.dateTime=u(this,ll).toISOString(),t.append(s)}q6({html:u(this,Ge,bx)||u(this,Sa).str,dir:(r=u(this,Sa))==null?void 0:r.dir,className:"popupContent"},e),u(this,an).append(e)}updateEdited({rect:e,popup:t,deleted:i}){var r;if(u(this,Cr)){i?(this.remove(),T(this,hl,null)):t&&(t.deleted?this.remove():(O(this,Ge,nS).call(this),T(this,hl,t.text))),e&&(T(this,Oo,null),O(this,Ge,eS).call(this),O(this,Ge,tS).call(this));return}if(i||t!=null&&t.deleted){this.remove();return}O(this,Ge,yx).call(this),u(this,gd)||T(this,gd,{contentsObj:u(this,Sa),richText:u(this,Mo)}),e&&T(this,Fo,null),t&&t.text&&(T(this,Mo,O(this,Ge,eO).call(this,t.text)),T(this,ll,E2.toDateObject(t.date)),T(this,Sa,null)),(r=u(this,kr))==null||r.remove(),T(this,kr,null)}resetEdited(){var e;u(this,gd)&&({contentsObj:Tn(this,Sa)._,richText:Tn(this,Mo)._}=u(this,gd),T(this,gd,null),(e=u(this,kr))==null||e.remove(),T(this,kr,null),T(this,Fo,null))}remove(){var e,t,i;if((e=u(this,Ro))==null||e.abort(),T(this,Ro,null),(t=u(this,kr))==null||t.remove(),T(this,kr,null),T(this,dl,!1),T(this,Ta,!1),(i=u(this,on))==null||i.remove(),T(this,on,null),this.trigger)for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){T(this,dl,this.isVisible),u(this,dl)&&(u(this,an).hidden=!0)}maybeShow(){u(this,Cr)||(O(this,Ge,yx).call(this),u(this,dl)&&(u(this,kr)||O(this,Ge,xx).call(this),T(this,dl,!1),u(this,an).hidden=!1))}get isVisible(){return u(this,Cr)?!1:u(this,an).hidden===!1}}Cr=new WeakMap,cl=new WeakMap,o1=new WeakMap,c1=new WeakMap,wp=new WeakMap,_p=new WeakMap,an=new WeakMap,Sa=new WeakMap,ll=new WeakMap,pd=new WeakMap,Dp=new WeakMap,Ap=new WeakMap,Ta=new WeakMap,kr=new WeakMap,Ro=new WeakMap,Fo=new WeakMap,on=new WeakMap,Oo=new WeakMap,ul=new WeakMap,Lb=new WeakMap,Mo=new WeakMap,Ep=new WeakMap,gd=new WeakMap,dl=new WeakMap,Bn=new WeakMap,hl=new WeakMap,Ge=new WeakSet,yx=function(){var t;if(u(this,Ro))return;T(this,Ro,new AbortController);const{signal:e}=u(this,Ro);for(const i of this.trigger)i.addEventListener("click",u(this,wp),{signal:e}),i.addEventListener("pointerenter",u(this,c1),{signal:e}),i.addEventListener("pointerleave",u(this,o1),{signal:e}),i.classList.add("popupTriggerArea");for(const i of u(this,pd))(t=i.container)==null||t.addEventListener("keydown",u(this,cl),{signal:e})},eS=function(){const e=u(this,pd).find(t=>t.hasCommentButton);e&&T(this,Oo,e._normalizePoint(e.commentButtonPosition))},tS=function(){if(u(this,Bn).extraPopupElement&&!u(this,Bn).editor)return;u(this,on)||this.renderCommentButton();const[e,t]=u(this,Oo),{style:i}=u(this,on);i.left=`calc(${e}%)`,i.top=`calc(${t}% - var(--comment-button-dim))`},nS=function(){u(this,Bn).extraPopupElement||(u(this,on)||this.renderCommentButton(),u(this,on).style.backgroundColor=this.commentButtonColor||"")},bx=function(){const e=u(this,Mo),t=u(this,Sa);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&u(this,Mo).html||null},iS=function(){var e,t,i;return((i=(t=(e=u(this,Ge,bx))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.fontSize)||0},ZF=function(){var e,t,i;return((i=(t=(e=u(this,Ge,bx))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.color)||null},eO=function(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:u(this,Ge,ZF),fontSize:u(this,Ge,iS)?`calc(${u(this,Ge,iS)}px * var(--total-scale-factor))`:""}};for(const s of e.split(`
`))t.push({name:"span",value:s,attributes:r});return i},tO=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&u(this,Ta))&&O(this,Ge,vx).call(this)},nO=function(){if(u(this,Fo)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:r,pageY:s}}}=u(this,Dp);let a=!!u(this,Ap),o=a?u(this,Ap):u(this,Lb);for(const v of u(this,pd))if(!o||Ee.intersect(v.data.rect,o)!==null){o=v.data.rect,a=!0;break}const c=Ee.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),d=a?o[2]-o[0]+5:0,h=c[0]+d,f=c[1];T(this,Fo,[100*(h-r)/t,100*(f-s)/i]);const{style:g}=u(this,an);g.left=`${u(this,Fo)[0]}%`,g.top=`${u(this,Fo)[1]}%`},vx=function(){if(u(this,Cr)){u(this,Cr).toggleCommentPopup(this,!1);return}T(this,Ta,!u(this,Ta)),u(this,Ta)?(O(this,Ge,xx).call(this),u(this,an).addEventListener("click",u(this,wp)),u(this,an).addEventListener("keydown",u(this,cl))):(O(this,Ge,rS).call(this),u(this,an).removeEventListener("click",u(this,wp)),u(this,an).removeEventListener("keydown",u(this,cl)))},xx=function(){u(this,kr)||this.render(),this.isVisible?u(this,Ta)&&u(this,an).classList.add("focused"):(O(this,Ge,nO).call(this),u(this,an).hidden=!1,u(this,an).style.zIndex=parseInt(u(this,an).style.zIndex)+1e3)},rS=function(){u(this,an).classList.remove("focused"),!(u(this,Ta)||!this.isVisible)&&(u(this,an).hidden=!0,u(this,an).style.zIndex=parseInt(u(this,an).style.zIndex)-1e3)};class iO extends tn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Pe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Ib;class z$ extends tn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});U(this,Ib,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:i,height:r}=this,s=this.svgFactory.create(i,r,!0),a=T(this,Ib,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,Ib)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ib=new WeakMap;var Pb;class W$ extends tn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});U(this,Pb,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:i,height:r}=this,s=this.svgFactory.create(i,r,!0),a=t.borderStyle.width,o=T(this,Pb,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",i-a),o.setAttribute("height",r-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,Pb)}addHighlightArea(){this.container.classList.add("highlightArea")}}Pb=new WeakMap;var zb;class q$ extends tn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});U(this,zb,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:i,height:r}=this,s=this.svgFactory.create(i,r,!0),a=t.borderStyle.width,o=T(this,zb,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",i/2),o.setAttribute("cy",r/2),o.setAttribute("rx",i/2-a/2),o.setAttribute("ry",r/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,zb)}addHighlightArea(){this.container.classList.add("highlightArea")}}zb=new WeakMap;var Wb;class rO extends tn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});U(this,Wb,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:r,popupRef:s},width:a,height:o}=this;if(!i)return this.container;const c=this.svgFactory.create(a,o,!0);let l=[];for(let h=0,f=i.length;h<f;h+=2){const g=i[h]-t[0],v=t[3]-i[h+1];l.push(`${g},${v}`)}l=l.join(" ");const d=T(this,Wb,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",l),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d),this.container.append(c),!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,Wb)}addHighlightArea(){this.container.classList.add("highlightArea")}}Wb=new WeakMap;class $$ extends rO{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class H$ extends tn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var qb,md,$b,sS;class aC extends tn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});U(this,$b);U(this,qb,null);U(this,md,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Pe.HIGHLIGHT:Pe.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:i,inkLists:r,borderStyle:s,popupRef:a}}=this,{transform:o,width:c,height:l}=O(this,$b,sS).call(this,i,t),d=this.svgFactory.create(c,l,!0),h=T(this,qb,this.svgFactory.createElement("svg:g"));d.append(h),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",o);for(let f=0,g=r.length;f<g;f++){const v=this.svgFactory.createElement(this.svgElementName);u(this,md).push(v),v.setAttribute("points",r[f].join(",")),h.append(v)}return!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:i,points:r,rect:s}=t,a=u(this,qb);if(i>=0&&a.setAttribute("stroke-width",i||1),r)for(let o=0,c=u(this,md).length;o<c;o++)u(this,md)[o].setAttribute("points",r[o].join(","));if(s){const{transform:o,width:c,height:l}=O(this,$b,sS).call(this,this.data.rotation,s);a.parentElement.setAttribute("viewBox",`0 0 ${c} ${l}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return u(this,md)}addHighlightArea(){this.container.classList.add("highlightArea")}}qb=new WeakMap,md=new WeakMap,$b=new WeakSet,sS=function(t,i){switch(t){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}};class sO extends tn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Pe.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class V$ extends tn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class G$ extends tn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class X$ extends tn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class aO extends tn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Pe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Hb,Vb,aS;class Y$ extends tn{constructor(t){var r;super(t,{isRenderable:!0});U(this,Vb);U(this,Hb,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let r;i.hasAppearance||i.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),r.addEventListener("dblclick",O(this,Vb,aS).bind(this)),T(this,Hb,r);const{isMac:s}=hi.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(s?a.metaKey:a.ctrlKey)&&O(this,Vb,aS).call(this)}),!i.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return u(this,Hb)}addHighlightArea(){this.container.classList.add("highlightArea")}}Hb=new WeakMap,Vb=new WeakSet,aS=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var yd,bd,Sp,fl,Gb,vd,Ur,Xb,tc,wx,cS;const Rk=class Rk{constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:r,page:s,viewport:a,structTreeLayer:o,commentManager:c,linkService:l,annotationStorage:d}){U(this,tc);U(this,yd,null);U(this,bd,null);U(this,Sp,null);U(this,fl,new Map);U(this,Gb,null);U(this,vd,null);U(this,Ur,[]);U(this,Xb,!1);this.div=e,T(this,yd,t),T(this,bd,i),T(this,Gb,o||null),T(this,vd,l||null),T(this,Sp,d||new nC),this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=c||null}hasEditableAnnotations(){return u(this,fl).size>0}async render(e){var o;const{annotations:t}=e,i=this.div;Jd(i,this.viewport);const r=new Map,s=[],a={data:null,layer:i,linkService:u(this,vd),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new R2,annotationStorage:u(this,Sp),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const c of t){if(c.noHTML)continue;const l=c.annotationType===bn.POPUP;if(l){const f=r.get(c.id);if(!f)continue;if(!this._commentManager){s.push(c);continue}a.elements=f}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;a.data=c;const d=B_.create(a);if(!d.isRenderable)continue;if(!l&&(u(this,Ur).push(d),c.popupRef)){const f=r.get(c.popupRef);f?f.push(d):r.set(c.popupRef,[d])}const h=d.render();c.hidden&&(h.style.visibility="hidden"),d._isEditable&&(u(this,fl).set(d.data.id,d),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(d))}await O(this,tc,wx).call(this);for(const c of s){const l=a.elements=r.get(c.id);a.data=c;const d=B_.create(a);if(!d.isRenderable)continue;const h=d.render();d.contentElement.id=`${tf}${c.id}`,c.hidden&&(h.style.visibility="hidden"),l.at(-1).container.after(h)}O(this,tc,cS).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:u(this,vd),svgFactory:new R2,parent:this};for(const i of e){i.borderStyle||(i.borderStyle=Rk._defaultBorderStyle),t.data=i;const r=B_.create(t);r.isRenderable&&(r.render(),r.contentElement.id=`${tf}${i.id}`,u(this,Ur).push(r))}await O(this,tc,wx).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Jd(t,{rotation:e.rotation}),O(this,tc,cS).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(u(this,fl).values())}getEditableAnnotation(e){return u(this,fl).get(e)}addFakeAnnotation(e){const{div:t}=this,{id:i,rotation:r}=e,s=new R$({data:{id:i,rect:e.getPDFRect(),rotation:r},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:u(this,vd),annotationStorage:u(this,Sp)});return s.render(),s.contentElement.id=`${tf}${i}`,s.createOrUpdatePopup(),u(this,Ur).push(s),s}removeAnnotation(e){var r;const t=u(this,Ur).findIndex(s=>s.data.id===e);if(t<0)return;const[i]=u(this,Ur).splice(t,1);(r=u(this,yd))==null||r.removePointerInTextLayer(i.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const t of e)t.updateFakeAnnotationElement(this);O(this,tc,wx).call(this)}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return Le(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Oh.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};yd=new WeakMap,bd=new WeakMap,Sp=new WeakMap,fl=new WeakMap,Gb=new WeakMap,vd=new WeakMap,Ur=new WeakMap,Xb=new WeakMap,tc=new WeakSet,wx=async function(){var i,r,s;if(u(this,Ur).length===0)return;this.div.replaceChildren();const e=[];if(!u(this,Xb)){T(this,Xb,!0);for(const{contentElement:a,data:{id:o}}of u(this,Ur)){const c=a.id=`${tf}${o}`;e.push((i=u(this,Gb))==null?void 0:i.getAriaAttributes(c).then(l=>{if(l)for(const[d,h]of l)a.setAttribute(d,h)}))}}u(this,Ur).sort(({data:{rect:[a,o,c,l]}},{data:{rect:[d,h,f,g]}})=>{if(a===c&&o===l)return 1;if(d===f&&h===g)return-1;const v=l,y=o,x=(o+l)/2,m=g,b=h,w=(h+g)/2;if(x>=m&&w<=y)return-1;if(w>=v&&x<=b)return 1;const _=(a+c)/2,D=(d+f)/2;return _-D});const t=document.createDocumentFragment();for(const a of u(this,Ur))t.append(a.container),this._commentManager?(s=((r=a.extraPopupElement)==null?void 0:r.popup)||a.popup)==null||s.renderCommentButton():a.extraPopupElement&&t.append(a.extraPopupElement.render());if(this.div.append(t),await Promise.all(e),u(this,yd))for(const a of u(this,Ur))u(this,yd).addPointerInTextLayer(a.contentElement,!1)},cS=function(){var t;if(!u(this,bd))return;const e=this.div;for(const[i,r]of u(this,bd)){const s=e.querySelector(`[data-annotation-id="${i}"]`);if(!s)continue;r.className="annotationContent";const{firstChild:a}=s;a?a.nodeName==="CANVAS"?a.replaceWith(r):a.classList.contains("annotationContent")?a.after(r):a.before(r):s.append(r);const o=u(this,fl).get(i);o&&(o._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(i,s.id,r),o._hasNoCanvas=!1):o.canvas=r)}u(this,bd).clear()};let oS=Rk;const Ev=/\r\n?|\n/g;var Nr,Yb,xd,jr,Sn,oO,cO,lO,_x,nc,Dx,Ax,uO,uS,dO;const qt=class qt extends Lt{constructor(t){super({...t,name:"freeTextEditor"});U(this,Sn);U(this,Nr,"");U(this,Yb,`${this.id}-editor`);U(this,xd,null);U(this,jr);ve(this,"_colorPicker",null);this.color=t.color||qt._defaultColor||Lt._defaultLineColor,T(this,jr,t.fontSize||qt._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const t=qt.prototype,i=a=>a.isEmpty(),r=Zd.TRANSLATE_SMALL,s=Zd.TRANSLATE_BIG;return Le(this,"_keyboardManager",new N0([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}]]))}static initialize(t,i){Lt.initialize(t,i);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case rt.FREETEXT_SIZE:qt._defaultFontSize=i;break;case rt.FREETEXT_COLOR:qt._defaultColor=i;break}}updateParams(t,i){switch(t){case rt.FREETEXT_SIZE:O(this,Sn,oO).call(this,i);break;case rt.FREETEXT_COLOR:O(this,Sn,cO).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[rt.FREETEXT_SIZE,qt._defaultFontSize],[rt.FREETEXT_COLOR,qt._defaultColor||Lt._defaultLineColor]]}get propertiesToUpdate(){return[[rt.FREETEXT_SIZE,u(this,jr)],[rt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new j2(this)),[["colorPicker",this._colorPicker]]}get colorType(){return rt.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-qt._internalPadding*t,-(qt._internalPadding+u(this,jr))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),T(this,xd,new AbortController);const t=this._uiManager.combinedSignal(u(this,xd));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,Yb)),this._isDraggable=!0,(t=u(this,xd))==null||t.abort(),T(this,xd,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var i;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(i=this._initialOptions)!=null&&i.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=u(this,Nr),i=T(this,Nr,O(this,Sn,lO).call(this).trimEnd());if(t===i)return;const r=s=>{if(T(this,Nr,s),!s){this.remove();return}O(this,Sn,Ax).call(this),this._uiManager.rebuild(this),O(this,Sn,_x).call(this)};this.addCommands({cmd:()=>{r(i)},undo:()=>{r(t)},mustExec:!1}),O(this,Sn,_x).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){qt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,i;(this._isCopy||this.annotationElementId)&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,Yb)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${u(this,jr)}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[c,l]=this.getInitialTranslation();[c,l]=this.pageTranslationToScreen(c,l);const[d,h]=this.pageDimensions,[f,g]=this.pageTranslation;let v,y;switch(this.rotation){case 0:v=t+(o[0]-f)/d,y=i+this.height-(o[1]-g)/h;break;case 90:v=t+(o[0]-f)/d,y=i-(o[1]-g)/h,[c,l]=[l,-c];break;case 180:v=t-this.width+(o[0]-f)/d,y=i-(o[1]-g)/h,[c,l]=[-c,-l];break;case 270:v=t+(o[0]-f-this.height*h)/d,y=i+(o[1]-g-this.width*d)/h,[c,l]=[-l,c];break}this.setAt(v*s,y*a,c,l)}else this._moveAfterPaste(t,i);O(this,Sn,Ax).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var v,y,x;const i=t.clipboardData||window.clipboardData,{types:r}=i;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const s=O(v=qt,nc,uS).call(v,i.getData("text")||"").replaceAll(Ev,`
`);if(!s)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!s.includes(`
`)){o.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:l}=o,d=[],h=[];if(c.nodeType===Node.TEXT_NODE){const m=c.parentElement;if(h.push(c.nodeValue.slice(l).replaceAll(Ev,"")),m!==this.editorDiv){let b=d;for(const w of this.editorDiv.childNodes){if(w===m){b=h;continue}b.push(O(y=qt,nc,Dx).call(y,w))}}d.push(c.nodeValue.slice(0,l).replaceAll(Ev,""))}else if(c===this.editorDiv){let m=d,b=0;for(const w of this.editorDiv.childNodes)b++===l&&(m=h),m.push(O(x=qt,nc,Dx).call(x,w))}T(this,Nr,`${d.join(`
`)}${s}${h.join(`
`)}`),O(this,Sn,Ax).call(this);const f=new Range;let g=Math.sumPrecise(d.map(m=>m.length));for(const{firstChild:m}of this.editorDiv.childNodes)if(m.nodeType===Node.TEXT_NODE){const b=m.nodeValue.length;if(g<=b){f.setStart(m,g),f.setEnd(m,g);break}g-=b}a.removeAllRanges(),a.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=qt._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,i,r){var o;let s=null;if(t instanceof iO){const{data:{defaultAppearanceData:{fontSize:c,fontColor:l},rect:d,rotation:h,id:f,popupRef:g,richText:v,contentsObj:y,creationDate:x,modificationDate:m},textContent:b,textPosition:w,parent:{page:{pageNumber:_}}}=t;if(!b||b.length===0)return null;s=t={annotationType:Pe.FREETEXT,color:Array.from(l),fontSize:c,value:b.join(`
`),position:w,pageIndex:_-1,rect:d.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:g,comment:(y==null?void 0:y.str)||null,richText:v,creationDate:x,modificationDate:m}}const a=await super.deserialize(t,i,r);return T(a,jr,t.fontSize),a.color=Ee.makeHexColor(...t.color),T(a,Nr,O(o=qt,nc,uS).call(o,t.value)),a._initialData=s,t.comment&&a.setCommentData(t),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Lt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(t),{color:i,fontSize:u(this,jr),value:O(this,Sn,uO).call(this)});return this.addComment(r),t?(r.isCopy=!0,r):this.annotationElementId&&!O(this,Sn,dO).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(!i)return null;const{style:r}=i;r.fontSize=`calc(${u(this,jr)}px * var(--total-scale-factor))`,r.color=this.color,i.replaceChildren();for(const s of u(this,Nr).split(`
`)){const a=document.createElement("div");a.append(s?document.createTextNode(s):document.createElement("br")),i.append(a)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:u(this,Nr)}}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Nr=new WeakMap,Yb=new WeakMap,xd=new WeakMap,jr=new WeakMap,Sn=new WeakSet,oO=function(t){const i=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-u(this,jr))*this.parentScale),T(this,jr,s),O(this,Sn,_x).call(this)},r=u(this,jr);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:rt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},cO=function(t){const i=s=>{this.color=s,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:rt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},lO=function(){var r;const t=[];this.editorDiv.normalize();let i=null;for(const s of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(O(r=qt,nc,Dx).call(r,s)),i=s);return t.join(`
`)},_x=function(){const[t,i]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:s,div:a}=this,o=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",s.div.append(this.div),r=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/i):(this.width=r.height/t,this.height=r.width/i),this.fixAndSetPosition()},nc=new WeakSet,Dx=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Ev,"")},Ax=function(){if(this.editorDiv.replaceChildren(),!!u(this,Nr))for(const t of u(this,Nr).split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}},uO=function(){return u(this,Nr).replaceAll(""," ")},uS=function(t){return t.replaceAll(" ","")},dO=function(t){const{value:i,fontSize:r,color:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==i||t.fontSize!==r||t.color.some((o,c)=>o!==s[c])||t.pageIndex!==a},U(qt,nc),ve(qt,"_freeTextDefaultContent",""),ve(qt,"_internalPadding",0),ve(qt,"_defaultColor",null),ve(qt,"_defaultFontSize",10),ve(qt,"_type","freetext"),ve(qt,"_editorType",Pe.FREETEXT);let lS=qt;class Ae{toSVGPath(){Rt("Abstract method `toSVGPath` must be implemented.")}get box(){Rt("Abstract getter `box` must be implemented.")}serialize(e,t){Rt("Abstract method `serialize` must be implemented.")}static _rescale(e,t,i,r,s,a){a||(a=new Float32Array(e.length));for(let o=0,c=e.length;o<c;o+=2)a[o]=t+e[o]*r,a[o+1]=i+e[o+1]*s;return a}static _rescaleAndSwap(e,t,i,r,s,a){a||(a=new Float32Array(e.length));for(let o=0,c=e.length;o<c;o+=2)a[o]=t+e[o+1]*r,a[o+1]=i+e[o]*s;return a}static _translate(e,t,i,r){r||(r=new Float32Array(e.length));for(let s=0,a=e.length;s<a;s+=2)r[s]=t+e[s],r[s+1]=i+e[s+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,i,r,s){switch(s){case 90:return[1-t/i,e/r];case 180:return[1-e/i,1-t/r];case 270:return[t/i,1-e/r];default:return[e/i,t/r]}}static _normalizePagePoint(e,t,i){switch(i){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,i,r,s,a){return[(e+5*i)/6,(t+5*r)/6,(5*i+s)/6,(5*r+a)/6,(i+s)/2,(r+a)/2]}}ve(Ae,"PRECISION",1e-4);var Rr,Xs,Tp,Cp,Ca,Ye,wd,_d,Kb,Qb,kp,Up,pl,Jb,l1,u1,Rn,Dm,hO,fO,pO,gO,mO,yO;const oo=class oo{constructor({x:e,y:t},i,r,s,a,o=0){U(this,Rn);U(this,Rr);U(this,Xs,[]);U(this,Tp);U(this,Cp);U(this,Ca,[]);U(this,Ye,new Float32Array(18));U(this,wd);U(this,_d);U(this,Kb);U(this,Qb);U(this,kp);U(this,Up);U(this,pl,[]);T(this,Rr,i),T(this,Up,s*r),T(this,Cp,a),u(this,Ye).set([NaN,NaN,NaN,NaN,e,t],6),T(this,Tp,o),T(this,Qb,u(oo,Jb)*r),T(this,Kb,u(oo,u1)*r),T(this,kp,r),u(this,pl).push(e,t)}isEmpty(){return isNaN(u(this,Ye)[8])}add({x:e,y:t}){var I;T(this,wd,e),T(this,_d,t);const[i,r,s,a]=u(this,Rr);let[o,c,l,d]=u(this,Ye).subarray(8,12);const h=e-l,f=t-d,g=Math.hypot(h,f);if(g<u(this,Kb))return!1;const v=g-u(this,Qb),y=v/g,x=y*h,m=y*f;let b=o,w=c;o=l,c=d,l+=x,d+=m,(I=u(this,pl))==null||I.push(e,t);const _=-m/v,D=x/v,A=_*u(this,Up),E=D*u(this,Up);return u(this,Ye).set(u(this,Ye).subarray(2,8),0),u(this,Ye).set([l+A,d+E],4),u(this,Ye).set(u(this,Ye).subarray(14,18),12),u(this,Ye).set([l-A,d-E],16),isNaN(u(this,Ye)[6])?(u(this,Ca).length===0&&(u(this,Ye).set([o+A,c+E],2),u(this,Ca).push(NaN,NaN,NaN,NaN,(o+A-i)/s,(c+E-r)/a),u(this,Ye).set([o-A,c-E],14),u(this,Xs).push(NaN,NaN,NaN,NaN,(o-A-i)/s,(c-E-r)/a)),u(this,Ye).set([b,w,o,c,l,d],6),!this.isEmpty()):(u(this,Ye).set([b,w,o,c,l,d],6),Math.abs(Math.atan2(w-c,b-o)-Math.atan2(m,x))<Math.PI/2?([o,c,l,d]=u(this,Ye).subarray(2,6),u(this,Ca).push(NaN,NaN,NaN,NaN,((o+l)/2-i)/s,((c+d)/2-r)/a),[o,c,b,w]=u(this,Ye).subarray(14,18),u(this,Xs).push(NaN,NaN,NaN,NaN,((b+o)/2-i)/s,((w+c)/2-r)/a),!0):([b,w,o,c,l,d]=u(this,Ye).subarray(0,6),u(this,Ca).push(((b+5*o)/6-i)/s,((w+5*c)/6-r)/a,((5*o+l)/6-i)/s,((5*c+d)/6-r)/a,((o+l)/2-i)/s,((c+d)/2-r)/a),[l,d,o,c,b,w]=u(this,Ye).subarray(12,18),u(this,Xs).push(((b+5*o)/6-i)/s,((w+5*c)/6-r)/a,((5*o+l)/6-i)/s,((5*c+d)/6-r)/a,((o+l)/2-i)/s,((c+d)/2-r)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=u(this,Ca),t=u(this,Xs);if(isNaN(u(this,Ye)[6])&&!this.isEmpty())return O(this,Rn,hO).call(this);const i=[];i.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);O(this,Rn,pO).call(this,i);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?i.push(`L${t[r+4]} ${t[r+5]}`):i.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return O(this,Rn,fO).call(this,i),i.join(" ")}newFreeDrawOutline(e,t,i,r,s,a){return new bO(e,t,i,r,s,a)}getOutlines(){var h;const e=u(this,Ca),t=u(this,Xs),i=u(this,Ye),[r,s,a,o]=u(this,Rr),c=new Float32Array((((h=u(this,pl))==null?void 0:h.length)??0)+2);for(let f=0,g=c.length-2;f<g;f+=2)c[f]=(u(this,pl)[f]-r)/a,c[f+1]=(u(this,pl)[f+1]-s)/o;if(c[c.length-2]=(u(this,wd)-r)/a,c[c.length-1]=(u(this,_d)-s)/o,isNaN(i[6])&&!this.isEmpty())return O(this,Rn,gO).call(this,c);const l=new Float32Array(u(this,Ca).length+24+u(this,Xs).length);let d=e.length;for(let f=0;f<d;f+=2){if(isNaN(e[f])){l[f]=l[f+1]=NaN;continue}l[f]=e[f],l[f+1]=e[f+1]}d=O(this,Rn,yO).call(this,l,d);for(let f=t.length-6;f>=6;f-=6)for(let g=0;g<6;g+=2){if(isNaN(t[f+g])){l[d]=l[d+1]=NaN,d+=2;continue}l[d]=t[f+g],l[d+1]=t[f+g+1],d+=2}return O(this,Rn,mO).call(this,l,d),this.newFreeDrawOutline(l,c,u(this,Rr),u(this,kp),u(this,Tp),u(this,Cp))}};Rr=new WeakMap,Xs=new WeakMap,Tp=new WeakMap,Cp=new WeakMap,Ca=new WeakMap,Ye=new WeakMap,wd=new WeakMap,_d=new WeakMap,Kb=new WeakMap,Qb=new WeakMap,kp=new WeakMap,Up=new WeakMap,pl=new WeakMap,Jb=new WeakMap,l1=new WeakMap,u1=new WeakMap,Rn=new WeakSet,Dm=function(){const e=u(this,Ye).subarray(4,6),t=u(this,Ye).subarray(16,18),[i,r,s,a]=u(this,Rr);return[(u(this,wd)+(e[0]-t[0])/2-i)/s,(u(this,_d)+(e[1]-t[1])/2-r)/a,(u(this,wd)+(t[0]-e[0])/2-i)/s,(u(this,_d)+(t[1]-e[1])/2-r)/a]},hO=function(){const[e,t,i,r]=u(this,Rr),[s,a,o,c]=O(this,Rn,Dm).call(this);return`M${(u(this,Ye)[2]-e)/i} ${(u(this,Ye)[3]-t)/r} L${(u(this,Ye)[4]-e)/i} ${(u(this,Ye)[5]-t)/r} L${s} ${a} L${o} ${c} L${(u(this,Ye)[16]-e)/i} ${(u(this,Ye)[17]-t)/r} L${(u(this,Ye)[14]-e)/i} ${(u(this,Ye)[15]-t)/r} Z`},fO=function(e){const t=u(this,Xs);e.push(`L${t[4]} ${t[5]} Z`)},pO=function(e){const[t,i,r,s]=u(this,Rr),a=u(this,Ye).subarray(4,6),o=u(this,Ye).subarray(16,18),[c,l,d,h]=O(this,Rn,Dm).call(this);e.push(`L${(a[0]-t)/r} ${(a[1]-i)/s} L${c} ${l} L${d} ${h} L${(o[0]-t)/r} ${(o[1]-i)/s}`)},gO=function(e){const t=u(this,Ye),[i,r,s,a]=u(this,Rr),[o,c,l,d]=O(this,Rn,Dm).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-i)/s,(t[3]-r)/a,NaN,NaN,NaN,NaN,(t[4]-i)/s,(t[5]-r)/a,NaN,NaN,NaN,NaN,o,c,NaN,NaN,NaN,NaN,l,d,NaN,NaN,NaN,NaN,(t[16]-i)/s,(t[17]-r)/a,NaN,NaN,NaN,NaN,(t[14]-i)/s,(t[15]-r)/a],0),this.newFreeDrawOutline(h,e,u(this,Rr),u(this,kp),u(this,Tp),u(this,Cp))},mO=function(e,t){const i=u(this,Xs);return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+=6},yO=function(e,t){const i=u(this,Ye).subarray(4,6),r=u(this,Ye).subarray(16,18),[s,a,o,c]=u(this,Rr),[l,d,h,f]=O(this,Rn,Dm).call(this);return e.set([NaN,NaN,NaN,NaN,(i[0]-s)/o,(i[1]-a)/c,NaN,NaN,NaN,NaN,l,d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(r[0]-s)/o,(r[1]-a)/c],t),t+=24},U(oo,Jb,8),U(oo,l1,2),U(oo,u1,u(oo,Jb)+u(oo,l1));let F2=oo;var Np,Dd,Bo,Zb,Fr,e0,hn,d1,vO;class bO extends Ae{constructor(t,i,r,s,a,o){super();U(this,d1);U(this,Np);U(this,Dd,new Float32Array(4));U(this,Bo);U(this,Zb);U(this,Fr);U(this,e0);U(this,hn);T(this,hn,t),T(this,Fr,i),T(this,Np,r),T(this,e0,s),T(this,Bo,a),T(this,Zb,o),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],O(this,d1,vO).call(this,o);const[c,l,d,h]=u(this,Dd);for(let f=0,g=t.length;f<g;f+=2)t[f]=(t[f]-c)/d,t[f+1]=(t[f+1]-l)/h;for(let f=0,g=i.length;f<g;f+=2)i[f]=(i[f]-c)/d,i[f+1]=(i[f+1]-l)/h}toSVGPath(){const t=[`M${u(this,hn)[4]} ${u(this,hn)[5]}`];for(let i=6,r=u(this,hn).length;i<r;i+=6){if(isNaN(u(this,hn)[i])){t.push(`L${u(this,hn)[i+4]} ${u(this,hn)[i+5]}`);continue}t.push(`C${u(this,hn)[i]} ${u(this,hn)[i+1]} ${u(this,hn)[i+2]} ${u(this,hn)[i+3]} ${u(this,hn)[i+4]} ${u(this,hn)[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,r,s],a){const o=r-t,c=s-i;let l,d;switch(a){case 0:l=Ae._rescale(u(this,hn),t,s,o,-c),d=Ae._rescale(u(this,Fr),t,s,o,-c);break;case 90:l=Ae._rescaleAndSwap(u(this,hn),t,i,o,c),d=Ae._rescaleAndSwap(u(this,Fr),t,i,o,c);break;case 180:l=Ae._rescale(u(this,hn),r,i,-o,c),d=Ae._rescale(u(this,Fr),r,i,-o,c);break;case 270:l=Ae._rescaleAndSwap(u(this,hn),r,s,-o,-c),d=Ae._rescaleAndSwap(u(this,Fr),r,s,-o,-c);break}return{outline:Array.from(l),points:[Array.from(d)]}}get box(){return u(this,Dd)}newOutliner(t,i,r,s,a,o=0){return new F2(t,i,r,s,a,o)}getNewOutline(t,i){const[r,s,a,o]=u(this,Dd),[c,l,d,h]=u(this,Np),f=a*d,g=o*h,v=r*d+c,y=s*h+l,x=this.newOutliner({x:u(this,Fr)[0]*f+v,y:u(this,Fr)[1]*g+y},u(this,Np),u(this,e0),t,u(this,Zb),i??u(this,Bo));for(let m=2;m<u(this,Fr).length;m+=2)x.add({x:u(this,Fr)[m]*f+v,y:u(this,Fr)[m+1]*g+y});return x.getOutlines()}}Np=new WeakMap,Dd=new WeakMap,Bo=new WeakMap,Zb=new WeakMap,Fr=new WeakMap,e0=new WeakMap,hn=new WeakMap,d1=new WeakSet,vO=function(t){const i=u(this,hn);let r=i[4],s=i[5];const a=[r,s,r,s];let o=r,c=s,l=r,d=s;const h=t?Math.max:Math.min,f=new Float32Array(4);for(let v=6,y=i.length;v<y;v+=6){const x=i[v+4],m=i[v+5];isNaN(i[v])?(Ee.pointBoundingBox(x,m,a),c>m?(o=x,c=m):c===m&&(o=h(o,x)),d<m?(l=x,d=m):d===m&&(l=h(l,x))):(f[0]=f[1]=1/0,f[2]=f[3]=-1/0,Ee.bezierBoundingBox(r,s,...i.slice(v,v+6),f),Ee.rectBoundingBox(f[0],f[1],f[2],f[3],a),c>f[1]?(o=f[0],c=f[1]):c===f[1]&&(o=h(o,f[0])),d<f[3]?(l=f[2],d=f[3]):d===f[3]&&(l=h(l,f[2]))),r=x,s=m}const g=u(this,Dd);g[0]=a[0]-u(this,Bo),g[1]=a[1]-u(this,Bo),g[2]=a[2]-a[0]+2*u(this,Bo),g[3]=a[3]-a[1]+2*u(this,Bo),this.firstPoint=[o,c],this.lastPoint=[l,d]};var t0,n0,i0,gl,Ys,Wi,xO,Ex,wO,_O,hS;class dS{constructor(e,t=0,i=0,r=!0){U(this,Wi);U(this,t0);U(this,n0);U(this,i0);U(this,gl,[]);U(this,Ys,[]);const s=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:y,y:x,width:m,height:b}of e){const w=Math.floor((y-t)/a)*a,_=Math.ceil((y+m+t)/a)*a,D=Math.floor((x-t)/a)*a,A=Math.ceil((x+b+t)/a)*a,E=[w,D,A,!0],F=[_,D,A,!1];u(this,gl).push(E,F),Ee.rectBoundingBox(w,D,_,A,s)}const o=s[2]-s[0]+2*i,c=s[3]-s[1]+2*i,l=s[0]-i,d=s[1]-i;let h=r?-1/0:1/0,f=1/0;const g=u(this,gl).at(r?-1:-2),v=[g[0],g[2]];for(const y of u(this,gl)){const[x,m,b,w]=y;!w&&r?m<f?(f=m,h=x):m===f&&(h=Math.max(h,x)):w&&!r&&(m<f?(f=m,h=x):m===f&&(h=Math.min(h,x))),y[0]=(x-l)/o,y[1]=(m-d)/c,y[2]=(b-d)/c}T(this,t0,new Float32Array([l,d,o,c])),T(this,n0,[h,f]),T(this,i0,v)}getOutlines(){u(this,gl).sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of u(this,gl))t[3]?(e.push(...O(this,Wi,hS).call(this,t)),O(this,Wi,wO).call(this,t)):(O(this,Wi,_O).call(this,t),e.push(...O(this,Wi,hS).call(this,t)));return O(this,Wi,xO).call(this,e)}}t0=new WeakMap,n0=new WeakMap,i0=new WeakMap,gl=new WeakMap,Ys=new WeakMap,Wi=new WeakSet,xO=function(e){const t=[],i=new Set;for(const a of e){const[o,c,l]=a;t.push([o,c,a],[o,l,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const c=t[a][2],l=t[a+1][2];c.push(l),l.push(c),i.add(c),i.add(l)}const r=[];let s;for(;i.size>0;){const a=i.values().next().value;let[o,c,l,d,h]=a;i.delete(a);let f=o,g=c;for(s=[o,l],r.push(s);;){let v;if(i.has(d))v=d;else if(i.has(h))v=h;else break;i.delete(v),[o,c,l,d,h]=v,f!==o&&(s.push(f,g,o,g===c?c:l),f=o),g=g===c?l:c}s.push(f,g)}return new K$(r,u(this,t0),u(this,n0),u(this,i0))},Ex=function(e){const t=u(this,Ys);let i=0,r=t.length-1;for(;i<=r;){const s=i+r>>1,a=t[s][0];if(a===e)return s;a<e?i=s+1:r=s-1}return r+1},wO=function([,e,t]){const i=O(this,Wi,Ex).call(this,e);u(this,Ys).splice(i,0,[e,t])},_O=function([,e,t]){const i=O(this,Wi,Ex).call(this,e);for(let r=i;r<u(this,Ys).length;r++){const[s,a]=u(this,Ys)[r];if(s!==e)break;if(s===e&&a===t){u(this,Ys).splice(r,1);return}}for(let r=i-1;r>=0;r--){const[s,a]=u(this,Ys)[r];if(s!==e)break;if(s===e&&a===t){u(this,Ys).splice(r,1);return}}},hS=function(e){const[t,i,r]=e,s=[[t,i,r]],a=O(this,Wi,Ex).call(this,r);for(let o=0;o<a;o++){const[c,l]=u(this,Ys)[o];for(let d=0,h=s.length;d<h;d++){const[,f,g]=s[d];if(!(l<=f||g<=c)){if(f>=c){if(g>l)s[d][1]=l;else{if(h===1)return[];s.splice(d,1),d--,h--}continue}s[d][2]=c,g>l&&s.push([t,l,g])}}}return s};var r0,jp;class K$ extends Ae{constructor(t,i,r,s){super();U(this,r0);U(this,jp);T(this,jp,t),T(this,r0,i),this.firstPoint=r,this.lastPoint=s}toSVGPath(){const t=[];for(const i of u(this,jp)){let[r,s]=i;t.push(`M${r} ${s}`);for(let a=2;a<i.length;a+=2){const o=i[a],c=i[a+1];o===r?(t.push(`V${c}`),s=c):c===s&&(t.push(`H${o}`),r=o)}t.push("Z")}return t.join(" ")}serialize([t,i,r,s],a){const o=[],c=r-t,l=s-i;for(const d of u(this,jp)){const h=new Array(d.length);for(let f=0;f<d.length;f+=2)h[f]=t+d[f]*c,h[f+1]=s-d[f+1]*l;o.push(h)}return o}get box(){return u(this,r0)}get classNamesForOutlining(){return["highlightOutline"]}}r0=new WeakMap,jp=new WeakMap;class fS extends F2{newFreeDrawOutline(e,t,i,r,s,a){return new Q$(e,t,i,r,s,a)}}class Q$ extends bO{newOutliner(e,t,i,r,s,a=0){return new fS(e,t,i,r,s,a)}}var Rp,s0,Lo,Ad,a0,ir,o0,c0,Ed,Or,Mr,ni,Fp,Op,Ai,Mp,ys,l0,Ve,pS,Sx,DO,AO,EO,gS,yu,Cs,zh,SO,Tx,Cx,TO,CO,kO,UO,NO;const ut=class ut extends Lt{constructor(t){super({...t,name:"highlightEditor"});U(this,Ve);U(this,Rp,null);U(this,s0,0);U(this,Lo);U(this,Ad,null);U(this,a0,null);U(this,ir,null);U(this,o0,null);U(this,c0,0);U(this,Ed,null);U(this,Or,null);U(this,Mr,null);U(this,ni,!1);U(this,Fp,null);U(this,Op,null);U(this,Ai,null);U(this,Mp,"");U(this,ys);U(this,l0,"");this.color=t.color||ut._defaultColor,T(this,ys,t.thickness||ut._defaultThickness),this.opacity=t.opacity||ut._defaultOpacity,T(this,Lo,t.boxes||null),T(this,l0,t.methodOfCreation||""),T(this,Mp,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(T(this,ni,!0),O(this,Ve,Sx).call(this,t),O(this,Ve,yu).call(this)):u(this,Lo)&&(T(this,Rp,t.anchorNode),T(this,s0,t.anchorOffset),T(this,o0,t.focusNode),T(this,c0,t.focusOffset),O(this,Ve,pS).call(this),O(this,Ve,yu).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=ut.prototype;return Le(this,"_keyboardManager",new N0([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,ni)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:u(this,ys),methodOfCreation:u(this,l0)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,i){var r;Lt.initialize(t,i),ut._defaultColor||(ut._defaultColor=((r=i.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,i){switch(t){case rt.HIGHLIGHT_COLOR:ut._defaultColor=i;break;case rt.HIGHLIGHT_THICKNESS:ut._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return u(this,Op)}get commentButtonPosition(){return u(this,Fp)}updateParams(t,i){switch(t){case rt.HIGHLIGHT_COLOR:O(this,Ve,DO).call(this,i);break;case rt.HIGHLIGHT_THICKNESS:O(this,Ve,AO).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[rt.HIGHLIGHT_COLOR,ut._defaultColor],[rt.HIGHLIGHT_THICKNESS,ut._defaultThickness]]}get propertiesToUpdate(){return[[rt.HIGHLIGHT_COLOR,this.color||ut._defaultColor],[rt.HIGHLIGHT_THICKNESS,u(this,ys)||ut._defaultThickness],[rt.HIGHLIGHT_FREE,u(this,ni)]]}onUpdatedColor(){var t,i;(t=this.parent)==null||t.drawLayer.updateProperties(u(this,Mr),{root:{fill:this.color,"fill-opacity":this.opacity}}),(i=u(this,a0))==null||i.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",T(this,a0,new N2({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(O(this,Ve,Cx).call(this))}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,O(this,Ve,Cx).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){O(this,Ve,gS).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(O(this,Ve,yu).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let i=!1;this.parent&&!t?O(this,Ve,gS).call(this):t&&(O(this,Ve,yu).call(this,t),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),i&&this.select()}rotate(t){var s,a,o;const{drawLayer:i}=this.parent;let r;u(this,ni)?(t=(t-this.rotation+360)%360,r=O(s=ut,Cs,zh).call(s,u(this,Or).box,t)):r=O(a=ut,Cs,zh).call(a,[this.x,this.y,this.width,this.height],t),i.updateProperties(u(this,Mr),{bbox:r,root:{"data-main-rotation":t}}),i.updateProperties(u(this,Ai),{bbox:O(o=ut,Cs,zh).call(o,u(this,ir).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();u(this,Mp)&&(t.setAttribute("aria-label",u(this,Mp)),t.setAttribute("role","mark")),u(this,ni)?t.classList.add("free"):this.div.addEventListener("keydown",O(this,Ve,SO).bind(this),{signal:this._uiManager._signal});const i=T(this,Ed,document.createElement("div"));return t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=u(this,Ad),this.setDims(),K6(this,u(this,Ed),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,Ai),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,Ai),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:O(this,Ve,Tx).call(this,!0);break;case 1:case 3:O(this,Ve,Tx).call(this,!1);break}}select(){var t;super.select(),u(this,Ai)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,Ai),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),u(this,Ai)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,Ai),{rootClass:{selected:!1}}),u(this,ni)||O(this,Ve,Tx).call(this,!1))}get _mustFixPosition(){return!u(this,ni)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(u(this,Mr),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(u(this,Ai),{rootClass:{hidden:!t}}))}static startHighlighting(t,i,{target:r,x:s,y:a}){const{x:o,y:c,width:l,height:d}=r.getBoundingClientRect(),h=new AbortController,f=t.combinedSignal(h),g=v=>{h.abort(),O(this,Cs,UO).call(this,t,v)};window.addEventListener("blur",g,{signal:f}),window.addEventListener("pointerup",g,{signal:f}),window.addEventListener("pointerdown",ln,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Os,{signal:f}),r.addEventListener("pointermove",O(this,Cs,kO).bind(this,t),{signal:f}),this._freeHighlight=new fS({x:s,y:a},[o,c,l,d],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,i,r){var y,x,m,b;let s=null;if(t instanceof sO){const{data:{quadPoints:w,rect:_,rotation:D,id:A,color:E,opacity:F,popupRef:I,richText:z,contentsObj:H,creationDate:k,modificationDate:W},parent:{page:{pageNumber:S}}}=t;s=t={annotationType:Pe.HIGHLIGHT,color:Array.from(E),opacity:F,quadPoints:w,boxes:null,pageIndex:S-1,rect:_.slice(0),rotation:D,annotationElementId:A,id:A,deleted:!1,popupRef:I,richText:z,comment:(H==null?void 0:H.str)||null,creationDate:k,modificationDate:W}}else if(t instanceof aC){const{data:{inkLists:w,rect:_,rotation:D,id:A,color:E,borderStyle:{rawWidth:F},popupRef:I,richText:z,contentsObj:H,creationDate:k,modificationDate:W},parent:{page:{pageNumber:S}}}=t;s=t={annotationType:Pe.HIGHLIGHT,color:Array.from(E),thickness:F,inkLists:w,boxes:null,pageIndex:S-1,rect:_.slice(0),rotation:D,annotationElementId:A,id:A,deleted:!1,popupRef:I,richText:z,comment:(H==null?void 0:H.str)||null,creationDate:k,modificationDate:W}}const{color:a,quadPoints:o,inkLists:c,opacity:l}=t,d=await super.deserialize(t,i,r);d.color=Ee.makeHexColor(...a),d.opacity=l||1,c&&T(d,ys,t.thickness),d._initialData=s,t.comment&&d.setCommentData(t);const[h,f]=d.pageDimensions,[g,v]=d.pageTranslation;if(o){const w=T(d,Lo,[]);for(let _=0;_<o.length;_+=8)w.push({x:(o[_]-g)/h,y:1-(o[_+1]-v)/f,width:(o[_+2]-o[_])/h,height:(o[_+1]-o[_+5])/f});O(y=d,Ve,pS).call(y),O(x=d,Ve,yu).call(x),d.rotate(d.rotation)}else if(c){T(d,ni,!0);const w=c[0],_={x:w[0]-g,y:f-(w[1]-v)},D=new fS(_,[0,0,h,f],1,u(d,ys)/2,!0,.001);for(let F=0,I=w.length;F<I;F+=2)_.x=w[F]-g,_.y=f-(w[F+1]-v),D.add(_);const{id:A,clipPathId:E}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:D.toSVGPath()}},!0,!0);O(m=d,Ve,Sx).call(m,{highlightOutlines:D.getOutlines(),highlightId:A,clipPathId:E}),O(b=d,Ve,yu).call(b),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=Lt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(t);return Object.assign(r,{color:i,opacity:this.opacity,thickness:u(this,ys),quadPoints:O(this,Ve,TO).call(this),outlines:O(this,Ve,CO).call(this,r.rect)}),this.addComment(r),this.annotationElementId&&!O(this,Ve,NO).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Rp=new WeakMap,s0=new WeakMap,Lo=new WeakMap,Ad=new WeakMap,a0=new WeakMap,ir=new WeakMap,o0=new WeakMap,c0=new WeakMap,Ed=new WeakMap,Or=new WeakMap,Mr=new WeakMap,ni=new WeakMap,Fp=new WeakMap,Op=new WeakMap,Ai=new WeakMap,Mp=new WeakMap,ys=new WeakMap,l0=new WeakMap,Ve=new WeakSet,pS=function(){const t=new dS(u(this,Lo),.001);T(this,Or,t.getOutlines()),[this.x,this.y,this.width,this.height]=u(this,Or).box;const i=new dS(u(this,Lo),.0025,.001,this._uiManager.direction==="ltr");T(this,ir,i.getOutlines());const{firstPoint:r}=u(this,Or);T(this,Fp,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]);const{lastPoint:s}=u(this,ir);T(this,Op,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},Sx=function({highlightOutlines:t,highlightId:i,clipPathId:r}){var f,g;if(T(this,Or,t),T(this,ir,t.getNewOutline(u(this,ys)/2+1.5,.0025)),i>=0)T(this,Mr,i),T(this,Ad,r),this.parent.drawLayer.finalizeDraw(i,{bbox:t.box,path:{d:t.toSVGPath()}}),T(this,Ai,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:u(this,ir).box,path:{d:u(this,ir).toSVGPath()}},!0));else if(this.parent){const v=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(u(this,Mr),{bbox:O(f=ut,Cs,zh).call(f,u(this,Or).box,(v-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(u(this,Ai),{bbox:O(g=ut,Cs,zh).call(g,u(this,ir).box,v),path:{d:u(this,ir).toSVGPath()}})}const[a,o,c,l]=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=c,this.height=l;break;case 90:{const[v,y]=this.parentDimensions;this.x=o,this.y=1-a,this.width=c*y/v,this.height=l*v/y;break}case 180:this.x=1-a,this.y=1-o,this.width=c,this.height=l;break;case 270:{const[v,y]=this.parentDimensions;this.x=1-o,this.y=a,this.width=c*y/v,this.height=l*v/y;break}}const{firstPoint:d}=t;T(this,Fp,[(d[0]-a)/c,(d[1]-o)/l]);const{lastPoint:h}=u(this,ir);T(this,Op,[(h[0]-a)/c,(h[1]-o)/l])},DO=function(t){const i=(a,o)=>{this.color=a,this.opacity=o,this.onUpdatedColor()},r=this.color,s=this.opacity;this.addCommands({cmd:i.bind(this,t,ut._defaultOpacity),undo:i.bind(this,r,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:rt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},AO=function(t){const i=u(this,ys),r=s=>{T(this,ys,s),O(this,Ve,EO).call(this,s)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:rt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},EO=function(t){u(this,ni)&&(O(this,Ve,Sx).call(this,{highlightOutlines:u(this,Or).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())},gS=function(){u(this,Mr)===null||!this.parent||(this.parent.drawLayer.remove(u(this,Mr)),T(this,Mr,null),this.parent.drawLayer.remove(u(this,Ai)),T(this,Ai,null))},yu=function(t=this.parent){u(this,Mr)===null&&({id:Tn(this,Mr)._,clipPathId:Tn(this,Ad)._}=t.drawLayer.draw({bbox:u(this,Or).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:u(this,ni)},path:{d:u(this,Or).toSVGPath()}},!1,!0),T(this,Ai,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:u(this,ni)},bbox:u(this,ir).box,path:{d:u(this,ir).toSVGPath()}},u(this,ni))),u(this,Ed)&&(u(this,Ed).style.clipPath=u(this,Ad)))},Cs=new WeakSet,zh=function([t,i,r,s],a){switch(a){case 90:return[1-i-s,t,s,r];case 180:return[1-t-r,1-i-s,r,s];case 270:return[i,1-t-r,s,r]}return[t,i,r,s]},SO=function(t){ut._keyboardManager.exec(this,t)},Tx=function(t){if(!u(this,Rp))return;const i=window.getSelection();t?i.setPosition(u(this,Rp),u(this,s0)):i.setPosition(u(this,o0),u(this,c0))},Cx=function(){return u(this,ni)?this.rotation:0},TO=function(){if(u(this,ni))return null;const[t,i]=this.pageDimensions,[r,s]=this.pageTranslation,a=u(this,Lo),o=new Float32Array(a.length*8);let c=0;for(const{x:l,y:d,width:h,height:f}of a){const g=l*t+r,v=(1-d)*i+s;o[c]=o[c+4]=g,o[c+1]=o[c+3]=v,o[c+2]=o[c+6]=g+h*t,o[c+5]=o[c+7]=v-f*i,c+=8}return o},CO=function(t){return u(this,Or).serialize(t,O(this,Ve,Cx).call(this))},kO=function(t,i){this._freeHighlight.add(i)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},UO=function(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},NO=function(t){const{color:i}=this._initialData;return this.hasEditedComment||t.color.some((r,s)=>r!==i[s])},U(ut,Cs),ve(ut,"_defaultColor",null),ve(ut,"_defaultOpacity",1),ve(ut,"_defaultThickness",12),ve(ut,"_type","highlight"),ve(ut,"_editorType",Pe.HIGHLIGHT),ve(ut,"_freeHighlightId",-1),ve(ut,"_freeHighlight",null),ve(ut,"_freeHighlightClipId","");let O2=ut;var Sd;class jO{constructor(){U(this,Sd,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,i]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,i)}updateSVGProperty(e,t){u(this,Sd)[e]=t}toSVGProperties(){const e=u(this,Sd);return T(this,Sd,Object.create(null)),{root:e}}reset(){T(this,Sd,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Rt("Not implemented")}}Sd=new WeakMap;var Br,Bp,Ln,Td,Cd,ot,mS,yS,bS,Am,RO,kx,Em,Wh;const et=class et extends Lt{constructor(t){super(t);U(this,ot);U(this,Br,null);U(this,Bp);ve(this,"_colorPicker",null);ve(this,"_drawId",null);T(this,Bp,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(O(this,ot,mS).call(this,t),O(this,ot,Am).call(this))}static _mergeSVGProperties(t,i){const r=new Set(Object.keys(t));for(const[s,a]of Object.entries(i))r.has(s)?Object.assign(t[s],a):t[s]=a;return t}static getDefaultDrawingOptions(t){Rt("Not implemented")}static get typesMap(){Rt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,i){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,i),this._currentParent&&(u(et,Ln).updateProperty(r,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,i){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,i)}static get defaultPropertiesToUpdate(){const t=[],i=this._defaultDrawingOptions;for(const[r,s]of this.typesMap)t.push([r,i[s]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:i}=this;for(const[r,s]of this.constructor.typesMap)t.push([r,i[s]]);return t}_updateProperty(t,i,r){const s=this._drawingOptions,a=s[i],o=c=>{var d;s.updateProperty(i,c);const l=u(this,Br).updateProperty(i,c);l&&O(this,ot,Em).call(this,l),(d=this.parent)==null||d.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:o.bind(this,r),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,et._mergeSVGProperties(u(this,Br).getPathResizingSVGProperties(O(this,ot,kx).call(this)),{bbox:O(this,ot,Wh).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,et._mergeSVGProperties(u(this,Br).getPathResizedSVGProperties(O(this,ot,kx).call(this)),{bbox:O(this,ot,Wh).call(this)}))}_onTranslating(t,i){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:O(this,ot,Wh).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,et._mergeSVGProperties(u(this,Br).getPathTranslatedSVGProperties(O(this,ot,kx).call(this),this.parentDimensions),{bbox:O(this,ot,Wh).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,u(this,Bp)&&(T(this,Bp,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){O(this,ot,bS).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(O(this,ot,Am).call(this),O(this,ot,Em).call(this,u(this,Br).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let i=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),O(this,ot,bS).call(this)):t&&(this._uiManager.addShouldRescale(this),O(this,ot,Am).call(this,t),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),i&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,et._mergeSVGProperties({bbox:O(this,ot,Wh).call(this)},u(this,Br).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&O(this,ot,Em).call(this,u(this,Br).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,i;this._isCopy&&(t=this.x,i=this.y);const r=super.render();r.classList.add("draw");const s=document.createElement("div");return r.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,i),r}static createDrawerInstance(t,i,r,s,a){Rt("Not implemented")}static startDrawing(t,i,r,s){var x;const{target:a,offsetX:o,offsetY:c,pointerId:l,pointerType:d}=s;if(vi.isInitializedAndDifferentPointerType(d))return;const{viewport:{rotation:h}}=t,{width:f,height:g}=a.getBoundingClientRect(),v=T(et,Td,new AbortController),y=t.combinedSignal(v);if(vi.setPointer(d,l),window.addEventListener("pointerup",m=>{vi.isSamePointerIdOrRemove(m.pointerId)&&this._endDraw(m)},{signal:y}),window.addEventListener("pointercancel",m=>{vi.isSamePointerIdOrRemove(m.pointerId)&&this._currentParent.endDrawingSession()},{signal:y}),window.addEventListener("pointerdown",m=>{vi.isSamePointerType(m.pointerType)&&(vi.initializeAndAddPointerId(m.pointerId),u(et,Ln).isCancellable()&&(u(et,Ln).removeLastElement(),u(et,Ln).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",Os,{signal:y}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:y}),a.addEventListener("touchmove",m=>{vi.isSameTimeStamp(m.timeStamp)&&ln(m)},{signal:y}),t.toggleDrawing(),(x=i._editorUndoBar)==null||x.hide(),u(et,Ln)){t.drawLayer.updateProperties(this._currentDrawId,u(et,Ln).startNew(o,c,f,g,h));return}i.updateUIForDefaultProperties(this),T(et,Ln,this.createDrawerInstance(o,c,f,g,h)),T(et,Cd,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(u(et,Cd).toSVGProperties(),u(et,Ln).defaultSVGProperties),!0,!1)}static _drawMove(t){if(vi.isSameTimeStamp(t.timeStamp),!u(et,Ln))return;const{offsetX:i,offsetY:r,pointerId:s}=t;if(vi.isSamePointerId(s)){if(vi.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,u(et,Ln).add(i,r)),vi.setTimeStamp(t.timeStamp),ln(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,T(et,Ln,null),T(et,Cd,null),vi.clearPointerType(),vi.clearTimeStamp()),u(et,Td)&&(u(et,Td).abort(),T(et,Td,null),vi.clearPointerIds())}static _endDraw(t){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===i.div&&i.drawLayer.updateProperties(this._currentDrawId,u(et,Ln).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=u(et,Ln),s=this._currentDrawId,a=r.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(s,r.setLastElement(a))},undo:()=>{i.drawLayer.updateProperties(s,r.removeLastElement())},mustExec:!1,type:rt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(rt.DRAW_STEP),!u(et,Ln).isEmpty()){const{pageDimensions:[r,s],scale:a}=i,o=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:u(et,Ln).getOutlines(r*a,s*a,a,this._INNER_MARGIN),drawingOptions:u(et,Cd),mustBeCommitted:!t});return this._cleanup(!0),o}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,i,r,s,a,o){Rt("Not implemented")}static async deserialize(t,i,r){var h,f;const{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:c}}=i.viewport,l=this.deserializeDraw(o,c,s,a,this._INNER_MARGIN,t),d=await super.deserialize(t,i,r);return d.createDrawingOptions(t),O(h=d,ot,mS).call(h,{drawOutlines:l}),O(f=d,ot,Am).call(f),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[i,r]=this.pageTranslation,[s,a]=this.pageDimensions;return u(this,Br).serialize([i,r,s,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Br=new WeakMap,Bp=new WeakMap,Ln=new WeakMap,Td=new WeakMap,Cd=new WeakMap,ot=new WeakSet,mS=function({drawOutlines:t,drawId:i,drawingOptions:r}){T(this,Br,t),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=O(this,ot,yS).call(this,t,this.parent),O(this,ot,Em).call(this,t.box)},yS=function(t,i){const{id:r}=i.drawLayer.draw(et._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},bS=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Am=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=O(this,ot,yS).call(this,u(this,Br),t)}},RO=function([t,i,r,s]){const{parentDimensions:[a,o],rotation:c}=this;switch(c){case 90:return[i,1-t,r*(o/a),s*(a/o)];case 180:return[1-t,1-i,r,s];case 270:return[1-i,t,r*(o/a),s*(a/o)];default:return[t,i,r,s]}},kx=function(){const{x:t,y:i,width:r,height:s,parentDimensions:[a,o],rotation:c}=this;switch(c){case 90:return[1-i,t,r*(a/o),s*(o/a)];case 180:return[1-t,1-i,r,s];case 270:return[i,1-t,r*(a/o),s*(o/a)];default:return[t,i,r,s]}},Em=function(t){[this.x,this.y,this.width,this.height]=O(this,ot,RO).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Wh=function(){const{x:t,y:i,width:r,height:s,rotation:a,parentRotation:o,parentDimensions:[c,l]}=this;switch((a*4+o)/90){case 1:return[1-i-s,t,s,r];case 2:return[1-t-r,1-i-s,r,s];case 3:return[i,1-t-r,s,r];case 4:return[t,i-r*(c/l),s*(l/c),r*(c/l)];case 5:return[1-i,t,r*(c/l),s*(l/c)];case 6:return[1-t-s*(l/c),1-i,s*(l/c),r*(c/l)];case 7:return[i-r*(c/l),1-t-s*(l/c),r*(c/l),s*(l/c)];case 8:return[t-r,i-s,r,s];case 9:return[1-i,t-r,s,r];case 10:return[1-t,1-i,r,s];case 11:return[i-s,1-t,s,r];case 12:return[t-s*(l/c),i,s*(l/c),r*(c/l)];case 13:return[1-i-r*(c/l),t-s*(l/c),r*(c/l),s*(l/c)];case 14:return[1-t,1-i-r*(c/l),s*(l/c),r*(c/l)];case 15:return[i,1-t,r*(c/l),s*(l/c)];default:return[t,i,r,s]}},ve(et,"_currentDrawId",-1),ve(et,"_currentParent",null),U(et,Ln,null),U(et,Td,null),U(et,Cd,null),ve(et,"_INNER_MARGIN",3);let M2=et;var ka,In,Pn,kd,Lp,Ri,ii,bs,Ud,Nd,jd,Ip,Ux;class J${constructor(e,t,i,r,s,a){U(this,Ip);U(this,ka,new Float64Array(6));U(this,In);U(this,Pn);U(this,kd);U(this,Lp);U(this,Ri);U(this,ii,"");U(this,bs,0);U(this,Ud,new R0);U(this,Nd);U(this,jd);T(this,Nd,i),T(this,jd,r),T(this,kd,s),T(this,Lp,a),[e,t]=O(this,Ip,Ux).call(this,e,t);const o=T(this,In,[NaN,NaN,NaN,NaN,e,t]);T(this,Ri,[e,t]),T(this,Pn,[{line:o,points:u(this,Ri)}]),u(this,ka).set(o,0)}updateProperty(e,t){e==="stroke-width"&&T(this,Lp,t)}isEmpty(){return!u(this,Pn)||u(this,Pn).length===0}isCancellable(){return u(this,Ri).length<=10}add(e,t){[e,t]=O(this,Ip,Ux).call(this,e,t);const[i,r,s,a]=u(this,ka).subarray(2,6),o=e-s,c=t-a;return Math.hypot(u(this,Nd)*o,u(this,jd)*c)<=2?null:(u(this,Ri).push(e,t),isNaN(i)?(u(this,ka).set([s,a,e,t],2),u(this,In).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(u(this,ka)[0])&&u(this,In).splice(6,6),u(this,ka).set([i,r,s,a,e,t],0),u(this,In).push(...Ae.createBezierPoints(i,r,s,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const i=this.add(e,t);return i||(u(this,Ri).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,i,r,s){T(this,Nd,i),T(this,jd,r),T(this,kd,s),[e,t]=O(this,Ip,Ux).call(this,e,t);const a=T(this,In,[NaN,NaN,NaN,NaN,e,t]);T(this,Ri,[e,t]);const o=u(this,Pn).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),u(this,Pn).push({line:a,points:u(this,Ri)}),u(this,ka).set(a,0),T(this,bs,0),this.toSVGPath(),null}getLastElement(){return u(this,Pn).at(-1)}setLastElement(e){return u(this,Pn)?(u(this,Pn).push(e),T(this,In,e.line),T(this,Ri,e.points),T(this,bs,0),{path:{d:this.toSVGPath()}}):u(this,Ud).setLastElement(e)}removeLastElement(){if(!u(this,Pn))return u(this,Ud).removeLastElement();u(this,Pn).pop(),T(this,ii,"");for(let e=0,t=u(this,Pn).length;e<t;e++){const{line:i,points:r}=u(this,Pn)[e];T(this,In,i),T(this,Ri,r),T(this,bs,0),this.toSVGPath()}return{path:{d:u(this,ii)}}}toSVGPath(){const e=Ae.svgRound(u(this,In)[4]),t=Ae.svgRound(u(this,In)[5]);if(u(this,Ri).length===2)return T(this,ii,`${u(this,ii)} M ${e} ${t} Z`),u(this,ii);if(u(this,Ri).length<=6){const r=u(this,ii).lastIndexOf("M");T(this,ii,`${u(this,ii).slice(0,r)} M ${e} ${t}`),T(this,bs,6)}if(u(this,Ri).length===4){const r=Ae.svgRound(u(this,In)[10]),s=Ae.svgRound(u(this,In)[11]);return T(this,ii,`${u(this,ii)} L ${r} ${s}`),T(this,bs,12),u(this,ii)}const i=[];u(this,bs)===0&&(i.push(`M ${e} ${t}`),T(this,bs,6));for(let r=u(this,bs),s=u(this,In).length;r<s;r+=6){const[a,o,c,l,d,h]=u(this,In).slice(r,r+6).map(Ae.svgRound);i.push(`C${a} ${o} ${c} ${l} ${d} ${h}`)}return T(this,ii,u(this,ii)+i.join(" ")),T(this,bs,u(this,In).length),u(this,ii)}getOutlines(e,t,i,r){const s=u(this,Pn).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),u(this,Ud).build(u(this,Pn),e,t,i,u(this,kd),u(this,Lp),r),T(this,ka,null),T(this,In,null),T(this,Pn,null),T(this,ii,null),u(this,Ud)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}ka=new WeakMap,In=new WeakMap,Pn=new WeakMap,kd=new WeakMap,Lp=new WeakMap,Ri=new WeakMap,ii=new WeakMap,bs=new WeakMap,Ud=new WeakMap,Nd=new WeakMap,jd=new WeakMap,Ip=new WeakSet,Ux=function(e,t){return Ae._normalizePoint(e,t,u(this,Nd),u(this,jd),u(this,kd))};var Fi,u0,d0,Lr,Ua,Na,Pp,zp,Rd,ai,so,FO,OO,MO;class R0 extends Ae{constructor(){super(...arguments);U(this,ai);U(this,Fi);U(this,u0,0);U(this,d0);U(this,Lr);U(this,Ua);U(this,Na);U(this,Pp);U(this,zp);U(this,Rd)}build(t,i,r,s,a,o,c){T(this,Ua,i),T(this,Na,r),T(this,Pp,s),T(this,zp,a),T(this,Rd,o),T(this,d0,c??0),T(this,Lr,t),O(this,ai,OO).call(this)}get thickness(){return u(this,Rd)}setLastElement(t){return u(this,Lr).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return u(this,Lr).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:i}of u(this,Lr)){if(t.push(`M${Ae.svgRound(i[4])} ${Ae.svgRound(i[5])}`),i.length===6){t.push("Z");continue}if(i.length===12&&isNaN(i[6])){t.push(`L${Ae.svgRound(i[10])} ${Ae.svgRound(i[11])}`);continue}for(let r=6,s=i.length;r<s;r+=6){const[a,o,c,l,d,h]=i.subarray(r,r+6).map(Ae.svgRound);t.push(`C${a} ${o} ${c} ${l} ${d} ${h}`)}}return t.join("")}serialize([t,i,r,s],a){const o=[],c=[],[l,d,h,f]=O(this,ai,FO).call(this);let g,v,y,x,m,b,w,_,D;switch(u(this,zp)){case 0:D=Ae._rescale,g=t,v=i+s,y=r,x=-s,m=t+l*r,b=i+(1-d-f)*s,w=t+(l+h)*r,_=i+(1-d)*s;break;case 90:D=Ae._rescaleAndSwap,g=t,v=i,y=r,x=s,m=t+d*r,b=i+l*s,w=t+(d+f)*r,_=i+(l+h)*s;break;case 180:D=Ae._rescale,g=t+r,v=i,y=-r,x=s,m=t+(1-l-h)*r,b=i+d*s,w=t+(1-l)*r,_=i+(d+f)*s;break;case 270:D=Ae._rescaleAndSwap,g=t+r,v=i+s,y=-r,x=-s,m=t+(1-d-f)*r,b=i+(1-l-h)*s,w=t+(1-d)*r,_=i+(1-l)*s;break}for(const{line:A,points:E}of u(this,Lr))o.push(D(A,g,v,y,x,a?new Array(A.length):null)),c.push(D(E,g,v,y,x,a?new Array(E.length):null));return{lines:o,points:c,rect:[m,b,w,_]}}static deserialize(t,i,r,s,a,{paths:{lines:o,points:c},rotation:l,thickness:d}){const h=[];let f,g,v,y,x;switch(l){case 0:x=Ae._rescale,f=-t/r,g=i/s+1,v=1/r,y=-1/s;break;case 90:x=Ae._rescaleAndSwap,f=-i/s,g=-t/r,v=1/s,y=1/r;break;case 180:x=Ae._rescale,f=t/r+1,g=-i/s,v=-1/r,y=1/s;break;case 270:x=Ae._rescaleAndSwap,f=i/s+1,g=t/r+1,v=-1/s,y=-1/r;break}if(!o){o=[];for(const b of c){const w=b.length;if(w===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1]]));continue}if(w===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1],NaN,NaN,NaN,NaN,b[2],b[3]]));continue}const _=new Float32Array(3*(w-2));o.push(_);let[D,A,E,F]=b.subarray(0,4);_.set([NaN,NaN,NaN,NaN,D,A],0);for(let I=4;I<w;I+=2){const z=b[I],H=b[I+1];_.set(Ae.createBezierPoints(D,A,E,F,z,H),(I-2)*3),[D,A,E,F]=[E,F,z,H]}}}for(let b=0,w=o.length;b<w;b++)h.push({line:x(o[b].map(_=>_??NaN),f,g,v,y),points:x(c[b].map(_=>_??NaN),f,g,v,y)});const m=new this.prototype.constructor;return m.build(h,r,s,1,l,d,a),m}get box(){return u(this,Fi)}updateProperty(t,i){return t==="stroke-width"?O(this,ai,MO).call(this,i):null}updateParentDimensions([t,i],r){const[s,a]=O(this,ai,so).call(this);T(this,Ua,t),T(this,Na,i),T(this,Pp,r);const[o,c]=O(this,ai,so).call(this),l=o-s,d=c-a,h=u(this,Fi);return h[0]-=l,h[1]-=d,h[2]+=2*l,h[3]+=2*d,h}updateRotation(t){return T(this,u0,t),{path:{transform:this.rotationTransform}}}get viewBox(){return u(this,Fi).map(Ae.svgRound).join(" ")}get defaultProperties(){const[t,i]=u(this,Fi);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ae.svgRound(t)} ${Ae.svgRound(i)}`}}}get rotationTransform(){const[,,t,i]=u(this,Fi);let r=0,s=0,a=0,o=0,c=0,l=0;switch(u(this,u0)){case 90:s=i/t,a=-t/i,c=t;break;case 180:r=-1,o=-1,c=t,l=i;break;case 270:s=-i/t,a=t/i,l=i;break;default:return""}return`matrix(${r} ${s} ${a} ${o} ${Ae.svgRound(c)} ${Ae.svgRound(l)})`}getPathResizingSVGProperties([t,i,r,s]){const[a,o]=O(this,ai,so).call(this),[c,l,d,h]=u(this,Fi);if(Math.abs(d-a)<=Ae.PRECISION||Math.abs(h-o)<=Ae.PRECISION){const x=t+r/2-(c+d/2),m=i+s/2-(l+h/2);return{path:{"transform-origin":`${Ae.svgRound(t)} ${Ae.svgRound(i)}`,transform:`${this.rotationTransform} translate(${x} ${m})`}}}const f=(r-2*a)/(d-2*a),g=(s-2*o)/(h-2*o),v=d/r,y=h/s;return{path:{"transform-origin":`${Ae.svgRound(c)} ${Ae.svgRound(l)}`,transform:`${this.rotationTransform} scale(${v} ${y}) translate(${Ae.svgRound(a)} ${Ae.svgRound(o)}) scale(${f} ${g}) translate(${Ae.svgRound(-a)} ${Ae.svgRound(-o)})`}}}getPathResizedSVGProperties([t,i,r,s]){const[a,o]=O(this,ai,so).call(this),c=u(this,Fi),[l,d,h,f]=c;if(c[0]=t,c[1]=i,c[2]=r,c[3]=s,Math.abs(h-a)<=Ae.PRECISION||Math.abs(f-o)<=Ae.PRECISION){const m=t+r/2-(l+h/2),b=i+s/2-(d+f/2);for(const{line:w,points:_}of u(this,Lr))Ae._translate(w,m,b,w),Ae._translate(_,m,b,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ae.svgRound(t)} ${Ae.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const g=(r-2*a)/(h-2*a),v=(s-2*o)/(f-2*o),y=-g*(l+a)+t+a,x=-v*(d+o)+i+o;if(g!==1||v!==1||y!==0||x!==0)for(const{line:m,points:b}of u(this,Lr))Ae._rescale(m,y,x,g,v,m),Ae._rescale(b,y,x,g,v,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ae.svgRound(t)} ${Ae.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,i],r){const[s,a]=r,o=u(this,Fi),c=t-o[0],l=i-o[1];if(u(this,Ua)===s&&u(this,Na)===a)for(const{line:d,points:h}of u(this,Lr))Ae._translate(d,c,l,d),Ae._translate(h,c,l,h);else{const d=u(this,Ua)/s,h=u(this,Na)/a;T(this,Ua,s),T(this,Na,a);for(const{line:f,points:g}of u(this,Lr))Ae._rescale(f,c,l,d,h,f),Ae._rescale(g,c,l,d,h,g);o[2]*=d,o[3]*=h}return o[0]=t,o[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Ae.svgRound(t)} ${Ae.svgRound(i)}`}}}get defaultSVGProperties(){const t=u(this,Fi);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Ae.svgRound(t[0])} ${Ae.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}Fi=new WeakMap,u0=new WeakMap,d0=new WeakMap,Lr=new WeakMap,Ua=new WeakMap,Na=new WeakMap,Pp=new WeakMap,zp=new WeakMap,Rd=new WeakMap,ai=new WeakSet,so=function(t=u(this,Rd)){const i=u(this,d0)+t/2*u(this,Pp);return u(this,zp)%180===0?[i/u(this,Ua),i/u(this,Na)]:[i/u(this,Na),i/u(this,Ua)]},FO=function(){const[t,i,r,s]=u(this,Fi),[a,o]=O(this,ai,so).call(this,0);return[t+a,i+o,r-2*a,s-2*o]},OO=function(){const t=T(this,Fi,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:s}of u(this,Lr)){if(s.length<=12){for(let c=4,l=s.length;c<l;c+=6)Ee.pointBoundingBox(s[c],s[c+1],t);continue}let a=s[4],o=s[5];for(let c=6,l=s.length;c<l;c+=6){const[d,h,f,g,v,y]=s.subarray(c,c+6);Ee.bezierBoundingBox(a,o,d,h,f,g,v,y,t),a=v,o=y}}const[i,r]=O(this,ai,so).call(this);t[0]=Li(t[0]-i,0,1),t[1]=Li(t[1]-r,0,1),t[2]=Li(t[2]+i,0,1),t[3]=Li(t[3]+r,0,1),t[2]-=t[0],t[3]-=t[1]},MO=function(t){const[i,r]=O(this,ai,so).call(this);T(this,Rd,t);const[s,a]=O(this,ai,so).call(this),[o,c]=[s-i,a-r],l=u(this,Fi);return l[0]-=o,l[1]-=c,l[2]+=2*o,l[3]+=2*c,l};class $1 extends jO{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Lt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new $1(this._viewParameters);return e.updateAll(this),e}}var h1,BO;const lf=class lf extends M2{constructor(t){super({...t,name:"inkEditor"});U(this,h1);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,i){Lt.initialize(t,i),this._defaultDrawingOptions=new $1(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return Le(this,"typesMap",new Map([[rt.INK_THICKNESS,"stroke-width"],[rt.INK_COLOR,"stroke"],[rt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,i,r,s,a){return new J$(t,i,r,s,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,i,r,s,a,o){return R0.deserialize(t,i,r,s,a,o)}static async deserialize(t,i,r){let s=null;if(t instanceof aC){const{data:{inkLists:o,rect:c,rotation:l,id:d,color:h,opacity:f,borderStyle:{rawWidth:g},popupRef:v,richText:y,contentsObj:x,creationDate:m,modificationDate:b},parent:{page:{pageNumber:w}}}=t;s=t={annotationType:Pe.INK,color:Array.from(h),thickness:g,opacity:f,paths:{points:o},boxes:null,pageIndex:w-1,rect:c.slice(0),rotation:l,annotationElementId:d,id:d,deleted:!1,popupRef:v,richText:y,comment:(x==null?void 0:x.str)||null,creationDate:m,modificationDate:b}}const a=await super.deserialize(t,i,r);return a._initialData=s,t.comment&&a.setCommentData(t),a}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new j2(this)),[["colorPicker",this._colorPicker]]}get colorType(){return rt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:i,parent:r}=this;i.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:i,opacity:r}){this._drawingOptions=lf.getDefaultDrawingOptions({stroke:Ee.makeHexColor(...t),"stroke-width":i,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:r}=this.serializeDraw(t),{_drawingOptions:{stroke:s,"stroke-opacity":a,"stroke-width":o}}=this,c=Object.assign(super.serialize(t),{color:Lt._colorManager.convert(s),opacity:a,thickness:o,paths:{lines:i,points:r}});return this.addComment(c),t?(c.isCopy=!0,c):this.annotationElementId&&!O(this,h1,BO).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:i,rect:r}=this.serializeDraw(!1);return t.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:i,popup:this.comment}),null}};h1=new WeakSet,BO=function(t){const{color:i,thickness:r,opacity:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((o,c)=>o!==i[c])||t.thickness!==r||t.opacity!==s||t.pageIndex!==a},ve(lf,"_type","ink"),ve(lf,"_editorType",Pe.INK),ve(lf,"_defaultDrawingOptions",null);let vS=lf;class xS extends R0{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Sv=8,Gg=3;var Fd,gt,wS,Ks,LO,IO,_S,Nx,PO,zO,WO,DS,AS,qO;class Vo{static extractContoursFromText(e,{fontFamily:t,fontStyle:i,fontWeight:r},s,a,o,c){let l=new OffscreenCanvas(1,1),d=l.getContext("2d",{alpha:!1});const h=200,f=d.font=`${i} ${r} ${h}px ${t}`,{actualBoundingBoxLeft:g,actualBoundingBoxRight:v,actualBoundingBoxAscent:y,actualBoundingBoxDescent:x,fontBoundingBoxAscent:m,fontBoundingBoxDescent:b,width:w}=d.measureText(e),_=1.5,D=Math.ceil(Math.max(Math.abs(g)+Math.abs(v)||0,w)*_),A=Math.ceil(Math.max(Math.abs(y)+Math.abs(x)||h,Math.abs(m)+Math.abs(b)||h)*_);l=new OffscreenCanvas(D,A),d=l.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=f,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,D,A),d.fillStyle="black",d.fillText(e,D*(_-1)/2,A*(3-_)/2);const E=O(this,gt,DS).call(this,d.getImageData(0,0,D,A).data),F=O(this,gt,WO).call(this,E),I=O(this,gt,AS).call(this,F),z=O(this,gt,_S).call(this,E,D,A,I);return this.processDrawnLines({lines:{curves:z,width:D,height:A},pageWidth:s,pageHeight:a,rotation:o,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,t,i,r,s){const[a,o,c]=O(this,gt,qO).call(this,e),[l,d]=O(this,gt,zO).call(this,a,o,c,Math.hypot(o,c)*u(this,Fd).sigmaSFactor,u(this,Fd).sigmaR,u(this,Fd).kernelSize),h=O(this,gt,AS).call(this,d),f=O(this,gt,_S).call(this,l,o,c,h);return this.processDrawnLines({lines:{curves:f,width:o,height:c},pageWidth:t,pageHeight:i,rotation:r,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:i,rotation:r,innerMargin:s,mustSmooth:a,areContours:o}){r%180!==0&&([t,i]=[i,t]);const{curves:c,width:l,height:d}=e,h=e.thickness??0,f=[],g=Math.min(t/l,i/d),v=g/t,y=g/i,x=[];for(const{points:b}of c){const w=a?O(this,gt,PO).call(this,b):b;if(!w)continue;x.push(w);const _=w.length,D=new Float32Array(_),A=new Float32Array(3*(_===2?2:_-2));if(f.push({line:A,points:D}),_===2){D[0]=w[0]*v,D[1]=w[1]*y,A.set([NaN,NaN,NaN,NaN,D[0],D[1]],0);continue}let[E,F,I,z]=w;E*=v,F*=y,I*=v,z*=y,D.set([E,F,I,z],0),A.set([NaN,NaN,NaN,NaN,E,F],0);for(let H=4;H<_;H+=2){const k=D[H]=w[H]*v,W=D[H+1]=w[H+1]*y;A.set(Ae.createBezierPoints(E,F,I,z,k,W),(H-2)*3),[E,F,I,z]=[I,z,k,W]}}if(f.length===0)return null;const m=o?new xS:new R0;return m.build(f,t,i,1,r,o?0:h,s),{outline:m,newCurves:x,areContours:o,thickness:h,width:l,height:d}}static async compressSignature({outlines:e,areContours:t,thickness:i,width:r,height:s}){let a=1/0,o=-1/0,c=0;for(const w of e){c+=w.length;for(let _=2,D=w.length;_<D;_++){const A=w[_]-w[_-2];a=Math.min(a,A),o=Math.max(o,A)}}let l;a>=-128&&o<=127?l=Int8Array:a>=-32768&&o<=32767?l=Int16Array:l=Int32Array;const d=e.length,h=Sv+Gg*d,f=new Uint32Array(h);let g=0;f[g++]=h*Uint32Array.BYTES_PER_ELEMENT+(c-2*d)*l.BYTES_PER_ELEMENT,f[g++]=0,f[g++]=r,f[g++]=s,f[g++]=t?0:1,f[g++]=Math.max(0,Math.floor(i??0)),f[g++]=d,f[g++]=l.BYTES_PER_ELEMENT;for(const w of e)f[g++]=w.length-2,f[g++]=w[0],f[g++]=w[1];const v=new CompressionStream("deflate-raw"),y=v.writable.getWriter();await y.ready,y.write(f);const x=l.prototype.constructor;for(const w of e){const _=new x(w.length-2);for(let D=2,A=w.length;D<A;D++)_[D-2]=w[D]-w[D-2];y.write(_)}y.close();const m=await new Response(v.readable).arrayBuffer(),b=new Uint8Array(m);return z6(b)}static async decompressSignature(e){try{const t=pq(e),{readable:i,writable:r}=new DecompressionStream("deflate-raw"),s=r.getWriter();await s.ready,s.write(t).then(async()=>{await s.ready,await s.close()}).catch(()=>{});let a=null,o=0;for await(const w of i)a||(a=new Uint8Array(new Uint32Array(w.buffer,0,4)[0])),a.set(w,o),o+=w.length;const c=new Uint32Array(a.buffer,0,a.length>>2),l=c[1];if(l!==0)throw new Error(`Invalid version: ${l}`);const d=c[2],h=c[3],f=c[4]===0,g=c[5],v=c[6],y=c[7],x=[],m=(Sv+Gg*v)*Uint32Array.BYTES_PER_ELEMENT;let b;switch(y){case Int8Array.BYTES_PER_ELEMENT:b=new Int8Array(a.buffer,m);break;case Int16Array.BYTES_PER_ELEMENT:b=new Int16Array(a.buffer,m);break;case Int32Array.BYTES_PER_ELEMENT:b=new Int32Array(a.buffer,m);break}o=0;for(let w=0;w<v;w++){const _=c[Gg*w+Sv],D=new Float32Array(_+2);x.push(D);for(let A=0;A<Gg-1;A++)D[A]=c[Gg*w+Sv+A+1];for(let A=0;A<_;A++)D[A+2]=D[A]+b[o++]}return{areContours:f,thickness:g,outlines:x,width:d,height:h}}catch(t){return Be(`decompressSignature: ${t}`),null}}}Fd=new WeakMap,gt=new WeakSet,wS=function(e,t,i,r){return i-=e,r-=t,i===0?r>0?0:4:i===1?r+6:2-r},Ks=new WeakMap,LO=function(e,t,i,r,s,a,o){const c=O(this,gt,wS).call(this,i,r,s,a);for(let l=0;l<8;l++){const d=(-l+c-o+16)%8,h=u(this,Ks)[2*d],f=u(this,Ks)[2*d+1];if(e[(i+h)*t+(r+f)]!==0)return d}return-1},IO=function(e,t,i,r,s,a,o){const c=O(this,gt,wS).call(this,i,r,s,a);for(let l=0;l<8;l++){const d=(l+c+o+16)%8,h=u(this,Ks)[2*d],f=u(this,Ks)[2*d+1];if(e[(i+h)*t+(r+f)]!==0)return d}return-1},_S=function(e,t,i,r){const s=e.length,a=new Int32Array(s);for(let d=0;d<s;d++)a[d]=e[d]<=r?1:0;for(let d=1;d<i-1;d++)a[d*t]=a[d*t+t-1]=0;for(let d=0;d<t;d++)a[d]=a[t*i-1-d]=0;let o=1,c;const l=[];for(let d=1;d<i-1;d++){c=1;for(let h=1;h<t-1;h++){const f=d*t+h,g=a[f];if(g===0)continue;let v=d,y=h;if(g===1&&a[f-1]===0)o+=1,y-=1;else if(g>=1&&a[f+1]===0)o+=1,y+=1,g>1&&(c=g);else{g!==1&&(c=Math.abs(g));continue}const x=[h,d],m=y===h+1,b={isHole:m,points:x,id:o,parent:0};l.push(b);let w;for(const H of l)if(H.id===c){w=H;break}w?w.isHole?b.parent=m?w.parent:c:b.parent=m?c:w.parent:b.parent=m?c:0;const _=O(this,gt,LO).call(this,a,t,d,h,v,y,0);if(_===-1){a[f]=-o,a[f]!==1&&(c=Math.abs(a[f]));continue}let D=u(this,Ks)[2*_],A=u(this,Ks)[2*_+1];const E=d+D,F=h+A;v=E,y=F;let I=d,z=h;for(;;){const H=O(this,gt,IO).call(this,a,t,I,z,v,y,1);D=u(this,Ks)[2*H],A=u(this,Ks)[2*H+1];const k=I+D,W=z+A;x.push(W,k);const S=I*t+z;if(a[S+1]===0?a[S]=-o:a[S]===1&&(a[S]=o),k===d&&W===h&&I===E&&z===F){a[f]!==1&&(c=Math.abs(a[f]));break}else v=I,y=z,I=k,z=W}}}return l},Nx=function(e,t,i,r){if(i-t<=4){for(let E=t;E<i-2;E+=2)r.push(e[E],e[E+1]);return}const s=e[t],a=e[t+1],o=e[i-4]-s,c=e[i-3]-a,l=Math.hypot(o,c),d=o/l,h=c/l,f=d*a-h*s,g=c/o,v=1/l,y=Math.atan(g),x=Math.cos(y),m=Math.sin(y),b=v*(Math.abs(x)+Math.abs(m)),w=v*(1-b+b**2),_=Math.max(Math.atan(Math.abs(m+x)*w),Math.atan(Math.abs(m-x)*w));let D=0,A=t;for(let E=t+2;E<i-2;E+=2){const F=Math.abs(f-d*e[E+1]+h*e[E]);F>D&&(A=E,D=F)}D>(l*_)**2?(O(this,gt,Nx).call(this,e,t,A+2,r),O(this,gt,Nx).call(this,e,A,i,r)):r.push(s,a)},PO=function(e){const t=[],i=e.length;return O(this,gt,Nx).call(this,e,0,i,t),t.push(e[i-2],e[i-1]),t.length<=4?null:t},zO=function(e,t,i,r,s,a){const o=new Float32Array(a**2),c=-2*r**2,l=a>>1;for(let y=0;y<a;y++){const x=(y-l)**2;for(let m=0;m<a;m++)o[y*a+m]=Math.exp((x+(m-l)**2)/c)}const d=new Float32Array(256),h=-2*s**2;for(let y=0;y<256;y++)d[y]=Math.exp(y**2/h);const f=e.length,g=new Uint8Array(f),v=new Uint32Array(256);for(let y=0;y<i;y++)for(let x=0;x<t;x++){const m=y*t+x,b=e[m];let w=0,_=0;for(let A=0;A<a;A++){const E=y+A-l;if(!(E<0||E>=i))for(let F=0;F<a;F++){const I=x+F-l;if(I<0||I>=t)continue;const z=e[E*t+I],H=o[A*a+F]*d[Math.abs(z-b)];w+=z*H,_+=H}}const D=g[m]=Math.round(w/_);v[D]++}return[g,v]},WO=function(e){const t=new Uint32Array(256);for(const i of e)t[i]++;return t},DS=function(e){const t=e.length,i=new Uint8ClampedArray(t>>2);let r=-1/0,s=1/0;for(let o=0,c=i.length;o<c;o++){const l=i[o]=e[o<<2];r=Math.max(r,l),s=Math.min(s,l)}const a=255/(r-s);for(let o=0,c=i.length;o<c;o++)i[o]=(i[o]-s)*a;return i},AS=function(e){let t,i=-1/0,r=-1/0;const s=e.findIndex(c=>c!==0);let a=s,o=s;for(t=s;t<256;t++){const c=e[t];c>i&&(t-a>r&&(r=t-a,o=t-1),i=c,a=t)}for(t=o-1;t>=0&&!(e[t]>e[t+1]);t--);return t},qO=function(e){const t=e,{width:i,height:r}=e,{maxDim:s}=u(this,Fd);let a=i,o=r;if(i>s||r>s){let f=i,g=r,v=Math.log2(Math.max(i,r)/s);const y=Math.floor(v);v=v===y?y-1:y;for(let m=0;m<v;m++){a=Math.ceil(f/2),o=Math.ceil(g/2);const b=new OffscreenCanvas(a,o);b.getContext("2d").drawImage(e,0,0,f,g,0,0,a,o),f=a,g=o,e!==t&&e.close(),e=b.transferToImageBitmap()}const x=Math.min(s/a,s/o);a=Math.round(a*x),o=Math.round(o*x)}const l=new OffscreenCanvas(a,o).getContext("2d",{willReadFrequently:!0});l.fillStyle="white",l.fillRect(0,0,a,o),l.filter="grayscale(1)",l.drawImage(e,0,0,e.width,e.height,0,0,a,o);const d=l.getImageData(0,0,a,o).data;return[O(this,gt,DS).call(this,d),a,o]},U(Vo,gt),U(Vo,Fd,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),U(Vo,Ks,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class oC extends jO{constructor(){super(),super.updateProperties({fill:Lt._defaultLineColor,"stroke-width":0})}clone(){const e=new oC;return e.updateAll(this),e}}class cC extends $1{constructor(e){super(e),super.updateProperties({stroke:Lt._defaultLineColor,"stroke-width":1})}clone(){const e=new cC(this._viewParameters);return e.updateAll(this),e}}var ml,ja,yl,Od;const wr=class wr extends M2{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});U(this,ml,!1);U(this,ja,null);U(this,yl,null);U(this,Od,null);this._willKeepAspectRatio=!0,T(this,yl,t.signatureData||null),T(this,ja,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,i){Lt.initialize(t,i),this._defaultDrawingOptions=new oC,this._defaultDrawnSignatureOptions=new cC(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!1}static get typesMap(){return Le(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!u(this,ja)}}static computeTelemetryFinalData(t){const i=t.get("hasDescription");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,i;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,t=this.x,i=this.y),super.render(),this._drawId===null)if(u(this,yl)){const{lines:s,mustSmooth:a,areContours:o,description:c,uuid:l,heightInPage:d}=u(this,yl),{rawDims:{pageWidth:h,pageHeight:f},rotation:g}=this.parent.viewport,v=Vo.processDrawnLines({lines:s,pageWidth:h,pageHeight:f,rotation:g,innerMargin:wr._INNER_MARGIN,mustSmooth:a,areContours:o});this.addSignature(v,d,c,l)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:u(this,ja)||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(t,i)),this.div}setUuid(t){T(this,Od,t),this.addEditToolbar()}getUuid(){return u(this,Od)}get description(){return u(this,ja)}set description(t){T(this,ja,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(i=>{i==null||i.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:i,thickness:r,width:s,height:a}=u(this,yl),o=Math.max(s,a),c=Vo.processDrawnLines({lines:{curves:t.map(l=>({points:l})),thickness:r,width:s,height:a},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:i});return{areContours:i,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,i,r,s){const{x:a,y:o}=this,{outline:c}=T(this,yl,t);T(this,ml,c instanceof xS),this.description=r;let l;u(this,ml)?l=wr.getDefaultDrawingOptions():(l=wr._defaultDrawnSignatureOptions.clone(),l.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:l});const[,d]=this.pageDimensions;let h=i/d;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(),this.x=a,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:i,pageHeight:r},rotation:s}=this.parent.viewport;return Vo.process(t,i,r,s,wr._INNER_MARGIN)}getFromText(t,i){const{rawDims:{pageWidth:r,pageHeight:s},rotation:a}=this.parent.viewport;return Vo.extractContoursFromText(t,i,r,s,a,wr._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:i,pageHeight:r},rotation:s}=this.parent.viewport;return Vo.processDrawnLines({lines:t,pageWidth:i,pageHeight:r,rotation:s,innerMargin:wr._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:i}){t?this._drawingOptions=wr.getDefaultDrawingOptions():(this._drawingOptions=wr._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:i,points:r}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":s}}=this,a=Object.assign(super.serialize(t),{isSignature:!0,areContours:u(this,ml),color:[0,0,0],thickness:u(this,ml)?0:s});return this.addComment(a),t?(a.paths={lines:i,points:r},a.uuid=u(this,Od),a.isCopy=!0):a.lines=i,u(this,ja)&&(a.accessibilityData={type:"Figure",alt:u(this,ja)}),a}static deserializeDraw(t,i,r,s,a,o){return o.areContours?xS.deserialize(t,i,r,s,a,o):R0.deserialize(t,i,r,s,a,o)}static async deserialize(t,i,r){var a;const s=await super.deserialize(t,i,r);return T(s,ml,t.areContours),s.description=((a=t.accessibilityData)==null?void 0:a.alt)||"",T(s,Od,t.uuid),s}};ml=new WeakMap,ja=new WeakMap,yl=new WeakMap,Od=new WeakMap,ve(wr,"_type","signature"),ve(wr,"_editorType",Pe.SIGNATURE),ve(wr,"_defaultDrawingOptions",null);let ES=wr;var Yt,zn,bl,Io,vl,Wp,Po,Md,Ra,Ir,qp,ct,Sm,Tm,jx,Rx,Fx,TS,Ox,$O;class SS extends Lt{constructor(t){super({...t,name:"stampEditor"});U(this,ct);U(this,Yt,null);U(this,zn,null);U(this,bl,null);U(this,Io,null);U(this,vl,null);U(this,Wp,"");U(this,Po,null);U(this,Md,!1);U(this,Ra,null);U(this,Ir,!1);U(this,qp,!1);T(this,Io,t.bitmapUrl),T(this,vl,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,i){Lt.initialize(t,i)}static isHandlingMimeForPasting(t){return dE.includes(t)}static paste(t,i){i.pasteEditor({mode:Pe.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,c=await r.guess({name:"altText",request:{data:s,width:a,height:o,channels:s.length/(a*o)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const l=c.output;return await this.setGuessedAltText(l),i&&!this.hasAltTextData()&&(this.altTextData={alt:l,decorative:!1}),l}remove(){var t;u(this,zn)&&(T(this,Yt,null),this._uiManager.imageManager.deleteId(u(this,zn)),(t=u(this,Po))==null||t.remove(),T(this,Po,null),u(this,Ra)&&(clearTimeout(u(this,Ra)),T(this,Ra,null))),super.remove()}rebuild(){if(!this.parent){u(this,zn)&&O(this,ct,jx).call(this);return}super.rebuild(),this.div!==null&&(u(this,zn)&&u(this,Po)===null&&O(this,ct,jx).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(u(this,bl)||u(this,Yt)||u(this,Io)||u(this,vl)||u(this,zn)||u(this,Md))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;return this._isCopy&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.createAltText(),u(this,Md)||(u(this,Yt)?O(this,ct,Rx).call(this):O(this,ct,jx).call(this)),this._isCopy&&this._moveAfterPaste(t,i),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,i){const{id:r,bitmap:s}=this._uiManager.imageManager.getFromCanvas(t,i);i.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(T(this,zn,r),s&&T(this,Yt,s),T(this,Md,!1),O(this,ct,Rx).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;u(this,Ra)!==null&&clearTimeout(u(this,Ra)),T(this,Ra,setTimeout(()=>{T(this,Ra,null),O(this,ct,TS).call(this)},200))}copyCanvas(t,i,r=!1){t||(t=224);const{width:s,height:a}=u(this,Yt),o=new Wa;let c=u(this,Yt),l=s,d=a,h=null;if(i){if(s>i||a>i){const E=Math.min(i/s,i/a);l=Math.floor(s*E),d=Math.floor(a*E)}h=document.createElement("canvas");const g=h.width=Math.ceil(l*o.sx),v=h.height=Math.ceil(d*o.sy);u(this,Ir)||(c=O(this,ct,Fx).call(this,g,v));const y=h.getContext("2d");y.filter=this._uiManager.hcmFilter;let x="white",m="#cfcfd8";this._uiManager.hcmFilter!=="none"?m="black":xq.isDarkMode&&(x="#8f8f9d",m="#42414d");const b=15,w=b*o.sx,_=b*o.sy,D=new OffscreenCanvas(w*2,_*2),A=D.getContext("2d");A.fillStyle=x,A.fillRect(0,0,w*2,_*2),A.fillStyle=m,A.fillRect(0,0,w,_),A.fillRect(w,_,w,_),y.fillStyle=y.createPattern(D,"repeat"),y.fillRect(0,0,g,v),y.drawImage(c,0,0,c.width,c.height,0,0,g,v)}let f=null;if(r){let g,v;if(o.symmetric&&c.width<t&&c.height<t)g=c.width,v=c.height;else if(c=u(this,Yt),s>t||a>t){const m=Math.min(t/s,t/a);g=Math.floor(s*m),v=Math.floor(a*m),u(this,Ir)||(c=O(this,ct,Fx).call(this,g,v))}const x=new OffscreenCanvas(g,v).getContext("2d",{willReadFrequently:!0});x.drawImage(c,0,0,c.width,c.height,0,0,g,v),f={width:g,height:v,data:x.getImageData(0,0,g,v).data}}return{canvas:h,width:l,height:d,imageData:f}}static async deserialize(t,i,r){var x;let s=null,a=!1;if(t instanceof aO){const{data:{rect:m,rotation:b,id:w,structParent:_,popupRef:D,richText:A,contentsObj:E,creationDate:F,modificationDate:I},container:z,parent:{page:{pageNumber:H}},canvas:k}=t;let W,S;k?(delete t.canvas,{id:W,bitmap:S}=r.imageManager.getFromCanvas(z.id,k),k.remove()):(a=!0,t._hasNoCanvas=!0);const G=((x=await i._structTree.getAriaAttributes(`${tf}${w}`))==null?void 0:x.get("aria-label"))||"";s=t={annotationType:Pe.STAMP,bitmapId:W,bitmap:S,pageIndex:H-1,rect:m.slice(0),rotation:b,annotationElementId:w,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:G},isSvg:!1,structParent:_,popupRef:D,richText:A,comment:(E==null?void 0:E.str)||null,creationDate:F,modificationDate:I}}const o=await super.deserialize(t,i,r),{rect:c,bitmap:l,bitmapUrl:d,bitmapId:h,isSvg:f,accessibilityData:g}=t;a?(r.addMissingCanvas(t.id,o),T(o,Md,!0)):h&&r.imageManager.isValidId(h)?(T(o,zn,h),l&&T(o,Yt,l)):T(o,Io,d),T(o,Ir,f);const[v,y]=o.pageDimensions;return o.width=(c[2]-c[0])/v,o.height=(c[3]-c[1])/y,g&&(o.altTextData=g),o._initialData=s,t.comment&&o.setCommentData(t),T(o,qp,!!s),o}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(t),{bitmapId:u(this,zn),isSvg:u(this,Ir)});if(this.addComment(r),t)return r.bitmapUrl=O(this,ct,Ox).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:s,altText:a}=this.serializeAltText(!1);if(!s&&a&&(r.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=O(this,ct,$O).call(this,r);return c.isSame?null:(c.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(i===null)return r;i.stamps||(i.stamps=new Map);const o=u(this,Ir)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!i.stamps.has(u(this,zn)))i.stamps.set(u(this,zn),{area:o,serialized:r}),r.bitmap=O(this,ct,Ox).call(this,!1);else if(u(this,Ir)){const c=i.stamps.get(u(this,zn));o>c.area&&(c.area=o,c.serialized.bitmap.close(),c.serialized.bitmap=O(this,ct,Ox).call(this,!1))}return r}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Yt=new WeakMap,zn=new WeakMap,bl=new WeakMap,Io=new WeakMap,vl=new WeakMap,Wp=new WeakMap,Po=new WeakMap,Md=new WeakMap,Ra=new WeakMap,Ir=new WeakMap,qp=new WeakMap,ct=new WeakSet,Sm=function(t,i=!1){if(!t){this.remove();return}T(this,Yt,t.bitmap),i||(T(this,zn,t.id),T(this,Ir,t.isSvg)),t.file&&T(this,Wp,t.file.name),O(this,ct,Rx).call(this)},Tm=function(){if(T(this,bl,null),this._uiManager.enableWaiting(!1),!!u(this,Po)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,Yt)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,Yt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},jx=function(){if(u(this,zn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,zn)).then(r=>O(this,ct,Sm).call(this,r,!0)).finally(()=>O(this,ct,Tm).call(this));return}if(u(this,Io)){const r=u(this,Io);T(this,Io,null),this._uiManager.enableWaiting(!0),T(this,bl,this._uiManager.imageManager.getFromUrl(r).then(s=>O(this,ct,Sm).call(this,s)).finally(()=>O(this,ct,Tm).call(this)));return}if(u(this,vl)){const r=u(this,vl);T(this,vl,null),this._uiManager.enableWaiting(!0),T(this,bl,this._uiManager.imageManager.getFromFile(r).then(s=>O(this,ct,Sm).call(this,s)).finally(()=>O(this,ct,Tm).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=dE.join(",");const i=this._uiManager._signal;T(this,bl,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),O(this,ct,Sm).call(this,s)}r()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:i})}).finally(()=>O(this,ct,Tm).call(this))),t.click()},Rx=function(){var l;const{div:t}=this;let{width:i,height:r}=u(this,Yt);const[s,a]=this.pageDimensions,o=.75;if(this.width)i=this.width*s,r=this.height*a;else if(i>o*s||r>o*a){const d=Math.min(o*s/i,o*a/r);i*=d,r*=d}this._uiManager.enableWaiting(!1);const c=T(this,Po,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=i/s,this.height=r/a,this.setDims(),(l=this._initialOptions)!=null&&l.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),O(this,ct,TS).call(this),u(this,qp)||(this.parent.addUndoableEditor(this),T(this,qp,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,Wp)&&this.div.setAttribute("aria-description",u(this,Wp)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Fx=function(t,i){const{width:r,height:s}=u(this,Yt);let a=r,o=s,c=u(this,Yt);for(;a>2*t||o>2*i;){const l=a,d=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*i&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const h=new OffscreenCanvas(a,o);h.getContext("2d").drawImage(c,0,0,l,d,0,0,a,o),c=h.transferToImageBitmap()}return c},TS=function(){const[t,i]=this.parentDimensions,{width:r,height:s}=this,a=new Wa,o=Math.ceil(r*t*a.sx),c=Math.ceil(s*i*a.sy),l=u(this,Po);if(!l||l.width===o&&l.height===c)return;l.width=o,l.height=c;const d=u(this,Ir)?u(this,Yt):O(this,ct,Fx).call(this,o,c),h=l.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(d,0,0,d.width,d.height,0,0,o,c)},Ox=function(t){if(t){if(u(this,Ir)){const s=this._uiManager.imageManager.getSvgUrl(u(this,zn));if(s)return s}const i=document.createElement("canvas");return{width:i.width,height:i.height}=u(this,Yt),i.getContext("2d").drawImage(u(this,Yt),0,0),i.toDataURL()}if(u(this,Ir)){const[i,r]=this.pageDimensions,s=Math.round(this.width*i*Hl.PDF_TO_CSS_UNITS),a=Math.round(this.height*r*Hl.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(s,a);return o.getContext("2d").drawImage(u(this,Yt),0,0,u(this,Yt).width,u(this,Yt).height,0,0,s,a),o.transferToImageBitmap()}return structuredClone(u(this,Yt))},$O=function(t){var o;const{pageIndex:i,accessibilityData:{altText:r}}=this._initialData,s=t.pageIndex===i,a=(((o=t.accessibilityData)==null?void 0:o.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&a,isSameAltText:a}},ve(SS,"_type","stamp"),ve(SS,"_editorType",Pe.STAMP);var Bd,$p,xl,wl,zo,rr,_l,Hp,Vp,Qs,Wo,Wn,qo,Dl,Gp,Ce,Al,jt,kS,HO,ua,US,NS,Mx;const Is=class Is{constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:r,accessibilityManager:s,annotationLayer:a,drawLayer:o,textLayer:c,viewport:l,l10n:d}){U(this,jt);U(this,Bd);U(this,$p,!1);U(this,xl,null);U(this,wl,null);U(this,zo,null);U(this,rr,new Map);U(this,_l,!1);U(this,Hp,!1);U(this,Vp,!1);U(this,Qs,null);U(this,Wo,null);U(this,Wn,null);U(this,qo,null);U(this,Dl,null);U(this,Gp,-1);U(this,Ce);const h=[...u(Is,Al).values()];if(!Is._initialized){Is._initialized=!0;for(const f of h)f.initialize(d,e)}e.registerEditorTypes(h),T(this,Ce,e),this.pageIndex=t,this.div=i,T(this,Bd,s),T(this,xl,a),this.viewport=l,T(this,Wn,c),this.drawLayer=o,this._structTree=r,u(this,Ce).addLayer(this)}get isEmpty(){return u(this,rr).size===0}get isInvisible(){return this.isEmpty&&u(this,Ce).getMode()===Pe.NONE}updateToolbar(e){u(this,Ce).updateToolbar(e)}updateMode(e=u(this,Ce).getMode()){switch(O(this,jt,Mx).call(this),e){case Pe.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Pe.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Pe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Pe.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const i of u(Is,Al).values())t.toggle(`${i._type}Editing`,e===i._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=u(this,Wn))==null?void 0:t.div)}setEditingState(e){u(this,Ce).setEditingState(e)}addCommands(e){u(this,Ce).addCommands(e)}cleanUndoStack(e){u(this,Ce).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=u(this,xl))==null||t.togglePointerEvents(e)}async enable(){var i;T(this,Vp,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(i=u(this,Dl))==null||i.abort(),T(this,Dl,null);const e=new Set;for(const r of u(this,jt,kS))r.enableEditing(),r.show(!0),r.annotationElementId&&(u(this,Ce).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));const t=u(this,xl);if(t)for(const r of t.getEditableAnnotations()){if(r.hide(),u(this,Ce).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const s=await this.deserialize(r);s&&(this.addOrRebuild(s),s.enableEditing())}T(this,Vp,!1),u(this,Ce)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var r;if(T(this,Hp,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),u(this,Wn)&&!u(this,Dl)){T(this,Dl,new AbortController);const s=u(this,Ce).combinedSignal(u(this,Dl));u(this,Wn).div.addEventListener("pointerdown",a=>{const{clientX:c,clientY:l,timeStamp:d}=a,h=u(this,Gp);if(d-h>500){T(this,Gp,d);return}T(this,Gp,-1);const{classList:f}=this.div;f.toggle("getElements",!0);const g=document.elementsFromPoint(c,l);if(f.toggle("getElements",!1),!this.div.contains(g[0]))return;let v;const y=new RegExp(`^${ay}[0-9]+$`);for(const m of g)if(y.test(m.id)){v=m.id;break}if(!v)return;const x=u(this,rr).get(v);(x==null?void 0:x.annotationElementId)===null&&(a.stopPropagation(),a.preventDefault(),x.dblclick(a))},{signal:s,capture:!0})}const e=u(this,xl),t=[];if(e){const s=new Map,a=new Map;for(const c of u(this,jt,kS)){if(c.disableEditing(),!c.annotationElementId){t.push(c);continue}if(c.serialize()!==null){s.set(c.annotationElementId,c);continue}else a.set(c.annotationElementId,c);(r=this.getEditableAnnotation(c.annotationElementId))==null||r.show(),c.remove()}const o=e.getEditableAnnotations();for(const c of o){const{id:l}=c.data;if(u(this,Ce).isDeletedAnnotationElement(l)){c.updateEdited({deleted:!0});continue}let d=a.get(l);if(d){d.resetAnnotationElement(c),d.show(!1),c.show();continue}d=s.get(l),d&&(u(this,Ce).addChangedExistingAnnotation(d),d.renderAnnotationElement(c)&&d.show(!1)),c.show()}}O(this,jt,Mx).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const s of u(Is,Al).values())i.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e==null||e.updateFakeAnnotations(t),T(this,Hp,!1)}getEditableAnnotation(e){var t;return((t=u(this,xl))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){u(this,Ce).getActive()!==e&&u(this,Ce).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=u(this,Wn))!=null&&e.div&&!u(this,qo)){T(this,qo,new AbortController);const t=u(this,Ce).combinedSignal(u(this,qo));u(this,Wn).div.addEventListener("pointerdown",O(this,jt,HO).bind(this),{signal:t}),u(this,Wn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=u(this,Wn))!=null&&e.div&&u(this,qo)&&(u(this,qo).abort(),T(this,qo,null),u(this,Wn).div.classList.remove("highlighting"))}enableClick(){if(u(this,wl))return;T(this,wl,new AbortController);const e=u(this,Ce).combinedSignal(u(this,wl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=u(this,wl))==null||e.abort(),T(this,wl,null)}attach(e){u(this,rr).set(e.id,e);const{annotationElementId:t}=e;t&&u(this,Ce).isDeletedAnnotationElement(t)&&u(this,Ce).removeDeletedAnnotationElement(e)}detach(e){var t;u(this,rr).delete(e.id),(t=u(this,Bd))==null||t.removePointerInTextLayer(e.contentDiv),!u(this,Hp)&&e.annotationElementId&&u(this,Ce).addDeletedAnnotationElement(e)}remove(e){this.detach(e),u(this,Ce).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(u(this,Ce).addDeletedAnnotationElement(e),Lt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),u(this,Ce).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!u(this,Vp)),u(this,Ce).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var i;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!u(this,zo)&&(e._focusEventsAllowed=!1,T(this,zo,setTimeout(()=>{T(this,zo,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:u(this,Ce)._signal}),t.focus())},0))),e._structTreeParentId=(i=u(this,Bd))==null?void 0:i.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getEditorByUID(e){for(const t of u(this,rr).values())if(t.uid===e)return t;return null}getNextId(){return u(this,Ce).getId()}combinedSignal(e){return u(this,Ce).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=u(this,jt,ua))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await u(this,Ce).updateMode(e.mode);const{offsetX:i,offsetY:r}=O(this,jt,NS).call(this),s=this.getNextId(),a=O(this,jt,US).call(this,{parent:this,id:s,x:i,y:r,uiManager:u(this,Ce),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=u(Is,Al).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,u(this,Ce)))||null}createAndAddNewEditor(e,t,i={}){const r=this.getNextId(),s=O(this,jt,US).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:u(this,Ce),isCentered:t,...i});return s&&this.add(s),s}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(O(this,jt,NS).call(this),!0,e)}setSelected(e){u(this,Ce).setSelected(e)}toggleSelected(e){u(this,Ce).toggleSelected(e)}unselect(e){u(this,Ce).unselect(e)}pointerup(e){var r;const{isMac:t}=hi.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!u(this,_l)||(T(this,_l,!1),(r=u(this,jt,ua))!=null&&r.isDrawer&&u(this,jt,ua).supportMultipleDrawings))return;if(!u(this,$p)){T(this,$p,!0);return}const i=u(this,Ce).getMode();if(i===Pe.STAMP||i===Pe.SIGNATURE){u(this,Ce).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var r;if(u(this,Ce).getMode()===Pe.HIGHLIGHT&&this.enableTextSelection(),u(this,_l)){T(this,_l,!1);return}const{isMac:t}=hi.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(T(this,_l,!0),(r=u(this,jt,ua))!=null&&r.isDrawer){this.startDrawingSession(e);return}const i=u(this,Ce).getActive();T(this,$p,!i||i.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),u(this,Qs)){u(this,jt,ua).startDrawing(this,u(this,Ce),!1,e);return}u(this,Ce).setCurrentDrawingSession(this),T(this,Qs,new AbortController);const t=u(this,Ce).combinedSignal(u(this,Qs));this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(T(this,Wo,null),this.commitOrRemove())},{signal:t}),u(this,jt,ua).startDrawing(this,u(this,Ce),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&T(this,Wo,t);return}u(this,Wo)&&setTimeout(()=>{var t;(t=u(this,Wo))==null||t.focus(),T(this,Wo,null)},0)}endDrawingSession(e=!1){return u(this,Qs)?(u(this,Ce).setCurrentDrawingSession(null),u(this,Qs).abort(),T(this,Qs,null),T(this,Wo,null),u(this,jt,ua).endDrawing(e)):null}findNewParent(e,t,i){const r=u(this,Ce).findParent(t,i);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return u(this,Qs)?(this.endDrawingSession(),!0):!1}onScaleChanging(){u(this,Qs)&&u(this,jt,ua).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=u(this,Ce).getActive())==null?void 0:e.parent)===this&&(u(this,Ce).commitOrRemove(),u(this,Ce).setActiveEditor(null)),u(this,zo)&&(clearTimeout(u(this,zo)),T(this,zo,null));for(const i of u(this,rr).values())(t=u(this,Bd))==null||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,u(this,rr).clear(),u(this,Ce).removeLayer(this)}render({viewport:e}){this.viewport=e,Jd(this.div,e);for(const t of u(this,Ce).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){u(this,Ce).commitOrRemove(),O(this,jt,Mx).call(this);const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,Jd(this.div,{rotation:i}),t!==i)for(const r of u(this,rr).values())r.rotate(i)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return u(this,Ce).viewParameters.realScale}};Bd=new WeakMap,$p=new WeakMap,xl=new WeakMap,wl=new WeakMap,zo=new WeakMap,rr=new WeakMap,_l=new WeakMap,Hp=new WeakMap,Vp=new WeakMap,Qs=new WeakMap,Wo=new WeakMap,Wn=new WeakMap,qo=new WeakMap,Dl=new WeakMap,Gp=new WeakMap,Ce=new WeakMap,Al=new WeakMap,jt=new WeakSet,kS=function(){return u(this,rr).size!==0?u(this,rr).values():u(this,Ce).getEditors(this.pageIndex)},HO=function(e){u(this,Ce).unselectAll();const{target:t}=e;if(t===u(this,Wn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&u(this,Wn).div.contains(t)){const{isMac:i}=hi.platform;if(e.button!==0||e.ctrlKey&&i)return;u(this,Ce).showAllEditors("highlight",!0,!0),u(this,Wn).div.classList.add("free"),this.toggleDrawing(),O2.startHighlighting(this,u(this,Ce).direction==="ltr",{target:u(this,Wn).div,x:e.x,y:e.y}),u(this,Wn).div.addEventListener("pointerup",()=>{u(this,Wn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:u(this,Ce)._signal}),e.preventDefault()}},ua=function(){return u(Is,Al).get(u(this,Ce).getMode())},US=function(e){const t=u(this,jt,ua);return t?new t.prototype.constructor(e):null},NS=function(){const{x:e,y:t,width:i,height:r}=this.boundingClientRect,s=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+i),c=Math.min(window.innerHeight,t+r),l=(s+o)/2-e,d=(a+c)/2-t,[h,f]=this.viewport.rotation%180===0?[l,d]:[d,l];return{offsetX:h,offsetY:f}},Mx=function(){for(const e of u(this,rr).values())e.isEmpty()&&e.remove()},ve(Is,"_initialized",!1),U(Is,Al,new Map([lS,vS,SS,O2,ES].map(e=>[e._editorType,e])));let CS=Is;var Js,Oi,Ld,h0,f1,VO,$a,RS,GO,FS;const kn=class kn{constructor({pageIndex:e}){U(this,$a);U(this,Js,null);U(this,Oi,new Map);U(this,Ld,new Map);this.pageIndex=e}setParent(e){if(!u(this,Js)){T(this,Js,e);return}if(u(this,Js)!==e){if(u(this,Oi).size>0)for(const t of u(this,Oi).values())t.remove(),e.append(t);T(this,Js,e)}}static get _svgFactory(){return Le(this,"_svgFactory",new R2)}draw(e,t=!1,i=!1){const r=Tn(kn,h0)._++,s=O(this,$a,RS).call(this),a=kn._svgFactory.createElement("defs");s.append(a);const o=kn._svgFactory.createElement("path");a.append(o);const c=`path_p${this.pageIndex}_${r}`;o.setAttribute("id",c),o.setAttribute("vector-effect","non-scaling-stroke"),t&&u(this,Ld).set(r,o);const l=i?O(this,$a,GO).call(this,a,c):null,d=kn._svgFactory.createElement("use");return s.append(d),d.setAttribute("href",`#${c}`),this.updateProperties(s,e),u(this,Oi).set(r,s),{id:r,clipPathId:`url(#${l})`}}drawOutline(e,t){const i=Tn(kn,h0)._++,r=O(this,$a,RS).call(this),s=kn._svgFactory.createElement("defs");r.append(s);const a=kn._svgFactory.createElement("path");s.append(a);const o=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const h=kn._svgFactory.createElement("mask");s.append(h),c=`mask_p${this.pageIndex}_${i}`,h.setAttribute("id",c),h.setAttribute("maskUnits","objectBoundingBox");const f=kn._svgFactory.createElement("rect");h.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const g=kn._svgFactory.createElement("use");h.append(g),g.setAttribute("href",`#${o}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}const l=kn._svgFactory.createElement("use");r.append(l),l.setAttribute("href",`#${o}`),c&&l.setAttribute("mask",`url(#${c})`);const d=l.cloneNode();return r.append(d),l.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(r,e),u(this,Oi).set(i,r),i}finalizeDraw(e,t){u(this,Ld).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var c;if(!t)return;const{root:i,bbox:r,rootClass:s,path:a}=t,o=typeof e=="number"?u(this,Oi).get(e):e;if(o){if(i&&O(this,$a,FS).call(this,o,i),r&&O(c=kn,f1,VO).call(c,o,r),s){const{classList:l}=o;for(const[d,h]of Object.entries(s))l.toggle(d,h)}if(a){const d=o.firstElementChild.firstElementChild;O(this,$a,FS).call(this,d,a)}}}updateParent(e,t){if(t===this)return;const i=u(this,Oi).get(e);i&&(u(t,Js).append(i),u(this,Oi).delete(e),u(t,Oi).set(e,i))}remove(e){u(this,Ld).delete(e),u(this,Js)!==null&&(u(this,Oi).get(e).remove(),u(this,Oi).delete(e))}destroy(){T(this,Js,null);for(const e of u(this,Oi).values())e.remove();u(this,Oi).clear(),u(this,Ld).clear()}};Js=new WeakMap,Oi=new WeakMap,Ld=new WeakMap,h0=new WeakMap,f1=new WeakSet,VO=function(e,[t,i,r,s]){const{style:a}=e;a.top=`${100*i}%`,a.left=`${100*t}%`,a.width=`${100*r}%`,a.height=`${100*s}%`},$a=new WeakSet,RS=function(){const e=kn._svgFactory.create(1,1,!0);return u(this,Js).append(e),e.setAttribute("aria-hidden",!0),e},GO=function(e,t){const i=kn._svgFactory.createElement("clipPath");e.append(i);const r=`clip_${t}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const s=kn._svgFactory.createElement("use");return i.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),r},FS=function(e,t){for(const[i,r]of Object.entries(t))r===null?e.removeAttribute(i):e.setAttribute(i,r)},U(kn,f1),U(kn,h0,0);let jS=kn;globalThis._pdfjsTestingUtils={HighlightOutliner:dS};globalThis.pdfjsLib={AbortException:$l,AnnotationEditorLayer:CS,AnnotationEditorParamsType:rt,AnnotationEditorType:Pe,AnnotationEditorUIManager:Zd,AnnotationLayer:oS,AnnotationMode:Rc,AnnotationType:bn,applyOpacity:_q,build:k$,ColorPicker:N2,createValidAbsoluteUrl:B6,CSSConstants:wq,DOMSVGFactory:R2,DrawLayer:jS,FeatureTest:hi,fetchData:C0,findContrastColor:Dq,getDocument:HF,getFilenameFromUrl:gq,getPdfFilenameFromUrl:mq,getRGB:U0,getUuid:P6,getXfaPageViewport:bq,GlobalWorkerOptions:Fa,ImageKind:ix,InvalidPDFException:lE,isDataScheme:W1,isPdfFile:tC,isValidExplicitDest:Rq,MathClamp:Li,noContextMenu:Os,normalizeUnicode:hq,OPS:oy,OutputScale:Wa,PasswordResponses:iq,PDFDataRangeTransport:VF,PDFDateString:E2,PDFWorker:uy,PermissionFlag:nq,PixelsPerInch:Hl,RenderingCancelledException:eC,renderRichText:q6,ResponseException:A2,setLayerDimensions:Jd,shadow:Le,SignatureExtractor:Vo,stopEvent:ln,SupportedImageMimeTypes:dE,TextLayer:ly,TouchManager:T2,updateUrlHash:L6,Util:Ee,VerbosityLevel:I1,version:C$,XfaLayer:W6};var sa={},lC="1.13.7",cN=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},H1=Array.prototype,uC=Object.prototype,lN=typeof Symbol<"u"?Symbol.prototype:null,Z$=H1.push,F0=H1.slice,dy=uC.toString,eH=uC.hasOwnProperty,XO=typeof ArrayBuffer<"u",tH=typeof DataView<"u",nH=Array.isArray,uN=Object.keys,dN=Object.create,hN=XO&&ArrayBuffer.isView,iH=isNaN,rH=isFinite,YO=!{toString:null}.propertyIsEnumerable("toString"),fN=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],sH=Math.pow(2,53)-1;function qi(n,e){return e=e==null?n.length-1:+e,function(){for(var t=Math.max(arguments.length-e,0),i=Array(t),r=0;r<t;r++)i[r]=arguments[r+e];switch(e){case 0:return n.call(this,i);case 1:return n.call(this,arguments[0],i);case 2:return n.call(this,arguments[0],arguments[1],i)}var s=Array(e+1);for(r=0;r<e;r++)s[r]=arguments[r];return s[e]=i,n.apply(this,s)}}function Jl(n){var e=typeof n;return e==="function"||e==="object"&&!!n}function KO(n){return n===null}function dC(n){return n===void 0}function hC(n){return n===!0||n===!1||dy.call(n)==="[object Boolean]"}function QO(n){return!!(n&&n.nodeType===1)}function Ci(n){var e="[object "+n+"]";return function(t){return dy.call(t)===e}}const V1=Ci("String"),fC=Ci("Number"),JO=Ci("Date"),ZO=Ci("RegExp"),eM=Ci("Error"),pC=Ci("Symbol"),gC=Ci("ArrayBuffer");var tM=Ci("Function"),aH=cN.document&&cN.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof aH!="function"&&(tM=function(n){return typeof n=="function"||!1});const Ti=tM,nM=Ci("Object");var iM=tH&&(!/\[native code\]/.test(String(DataView))||nM(new DataView(new ArrayBuffer(8)))),mC=typeof Map<"u"&&nM(new Map),oH=Ci("DataView");function cH(n){return n!=null&&Ti(n.getInt8)&&gC(n.buffer)}const hy=iM?cH:oH,Zl=nH||Ci("Array");function eu(n,e){return n!=null&&eH.call(n,e)}var OS=Ci("Arguments");(function(){OS(arguments)||(OS=function(n){return eu(n,"callee")})})();const G1=OS;function rM(n){return!pC(n)&&rH(n)&&!isNaN(parseFloat(n))}function yC(n){return fC(n)&&iH(n)}function bC(n){return function(){return n}}function sM(n){return function(e){var t=n(e);return typeof t=="number"&&t>=0&&t<=sH}}function aM(n){return function(e){return e==null?void 0:e[n]}}const B2=aM("byteLength"),lH=sM(B2);var uH=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function dH(n){return hN?hN(n)&&!hy(n):lH(n)&&uH.test(dy.call(n))}const vC=XO?dH:bC(!1),fr=aM("length");function hH(n){for(var e={},t=n.length,i=0;i<t;++i)e[n[i]]=!0;return{contains:function(r){return e[r]===!0},push:function(r){return e[r]=!0,n.push(r)}}}function oM(n,e){e=hH(e);var t=fN.length,i=n.constructor,r=Ti(i)&&i.prototype||uC,s="constructor";for(eu(n,s)&&!e.contains(s)&&e.push(s);t--;)s=fN[t],s in n&&n[s]!==r[s]&&!e.contains(s)&&e.push(s)}function On(n){if(!Jl(n))return[];if(uN)return uN(n);var e=[];for(var t in n)eu(n,t)&&e.push(t);return YO&&oM(n,e),e}function cM(n){if(n==null)return!0;var e=fr(n);return typeof e=="number"&&(Zl(n)||V1(n)||G1(n))?e===0:fr(On(n))===0}function xC(n,e){var t=On(e),i=t.length;if(n==null)return!i;for(var r=Object(n),s=0;s<i;s++){var a=t[s];if(e[a]!==r[a]||!(a in r))return!1}return!0}function pt(n){if(n instanceof pt)return n;if(!(this instanceof pt))return new pt(n);this._wrapped=n}pt.VERSION=lC;pt.prototype.value=function(){return this._wrapped};pt.prototype.valueOf=pt.prototype.toJSON=pt.prototype.value;pt.prototype.toString=function(){return String(this._wrapped)};function pN(n){return new Uint8Array(n.buffer||n,n.byteOffset||0,B2(n))}var gN="[object DataView]";function MS(n,e,t,i){if(n===e)return n!==0||1/n===1/e;if(n==null||e==null)return!1;if(n!==n)return e!==e;var r=typeof n;return r!=="function"&&r!=="object"&&typeof e!="object"?!1:lM(n,e,t,i)}function lM(n,e,t,i){n instanceof pt&&(n=n._wrapped),e instanceof pt&&(e=e._wrapped);var r=dy.call(n);if(r!==dy.call(e))return!1;if(iM&&r=="[object Object]"&&hy(n)){if(!hy(e))return!1;r=gN}switch(r){case"[object RegExp]":case"[object String]":return""+n==""+e;case"[object Number]":return+n!=+n?+e!=+e:+n==0?1/+n===1/e:+n==+e;case"[object Date]":case"[object Boolean]":return+n==+e;case"[object Symbol]":return lN.valueOf.call(n)===lN.valueOf.call(e);case"[object ArrayBuffer]":case gN:return lM(pN(n),pN(e),t,i)}var s=r==="[object Array]";if(!s&&vC(n)){var a=B2(n);if(a!==B2(e))return!1;if(n.buffer===e.buffer&&n.byteOffset===e.byteOffset)return!0;s=!0}if(!s){if(typeof n!="object"||typeof e!="object")return!1;var o=n.constructor,c=e.constructor;if(o!==c&&!(Ti(o)&&o instanceof o&&Ti(c)&&c instanceof c)&&"constructor"in n&&"constructor"in e)return!1}t=t||[],i=i||[];for(var l=t.length;l--;)if(t[l]===n)return i[l]===e;if(t.push(n),i.push(e),s){if(l=n.length,l!==e.length)return!1;for(;l--;)if(!MS(n[l],e[l],t,i))return!1}else{var d=On(n),h;if(l=d.length,On(e).length!==l)return!1;for(;l--;)if(h=d[l],!(eu(e,h)&&MS(n[h],e[h],t,i)))return!1}return t.pop(),i.pop(),!0}function uM(n,e){return MS(n,e)}function Tg(n){if(!Jl(n))return[];var e=[];for(var t in n)e.push(t);return YO&&oM(n,e),e}function wC(n){var e=fr(n);return function(t){if(t==null)return!1;var i=Tg(t);if(fr(i))return!1;for(var r=0;r<e;r++)if(!Ti(t[n[r]]))return!1;return n!==fM||!Ti(t[_C])}}var _C="forEach",dM="has",DC=["clear","delete"],hM=["get",dM,"set"],fH=DC.concat(_C,hM),fM=DC.concat(hM),pH=["add"].concat(DC,_C,dM);const pM=mC?wC(fH):Ci("Map"),gM=mC?wC(fM):Ci("WeakMap"),mM=mC?wC(pH):Ci("Set"),yM=Ci("WeakSet");function hh(n){for(var e=On(n),t=e.length,i=Array(t),r=0;r<t;r++)i[r]=n[e[r]];return i}function bM(n){for(var e=On(n),t=e.length,i=Array(t),r=0;r<t;r++)i[r]=[e[r],n[e[r]]];return i}function AC(n){for(var e={},t=On(n),i=0,r=t.length;i<r;i++)e[n[t[i]]]=t[i];return e}function fy(n){var e=[];for(var t in n)Ti(n[t])&&e.push(t);return e.sort()}function EC(n,e){return function(t){var i=arguments.length;if(e&&(t=Object(t)),i<2||t==null)return t;for(var r=1;r<i;r++)for(var s=arguments[r],a=n(s),o=a.length,c=0;c<o;c++){var l=a[c];(!e||t[l]===void 0)&&(t[l]=s[l])}return t}}const SC=EC(Tg),og=EC(On),TC=EC(Tg,!0);function gH(){return function(){}}function vM(n){if(!Jl(n))return{};if(dN)return dN(n);var e=gH();e.prototype=n;var t=new e;return e.prototype=null,t}function xM(n,e){var t=vM(n);return e&&og(t,e),t}function wM(n){return Jl(n)?Zl(n)?n.slice():SC({},n):n}function _M(n,e){return e(n),n}function CC(n){return Zl(n)?n:[n]}pt.toPath=CC;function O0(n){return pt.toPath(n)}function kC(n,e){for(var t=e.length,i=0;i<t;i++){if(n==null)return;n=n[e[i]]}return t?n:void 0}function UC(n,e,t){var i=kC(n,O0(e));return dC(i)?t:i}function DM(n,e){e=O0(e);for(var t=e.length,i=0;i<t;i++){var r=e[i];if(!eu(n,r))return!1;n=n[r]}return!!t}function X1(n){return n}function th(n){return n=og({},n),function(e){return xC(e,n)}}function Y1(n){return n=O0(n),function(e){return kC(e,n)}}function M0(n,e,t){if(e===void 0)return n;switch(t??3){case 1:return function(i){return n.call(e,i)};case 3:return function(i,r,s){return n.call(e,i,r,s)};case 4:return function(i,r,s,a){return n.call(e,i,r,s,a)}}return function(){return n.apply(e,arguments)}}function AM(n,e,t){return n==null?X1:Ti(n)?M0(n,e,t):Jl(n)&&!Zl(n)?th(n):Y1(n)}function K1(n,e){return AM(n,e,1/0)}pt.iteratee=K1;function mr(n,e,t){return pt.iteratee!==K1?pt.iteratee(n,e):AM(n,e,t)}function EM(n,e,t){e=mr(e,t);for(var i=On(n),r=i.length,s={},a=0;a<r;a++){var o=i[a];s[o]=e(n[o],o,n)}return s}function NC(){}function SM(n){return n==null?NC:function(e){return UC(n,e)}}function TM(n,e,t){var i=Array(Math.max(0,n));e=M0(e,t,1);for(var r=0;r<n;r++)i[r]=e(r);return i}function L2(n,e){return e==null&&(e=n,n=0),n+Math.floor(Math.random()*(e-n+1))}const cg=Date.now||function(){return new Date().getTime()};function CM(n){var e=function(s){return n[s]},t="(?:"+On(n).join("|")+")",i=RegExp(t),r=RegExp(t,"g");return function(s){return s=s==null?"":""+s,i.test(s)?s.replace(r,e):s}}const kM={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},UM=CM(kM),mH=AC(kM),NM=CM(mH),jM=pt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L_=/(.)^/,yH={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},bH=/\\|'|\r|\n|\u2028|\u2029/g;function vH(n){return"\\"+yH[n]}var xH=/^\s*(\w|\$)+\s*$/;function RM(n,e,t){!e&&t&&(e=t),e=TC({},e,pt.templateSettings);var i=RegExp([(e.escape||L_).source,(e.interpolate||L_).source,(e.evaluate||L_).source].join("|")+"|$","g"),r=0,s="__p+='";n.replace(i,function(l,d,h,f,g){return s+=n.slice(r,g).replace(bH,vH),r=g+l.length,d?s+=`'+
((__t=(`+d+`))==null?'':_.escape(__t))+
'`:h?s+=`'+
((__t=(`+h+`))==null?'':__t)+
'`:f&&(s+=`';
`+f+`
__p+='`),l}),s+=`';
`;var a=e.variable;if(a){if(!xH.test(a))throw new Error("variable is not a bare identifier: "+a)}else s=`with(obj||{}){
`+s+`}
`,a="obj";s=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+s+`return __p;
`;var o;try{o=new Function(a,"_",s)}catch(l){throw l.source=s,l}var c=function(l){return o.call(this,l,pt)};return c.source="function("+a+`){
`+s+"}",c}function FM(n,e,t){e=O0(e);var i=e.length;if(!i)return Ti(t)?t.call(n):t;for(var r=0;r<i;r++){var s=n==null?void 0:n[e[r]];s===void 0&&(s=t,r=i),n=Ti(s)?s.call(n):s}return n}var wH=0;function OM(n){var e=++wH+"";return n?n+e:e}function MM(n){var e=pt(n);return e._chain=!0,e}function BM(n,e,t,i,r){if(!(i instanceof e))return n.apply(t,r);var s=vM(n.prototype),a=n.apply(s,r);return Jl(a)?a:s}var fh=qi(function(n,e){var t=fh.placeholder,i=function(){for(var r=0,s=e.length,a=Array(s),o=0;o<s;o++)a[o]=e[o]===t?arguments[r++]:e[o];for(;r<arguments.length;)a.push(arguments[r++]);return BM(n,i,this,this,a)};return i});fh.placeholder=pt;const jC=qi(function(n,e,t){if(!Ti(n))throw new TypeError("Bind must be called on a function");var i=qi(function(r){return BM(n,i,e,this,t.concat(r))});return i}),ts=sM(fr);function ph(n,e,t,i){if(i=i||[],!e&&e!==0)e=1/0;else if(e<=0)return i.concat(n);for(var r=i.length,s=0,a=fr(n);s<a;s++){var o=n[s];if(ts(o)&&(Zl(o)||G1(o)))if(e>1)ph(o,e-1,t,i),r=i.length;else for(var c=0,l=o.length;c<l;)i[r++]=o[c++];else t||(i[r++]=o)}return i}const LM=qi(function(n,e){e=ph(e,!1,!1);var t=e.length;if(t<1)throw new Error("bindAll must be passed function names");for(;t--;){var i=e[t];n[i]=jC(n[i],n)}return n});function IM(n,e){var t=function(i){var r=t.cache,s=""+(e?e.apply(this,arguments):i);return eu(r,s)||(r[s]=n.apply(this,arguments)),r[s]};return t.cache={},t}const RC=qi(function(n,e,t){return setTimeout(function(){return n.apply(null,t)},e)}),PM=fh(RC,pt,1);function zM(n,e,t){var i,r,s,a,o=0;t||(t={});var c=function(){o=t.leading===!1?0:cg(),i=null,a=n.apply(r,s),i||(r=s=null)},l=function(){var d=cg();!o&&t.leading===!1&&(o=d);var h=e-(d-o);return r=this,s=arguments,h<=0||h>e?(i&&(clearTimeout(i),i=null),o=d,a=n.apply(r,s),i||(r=s=null)):!i&&t.trailing!==!1&&(i=setTimeout(c,h)),a};return l.cancel=function(){clearTimeout(i),o=0,i=r=s=null},l}function WM(n,e,t){var i,r,s,a,o,c=function(){var d=cg()-r;e>d?i=setTimeout(c,e-d):(i=null,t||(a=n.apply(o,s)),i||(s=o=null))},l=qi(function(d){return o=this,s=d,r=cg(),i||(i=setTimeout(c,e),t&&(a=n.apply(o,s))),a});return l.cancel=function(){clearTimeout(i),i=s=o=null},l}function qM(n,e){return fh(e,n)}function Q1(n){return function(){return!n.apply(this,arguments)}}function $M(){var n=arguments,e=n.length-1;return function(){for(var t=e,i=n[e].apply(this,arguments);t--;)i=n[t].call(this,i);return i}}function HM(n,e){return function(){if(--n<1)return e.apply(this,arguments)}}function FC(n,e){var t;return function(){return--n>0&&(t=e.apply(this,arguments)),n<=1&&(e=null),t}}const VM=fh(FC,2);function OC(n,e,t){e=mr(e,t);for(var i=On(n),r,s=0,a=i.length;s<a;s++)if(r=i[s],e(n[r],r,n))return r}function GM(n){return function(e,t,i){t=mr(t,i);for(var r=fr(e),s=n>0?0:r-1;s>=0&&s<r;s+=n)if(t(e[s],s,e))return s;return-1}}const J1=GM(1),MC=GM(-1);function BC(n,e,t,i){t=mr(t,i,1);for(var r=t(e),s=0,a=fr(n);s<a;){var o=Math.floor((s+a)/2);t(n[o])<r?s=o+1:a=o}return s}function XM(n,e,t){return function(i,r,s){var a=0,o=fr(i);if(typeof s=="number")n>0?a=s>=0?s:Math.max(s+o,a):o=s>=0?Math.min(s+1,o):s+o+1;else if(t&&s&&o)return s=t(i,r),i[s]===r?s:-1;if(r!==r)return s=e(F0.call(i,a,o),yC),s>=0?s+a:-1;for(s=n>0?a:o-1;s>=0&&s<o;s+=n)if(i[s]===r)return s;return-1}}const LC=XM(1,J1,BC),YM=XM(-1,MC);function py(n,e,t){var i=ts(n)?J1:OC,r=i(n,e,t);if(r!==void 0&&r!==-1)return n[r]}function KM(n,e){return py(n,th(e))}function na(n,e,t){e=M0(e,t);var i,r;if(ts(n))for(i=0,r=n.length;i<r;i++)e(n[i],i,n);else{var s=On(n);for(i=0,r=s.length;i<r;i++)e(n[s[i]],s[i],n)}return n}function cc(n,e,t){e=mr(e,t);for(var i=!ts(n)&&On(n),r=(i||n).length,s=Array(r),a=0;a<r;a++){var o=i?i[a]:a;s[a]=e(n[o],o,n)}return s}function QM(n){var e=function(t,i,r,s){var a=!ts(t)&&On(t),o=(a||t).length,c=n>0?0:o-1;for(s||(r=t[a?a[c]:c],c+=n);c>=0&&c<o;c+=n){var l=a?a[c]:c;r=i(r,t[l],l,t)}return r};return function(t,i,r,s){var a=arguments.length>=3;return e(t,M0(i,s,4),r,a)}}const wf=QM(1),I2=QM(-1);function Vl(n,e,t){var i=[];return e=mr(e,t),na(n,function(r,s,a){e(r,s,a)&&i.push(r)}),i}function JM(n,e,t){return Vl(n,Q1(mr(e)),t)}function P2(n,e,t){e=mr(e,t);for(var i=!ts(n)&&On(n),r=(i||n).length,s=0;s<r;s++){var a=i?i[s]:s;if(!e(n[a],a,n))return!1}return!0}function z2(n,e,t){e=mr(e,t);for(var i=!ts(n)&&On(n),r=(i||n).length,s=0;s<r;s++){var a=i?i[s]:s;if(e(n[a],a,n))return!0}return!1}function Ns(n,e,t,i){return ts(n)||(n=hh(n)),(typeof t!="number"||i)&&(t=0),LC(n,e,t)>=0}const ZM=qi(function(n,e,t){var i,r;return Ti(e)?r=e:(e=O0(e),i=e.slice(0,-1),e=e[e.length-1]),cc(n,function(s){var a=r;if(!a){if(i&&i.length&&(s=kC(s,i)),s==null)return;a=s[e]}return a==null?a:a.apply(s,t)})});function Z1(n,e){return cc(n,Y1(e))}function eB(n,e){return Vl(n,th(e))}function IC(n,e,t){var i=-1/0,r=-1/0,s,a;if(e==null||typeof e=="number"&&typeof n[0]!="object"&&n!=null){n=ts(n)?n:hh(n);for(var o=0,c=n.length;o<c;o++)s=n[o],s!=null&&s>i&&(i=s)}else e=mr(e,t),na(n,function(l,d,h){a=e(l,d,h),(a>r||a===-1/0&&i===-1/0)&&(i=l,r=a)});return i}function tB(n,e,t){var i=1/0,r=1/0,s,a;if(e==null||typeof e=="number"&&typeof n[0]!="object"&&n!=null){n=ts(n)?n:hh(n);for(var o=0,c=n.length;o<c;o++)s=n[o],s!=null&&s<i&&(i=s)}else e=mr(e,t),na(n,function(l,d,h){a=e(l,d,h),(a<r||a===1/0&&i===1/0)&&(i=l,r=a)});return i}var _H=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function PC(n){return n?Zl(n)?F0.call(n):V1(n)?n.match(_H):ts(n)?cc(n,X1):hh(n):[]}function zC(n,e,t){if(e==null||t)return ts(n)||(n=hh(n)),n[L2(n.length-1)];var i=PC(n),r=fr(i);e=Math.max(Math.min(e,r),0);for(var s=r-1,a=0;a<e;a++){var o=L2(a,s),c=i[a];i[a]=i[o],i[o]=c}return i.slice(0,e)}function nB(n){return zC(n,1/0)}function iB(n,e,t){var i=0;return e=mr(e,t),Z1(cc(n,function(r,s,a){return{value:r,index:i++,criteria:e(r,s,a)}}).sort(function(r,s){var a=r.criteria,o=s.criteria;if(a!==o){if(a>o||a===void 0)return 1;if(a<o||o===void 0)return-1}return r.index-s.index}),"value")}function ew(n,e){return function(t,i,r){var s=e?[[],[]]:{};return i=mr(i,r),na(t,function(a,o){var c=i(a,o,t);n(s,a,c)}),s}}const rB=ew(function(n,e,t){eu(n,t)?n[t].push(e):n[t]=[e]}),sB=ew(function(n,e,t){n[t]=e}),aB=ew(function(n,e,t){eu(n,t)?n[t]++:n[t]=1}),oB=ew(function(n,e,t){n[t?0:1].push(e)},!0);function cB(n){return n==null?0:ts(n)?n.length:On(n).length}function DH(n,e,t){return e in t}const WC=qi(function(n,e){var t={},i=e[0];if(n==null)return t;Ti(i)?(e.length>1&&(i=M0(i,e[1])),e=Tg(n)):(i=DH,e=ph(e,!1,!1),n=Object(n));for(var r=0,s=e.length;r<s;r++){var a=e[r],o=n[a];i(o,a,n)&&(t[a]=o)}return t}),lB=qi(function(n,e){var t=e[0],i;return Ti(t)?(t=Q1(t),e.length>1&&(i=e[1])):(e=cc(ph(e,!1,!1),String),t=function(r,s){return!Ns(e,s)}),WC(n,t,i)});function qC(n,e,t){return F0.call(n,0,Math.max(0,n.length-(e==null||t?1:e)))}function _f(n,e,t){return n==null||n.length<1?e==null||t?void 0:[]:e==null||t?n[0]:qC(n,n.length-e)}function Hd(n,e,t){return F0.call(n,e==null||t?1:e)}function uB(n,e,t){return n==null||n.length<1?e==null||t?void 0:[]:e==null||t?n[n.length-1]:Hd(n,Math.max(0,n.length-e))}function dB(n){return Vl(n,Boolean)}function hB(n,e){return ph(n,e,!1)}const $C=qi(function(n,e){return e=ph(e,!0,!0),Vl(n,function(t){return!Ns(e,t)})}),fB=qi(function(n,e){return $C(n,e)});function gy(n,e,t,i){hC(e)||(i=t,t=e,e=!1),t!=null&&(t=mr(t,i));for(var r=[],s=[],a=0,o=fr(n);a<o;a++){var c=n[a],l=t?t(c,a,n):c;e&&!t?((!a||s!==l)&&r.push(c),s=l):t?Ns(s,l)||(s.push(l),r.push(c)):Ns(r,c)||r.push(c)}return r}const pB=qi(function(n){return gy(ph(n,!0,!0))});function gB(n){for(var e=[],t=arguments.length,i=0,r=fr(n);i<r;i++){var s=n[i];if(!Ns(e,s)){var a;for(a=1;a<t&&Ns(arguments[a],s);a++);a===t&&e.push(s)}}return e}function my(n){for(var e=n&&IC(n,fr).length||0,t=Array(e),i=0;i<e;i++)t[i]=Z1(n,i);return t}const mB=qi(my);function yB(n,e){for(var t={},i=0,r=fr(n);i<r;i++)e?t[n[i]]=e[i]:t[n[i][0]]=n[i][1];return t}function bB(n,e,t){e==null&&(e=n||0,n=0),t||(t=e<n?-1:1);for(var i=Math.max(Math.ceil((e-n)/t),0),r=Array(i),s=0;s<i;s++,n+=t)r[s]=n;return r}function vB(n,e){if(e==null||e<1)return[];for(var t=[],i=0,r=n.length;i<r;)t.push(F0.call(n,i,i+=e));return t}function HC(n,e){return n._chain?pt(e).chain():e}function VC(n){return na(fy(n),function(e){var t=pt[e]=n[e];pt.prototype[e]=function(){var i=[this._wrapped];return Z$.apply(i,arguments),HC(this,t.apply(pt,i))}}),pt}na(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var e=H1[n];pt.prototype[n]=function(){var t=this._wrapped;return t!=null&&(e.apply(t,arguments),(n==="shift"||n==="splice")&&t.length===0&&delete t[0]),HC(this,t)}});na(["concat","join","slice"],function(n){var e=H1[n];pt.prototype[n]=function(){var t=this._wrapped;return t!=null&&(t=e.apply(t,arguments)),HC(this,t)}});const AH=Object.freeze(Object.defineProperty({__proto__:null,VERSION:lC,after:HM,all:P2,allKeys:Tg,any:z2,assign:og,before:FC,bind:jC,bindAll:LM,chain:MM,chunk:vB,clone:wM,collect:cc,compact:dB,compose:$M,constant:bC,contains:Ns,countBy:aB,create:xM,debounce:WM,default:pt,defaults:TC,defer:PM,delay:RC,detect:py,difference:$C,drop:Hd,each:na,escape:UM,every:P2,extend:SC,extendOwn:og,filter:Vl,find:py,findIndex:J1,findKey:OC,findLastIndex:MC,findWhere:KM,first:_f,flatten:hB,foldl:wf,foldr:I2,forEach:na,functions:fy,get:UC,groupBy:rB,has:DM,head:_f,identity:X1,include:Ns,includes:Ns,indexBy:sB,indexOf:LC,initial:qC,inject:wf,intersection:gB,invert:AC,invoke:ZM,isArguments:G1,isArray:Zl,isArrayBuffer:gC,isBoolean:hC,isDataView:hy,isDate:JO,isElement:QO,isEmpty:cM,isEqual:uM,isError:eM,isFinite:rM,isFunction:Ti,isMap:pM,isMatch:xC,isNaN:yC,isNull:KO,isNumber:fC,isObject:Jl,isRegExp:ZO,isSet:mM,isString:V1,isSymbol:pC,isTypedArray:vC,isUndefined:dC,isWeakMap:gM,isWeakSet:yM,iteratee:K1,keys:On,last:uB,lastIndexOf:YM,map:cc,mapObject:EM,matcher:th,matches:th,max:IC,memoize:IM,methods:fy,min:tB,mixin:VC,negate:Q1,noop:NC,now:cg,object:yB,omit:lB,once:VM,pairs:bM,partial:fh,partition:oB,pick:WC,pluck:Z1,property:Y1,propertyOf:SM,random:L2,range:bB,reduce:wf,reduceRight:I2,reject:JM,rest:Hd,restArguments:qi,result:FM,sample:zC,select:Vl,shuffle:nB,size:cB,some:z2,sortBy:iB,sortedIndex:BC,tail:Hd,take:_f,tap:_M,template:RM,templateSettings:jM,throttle:zM,times:TM,toArray:PC,toPath:CC,transpose:my,unescape:NM,union:pB,uniq:gy,unique:gy,uniqueId:OM,unzip:my,values:hh,where:eB,without:fB,wrap:qM,zip:mB},Symbol.toStringTag,{value:"Module"}));var BS=VC(AH);BS._=BS;const EH=Object.freeze(Object.defineProperty({__proto__:null,VERSION:lC,after:HM,all:P2,allKeys:Tg,any:z2,assign:og,before:FC,bind:jC,bindAll:LM,chain:MM,chunk:vB,clone:wM,collect:cc,compact:dB,compose:$M,constant:bC,contains:Ns,countBy:aB,create:xM,debounce:WM,default:BS,defaults:TC,defer:PM,delay:RC,detect:py,difference:$C,drop:Hd,each:na,escape:UM,every:P2,extend:SC,extendOwn:og,filter:Vl,find:py,findIndex:J1,findKey:OC,findLastIndex:MC,findWhere:KM,first:_f,flatten:hB,foldl:wf,foldr:I2,forEach:na,functions:fy,get:UC,groupBy:rB,has:DM,head:_f,identity:X1,include:Ns,includes:Ns,indexBy:sB,indexOf:LC,initial:qC,inject:wf,intersection:gB,invert:AC,invoke:ZM,isArguments:G1,isArray:Zl,isArrayBuffer:gC,isBoolean:hC,isDataView:hy,isDate:JO,isElement:QO,isEmpty:cM,isEqual:uM,isError:eM,isFinite:rM,isFunction:Ti,isMap:pM,isMatch:xC,isNaN:yC,isNull:KO,isNumber:fC,isObject:Jl,isRegExp:ZO,isSet:mM,isString:V1,isSymbol:pC,isTypedArray:vC,isUndefined:dC,isWeakMap:gM,isWeakSet:yM,iteratee:K1,keys:On,last:uB,lastIndexOf:YM,map:cc,mapObject:EM,matcher:th,matches:th,max:IC,memoize:IM,methods:fy,min:tB,mixin:VC,negate:Q1,noop:NC,now:cg,object:yB,omit:lB,once:VM,pairs:bM,partial:fh,partition:oB,pick:WC,pluck:Z1,property:Y1,propertyOf:SM,random:L2,range:bB,reduce:wf,reduceRight:I2,reject:JM,rest:Hd,restArguments:qi,result:FM,sample:zC,select:Vl,shuffle:nB,size:cB,some:z2,sortBy:iB,sortedIndex:BC,tail:Hd,take:_f,tap:_M,template:RM,templateSettings:jM,throttle:zM,times:TM,toArray:PC,toPath:CC,transpose:my,unescape:NM,union:pB,uniq:gy,unique:gy,uniqueId:OM,unzip:my,values:hh,where:eB,without:fB,wrap:qM,zip:mB},Symbol.toStringTag,{value:"Module"})),mn=pg(EH);var GC={},Gn={},xB={exports:{}},Tv={exports:{}},mN;function Cg(){if(mN)return Tv.exports;mN=1;var n=function(){return this===void 0}();if(n)Tv.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(d,h){var f=Object.getOwnPropertyDescriptor(d,h);return!!(!f||f.writable||f.set)}};else{var e={}.hasOwnProperty,t={}.toString,i={}.constructor.prototype,r=function(d){var h=[];for(var f in d)e.call(d,f)&&h.push(f);return h},s=function(d,h){return{value:d[h]}},a=function(d,h,f){return d[h]=f.value,d},o=function(d){return d},c=function(d){try{return Object(d).constructor.prototype}catch{return i}},l=function(d){try{return t.call(d)==="[object Array]"}catch{return!1}};Tv.exports={isArray:l,keys:r,names:r,defineProperty:a,getDescriptor:s,freeze:o,getPrototypeOf:c,isES5:n,propertyIsWritable:function(){return!0}}}return Tv.exports}var I_,yN;function Pt(){if(yN)return I_;yN=1;var n={},e=Cg(),t=typeof navigator>"u",i={e:{}},r,s=typeof self<"u"?self:typeof window<"u"?window:typeof ze<"u"||ze!==void 0?ze:null;function a(){try{var q=r;return r=null,q.apply(this,arguments)}catch(Q){return i.e=Q,i}}function o(q){return r=q,a}var c=function(q,Q){var se={}.hasOwnProperty;function be(){this.constructor=q,this.constructor$=Q;for(var ye in Q.prototype)se.call(Q.prototype,ye)&&ye.charAt(ye.length-1)!=="$"&&(this[ye+"$"]=Q.prototype[ye])}return be.prototype=Q.prototype,q.prototype=new be,q.prototype};function l(q){return q==null||q===!0||q===!1||typeof q=="string"||typeof q=="number"}function d(q){return typeof q=="function"||typeof q=="object"&&q!==null}function h(q){return l(q)?new Error(E(q)):q}function f(q,Q){var se=q.length,be=new Array(se+1),ye;for(ye=0;ye<se;++ye)be[ye]=q[ye];return be[ye]=Q,be}function g(q,Q,se){if(e.isES5){var be=Object.getOwnPropertyDescriptor(q,Q);if(be!=null)return be.get==null&&be.set==null?be.value:se}else return{}.hasOwnProperty.call(q,Q)?q[Q]:void 0}function v(q,Q,se){if(l(q))return q;var be={value:se,configurable:!0,enumerable:!1,writable:!0};return e.defineProperty(q,Q,be),q}function y(q){throw q}var x=function(){var q=[Array.prototype,Object.prototype,Function.prototype],Q=function(ye){for(var fe=0;fe<q.length;++fe)if(q[fe]===ye)return!0;return!1};if(e.isES5){var se=Object.getOwnPropertyNames;return function(ye){for(var fe=[],xe=Object.create(null);ye!=null&&!Q(ye);){var ce;try{ce=se(ye)}catch{return fe}for(var le=0;le<ce.length;++le){var Y=ce[le];if(!xe[Y]){xe[Y]=!0;var ae=Object.getOwnPropertyDescriptor(ye,Y);ae!=null&&ae.get==null&&ae.set==null&&fe.push(Y)}}ye=e.getPrototypeOf(ye)}return fe}}else{var be={}.hasOwnProperty;return function(ye){if(Q(ye))return[];var fe=[];e:for(var xe in ye)if(be.call(ye,xe))fe.push(xe);else{for(var ce=0;ce<q.length;++ce)if(be.call(q[ce],xe))continue e;fe.push(xe)}return fe}}}(),m=/this\s*\.\s*\S+\s*=/;function b(q){try{if(typeof q=="function"){var Q=e.names(q.prototype),se=e.isES5&&Q.length>1,be=Q.length>0&&!(Q.length===1&&Q[0]==="constructor"),ye=m.test(q+"")&&e.names(q).length>0;if(se||be||ye)return!0}return!1}catch{return!1}}function w(q){return q}var _=/^[a-z$_][a-z$_0-9]*$/i;function D(q){return _.test(q)}function A(q,Q,se){for(var be=new Array(q),ye=0;ye<q;++ye)be[ye]=Q+ye+se;return be}function E(q){try{return q+""}catch{return"[no string representation]"}}function F(q){return q!==null&&typeof q=="object"&&typeof q.message=="string"&&typeof q.name=="string"}function I(q){try{v(q,"isOperational",!0)}catch{}}function z(q){return q==null?!1:q instanceof Error.__BluebirdErrorTypes__.OperationalError||q.isOperational===!0}function H(q){return F(q)&&e.propertyIsWritable(q,"stack")}var k=function(){return"stack"in new Error?function(q){return H(q)?q:new Error(E(q))}:function(q){if(H(q))return q;try{throw new Error(E(q))}catch(Q){return Q}}}();function W(q){return{}.toString.call(q)}function S(q,Q,se){for(var be=e.names(q),ye=0;ye<be.length;++ye){var fe=be[ye];if(se(fe))try{e.defineProperty(Q,fe,e.getDescriptor(q,fe))}catch{}}}var G=function(q){return e.isArray(q)?q:null};if(typeof Symbol<"u"&&Symbol.iterator){var j=typeof Array.from=="function"?function(q){return Array.from(q)}:function(q){for(var Q=[],se=q[Symbol.iterator](),be;!(be=se.next()).done;)Q.push(be.value);return Q};G=function(q){return e.isArray(q)?q:q!=null&&typeof q[Symbol.iterator]=="function"?j(q):null}}var M=typeof process<"u"&&W(process).toLowerCase()==="[object process]",R=typeof process<"u"&&typeof n<"u";function N(q){return R?n[q]:void 0}function B(){if(typeof Promise=="function")try{var q=new Promise(function(){});if({}.toString.call(q)==="[object Promise]")return Promise}catch{}}function L(q,Q){return q.bind(Q)}var P={isClass:b,isIdentifier:D,inheritedDataKeys:x,getDataPropertyOrDefault:g,thrower:y,isArray:e.isArray,asArray:G,notEnumerableProp:v,isPrimitive:l,isObject:d,isError:F,canEvaluate:t,errorObj:i,tryCatch:o,inherits:c,withAppended:f,maybeWrapAsError:h,toFastProperties:w,filledRange:A,toString:E,canAttachTrace:H,ensureErrorObject:k,originatesFromRejection:z,markAsOriginatingFromRejection:I,classString:W,copyDescriptors:S,hasDevTools:typeof chrome<"u"&&chrome&&typeof chrome.loadTimes=="function",isNode:M,hasEnvVariables:R,env:N,global:s,getNativePromise:B,domainBind:L};P.isRecentNode=P.isNode&&function(){var q=process.versions.node.split(".").map(Number);return q[0]===0&&q[1]>10||q[0]>0}(),P.isNode&&P.toFastProperties(process);try{throw new Error}catch(q){P.lastLineError=q}return I_=P,I_}var Cv={exports:{}},P_,bN;function SH(){if(bN)return P_;bN=1;var n=Pt(),e,t=function(){throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)},i=n.getNativePromise();if(n.isNode&&typeof MutationObserver>"u"){var r=ze.setImmediate,s=process.nextTick;e=n.isRecentNode?function(o){r.call(ze,o)}:function(o){s.call(process,o)}}else if(typeof i=="function"&&typeof i.resolve=="function"){var a=i.resolve();e=function(o){a.then(o)}}else typeof MutationObserver<"u"&&!(typeof window<"u"&&window.navigator&&(window.navigator.standalone||window.cordova))?e=function(){var o=document.createElement("div"),c={attributes:!0},l=!1,d=document.createElement("div"),h=new MutationObserver(function(){o.classList.toggle("foo"),l=!1});h.observe(d,c);var f=function(){l||(l=!0,d.classList.toggle("foo"))};return function(v){var y=new MutationObserver(function(){y.disconnect(),v()});y.observe(o,c),f()}}():typeof setImmediate<"u"?e=function(o){setImmediate(o)}:typeof setTimeout<"u"?e=function(o){setTimeout(o,0)}:e=t;return P_=e,P_}var z_,vN;function TH(){if(vN)return z_;vN=1;function n(t,i,r,s,a){for(var o=0;o<a;++o)r[o+s]=t[o+i],t[o+i]=void 0}function e(t){this._capacity=t,this._length=0,this._front=0}return e.prototype._willBeOverCapacity=function(t){return this._capacity<t},e.prototype._pushOne=function(t){var i=this.length();this._checkCapacity(i+1);var r=this._front+i&this._capacity-1;this[r]=t,this._length=i+1},e.prototype.push=function(t,i,r){var s=this.length()+3;if(this._willBeOverCapacity(s)){this._pushOne(t),this._pushOne(i),this._pushOne(r);return}var a=this._front+s-3;this._checkCapacity(s);var o=this._capacity-1;this[a+0&o]=t,this[a+1&o]=i,this[a+2&o]=r,this._length=s},e.prototype.shift=function(){var t=this._front,i=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,i},e.prototype.length=function(){return this._length},e.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},e.prototype._resizeTo=function(t){var i=this._capacity;this._capacity=t;var r=this._front,s=this._length,a=r+s&i-1;n(this,0,this,i,a)},z_=e,z_}var xN;function CH(){if(xN)return Cv.exports;xN=1;var n;try{throw new Error}catch(c){n=c}var e=SH(),t=TH(),i=Pt();function r(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new t(16),this._normalQueue=new t(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var c=this;this.drainQueues=function(){c._drainQueues()},this._schedule=e}r.prototype.setScheduler=function(c){var l=this._schedule;return this._schedule=c,this._customScheduler=!0,l},r.prototype.hasCustomScheduler=function(){return this._customScheduler},r.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},r.prototype.disableTrampolineIfNecessary=function(){i.hasDevTools&&(this._trampolineEnabled=!1)},r.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},r.prototype.fatalError=function(c,l){l?(process.stderr.write("Fatal "+(c instanceof Error?c.stack:c)+`
`),process.exit(2)):this.throwLater(c)},r.prototype.throwLater=function(c,l){if(arguments.length===1&&(l=c,c=function(){throw l}),typeof setTimeout<"u")setTimeout(function(){c(l)},0);else try{this._schedule(function(){c(l)})}catch{throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)}};function s(c,l,d){this._lateQueue.push(c,l,d),this._queueTick()}function a(c,l,d){this._normalQueue.push(c,l,d),this._queueTick()}function o(c){this._normalQueue._pushOne(c),this._queueTick()}return i.hasDevTools?(r.prototype.invokeLater=function(c,l,d){this._trampolineEnabled?s.call(this,c,l,d):this._schedule(function(){setTimeout(function(){c.call(l,d)},100)})},r.prototype.invoke=function(c,l,d){this._trampolineEnabled?a.call(this,c,l,d):this._schedule(function(){c.call(l,d)})},r.prototype.settlePromises=function(c){this._trampolineEnabled?o.call(this,c):this._schedule(function(){c._settlePromises()})}):(r.prototype.invokeLater=s,r.prototype.invoke=a,r.prototype.settlePromises=o),r.prototype._drainQueue=function(c){for(;c.length()>0;){var l=c.shift();if(typeof l!="function"){l._settlePromises();continue}var d=c.shift(),h=c.shift();l.call(d,h)}},r.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},r.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},r.prototype._reset=function(){this._isTickUsed=!1},Cv.exports=r,Cv.exports.firstLineError=n,Cv.exports}var W_,wN;function Gl(){if(wN)return W_;wN=1;var n=Cg(),e=n.freeze,t=Pt(),i=t.inherits,r=t.notEnumerableProp;function s(m,b){function w(_){if(!(this instanceof w))return new w(_);r(this,"message",typeof _=="string"?_:b),r(this,"name",m),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return i(w,Error),w}var a,o,c=s("Warning","warning"),l=s("CancellationError","cancellation error"),d=s("TimeoutError","timeout error"),h=s("AggregateError","aggregate error");try{a=TypeError,o=RangeError}catch{a=s("TypeError","type error"),o=s("RangeError","range error")}for(var f="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<f.length;++g)typeof Array.prototype[f[g]]=="function"&&(h.prototype[f[g]]=Array.prototype[f[g]]);n.defineProperty(h.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),h.prototype.isOperational=!0;var v=0;h.prototype.toString=function(){var m=Array(v*4+1).join(" "),b=`
`+m+`AggregateError of:
`;v++,m=Array(v*4+1).join(" ");for(var w=0;w<this.length;++w){for(var _=this[w]===this?"[Circular AggregateError]":this[w]+"",D=_.split(`
`),A=0;A<D.length;++A)D[A]=m+D[A];_=D.join(`
`),b+=_+`
`}return v--,b};function y(m){if(!(this instanceof y))return new y(m);r(this,"name","OperationalError"),r(this,"message",m),this.cause=m,this.isOperational=!0,m instanceof Error?(r(this,"message",m.message),r(this,"stack",m.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}i(y,Error);var x=Error.__BluebirdErrorTypes__;return x||(x=e({CancellationError:l,TimeoutError:d,OperationalError:y,RejectionError:y,AggregateError:h}),n.defineProperty(Error,"__BluebirdErrorTypes__",{value:x,writable:!1,enumerable:!1,configurable:!1})),W_={Error,TypeError:a,RangeError:o,CancellationError:x.CancellationError,OperationalError:x.OperationalError,TimeoutError:x.TimeoutError,AggregateError:x.AggregateError,Warning:c},W_}var q_,_N;function kH(){return _N||(_N=1,q_=function(n,e){var t=Pt(),i=t.errorObj,r=t.isObject;function s(h,f){if(r(h)){if(h instanceof n)return h;var g=o(h);if(g===i){f&&f._pushContext();var v=n.reject(g.e);return f&&f._popContext(),v}else if(typeof g=="function"){if(l(h)){var v=new n(e);return h._then(v._fulfill,v._reject,void 0,v,null),v}return d(h,g,f)}}return h}function a(h){return h.then}function o(h){try{return a(h)}catch(f){return i.e=f,i}}var c={}.hasOwnProperty;function l(h){try{return c.call(h,"_promise0")}catch{return!1}}function d(h,f,g){var v=new n(e),y=v;g&&g._pushContext(),v._captureStackTrace(),g&&g._popContext();var x=!0,m=t.tryCatch(f).call(h,b,w);x=!1,v&&m===i&&(v._rejectCallback(m.e,!0,!0),v=null);function b(_){v&&(v._resolveCallback(_),v=null)}function w(_){v&&(v._rejectCallback(_,x,!0),v=null)}return y}return s}),q_}var $_,DN;function UH(){return DN||(DN=1,$_=function(n,e,t,i,r){var s=Pt();s.isArray;function a(c){switch(c){case-2:return[];case-3:return{}}}function o(c){var l=this._promise=new n(e);c instanceof n&&l._propagateFrom(c,3),l._setOnCancel(this),this._values=c,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return s.inherits(o,r),o.prototype.length=function(){return this._length},o.prototype.promise=function(){return this._promise},o.prototype._init=function c(l,d){var h=t(this._values,this._promise);if(h instanceof n){h=h._target();var f=h._bitField;if(this._values=h,f&50397184)if(f&33554432)h=h._value();else return f&16777216?this._reject(h._reason()):this._cancel();else return this._promise._setAsyncGuaranteed(),h._then(c,this._reject,void 0,this,d)}if(h=s.asArray(h),h===null){var g=i("expecting an array or an iterable object but got "+s.classString(h)).reason();this._promise._rejectCallback(g,!1);return}if(h.length===0){d===-5?this._resolveEmptyArray():this._resolve(a(d));return}this._iterate(h)},o.prototype._iterate=function(c){var l=this.getActualLength(c.length);this._length=l,this._values=this.shouldCopyValues()?new Array(l):this._values;for(var d=this._promise,h=!1,f=null,g=0;g<l;++g){var v=t(c[g],d);v instanceof n?(v=v._target(),f=v._bitField):f=null,h?f!==null&&v.suppressUnhandledRejections():f!==null?f&50397184?f&33554432?h=this._promiseFulfilled(v._value(),g):f&16777216?h=this._promiseRejected(v._reason(),g):h=this._promiseCancelled(g):(v._proxy(this,g),this._values[g]=v):h=this._promiseFulfilled(v,g)}h||d._setAsyncGuaranteed()},o.prototype._isResolved=function(){return this._values===null},o.prototype._resolve=function(c){this._values=null,this._promise._fulfill(c)},o.prototype._cancel=function(){this._isResolved()||!this._promise._isCancellable()||(this._values=null,this._promise._cancel())},o.prototype._reject=function(c){this._values=null,this._promise._rejectCallback(c,!1)},o.prototype._promiseFulfilled=function(c,l){this._values[l]=c;var d=++this._totalResolved;return d>=this._length?(this._resolve(this._values),!0):!1},o.prototype._promiseCancelled=function(){return this._cancel(),!0},o.prototype._promiseRejected=function(c){return this._totalResolved++,this._reject(c),!0},o.prototype._resultCancelled=function(){if(!this._isResolved()){var c=this._values;if(this._cancel(),c instanceof n)c.cancel();else for(var l=0;l<c.length;++l)c[l]instanceof n&&c[l].cancel()}},o.prototype.shouldCopyValues=function(){return!0},o.prototype.getActualLength=function(c){return c},o}),$_}var H_,AN;function NH(){return AN||(AN=1,H_=function(n){var e=!1,t=[];n.prototype._promiseCreated=function(){},n.prototype._pushContext=function(){},n.prototype._popContext=function(){return null},n._peekContext=n.prototype._peekContext=function(){};function i(){this._trace=new i.CapturedTrace(s())}i.prototype._pushContext=function(){this._trace!==void 0&&(this._trace._promiseCreated=null,t.push(this._trace))},i.prototype._popContext=function(){if(this._trace!==void 0){var a=t.pop(),o=a._promiseCreated;return a._promiseCreated=null,o}return null};function r(){if(e)return new i}function s(){var a=t.length-1;if(a>=0)return t[a]}return i.CapturedTrace=null,i.create=r,i.deactivateLongStackTraces=function(){},i.activateLongStackTraces=function(){var a=n.prototype._pushContext,o=n.prototype._popContext,c=n._peekContext,l=n.prototype._peekContext,d=n.prototype._promiseCreated;i.deactivateLongStackTraces=function(){n.prototype._pushContext=a,n.prototype._popContext=o,n._peekContext=c,n.prototype._peekContext=l,n.prototype._promiseCreated=d,e=!1},e=!0,n.prototype._pushContext=i.prototype._pushContext,n.prototype._popContext=i.prototype._popContext,n._peekContext=n.prototype._peekContext=s,n.prototype._promiseCreated=function(){var h=this._peekContext();h&&h._promiseCreated==null&&(h._promiseCreated=this)}},i}),H_}var V_,EN;function jH(){return EN||(EN=1,V_=function(n,e){var t=n._getDomain,i=n._async,r=Gl().Warning,s=Pt(),a=s.canAttachTrace,o,c,l=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,d=/\((?:timers\.js):\d+:\d+\)/,h=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,f=null,g=null,v=!1,y,x=!!(s.env("BLUEBIRD_DEBUG")!=0&&(s.env("BLUEBIRD_DEBUG")||s.env("NODE_ENV")==="development")),m=!!(s.env("BLUEBIRD_WARNINGS")!=0&&(x||s.env("BLUEBIRD_WARNINGS"))),b=!!(s.env("BLUEBIRD_LONG_STACK_TRACES")!=0&&(x||s.env("BLUEBIRD_LONG_STACK_TRACES"))),w=s.env("BLUEBIRD_W_FORGOTTEN_RETURN")!=0&&(m||!!s.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var X=this._target();X._bitField=X._bitField&-1048577|524288},n.prototype._ensurePossibleRejectionHandled=function(){this._bitField&524288||(this._setRejectionIsUnhandled(),i.invokeLater(this._notifyUnhandledRejection,this,void 0))},n.prototype._notifyUnhandledRejectionIsHandled=function(){Y("rejectionHandled",o,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=this._bitField|268435456},n.prototype._returnedNonUndefined=function(){return(this._bitField&268435456)!==0},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var X=this._settledValue();this._setUnhandledRejectionIsNotified(),Y("unhandledRejection",c,X,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=this._bitField|262144},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},n.prototype._isUnhandledRejectionNotified=function(){return(this._bitField&262144)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=this._bitField|1048576},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(this._bitField&1048576)>0},n.prototype._warn=function(X,K,ne){return Q(X,K,ne||this)},n.onPossiblyUnhandledRejection=function(X){var K=t();c=typeof X=="function"?K===null?X:s.domainBind(K,X):void 0},n.onUnhandledRejectionHandled=function(X){var K=t();o=typeof X=="function"?K===null?X:s.domainBind(K,X):void 0};var _=function(){};n.longStackTraces=function(){if(i.haveItemsQueued()&&!Z.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);if(!Z.longStackTraces&&ie()){var X=n.prototype._captureStackTrace,K=n.prototype._attachExtraTrace;Z.longStackTraces=!0,_=function(){if(i.haveItemsQueued()&&!Z.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);n.prototype._captureStackTrace=X,n.prototype._attachExtraTrace=K,e.deactivateLongStackTraces(),i.enableTrampoline(),Z.longStackTraces=!1},n.prototype._captureStackTrace=B,n.prototype._attachExtraTrace=L,e.activateLongStackTraces(),i.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return Z.longStackTraces&&ie()};var D=function(){try{if(typeof CustomEvent=="function"){var X=new CustomEvent("CustomEvent");return s.global.dispatchEvent(X),function(K,ne){var oe=new CustomEvent(K.toLowerCase(),{detail:ne,cancelable:!0});return!s.global.dispatchEvent(oe)}}else if(typeof Event=="function"){var X=new Event("CustomEvent");return s.global.dispatchEvent(X),function(ne,oe){var we=new Event(ne.toLowerCase(),{cancelable:!0});return we.detail=oe,!s.global.dispatchEvent(we)}}else{var X=document.createEvent("CustomEvent");return X.initCustomEvent("testingtheevent",!1,!0,{}),s.global.dispatchEvent(X),function(ne,oe){var we=document.createEvent("CustomEvent");return we.initCustomEvent(ne.toLowerCase(),!1,!0,oe),!s.global.dispatchEvent(we)}}}catch{}return function(){return!1}}(),A=function(){return s.isNode?function(){return process.emit.apply(process,arguments)}:s.global?function(X){var K="on"+X.toLowerCase(),ne=s.global[K];return ne?(ne.apply(s.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}}();function E(X,K){return{promise:K}}var F={promiseCreated:E,promiseFulfilled:E,promiseRejected:E,promiseResolved:E,promiseCancelled:E,promiseChained:function(X,K,ne){return{promise:K,child:ne}},warning:function(X,K){return{warning:K}},unhandledRejection:function(X,K,ne){return{reason:K,promise:ne}},rejectionHandled:E},I=function(X){var K=!1;try{K=A.apply(null,arguments)}catch(oe){i.throwLater(oe),K=!0}var ne=!1;try{ne=D(X,F[X].apply(null,arguments))}catch(oe){i.throwLater(oe),ne=!0}return ne||K};n.config=function(X){if(X=Object(X),"longStackTraces"in X&&(X.longStackTraces?n.longStackTraces():!X.longStackTraces&&n.hasLongStackTraces()&&_()),"warnings"in X){var K=X.warnings;Z.warnings=!!K,w=Z.warnings,s.isObject(K)&&"wForgottenReturn"in K&&(w=!!K.wForgottenReturn)}if("cancellation"in X&&X.cancellation&&!Z.cancellation){if(i.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=G,n.prototype._propagateFrom=j,n.prototype._onCancel=W,n.prototype._setOnCancel=S,n.prototype._attachCancellationCallback=k,n.prototype._execute=H,R=j,Z.cancellation=!0}return"monitoring"in X&&(X.monitoring&&!Z.monitoring?(Z.monitoring=!0,n.prototype._fireEvent=I):!X.monitoring&&Z.monitoring&&(Z.monitoring=!1,n.prototype._fireEvent=z)),n};function z(){return!1}n.prototype._fireEvent=z,n.prototype._execute=function(X,K,ne){try{X(K,ne)}catch(oe){return oe}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(X){},n.prototype._attachCancellationCallback=function(X){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(X,K){};function H(X,K,ne){var oe=this;try{X(K,ne,function(we){if(typeof we!="function")throw new TypeError("onCancel must be a function, got: "+s.toString(we));oe._attachCancellationCallback(we)})}catch(we){return we}}function k(X){if(!this._isCancellable())return this;var K=this._onCancel();K!==void 0?s.isArray(K)?K.push(X):this._setOnCancel([K,X]):this._setOnCancel(X)}function W(){return this._onCancelField}function S(X){this._onCancelField=X}function G(){this._cancellationParent=void 0,this._onCancelField=void 0}function j(X,K){if(K&1){this._cancellationParent=X;var ne=X._branchesRemainingToCancel;ne===void 0&&(ne=0),X._branchesRemainingToCancel=ne+1}K&2&&X._isBound()&&this._setBoundTo(X._boundTo)}function M(X,K){K&2&&X._isBound()&&this._setBoundTo(X._boundTo)}var R=M;function N(){var X=this._boundTo;return X!==void 0&&X instanceof n?X.isFulfilled()?X.value():void 0:X}function B(){this._trace=new ue(this._peekContext())}function L(X,K){if(a(X)){var ne=this._trace;if(ne!==void 0&&K&&(ne=ne._parent),ne!==void 0)ne.attachExtraTrace(X);else if(!X.__stackCleaned__){var oe=ce(X);s.notEnumerableProp(X,"stack",oe.message+`
`+oe.stack.join(`
`)),s.notEnumerableProp(X,"__stackCleaned__",!0)}}}function P(X,K,ne,oe,we){if(X===void 0&&K!==null&&w){if(we!==void 0&&we._returnedNonUndefined()||!(oe._bitField&65535))return;ne&&(ne=ne+" ");var Ue="",He="";if(K._trace){for(var je=K._trace.stack.split(`
`),Xe=fe(je),wt=Xe.length-1;wt>=0;--wt){var Ke=Xe[wt];if(!d.test(Ke)){var Jt=Ke.match(h);Jt&&(Ue="at "+Jt[1]+":"+Jt[2]+":"+Jt[3]+" ");break}}if(Xe.length>0){for(var Xn=Xe[0],wt=0;wt<je.length;++wt)if(je[wt]===Xn){wt>0&&(He=`
`+je[wt-1]);break}}}var Hi="a promise was created in a "+ne+"handler "+Ue+"but was not returned from it, see http://goo.gl/rRqMUw"+He;oe._warn(Hi,!0,K)}}function q(X,K){var ne=X+" is deprecated and will be removed in a future version.";return K&&(ne+=" Use "+K+" instead."),Q(ne)}function Q(X,K,ne){if(Z.warnings){var oe=new r(X),we;if(K)ne._attachExtraTrace(oe);else if(Z.longStackTraces&&(we=n._peekContext()))we.attachExtraTrace(oe);else{var Ue=ce(oe);oe.stack=Ue.message+`
`+Ue.stack.join(`
`)}I("warning",oe)||le(oe,"",!0)}}function se(X,K){for(var ne=0;ne<K.length-1;++ne)K[ne].push("From previous event:"),K[ne]=K[ne].join(`
`);return ne<K.length&&(K[ne]=K[ne].join(`
`)),X+`
`+K.join(`
`)}function be(X){for(var K=0;K<X.length;++K)(X[K].length===0||K+1<X.length&&X[K][0]===X[K+1][0])&&(X.splice(K,1),K--)}function ye(X){for(var K=X[0],ne=1;ne<X.length;++ne){for(var oe=X[ne],we=K.length-1,Ue=K[we],He=-1,je=oe.length-1;je>=0;--je)if(oe[je]===Ue){He=je;break}for(var je=He;je>=0;--je){var Xe=oe[je];if(K[we]===Xe)K.pop(),we--;else break}K=oe}}function fe(X){for(var K=[],ne=0;ne<X.length;++ne){var oe=X[ne],we=oe==="    (No stack trace)"||f.test(oe),Ue=we&&te(oe);we&&!Ue&&(v&&oe.charAt(0)!==" "&&(oe="    "+oe),K.push(oe))}return K}function xe(X){for(var K=X.stack.replace(/\s+$/g,"").split(`
`),ne=0;ne<K.length;++ne){var oe=K[ne];if(oe==="    (No stack trace)"||f.test(oe))break}return ne>0&&X.name!="SyntaxError"&&(K=K.slice(ne)),K}function ce(X){var K=X.stack,ne=X.toString();return K=typeof K=="string"&&K.length>0?xe(X):["    (No stack trace)"],{message:ne,stack:X.name=="SyntaxError"?K:fe(K)}}function le(X,K,ne){if(typeof console<"u"){var oe;if(s.isObject(X)){var we=X.stack;oe=K+g(we,X)}else oe=K+String(X);typeof y=="function"?y(oe,ne):(typeof console.log=="function"||typeof console.log=="object")&&console.log(oe)}}function Y(X,K,ne,oe){var we=!1;try{typeof K=="function"&&(we=!0,X==="rejectionHandled"?K(oe):K(ne,oe))}catch(Ue){i.throwLater(Ue)}X==="unhandledRejection"?!I(X,ne,oe)&&!we&&le(ne,"Unhandled rejection "):I(X,oe)}function ae(X){var K;if(typeof X=="function")K="[function "+(X.name||"anonymous")+"]";else{K=X&&typeof X.toString=="function"?X.toString():s.toString(X);var ne=/\[object [a-zA-Z0-9$_]+\]/;if(ne.test(K))try{var oe=JSON.stringify(X);K=oe}catch{}K.length===0&&(K="(empty array)")}return"(<"+C(K)+">, no stack trace)"}function C(X){var K=41;return X.length<K?X:X.substr(0,K-3)+"..."}function ie(){return typeof pe=="function"}var te=function(){return!1},V=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function $(X){var K=X.match(V);if(K)return{fileName:K[1],line:parseInt(K[2],10)}}function J(X,K){if(ie()){for(var ne=X.stack.split(`
`),oe=K.stack.split(`
`),we=-1,Ue=-1,He,je,Xe=0;Xe<ne.length;++Xe){var wt=$(ne[Xe]);if(wt){He=wt.fileName,we=wt.line;break}}for(var Xe=0;Xe<oe.length;++Xe){var wt=$(oe[Xe]);if(wt){je=wt.fileName,Ue=wt.line;break}}we<0||Ue<0||!He||!je||He!==je||we>=Ue||(te=function(Ke){if(l.test(Ke))return!0;var Jt=$(Ke);return!!(Jt&&Jt.fileName===He&&we<=Jt.line&&Jt.line<=Ue)})}}function ue(X){this._parent=X,this._promisesCreated=0;var K=this._length=1+(X===void 0?0:X._length);pe(this,ue),K>32&&this.uncycle()}s.inherits(ue,Error),e.CapturedTrace=ue,ue.prototype.uncycle=function(){var X=this._length;if(!(X<2)){for(var K=[],ne={},oe=0,we=this;we!==void 0;++oe)K.push(we),we=we._parent;X=this._length=oe;for(var oe=X-1;oe>=0;--oe){var Ue=K[oe].stack;ne[Ue]===void 0&&(ne[Ue]=oe)}for(var oe=0;oe<X;++oe){var He=K[oe].stack,je=ne[He];if(je!==void 0&&je!==oe){je>0&&(K[je-1]._parent=void 0,K[je-1]._length=1),K[oe]._parent=void 0,K[oe]._length=1;var Xe=oe>0?K[oe-1]:this;je<X-1?(Xe._parent=K[je+1],Xe._parent.uncycle(),Xe._length=Xe._parent._length+1):(Xe._parent=void 0,Xe._length=1);for(var wt=Xe._length+1,Ke=oe-2;Ke>=0;--Ke)K[Ke]._length=wt,wt++;return}}}},ue.prototype.attachExtraTrace=function(X){if(!X.__stackCleaned__){this.uncycle();for(var K=ce(X),ne=K.message,oe=[K.stack],we=this;we!==void 0;)oe.push(fe(we.stack.split(`
`))),we=we._parent;ye(oe),be(oe),s.notEnumerableProp(X,"stack",se(ne,oe)),s.notEnumerableProp(X,"__stackCleaned__",!0)}};var pe=function(){var K=/^\s*at\s*/,ne=function(He,je){return typeof He=="string"?He:je.name!==void 0&&je.message!==void 0?je.toString():ae(je)};if(typeof Error.stackTraceLimit=="number"&&typeof Error.captureStackTrace=="function"){Error.stackTraceLimit+=6,f=K,g=ne;var oe=Error.captureStackTrace;return te=function(He){return l.test(He)},function(He,je){Error.stackTraceLimit+=6,oe(He,je),Error.stackTraceLimit-=6}}var we=new Error;if(typeof we.stack=="string"&&we.stack.split(`
`)[0].indexOf("stackDetection@")>=0)return f=/@/,g=ne,v=!0,function(je){je.stack=new Error().stack};var Ue;try{throw new Error}catch(He){Ue="stack"in He}return!("stack"in we)&&Ue&&typeof Error.stackTraceLimit=="number"?(f=K,g=ne,function(je){Error.stackTraceLimit+=6;try{throw new Error}catch(Xe){je.stack=Xe.stack}Error.stackTraceLimit-=6}):(g=function(He,je){return typeof He=="string"?He:(typeof je=="object"||typeof je=="function")&&je.name!==void 0&&je.message!==void 0?je.toString():ae(je)},null)}();typeof console<"u"&&typeof console.warn<"u"&&(y=function(X){console.warn(X)},s.isNode&&process.stderr.isTTY?y=function(X,K){var ne=K?"\x1B[33m":"\x1B[31m";console.warn(ne+X+`\x1B[0m
`)}:!s.isNode&&typeof new Error().stack=="string"&&(y=function(X,K){console.warn("%c"+X,K?"color: darkorange":"color: red")}));var Z={warnings:m,longStackTraces:!1,cancellation:!1,monitoring:!1};return b&&n.longStackTraces(),{longStackTraces:function(){return Z.longStackTraces},warnings:function(){return Z.warnings},cancellation:function(){return Z.cancellation},monitoring:function(){return Z.monitoring},propagateFromFunction:function(){return R},boundValueFunction:function(){return N},checkForgottenReturns:P,setBounds:J,warn:Q,deprecated:q,CapturedTrace:ue,fireDomEvent:D,fireGlobalEvent:A}}),V_}var G_,SN;function RH(){return SN||(SN=1,G_=function(n,e){var t=Pt(),i=n.CancellationError,r=t.errorObj;function s(h,f,g){this.promise=h,this.type=f,this.handler=g,this.called=!1,this.cancelPromise=null}s.prototype.isFinallyHandler=function(){return this.type===0};function a(h){this.finallyHandler=h}a.prototype._resultCancelled=function(){o(this.finallyHandler)};function o(h,f){return h.cancelPromise!=null?(arguments.length>1?h.cancelPromise._reject(f):h.cancelPromise._cancel(),h.cancelPromise=null,!0):!1}function c(){return d.call(this,this.promise._target()._settledValue())}function l(h){if(!o(this,h))return r.e=h,r}function d(h){var f=this.promise,g=this.handler;if(!this.called){this.called=!0;var v=this.isFinallyHandler()?g.call(f._boundValue()):g.call(f._boundValue(),h);if(v!==void 0){f._setReturnedNonUndefined();var y=e(v,f);if(y instanceof n){if(this.cancelPromise!=null)if(y._isCancelled()){var x=new i("late cancellation observer");return f._attachExtraTrace(x),r.e=x,r}else y.isPending()&&y._attachCancellationCallback(new a(this));return y._then(c,l,void 0,this,void 0)}}}return f.isRejected()?(o(this),r.e=h,r):(o(this),h)}return n.prototype._passThrough=function(h,f,g,v){return typeof h!="function"?this.then():this._then(g,v,void 0,new s(this,f,h),void 0)},n.prototype.lastly=n.prototype.finally=function(h){return this._passThrough(h,0,d,d)},n.prototype.tap=function(h){return this._passThrough(h,1,d)},s}),G_}var X_,TN;function FH(){return TN||(TN=1,X_=function(n){var e=Pt(),t=Cg().keys,i=e.tryCatch,r=e.errorObj;function s(a,o,c){return function(l){var d=c._boundValue();e:for(var h=0;h<a.length;++h){var f=a[h];if(f===Error||f!=null&&f.prototype instanceof Error){if(l instanceof f)return i(o).call(d,l)}else if(typeof f=="function"){var g=i(f).call(d,l);if(g===r)return g;if(g)return i(o).call(d,l)}else if(e.isObject(l)){for(var v=t(f),y=0;y<v.length;++y){var x=v[y];if(f[x]!=l[x])continue e}return i(o).call(d,l)}}return n}}return s}),X_}var Y_,CN;function wB(){if(CN)return Y_;CN=1;var n=Pt(),e=n.maybeWrapAsError,t=Gl(),i=t.OperationalError,r=Cg();function s(l){return l instanceof Error&&r.getPrototypeOf(l)===Error.prototype}var a=/^(?:name|message|stack|cause)$/;function o(l){var d;if(s(l)){d=new i(l),d.name=l.name,d.message=l.message,d.stack=l.stack;for(var h=r.keys(l),f=0;f<h.length;++f){var g=h[f];a.test(g)||(d[g]=l[g])}return d}return n.markAsOriginatingFromRejection(l),l}function c(l,d){return function(h,f){if(l!==null){if(h){var g=o(e(h));l._attachExtraTrace(g),l._reject(g)}else if(!d)l._fulfill(f);else{for(var v=arguments.length,y=new Array(Math.max(v-1,0)),x=1;x<v;++x)y[x-1]=arguments[x];l._fulfill(y)}l=null}}}return Y_=c,Y_}var K_,kN;function OH(){return kN||(kN=1,K_=function(n,e,t,i,r){var s=Pt(),a=s.tryCatch;n.method=function(o){if(typeof o!="function")throw new n.TypeError("expecting a function but got "+s.classString(o));return function(){var c=new n(e);c._captureStackTrace(),c._pushContext();var l=a(o).apply(this,arguments),d=c._popContext();return r.checkForgottenReturns(l,d,"Promise.method",c),c._resolveFromSyncValue(l),c}},n.attempt=n.try=function(o){if(typeof o!="function")return i("expecting a function but got "+s.classString(o));var c=new n(e);c._captureStackTrace(),c._pushContext();var l;if(arguments.length>1){r.deprecated("calling Promise.try with more than 1 argument");var d=arguments[1],h=arguments[2];l=s.isArray(d)?a(o).apply(h,d):a(o).call(h,d)}else l=a(o)();var f=c._popContext();return r.checkForgottenReturns(l,f,"Promise.try",c),c._resolveFromSyncValue(l),c},n.prototype._resolveFromSyncValue=function(o){o===s.errorObj?this._rejectCallback(o.e,!1):this._resolveCallback(o,!0)}}),K_}var Q_,UN;function MH(){return UN||(UN=1,Q_=function(n,e,t,i){var r=!1,s=function(l,d){this._reject(d)},a=function(l,d){d.promiseRejectionQueued=!0,d.bindingPromise._then(s,s,null,this,l)},o=function(l,d){this._bitField&50397184||this._resolveCallback(d.target)},c=function(l,d){d.promiseRejectionQueued||this._reject(l)};n.prototype.bind=function(l){r||(r=!0,n.prototype._propagateFrom=i.propagateFromFunction(),n.prototype._boundValue=i.boundValueFunction());var d=t(l),h=new n(e);h._propagateFrom(this,1);var f=this._target();if(h._setBoundTo(d),d instanceof n){var g={promiseRejectionQueued:!1,promise:h,target:f,bindingPromise:d};f._then(e,a,void 0,h,g),d._then(o,c,void 0,h,g),h._setOnCancel(d)}else h._resolveCallback(f);return h},n.prototype._setBoundTo=function(l){l!==void 0?(this._bitField=this._bitField|2097152,this._boundTo=l):this._bitField=this._bitField&-2097153},n.prototype._isBound=function(){return(this._bitField&2097152)===2097152},n.bind=function(l,d){return n.resolve(d).bind(l)}}),Q_}var J_,NN;function BH(){return NN||(NN=1,J_=function(n,e,t,i){var r=Pt(),s=r.tryCatch,a=r.errorObj,o=n._async;n.prototype.break=n.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var c=this,l=c;c._isCancellable();){if(!c._cancelBy(l)){l._isFollowing()?l._followee().cancel():l._cancelBranched();break}var d=c._cancellationParent;if(d==null||!d._isCancellable()){c._isFollowing()?c._followee().cancel():c._cancelBranched();break}else c._isFollowing()&&c._followee().cancel(),c._setWillBeCancelled(),l=c,c=d}},n.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},n.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===void 0||this._branchesRemainingToCancel<=0},n.prototype._cancelBy=function(c){return c===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},n.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},n.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),o.invoke(this._cancelPromises,this,void 0))},n.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},n.prototype._unsetOnCancel=function(){this._onCancelField=void 0},n.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},n.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},n.prototype._doInvokeOnCancel=function(c,l){if(r.isArray(c))for(var d=0;d<c.length;++d)this._doInvokeOnCancel(c[d],l);else if(c!==void 0)if(typeof c=="function"){if(!l){var h=s(c).call(this._boundValue());h===a&&(this._attachExtraTrace(h.e),o.throwLater(h.e))}}else c._resultCancelled(this)},n.prototype._invokeOnCancel=function(){var c=this._onCancel();this._unsetOnCancel(),o.invoke(this._doInvokeOnCancel,this,c)},n.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},n.prototype._resultCancelled=function(){this.cancel()}}),J_}var Z_,jN;function LH(){return jN||(jN=1,Z_=function(n){function e(){return this.value}function t(){throw this.reason}n.prototype.return=n.prototype.thenReturn=function(i){return i instanceof n&&i.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:i},void 0)},n.prototype.throw=n.prototype.thenThrow=function(i){return this._then(t,void 0,void 0,{reason:i},void 0)},n.prototype.catchThrow=function(i){if(arguments.length<=1)return this._then(void 0,t,void 0,{reason:i},void 0);var r=arguments[1],s=function(){throw r};return this.caught(i,s)},n.prototype.catchReturn=function(i){if(arguments.length<=1)return i instanceof n&&i.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:i},void 0);var r=arguments[1];r instanceof n&&r.suppressUnhandledRejections();var s=function(){return r};return this.caught(i,s)}}),Z_}var eD,RN;function IH(){return RN||(RN=1,eD=function(n){function e(c){c!==void 0?(c=c._target(),this._bitField=c._bitField,this._settledValueField=c._isFateSealed()?c._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var t=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError(`cannot get fulfillment value of a non-fulfilled promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},i=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError(`cannot get rejection reason of a non-rejected promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},r=e.prototype.isFulfilled=function(){return(this._bitField&33554432)!==0},s=e.prototype.isRejected=function(){return(this._bitField&16777216)!==0},a=e.prototype.isPending=function(){return(this._bitField&50397184)===0},o=e.prototype.isResolved=function(){return(this._bitField&50331648)!==0};e.prototype.isCancelled=function(){return(this._bitField&8454144)!==0},n.prototype.__isCancelled=function(){return(this._bitField&65536)===65536},n.prototype._isCancelled=function(){return this._target().__isCancelled()},n.prototype.isCancelled=function(){return(this._target()._bitField&8454144)!==0},n.prototype.isPending=function(){return a.call(this._target())},n.prototype.isRejected=function(){return s.call(this._target())},n.prototype.isFulfilled=function(){return r.call(this._target())},n.prototype.isResolved=function(){return o.call(this._target())},n.prototype.value=function(){return t.call(this._target())},n.prototype.reason=function(){var c=this._target();return c._unsetRejectionIsUnhandled(),i.call(c)},n.prototype._value=function(){return this._settledValue()},n.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},n.PromiseInspection=e}),eD}var tD,FN;function PH(){return FN||(FN=1,tD=function(n,e,t,i,r,s){var a=Pt(),o=a.canEvaluate,c=a.tryCatch,l=a.errorObj,d;if(o){for(var h=function(b){return new Function("value","holder",`                             
	            'use strict';                                                    
	            holder.pIndex = value;                                           
	            holder.checkFulfillment(this);                                   
	            `.replace(/Index/g,b))},f=function(b){return new Function("promise","holder",`                           
	            'use strict';                                                    
	            holder.pIndex = promise;                                         
	            `.replace(/Index/g,b))},g=function(b){for(var w=new Array(b),_=0;_<w.length;++_)w[_]="this.p"+(_+1);var D=w.join(" = ")+" = null;",A=`var promise;
`+w.map(function(z){return`                                                         
	                promise = `+z+`;                                      
	                if (promise instanceof Promise) {                            
	                    promise.cancel();                                        
	                }                                                            
	            `}).join(`
`),E=w.join(", "),F="Holder$"+b,I=`return function(tryCatch, errorObj, Promise, async) {    
	            'use strict';                                                    
	            function [TheName](fn) {                                         
	                [TheProperties]                                              
	                this.fn = fn;                                                
	                this.asyncNeeded = true;                                     
	                this.now = 0;                                                
	            }                                                                
	                                                                             
	            [TheName].prototype._callFunction = function(promise) {          
	                promise._pushContext();                                      
	                var ret = tryCatch(this.fn)([ThePassedArguments]);           
	                promise._popContext();                                       
	                if (ret === errorObj) {                                      
	                    promise._rejectCallback(ret.e, false);                   
	                } else {                                                     
	                    promise._resolveCallback(ret);                           
	                }                                                            
	            };                                                               
	                                                                             
	            [TheName].prototype.checkFulfillment = function(promise) {       
	                var now = ++this.now;                                        
	                if (now === [TheTotal]) {                                    
	                    if (this.asyncNeeded) {                                  
	                        async.invoke(this._callFunction, this, promise);     
	                    } else {                                                 
	                        this._callFunction(promise);                         
	                    }                                                        
	                                                                             
	                }                                                            
	            };                                                               
	                                                                             
	            [TheName].prototype._resultCancelled = function() {              
	                [CancellationCode]                                           
	            };                                                               
	                                                                             
	            return [TheName];                                                
	        }(tryCatch, errorObj, Promise, async);                               
	        `;return I=I.replace(/\[TheName\]/g,F).replace(/\[TheTotal\]/g,b).replace(/\[ThePassedArguments\]/g,E).replace(/\[TheProperties\]/g,D).replace(/\[CancellationCode\]/g,A),new Function("tryCatch","errorObj","Promise","async",I)(c,l,n,r)},v=[],y=[],x=[],m=0;m<8;++m)v.push(g(m+1)),y.push(h(m+1)),x.push(f(m+1));d=function(b){this._reject(b)}}n.join=function(){var b=arguments.length-1,w;if(b>0&&typeof arguments[b]=="function"&&(w=arguments[b],b<=8&&o)){var S=new n(i);S._captureStackTrace();for(var _=v[b-1],D=new _(w),A=y,E=0;E<b;++E){var F=t(arguments[E],S);if(F instanceof n){F=F._target();var I=F._bitField;I&50397184?I&33554432?A[E].call(S,F._value(),D):I&16777216?S._reject(F._reason()):S._cancel():(F._then(A[E],d,void 0,S,D),x[E](F,D),D.asyncNeeded=!1)}else A[E].call(S,F,D)}if(!S._isFateSealed()){if(D.asyncNeeded){var z=s();z!==null&&(D.fn=a.domainBind(z,D.fn))}S._setAsyncGuaranteed(),S._setOnCancel(D)}return S}for(var H=arguments.length,k=new Array(H),W=0;W<H;++W)k[W]=arguments[W];w&&k.pop();var S=new e(k).promise();return w!==void 0?S.spread(w):S}}),tD}var nD,ON;function zH(){return ON||(ON=1,nD=function(n,e,t,i,r,s){var a=n._getDomain,o=Pt(),c=o.tryCatch,l=o.errorObj,d=n._async;function h(g,v,y,x){this.constructor$(g),this._promise._captureStackTrace();var m=a();this._callback=m===null?v:o.domainBind(m,v),this._preservedValues=x===r?new Array(this.length()):null,this._limit=y,this._inFlight=0,this._queue=[],d.invoke(this._asyncInit,this,void 0)}o.inherits(h,e),h.prototype._asyncInit=function(){this._init$(void 0,-2)},h.prototype._init=function(){},h.prototype._promiseFulfilled=function(g,v){var y=this._values,x=this.length(),m=this._preservedValues,b=this._limit;if(v<0){if(v=v*-1-1,y[v]=g,b>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(b>=1&&this._inFlight>=b)return y[v]=g,this._queue.push(v),!1;m!==null&&(m[v]=g);var w=this._promise,_=this._callback,D=w._boundValue();w._pushContext();var A=c(_).call(D,g,v,x),E=w._popContext();if(s.checkForgottenReturns(A,E,m!==null?"Promise.filter":"Promise.map",w),A===l)return this._reject(A.e),!0;var F=i(A,this._promise);if(F instanceof n){F=F._target();var I=F._bitField;if(I&50397184)if(I&33554432)A=F._value();else return I&16777216?(this._reject(F._reason()),!0):(this._cancel(),!0);else return b>=1&&this._inFlight++,y[v]=F,F._proxy(this,(v+1)*-1),!1}y[v]=A}var z=++this._totalResolved;return z>=x?(m!==null?this._filter(y,m):this._resolve(y),!0):!1},h.prototype._drainQueue=function(){for(var g=this._queue,v=this._limit,y=this._values;g.length>0&&this._inFlight<v;){if(this._isResolved())return;var x=g.pop();this._promiseFulfilled(y[x],x)}},h.prototype._filter=function(g,v){for(var y=v.length,x=new Array(y),m=0,b=0;b<y;++b)g[b]&&(x[m++]=v[b]);x.length=m,this._resolve(x)},h.prototype.preservedValues=function(){return this._preservedValues};function f(g,v,y,x){if(typeof v!="function")return t("expecting a function but got "+o.classString(v));var m=0;if(y!==void 0)if(typeof y=="object"&&y!==null){if(typeof y.concurrency!="number")return n.reject(new TypeError("'concurrency' must be a number but it is "+o.classString(y.concurrency)));m=y.concurrency}else return n.reject(new TypeError("options argument must be an object but it is "+o.classString(y)));return m=typeof m=="number"&&isFinite(m)&&m>=1?m:0,new h(g,v,m,x).promise()}n.prototype.map=function(g,v){return f(this,g,v,null)},n.map=function(g,v,y,x){return f(g,v,y,x)}}),nD}var iD,MN;function WH(){if(MN)return iD;MN=1;var n=Object.create;if(n){var e=n(null),t=n(null);e[" size"]=t[" size"]=0}return iD=function(i){var r=Pt(),s=r.canEvaluate,a=r.isIdentifier,o,c;{var l=function(x){return new Function("ensureMethod",`                                    
	        return function(obj) {                                               
	            'use strict'                                                     
	            var len = this.length;                                           
	            ensureMethod(obj, 'methodName');                                 
	            switch(len) {                                                    
	                case 1: return obj.methodName(this[0]);                      
	                case 2: return obj.methodName(this[0], this[1]);             
	                case 3: return obj.methodName(this[0], this[1], this[2]);    
	                case 0: return obj.methodName();                             
	                default:                                                     
	                    return obj.methodName.apply(obj, this);                  
	            }                                                                
	        };                                                                   
	        `.replace(/methodName/g,x))(f)},d=function(x){return new Function("obj",`                                             
	        'use strict';                                                        
	        return obj.propertyName;                                             
	        `.replace("propertyName",x))},h=function(x,m,b){var w=b[x];if(typeof w!="function"){if(!a(x))return null;if(w=m(x),b[x]=w,b[" size"]++,b[" size"]>512){for(var _=Object.keys(b),D=0;D<256;++D)delete b[_[D]];b[" size"]=_.length-256}}return w};o=function(x){return h(x,l,e)},c=function(x){return h(x,d,t)}}function f(x,m){var b;if(x!=null&&(b=x[m]),typeof b!="function"){var w="Object "+r.classString(x)+" has no method '"+r.toString(m)+"'";throw new i.TypeError(w)}return b}function g(x){var m=this.pop(),b=f(x,m);return b.apply(x,this)}i.prototype.call=function(x){for(var m=arguments.length,b=new Array(Math.max(m-1,0)),w=1;w<m;++w)b[w-1]=arguments[w];if(s){var _=o(x);if(_!==null)return this._then(_,void 0,void 0,b,void 0)}return b.push(x),this._then(g,void 0,void 0,b,void 0)};function v(x){return x[this]}function y(x){var m=+this;return m<0&&(m=Math.max(0,m+x.length)),x[m]}i.prototype.get=function(x){var m=typeof x=="number",b;if(m)b=y;else if(s){var w=c(x);b=w!==null?w:v}else b=v;return this._then(b,void 0,void 0,x,void 0)}},iD}var rD,BN;function qH(){return BN||(BN=1,rD=function(n,e,t,i,r,s){var a=Pt(),o=Gl().TypeError,c=Pt().inherits,l=a.errorObj,d=a.tryCatch,h={};function f(w){setTimeout(function(){throw w},0)}function g(w){var _=t(w);return _!==w&&typeof w._isDisposable=="function"&&typeof w._getDisposer=="function"&&w._isDisposable()&&_._setDisposable(w._getDisposer()),_}function v(w,_){var D=0,A=w.length,E=new n(r);function F(){if(D>=A)return E._fulfill();var I=g(w[D++]);if(I instanceof n&&I._isDisposable()){try{I=t(I._getDisposer().tryDispose(_),w.promise)}catch(z){return f(z)}if(I instanceof n)return I._then(F,f,null,null,null)}F()}return F(),E}function y(w,_,D){this._data=w,this._promise=_,this._context=D}y.prototype.data=function(){return this._data},y.prototype.promise=function(){return this._promise},y.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():h},y.prototype.tryDispose=function(w){var _=this.resource(),D=this._context;D!==void 0&&D._pushContext();var A=_!==h?this.doDispose(_,w):null;return D!==void 0&&D._popContext(),this._promise._unsetDisposable(),this._data=null,A},y.isDisposer=function(w){return w!=null&&typeof w.resource=="function"&&typeof w.tryDispose=="function"};function x(w,_,D){this.constructor$(w,_,D)}c(x,y),x.prototype.doDispose=function(w,_){var D=this.data();return D.call(w,w,_)};function m(w){return y.isDisposer(w)?(this.resources[this.index]._setDisposable(w),w.promise()):w}function b(w){this.length=w,this.promise=null,this[w-1]=null}b.prototype._resultCancelled=function(){for(var w=this.length,_=0;_<w;++_){var D=this[_];D instanceof n&&D.cancel()}},n.using=function(){var w=arguments.length;if(w<2)return e("you must pass at least 2 arguments to Promise.using");var _=arguments[w-1];if(typeof _!="function")return e("expecting a function but got "+a.classString(_));var D,A=!0;w===2&&Array.isArray(arguments[0])?(D=arguments[0],w=D.length,A=!1):(D=arguments,w--);for(var E=new b(w),F=0;F<w;++F){var I=D[F];if(y.isDisposer(I)){var z=I;I=I.promise(),I._setDisposable(z)}else{var H=t(I);H instanceof n&&(I=H._then(m,null,null,{resources:E,index:F},void 0))}E[F]=I}for(var k=new Array(E.length),F=0;F<k.length;++F)k[F]=n.resolve(E[F]).reflect();var W=n.all(k).then(function(G){for(var j=0;j<G.length;++j){var M=G[j];if(M.isRejected())return l.e=M.error(),l;if(!M.isFulfilled()){W.cancel();return}G[j]=M.value()}S._pushContext(),_=d(_);var R=A?_.apply(void 0,G):_(G),N=S._popContext();return s.checkForgottenReturns(R,N,"Promise.using",S),R}),S=W.lastly(function(){var G=new n.PromiseInspection(W);return v(E,G)});return E.promise=S,S._setOnCancel(E),S},n.prototype._setDisposable=function(w){this._bitField=this._bitField|131072,this._disposer=w},n.prototype._isDisposable=function(){return(this._bitField&131072)>0},n.prototype._getDisposer=function(){return this._disposer},n.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},n.prototype.disposer=function(w){if(typeof w=="function")return new x(w,this,i());throw new o}}),rD}var sD,LN;function $H(){return LN||(LN=1,sD=function(n,e,t){var i=Pt(),r=n.TimeoutError;function s(h){this.handle=h}s.prototype._resultCancelled=function(){clearTimeout(this.handle)};var a=function(h){return o(+this).thenReturn(h)},o=n.delay=function(h,f){var g,v;return f!==void 0?(g=n.resolve(f)._then(a,null,null,h,void 0),t.cancellation()&&f instanceof n&&g._setOnCancel(f)):(g=new n(e),v=setTimeout(function(){g._fulfill()},+h),t.cancellation()&&g._setOnCancel(new s(v)),g._captureStackTrace()),g._setAsyncGuaranteed(),g};n.prototype.delay=function(h){return o(h,this)};var c=function(h,f,g){var v;typeof f!="string"?f instanceof Error?v=f:v=new r("operation timed out"):v=new r(f),i.markAsOriginatingFromRejection(v),h._attachExtraTrace(v),h._reject(v),g!=null&&g.cancel()};function l(h){return clearTimeout(this.handle),h}function d(h){throw clearTimeout(this.handle),h}n.prototype.timeout=function(h,f){h=+h;var g,v,y=new s(setTimeout(function(){g.isPending()&&c(g,f,v)},h));return t.cancellation()?(v=this.then(),g=v._then(l,d,void 0,y,void 0),g._setOnCancel(y)):g=this._then(l,d,void 0,y,void 0),g}}),sD}var aD,IN;function HH(){return IN||(IN=1,aD=function(n,e,t,i,r,s){var a=Gl(),o=a.TypeError,c=Pt(),l=c.errorObj,d=c.tryCatch,h=[];function f(v,y,x){for(var m=0;m<y.length;++m){x._pushContext();var b=d(y[m])(v);if(x._popContext(),b===l){x._pushContext();var w=n.reject(l.e);return x._popContext(),w}var _=i(b,x);if(_ instanceof n)return _}return null}function g(v,y,x,m){if(s.cancellation()){var b=new n(t),w=this._finallyPromise=new n(t);this._promise=b.lastly(function(){return w}),b._captureStackTrace(),b._setOnCancel(this)}else{var _=this._promise=new n(t);_._captureStackTrace()}this._stack=m,this._generatorFunction=v,this._receiver=y,this._generator=void 0,this._yieldHandlers=typeof x=="function"?[x].concat(h):h,this._yieldedPromise=null,this._cancellationPhase=!1}c.inherits(g,r),g.prototype._isResolved=function(){return this._promise===null},g.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&this._finallyPromise!==null&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},g.prototype._promiseCancelled=function(){if(!this._isResolved()){var v=typeof this._generator.return<"u",y;if(v)this._promise._pushContext(),y=d(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var x=new n.CancellationError("generator .return() sentinel");n.coroutine.returnSentinel=x,this._promise._attachExtraTrace(x),this._promise._pushContext(),y=d(this._generator.throw).call(this._generator,x),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(y)}},g.prototype._promiseFulfilled=function(v){this._yieldedPromise=null,this._promise._pushContext();var y=d(this._generator.next).call(this._generator,v);this._promise._popContext(),this._continue(y)},g.prototype._promiseRejected=function(v){this._yieldedPromise=null,this._promise._attachExtraTrace(v),this._promise._pushContext();var y=d(this._generator.throw).call(this._generator,v);this._promise._popContext(),this._continue(y)},g.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof n){var v=this._yieldedPromise;this._yieldedPromise=null,v.cancel()}},g.prototype.promise=function(){return this._promise},g.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},g.prototype._continue=function(v){var y=this._promise;if(v===l)return this._cleanup(),this._cancellationPhase?y.cancel():y._rejectCallback(v.e,!1);var x=v.value;if(v.done===!0)return this._cleanup(),this._cancellationPhase?y.cancel():y._resolveCallback(x);var m=i(x,this._promise);if(!(m instanceof n)&&(m=f(m,this._yieldHandlers,this._promise),m===null)){this._promiseRejected(new o(`A value %s was yielded that could not be treated as a promise

    See http://goo.gl/MqrFmX

`.replace("%s",x)+`From coroutine:
`+this._stack.split(`
`).slice(1,-7).join(`
`)));return}m=m._target();var b=m._bitField;b&50397184?b&33554432?n._async.invoke(this._promiseFulfilled,this,m._value()):b&16777216?n._async.invoke(this._promiseRejected,this,m._reason()):this._promiseCancelled():(this._yieldedPromise=m,m._proxy(this,null))},n.coroutine=function(v,y){if(typeof v!="function")throw new o(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var x=Object(y).yieldHandler,m=g,b=new Error().stack;return function(){var w=v.apply(this,arguments),_=new m(void 0,void 0,x,b),D=_.promise();return _._generator=w,_._promiseFulfilled(void 0),D}},n.coroutine.addYieldHandler=function(v){if(typeof v!="function")throw new o("expecting a function but got "+c.classString(v));h.push(v)},n.spawn=function(v){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),typeof v!="function")return e(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var y=new g(v,this),x=y.promise();return y._run(n.spawn),x}}),aD}var oD,PN;function VH(){return PN||(PN=1,oD=function(n){var e=Pt(),t=n._async,i=e.tryCatch,r=e.errorObj;function s(c,l){var d=this;if(!e.isArray(c))return a.call(d,c,l);var h=i(l).apply(d._boundValue(),[null].concat(c));h===r&&t.throwLater(h.e)}function a(c,l){var d=this,h=d._boundValue(),f=c===void 0?i(l).call(h,null):i(l).call(h,null,c);f===r&&t.throwLater(f.e)}function o(c,l){var d=this;if(!c){var h=new Error(c+"");h.cause=c,c=h}var f=i(l).call(d._boundValue(),c);f===r&&t.throwLater(f.e)}n.prototype.asCallback=n.prototype.nodeify=function(c,l){if(typeof c=="function"){var d=a;l!==void 0&&Object(l).spread&&(d=s),this._then(d,o,void 0,this,c)}return this}}),oD}var cD,zN;function GH(){return zN||(zN=1,cD=function(n,e){var t={},i=Pt(),r=wB(),s=i.withAppended,a=i.maybeWrapAsError,o=i.canEvaluate,c=Gl().TypeError,l="Async",d={__isPromisified__:!0},h=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],f=new RegExp("^(?:"+h.join("|")+")$"),g=function(W){return i.isIdentifier(W)&&W.charAt(0)!=="_"&&W!=="constructor"};function v(W){return!f.test(W)}function y(W){try{return W.__isPromisified__===!0}catch{return!1}}function x(W,S,G){var j=i.getDataPropertyOrDefault(W,S+G,d);return j?y(j):!1}function m(W,S,G){for(var j=0;j<W.length;j+=2){var M=W[j];if(G.test(M)){for(var R=M.replace(G,""),N=0;N<W.length;N+=2)if(W[N]===R)throw new c(`Cannot promisify an API that has normal methods with '%s'-suffix

    See http://goo.gl/MqrFmX
`.replace("%s",S))}}}function b(W,S,G,j){for(var M=i.inheritedDataKeys(W),R=[],N=0;N<M.length;++N){var B=M[N],L=W[B],P=j===g?!0:g(B);typeof L=="function"&&!y(L)&&!x(W,B,S)&&j(B,L,W,P)&&R.push(B,L)}return m(R,S,G),R}var w=function(W){return W.replace(/([$])/,"\\$")},_;{var D=function(W){for(var S=[W],G=Math.max(0,W-1-3),j=W-1;j>=G;--j)S.push(j);for(var j=W+1;j<=3;++j)S.push(j);return S},A=function(W){return i.filledRange(W,"_arg","")},E=function(W){return i.filledRange(Math.max(W,3),"_arg","")},F=function(W){return typeof W.length=="number"?Math.max(Math.min(W.length,1024),0):0};_=function(W,S,G,j,M,R){var N=Math.max(0,F(j)-1),B=D(N),L=typeof W=="string"||S===t;function P(be){var ye=A(be).join(", "),fe=be>0?", ":"",xe;return L?xe=`ret = callback.call(this, {{args}}, nodeback); break;
`:xe=S===void 0?`ret = callback({{args}}, nodeback); break;
`:`ret = callback.call(receiver, {{args}}, nodeback); break;
`,xe.replace("{{args}}",ye).replace(", ",fe)}function q(){for(var be="",ye=0;ye<B.length;++ye)be+="case "+B[ye]+":"+P(B[ye]);return be+=`                                                             
	        default:                                                             
	            var args = new Array(len + 1);                                   
	            var i = 0;                                                       
	            for (var i = 0; i < len; ++i) {                                  
	               args[i] = arguments[i];                                       
	            }                                                                
	            args[i] = nodeback;                                              
	            [CodeForCall]                                                    
	            break;                                                           
	        `.replace("[CodeForCall]",L?`ret = callback.apply(this, args);
`:`ret = callback.apply(receiver, args);
`),be}var Q=typeof W=="string"?"this != null ? this['"+W+"'] : fn":"fn",se=`'use strict';                                                
	        var ret = function (Parameters) {                                    
	            'use strict';                                                    
	            var len = arguments.length;                                      
	            var promise = new Promise(INTERNAL);                             
	            promise._captureStackTrace();                                    
	            var nodeback = nodebackForPromise(promise, `+R+`);   
	            var ret;                                                         
	            var callback = tryCatch([GetFunctionCode]);                      
	            switch(len) {                                                    
	                [CodeForSwitchCase]                                          
	            }                                                                
	            if (ret === errorObj) {                                          
	                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);
	            }                                                                
	            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     
	            return promise;                                                  
	        };                                                                   
	        notEnumerableProp(ret, '__isPromisified__', true);                   
	        return ret;                                                          
	    `.replace("[CodeForSwitchCase]",q()).replace("[GetFunctionCode]",Q);return se=se.replace("Parameters",E(N)),new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL",se)(n,j,S,s,a,r,i.tryCatch,i.errorObj,i.notEnumerableProp,e)}}function I(W,S,G,j,M,R){var N=function(){return this}(),B=W;typeof B=="string"&&(W=j);function L(){var P=S;S===t&&(P=this);var q=new n(e);q._captureStackTrace();var Q=typeof B=="string"&&this!==N?this[B]:W,se=r(q,R);try{Q.apply(P,s(arguments,se))}catch(be){q._rejectCallback(a(be),!0,!0)}return q._isFateSealed()||q._setAsyncGuaranteed(),q}return i.notEnumerableProp(L,"__isPromisified__",!0),L}var z=o?_:I;function H(W,S,G,j,M){for(var R=new RegExp(w(S)+"$"),N=b(W,S,R,G),B=0,L=N.length;B<L;B+=2){var P=N[B],q=N[B+1],Q=P+S;if(j===z)W[Q]=z(P,t,P,q,S,M);else{var se=j(q,function(){return z(P,t,P,q,S,M)});i.notEnumerableProp(se,"__isPromisified__",!0),W[Q]=se}}return i.toFastProperties(W),W}function k(W,S,G){return z(W,S,void 0,W,null,G)}n.promisify=function(W,S){if(typeof W!="function")throw new c("expecting a function but got "+i.classString(W));if(y(W))return W;S=Object(S);var G=S.context===void 0?t:S.context,j=!!S.multiArgs,M=k(W,G,j);return i.copyDescriptors(W,M,v),M},n.promisifyAll=function(W,S){if(typeof W!="function"&&typeof W!="object")throw new c(`the target of promisifyAll must be an object or a function

    See http://goo.gl/MqrFmX
`);S=Object(S);var G=!!S.multiArgs,j=S.suffix;typeof j!="string"&&(j=l);var M=S.filter;typeof M!="function"&&(M=g);var R=S.promisifier;if(typeof R!="function"&&(R=z),!i.isIdentifier(j))throw new RangeError(`suffix must be a valid identifier

    See http://goo.gl/MqrFmX
`);for(var N=i.inheritedDataKeys(W),B=0;B<N.length;++B){var L=W[N[B]];N[B]!=="constructor"&&i.isClass(L)&&(H(L.prototype,j,M,R,G),H(L,j,M,R,G))}return H(W,j,M,R,G)}}),cD}var lD,WN;function XH(){return WN||(WN=1,lD=function(n,e,t,i){var r=Pt(),s=r.isObject,a=Cg(),o;typeof Map=="function"&&(o=Map);var c=function(){var f=0,g=0;function v(y,x){this[f]=y,this[f+g]=x,f++}return function(x){g=x.size,f=0;var m=new Array(x.size*2);return x.forEach(v,m),m}}(),l=function(f){for(var g=new o,v=f.length/2|0,y=0;y<v;++y){var x=f[v+y],m=f[y];g.set(x,m)}return g};function d(f){var g=!1,v;if(o!==void 0&&f instanceof o)v=c(f),g=!0;else{var y=a.keys(f),x=y.length;v=new Array(x*2);for(var m=0;m<x;++m){var b=y[m];v[m]=f[b],v[m+x]=b}}this.constructor$(v),this._isMap=g,this._init$(void 0,-3)}r.inherits(d,e),d.prototype._init=function(){},d.prototype._promiseFulfilled=function(f,g){this._values[g]=f;var v=++this._totalResolved;if(v>=this._length){var y;if(this._isMap)y=l(this._values);else{y={};for(var x=this.length(),m=0,b=this.length();m<b;++m)y[this._values[m+x]]=this._values[m]}return this._resolve(y),!0}return!1},d.prototype.shouldCopyValues=function(){return!1},d.prototype.getActualLength=function(f){return f>>1};function h(f){var g,v=t(f);if(s(v))v instanceof n?g=v._then(n.props,void 0,void 0,void 0,void 0):g=new d(v).promise();else return i(`cannot await properties of a non-object

    See http://goo.gl/MqrFmX
`);return v instanceof n&&g._propagateFrom(v,2),g}n.prototype.props=function(){return h(this)},n.props=function(f){return h(f)}}),lD}var uD,qN;function YH(){return qN||(qN=1,uD=function(n,e,t,i){var r=Pt(),s=function(o){return o.then(function(c){return a(c,o)})};function a(o,c){var l=t(o);if(l instanceof n)return s(l);if(o=r.asArray(o),o===null)return i("expecting an array or an iterable object but got "+r.classString(o));var d=new n(e);c!==void 0&&d._propagateFrom(c,3);for(var h=d._fulfill,f=d._reject,g=0,v=o.length;g<v;++g){var y=o[g];y===void 0&&!(g in o)||n.cast(y)._then(h,f,void 0,d,null)}return d}n.race=function(o){return a(o,void 0)},n.prototype.race=function(){return a(this,void 0)}}),uD}var dD,$N;function KH(){return $N||($N=1,dD=function(n,e,t,i,r,s){var a=n._getDomain,o=Pt(),c=o.tryCatch;function l(v,y,x,m){this.constructor$(v);var b=a();this._fn=b===null?y:o.domainBind(b,y),x!==void 0&&(x=n.resolve(x),x._attachCancellationCallback(this)),this._initialValue=x,this._currentCancellable=null,m===r?this._eachValues=Array(this._length):m===0?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}o.inherits(l,e),l.prototype._gotAccum=function(v){this._eachValues!==void 0&&this._eachValues!==null&&v!==r&&this._eachValues.push(v)},l.prototype._eachComplete=function(v){return this._eachValues!==null&&this._eachValues.push(v),this._eachValues},l.prototype._init=function(){},l.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==void 0?this._eachValues:this._initialValue)},l.prototype.shouldCopyValues=function(){return!1},l.prototype._resolve=function(v){this._promise._resolveCallback(v),this._values=null},l.prototype._resultCancelled=function(v){if(v===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof n&&this._currentCancellable.cancel(),this._initialValue instanceof n&&this._initialValue.cancel())},l.prototype._iterate=function(v){this._values=v;var y,x,m=v.length;if(this._initialValue!==void 0?(y=this._initialValue,x=0):(y=n.resolve(v[0]),x=1),this._currentCancellable=y,!y.isRejected())for(;x<m;++x){var b={accum:null,value:v[x],index:x,length:m,array:this};y=y._then(f,void 0,void 0,b,void 0)}this._eachValues!==void 0&&(y=y._then(this._eachComplete,void 0,void 0,this,void 0)),y._then(d,d,void 0,y,this)},n.prototype.reduce=function(v,y){return h(this,v,y,null)},n.reduce=function(v,y,x,m){return h(v,y,x,m)};function d(v,y){this.isFulfilled()?y._resolve(v):y._reject(v)}function h(v,y,x,m){if(typeof y!="function")return t("expecting a function but got "+o.classString(y));var b=new l(v,y,x,m);return b.promise()}function f(v){this.accum=v,this.array._gotAccum(v);var y=i(this.value,this.array._promise);return y instanceof n?(this.array._currentCancellable=y,y._then(g,void 0,void 0,this,void 0)):g.call(this,y)}function g(v){var y=this.array,x=y._promise,m=c(y._fn);x._pushContext();var b;y._eachValues!==void 0?b=m.call(x._boundValue(),v,this.index,this.length):b=m.call(x._boundValue(),this.accum,v,this.index,this.length),b instanceof n&&(y._currentCancellable=b);var w=x._popContext();return s.checkForgottenReturns(b,w,y._eachValues!==void 0?"Promise.each":"Promise.reduce",x),b}}),dD}var hD,HN;function QH(){return HN||(HN=1,hD=function(n,e,t){var i=n.PromiseInspection,r=Pt();function s(a){this.constructor$(a)}r.inherits(s,e),s.prototype._promiseResolved=function(a,o){this._values[a]=o;var c=++this._totalResolved;return c>=this._length?(this._resolve(this._values),!0):!1},s.prototype._promiseFulfilled=function(a,o){var c=new i;return c._bitField=33554432,c._settledValueField=a,this._promiseResolved(o,c)},s.prototype._promiseRejected=function(a,o){var c=new i;return c._bitField=16777216,c._settledValueField=a,this._promiseResolved(o,c)},n.settle=function(a){return t.deprecated(".settle()",".reflect()"),new s(a).promise()},n.prototype.settle=function(){return n.settle(this)}}),hD}var fD,VN;function JH(){return VN||(VN=1,fD=function(n,e,t){var i=Pt(),r=Gl().RangeError,s=Gl().AggregateError,a=i.isArray,o={};function c(d){this.constructor$(d),this._howMany=0,this._unwrap=!1,this._initialized=!1}i.inherits(c,e),c.prototype._init=function(){if(this._initialized){if(this._howMany===0){this._resolve([]);return}this._init$(void 0,-5);var d=a(this._values);!this._isResolved()&&d&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},c.prototype.init=function(){this._initialized=!0,this._init()},c.prototype.setUnwrap=function(){this._unwrap=!0},c.prototype.howMany=function(){return this._howMany},c.prototype.setHowMany=function(d){this._howMany=d},c.prototype._promiseFulfilled=function(d){return this._addFulfilled(d),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),this.howMany()===1&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},c.prototype._promiseRejected=function(d){return this._addRejected(d),this._checkOutcome()},c.prototype._promiseCancelled=function(){return this._values instanceof n||this._values==null?this._cancel():(this._addRejected(o),this._checkOutcome())},c.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var d=new s,h=this.length();h<this._values.length;++h)this._values[h]!==o&&d.push(this._values[h]);return d.length>0?this._reject(d):this._cancel(),!0}return!1},c.prototype._fulfilled=function(){return this._totalResolved},c.prototype._rejected=function(){return this._values.length-this.length()},c.prototype._addRejected=function(d){this._values.push(d)},c.prototype._addFulfilled=function(d){this._values[this._totalResolved++]=d},c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},c.prototype._getRangeError=function(d){var h="Input array must contain at least "+this._howMany+" items but contains only "+d+" items";return new r(h)},c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};function l(d,h){if((h|0)!==h||h<0)return t(`expecting a positive integer

    See http://goo.gl/MqrFmX
`);var f=new c(d),g=f.promise();return f.setHowMany(h),f.init(),g}n.some=function(d,h){return l(d,h)},n.prototype.some=function(d){return l(this,d)},n._SomePromiseArray=c}),fD}var pD,GN;function ZH(){return GN||(GN=1,pD=function(n,e){var t=n.map;n.prototype.filter=function(i,r){return t(this,i,r,e)},n.filter=function(i,r,s){return t(i,r,s,e)}}),pD}var gD,XN;function eV(){return XN||(XN=1,gD=function(n,e){var t=n.reduce,i=n.all;function r(){return i(this)}function s(a,o){return t(a,o,e,e)}n.prototype.each=function(a){return t(this,a,e,0)._then(r,void 0,void 0,this,void 0)},n.prototype.mapSeries=function(a){return t(this,a,e,e)},n.each=function(a,o){return t(a,o,e,0)._then(r,void 0,void 0,a,void 0)},n.mapSeries=s}),gD}var mD,YN;function tV(){return YN||(YN=1,mD=function(n){var e=n._SomePromiseArray;function t(i){var r=new e(i),s=r.promise();return r.setHowMany(1),r.setUnwrap(),r.init(),s}n.any=function(i){return t(i)},n.prototype.any=function(){return t(this)}}),mD}(function(n){n.exports=function(){var e=function(){return new f(`circular promise resolution chain

    See http://goo.gl/MqrFmX
`)},t=function(){return new k.PromiseInspection(this._target())},i=function(j){return k.reject(new f(j))};function r(){}var s={},a=Pt(),o;a.isNode?o=function(){var j=process.domain;return j===void 0&&(j=null),j}:o=function(){return null},a.notEnumerableProp(k,"_getDomain",o);var c=Cg(),l=CH(),d=new l;c.defineProperty(k,"_async",{value:d});var h=Gl(),f=k.TypeError=h.TypeError;k.RangeError=h.RangeError;var g=k.CancellationError=h.CancellationError;k.TimeoutError=h.TimeoutError,k.OperationalError=h.OperationalError,k.RejectionError=h.OperationalError,k.AggregateError=h.AggregateError;var v=function(){},y={},x={},m=kH()(k,v),b=UH()(k,v,m,i,r),w=NH()(k),_=w.create,D=jH()(k,w);D.CapturedTrace;var A=RH()(k,m),E=FH()(x),F=wB(),I=a.errorObj,z=a.tryCatch;function H(j,M){if(typeof M!="function")throw new f("expecting a function but got "+a.classString(M));if(j.constructor!==k)throw new f(`the promise constructor cannot be invoked directly

    See http://goo.gl/MqrFmX
`)}function k(j){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,j!==v&&(H(this,j),this._resolveFromExecutor(j)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}k.prototype.toString=function(){return"[object Promise]"},k.prototype.caught=k.prototype.catch=function(j){var M=arguments.length;if(M>1){var R=new Array(M-1),N=0,B;for(B=0;B<M-1;++B){var L=arguments[B];if(a.isObject(L))R[N++]=L;else return i("expecting an object but got A catch statement predicate "+a.classString(L))}return R.length=N,j=arguments[B],this.then(void 0,E(R,j,this))}return this.then(void 0,j)},k.prototype.reflect=function(){return this._then(t,t,void 0,this,void 0)},k.prototype.then=function(j,M){if(D.warnings()&&arguments.length>0&&typeof j!="function"&&typeof M!="function"){var R=".then() only accepts functions but was passed: "+a.classString(j);arguments.length>1&&(R+=", "+a.classString(M)),this._warn(R)}return this._then(j,M,void 0,void 0,void 0)},k.prototype.done=function(j,M){var R=this._then(j,M,void 0,void 0,void 0);R._setIsFinal()},k.prototype.spread=function(j){return typeof j!="function"?i("expecting a function but got "+a.classString(j)):this.all()._then(j,void 0,void 0,y,void 0)},k.prototype.toJSON=function(){var j={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(j.fulfillmentValue=this.value(),j.isFulfilled=!0):this.isRejected()&&(j.rejectionReason=this.reason(),j.isRejected=!0),j},k.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new b(this).promise()},k.prototype.error=function(j){return this.caught(a.originatesFromRejection,j)},k.getNewLibraryCopy=n.exports,k.is=function(j){return j instanceof k},k.fromNode=k.fromCallback=function(j){var M=new k(v);M._captureStackTrace();var R=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,N=z(j)(F(M,R));return N===I&&M._rejectCallback(N.e,!0),M._isFateSealed()||M._setAsyncGuaranteed(),M},k.all=function(j){return new b(j).promise()},k.cast=function(j){var M=m(j);return M instanceof k||(M=new k(v),M._captureStackTrace(),M._setFulfilled(),M._rejectionHandler0=j),M},k.resolve=k.fulfilled=k.cast,k.reject=k.rejected=function(j){var M=new k(v);return M._captureStackTrace(),M._rejectCallback(j,!0),M},k.setScheduler=function(j){if(typeof j!="function")throw new f("expecting a function but got "+a.classString(j));return d.setScheduler(j)},k.prototype._then=function(j,M,R,N,B){var L=B!==void 0,P=L?B:new k(v),q=this._target(),Q=q._bitField;L||(P._propagateFrom(this,3),P._captureStackTrace(),N===void 0&&this._bitField&2097152&&(Q&50397184?N=this._boundValue():N=q===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,P));var se=o();if(Q&50397184){var be,ye,fe=q._settlePromiseCtx;Q&33554432?(ye=q._rejectionHandler0,be=j):Q&16777216?(ye=q._fulfillmentHandler0,be=M,q._unsetRejectionIsUnhandled()):(fe=q._settlePromiseLateCancellationObserver,ye=new g("late cancellation observer"),q._attachExtraTrace(ye),be=M),d.invoke(fe,q,{handler:se===null?be:typeof be=="function"&&a.domainBind(se,be),promise:P,receiver:N,value:ye})}else q._addCallbacks(j,M,P,N,se);return P},k.prototype._length=function(){return this._bitField&65535},k.prototype._isFateSealed=function(){return(this._bitField&117506048)!==0},k.prototype._isFollowing=function(){return(this._bitField&67108864)===67108864},k.prototype._setLength=function(j){this._bitField=this._bitField&-65536|j&65535},k.prototype._setFulfilled=function(){this._bitField=this._bitField|33554432,this._fireEvent("promiseFulfilled",this)},k.prototype._setRejected=function(){this._bitField=this._bitField|16777216,this._fireEvent("promiseRejected",this)},k.prototype._setFollowing=function(){this._bitField=this._bitField|67108864,this._fireEvent("promiseResolved",this)},k.prototype._setIsFinal=function(){this._bitField=this._bitField|4194304},k.prototype._isFinal=function(){return(this._bitField&4194304)>0},k.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},k.prototype._setCancelled=function(){this._bitField=this._bitField|65536,this._fireEvent("promiseCancelled",this)},k.prototype._setWillBeCancelled=function(){this._bitField=this._bitField|8388608},k.prototype._setAsyncGuaranteed=function(){d.hasCustomScheduler()||(this._bitField=this._bitField|134217728)},k.prototype._receiverAt=function(j){var M=j===0?this._receiver0:this[j*4-4+3];if(M!==s)return M===void 0&&this._isBound()?this._boundValue():M},k.prototype._promiseAt=function(j){return this[j*4-4+2]},k.prototype._fulfillmentHandlerAt=function(j){return this[j*4-4+0]},k.prototype._rejectionHandlerAt=function(j){return this[j*4-4+1]},k.prototype._boundValue=function(){},k.prototype._migrateCallback0=function(j){j._bitField;var M=j._fulfillmentHandler0,R=j._rejectionHandler0,N=j._promise0,B=j._receiverAt(0);B===void 0&&(B=s),this._addCallbacks(M,R,N,B,null)},k.prototype._migrateCallbackAt=function(j,M){var R=j._fulfillmentHandlerAt(M),N=j._rejectionHandlerAt(M),B=j._promiseAt(M),L=j._receiverAt(M);L===void 0&&(L=s),this._addCallbacks(R,N,B,L,null)},k.prototype._addCallbacks=function(j,M,R,N,B){var L=this._length();if(L>=65531&&(L=0,this._setLength(0)),L===0)this._promise0=R,this._receiver0=N,typeof j=="function"&&(this._fulfillmentHandler0=B===null?j:a.domainBind(B,j)),typeof M=="function"&&(this._rejectionHandler0=B===null?M:a.domainBind(B,M));else{var P=L*4-4;this[P+2]=R,this[P+3]=N,typeof j=="function"&&(this[P+0]=B===null?j:a.domainBind(B,j)),typeof M=="function"&&(this[P+1]=B===null?M:a.domainBind(B,M))}return this._setLength(L+1),L},k.prototype._proxy=function(j,M){this._addCallbacks(void 0,void 0,M,j,null)},k.prototype._resolveCallback=function(j,M){if(!(this._bitField&117506048)){if(j===this)return this._rejectCallback(e(),!1);var R=m(j,this);if(!(R instanceof k))return this._fulfill(j);M&&this._propagateFrom(R,2);var N=R._target();if(N===this){this._reject(e());return}var B=N._bitField;if(B&50397184)if(B&33554432)this._fulfill(N._value());else if(B&16777216)this._reject(N._reason());else{var q=new g("late cancellation observer");N._attachExtraTrace(q),this._reject(q)}else{var L=this._length();L>0&&N._migrateCallback0(this);for(var P=1;P<L;++P)N._migrateCallbackAt(this,P);this._setFollowing(),this._setLength(0),this._setFollowee(N)}}},k.prototype._rejectCallback=function(j,M,R){var N=a.ensureErrorObject(j),B=N===j;if(!B&&!R&&D.warnings()){var L="a promise was rejected with a non-error: "+a.classString(j);this._warn(L,!0)}this._attachExtraTrace(N,M?B:!1),this._reject(j)},k.prototype._resolveFromExecutor=function(j){var M=this;this._captureStackTrace(),this._pushContext();var R=!0,N=this._execute(j,function(B){M._resolveCallback(B)},function(B){M._rejectCallback(B,R)});R=!1,this._popContext(),N!==void 0&&M._rejectCallback(N,!0)},k.prototype._settlePromiseFromHandler=function(j,M,R,N){var B=N._bitField;if(!(B&65536)){N._pushContext();var L;M===y?!R||typeof R.length!="number"?(L=I,L.e=new f("cannot .spread() a non-array: "+a.classString(R))):L=z(j).apply(this._boundValue(),R):L=z(j).call(M,R);var P=N._popContext();B=N._bitField,!(B&65536)&&(L===x?N._reject(R):L===I?N._rejectCallback(L.e,!1):(D.checkForgottenReturns(L,P,"",N,this),N._resolveCallback(L)))}},k.prototype._target=function(){for(var j=this;j._isFollowing();)j=j._followee();return j},k.prototype._followee=function(){return this._rejectionHandler0},k.prototype._setFollowee=function(j){this._rejectionHandler0=j},k.prototype._settlePromise=function(j,M,R,N){var B=j instanceof k,L=this._bitField,P=(L&134217728)!==0;L&65536?(B&&j._invokeInternalOnCancel(),R instanceof A&&R.isFinallyHandler()?(R.cancelPromise=j,z(M).call(R,N)===I&&j._reject(I.e)):M===t?j._fulfill(t.call(R)):R instanceof r?R._promiseCancelled(j):B||j instanceof b?j._cancel():R.cancel()):typeof M=="function"?B?(P&&j._setAsyncGuaranteed(),this._settlePromiseFromHandler(M,R,N,j)):M.call(R,N,j):R instanceof r?R._isResolved()||(L&33554432?R._promiseFulfilled(N,j):R._promiseRejected(N,j)):B&&(P&&j._setAsyncGuaranteed(),L&33554432?j._fulfill(N):j._reject(N))},k.prototype._settlePromiseLateCancellationObserver=function(j){var M=j.handler,R=j.promise,N=j.receiver,B=j.value;typeof M=="function"?R instanceof k?this._settlePromiseFromHandler(M,N,B,R):M.call(N,B,R):R instanceof k&&R._reject(B)},k.prototype._settlePromiseCtx=function(j){this._settlePromise(j.promise,j.handler,j.receiver,j.value)},k.prototype._settlePromise0=function(j,M,R){var N=this._promise0,B=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(N,j,B,M)},k.prototype._clearCallbackDataAtIndex=function(j){var M=j*4-4;this[M+2]=this[M+3]=this[M+0]=this[M+1]=void 0},k.prototype._fulfill=function(j){var M=this._bitField;if(!((M&117506048)>>>16)){if(j===this){var R=e();return this._attachExtraTrace(R),this._reject(R)}this._setFulfilled(),this._rejectionHandler0=j,(M&65535)>0&&(M&134217728?this._settlePromises():d.settlePromises(this))}},k.prototype._reject=function(j){var M=this._bitField;if(!((M&117506048)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=j,this._isFinal())return d.fatalError(j,a.isNode);(M&65535)>0?d.settlePromises(this):this._ensurePossibleRejectionHandled()}},k.prototype._fulfillPromises=function(j,M){for(var R=1;R<j;R++){var N=this._fulfillmentHandlerAt(R),B=this._promiseAt(R),L=this._receiverAt(R);this._clearCallbackDataAtIndex(R),this._settlePromise(B,N,L,M)}},k.prototype._rejectPromises=function(j,M){for(var R=1;R<j;R++){var N=this._rejectionHandlerAt(R),B=this._promiseAt(R),L=this._receiverAt(R);this._clearCallbackDataAtIndex(R),this._settlePromise(B,N,L,M)}},k.prototype._settlePromises=function(){var j=this._bitField,M=j&65535;if(M>0){if(j&16842752){var R=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,R,j),this._rejectPromises(M,R)}else{var N=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,N,j),this._fulfillPromises(M,N)}this._setLength(0)}this._clearCancellationData()},k.prototype._settledValue=function(){var j=this._bitField;if(j&33554432)return this._rejectionHandler0;if(j&16777216)return this._fulfillmentHandler0};function W(j){this.promise._resolveCallback(j)}function S(j){this.promise._rejectCallback(j,!1)}k.defer=k.pending=function(){D.deprecated("Promise.defer","new Promise");var j=new k(v);return{promise:j,resolve:W,reject:S}},a.notEnumerableProp(k,"_makeSelfResolutionError",e),OH()(k,v,m,i,D),MH()(k,v,m,D),BH()(k,b,i,D),LH()(k),IH()(k),PH()(k,b,m,v,d,o),k.Promise=k,k.version="3.4.7",zH()(k,b,i,m,v,D),WH()(k),qH()(k,i,m,_,v,D),$H()(k,v,D),HH()(k,i,v,m,r,D),VH()(k),GH()(k,v),XH()(k,b,m,i),YH()(k,v,m,i),KH()(k,b,i,m,v,D),QH()(k,b,D),JH()(k,b,i),ZH()(k,v),eV()(k,v),tV()(k),a.toFastProperties(k),a.toFastProperties(k.prototype);function G(j){var M=new k(v);M._fulfillmentHandler0=j,M._rejectionHandler0=j,M._promise0=j,M._receiver0=j}return G({a:1}),G({b:2}),G({c:3}),G(1),G(function(){}),G(void 0),G(!1),G(new k(v)),D.setBounds(l.firstLineError,a.lastLineError),k}})(xB);var nV=xB.exports,iV=mn,pr=nV();Gn.defer=rV;Gn.when=pr.resolve;Gn.resolve=pr.resolve;Gn.all=pr.all;Gn.props=pr.props;Gn.reject=pr.reject;Gn.promisify=pr.promisify;Gn.mapSeries=pr.mapSeries;Gn.attempt=pr.attempt;Gn.nfcall=function(n){var e=Array.prototype.slice.call(arguments,1),t=pr.promisify(n);return t.apply(null,e)};pr.prototype.fail=pr.prototype.caught;pr.prototype.also=function(n){return this.then(function(e){var t=iV.extend({},e,n(e));return pr.props(t)})};function rV(){var n,e,t=new pr.Promise(function(i,r){n=i,e=r});return{resolve:n,reject:e,promise:t}}var nt={},sV=mn,pi=nt.types={document:"document",paragraph:"paragraph",run:"run",text:"text",tab:"tab",checkbox:"checkbox",hyperlink:"hyperlink",noteReference:"noteReference",image:"image",note:"note",commentReference:"commentReference",comment:"comment",table:"table",tableRow:"tableRow",tableCell:"tableCell",break:"break",bookmarkStart:"bookmarkStart"};function aV(n,e){return e=e||{},{type:pi.document,children:n,notes:e.notes||new tw({}),comments:e.comments||[]}}function oV(n,e){e=e||{};var t=e.indent||{};return{type:pi.paragraph,children:n,styleId:e.styleId||null,styleName:e.styleName||null,numbering:e.numbering||null,alignment:e.alignment||null,indent:{start:t.start||null,end:t.end||null,firstLine:t.firstLine||null,hanging:t.hanging||null}}}function cV(n,e){return e=e||{},{type:pi.run,children:n,styleId:e.styleId||null,styleName:e.styleName||null,isBold:!!e.isBold,isUnderline:!!e.isUnderline,isItalic:!!e.isItalic,isStrikethrough:!!e.isStrikethrough,isAllCaps:!!e.isAllCaps,isSmallCaps:!!e.isSmallCaps,verticalAlignment:e.verticalAlignment||_B.baseline,font:e.font||null,fontSize:e.fontSize||null,highlight:e.highlight||null}}var _B={baseline:"baseline",superscript:"superscript",subscript:"subscript"};function lV(n){return{type:pi.text,value:n}}function uV(){return{type:pi.tab}}function dV(n){return{type:pi.checkbox,checked:n.checked}}function hV(n,e){return{type:pi.hyperlink,children:n,href:e.href,anchor:e.anchor,targetFrame:e.targetFrame}}function fV(n){return{type:pi.noteReference,noteType:n.noteType,noteId:n.noteId}}function tw(n){this._notes=sV.indexBy(n,function(e){return DB(e.noteType,e.noteId)})}tw.prototype.resolve=function(n){return this.findNoteByKey(DB(n.noteType,n.noteId))};tw.prototype.findNoteByKey=function(n){return this._notes[n]||null};function pV(n){return{type:pi.note,noteType:n.noteType,noteId:n.noteId,body:n.body}}function gV(n){return{type:pi.commentReference,commentId:n.commentId}}function mV(n){return{type:pi.comment,commentId:n.commentId,body:n.body,authorName:n.authorName,authorInitials:n.authorInitials}}function DB(n,e){return n+"-"+e}function yV(n){return{type:pi.image,read:function(e){return e?n.readImage(e):n.readImage().then(function(t){return Buffer.from(t)})},readAsArrayBuffer:function(){return n.readImage()},readAsBase64String:function(){return n.readImage("base64")},readAsBuffer:function(){return n.readImage().then(function(e){return Buffer.from(e)})},altText:n.altText,contentType:n.contentType}}function bV(n,e){return e=e||{},{type:pi.table,children:n,styleId:e.styleId||null,styleName:e.styleName||null}}function vV(n,e){return e=e||{},{type:pi.tableRow,children:n,isHeader:e.isHeader||!1}}function xV(n,e){return e=e||{},{type:pi.tableCell,children:n,colSpan:e.colSpan==null?1:e.colSpan,rowSpan:e.rowSpan==null?1:e.rowSpan}}function XC(n){return{type:pi.break,breakType:n}}function wV(n){return{type:pi.bookmarkStart,name:n.name}}nt.document=nt.Document=aV;nt.paragraph=nt.Paragraph=oV;nt.run=nt.Run=cV;nt.text=nt.Text=lV;nt.tab=nt.Tab=uV;nt.checkbox=nt.Checkbox=dV;nt.Hyperlink=hV;nt.noteReference=nt.NoteReference=fV;nt.Notes=tw;nt.Note=pV;nt.commentReference=gV;nt.comment=mV;nt.Image=yV;nt.Table=bV;nt.TableRow=vV;nt.TableCell=xV;nt.lineBreak=XC("line");nt.pageBreak=XC("page");nt.columnBreak=XC("column");nt.BookmarkStart=wV;nt.verticalAlignment=_B;var ns={},yy=mn;ns.Result=qa;ns.success=_V;ns.warning=DV;ns.error=AV;function qa(n,e){this.value=n,this.messages=e||[]}qa.prototype.map=function(n){return new qa(n(this.value),this.messages)};qa.prototype.flatMap=function(n){var e=n(this.value);return new qa(e.value,YC([this,e]))};qa.prototype.flatMapThen=function(n){var e=this;return n(this.value).then(function(t){return new qa(t.value,YC([e,t]))})};qa.combine=function(n){var e=yy.flatten(yy.pluck(n,"value")),t=YC(n);return new qa(e,t)};function _V(n){return new qa(n,[])}function DV(n){return{type:"warning",message:n}}function AV(n){return{type:"error",message:n.message,error:n}}function YC(n){var e=[];return yy.flatten(yy.pluck(n,"messages"),!0).forEach(function(t){EV(e,t)||e.push(t)}),e}function EV(n,e){return yy.find(n,SV.bind(null,e))!==void 0}function SV(n,e){return n.type===e.type&&n.message===e.message}var B0={},nw={};nw.byteLength=kV;nw.toByteArray=NV;nw.fromByteArray=FV;var Oa=[],as=[],TV=typeof Uint8Array<"u"?Uint8Array:Array,yD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ah=0,CV=yD.length;Ah<CV;++Ah)Oa[Ah]=yD[Ah],as[yD.charCodeAt(Ah)]=Ah;as[45]=62;as[95]=63;function AB(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var i=t===e?0:4-t%4;return[t,i]}function kV(n){var e=AB(n),t=e[0],i=e[1];return(t+i)*3/4-i}function UV(n,e,t){return(e+t)*3/4-t}function NV(n){var e,t=AB(n),i=t[0],r=t[1],s=new TV(UV(n,i,r)),a=0,o=r>0?i-4:i,c;for(c=0;c<o;c+=4)e=as[n.charCodeAt(c)]<<18|as[n.charCodeAt(c+1)]<<12|as[n.charCodeAt(c+2)]<<6|as[n.charCodeAt(c+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return r===2&&(e=as[n.charCodeAt(c)]<<2|as[n.charCodeAt(c+1)]>>4,s[a++]=e&255),r===1&&(e=as[n.charCodeAt(c)]<<10|as[n.charCodeAt(c+1)]<<4|as[n.charCodeAt(c+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function jV(n){return Oa[n>>18&63]+Oa[n>>12&63]+Oa[n>>6&63]+Oa[n&63]}function RV(n,e,t){for(var i,r=[],s=e;s<t;s+=3)i=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(n[s+2]&255),r.push(jV(i));return r.join("")}function FV(n){for(var e,t=n.length,i=t%3,r=[],s=16383,a=0,o=t-i;a<o;a+=s)r.push(RV(n,a,a+s>o?o:a+s));return i===1?(e=n[t-1],r.push(Oa[e>>2]+Oa[e<<4&63]+"==")):i===2&&(e=(n[t-2]<<8)+n[t-1],r.push(Oa[e>>10]+Oa[e>>4&63]+Oa[e<<2&63]+"=")),r.join("")}function kv(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var EB={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(n,e){(function(t){n.exports=t()})(function(){return function t(i,r,s){function a(l,d){if(!r[l]){if(!i[l]){var h=typeof kv=="function"&&kv;if(!d&&h)return h(l,!0);if(o)return o(l,!0);var f=new Error("Cannot find module '"+l+"'");throw f.code="MODULE_NOT_FOUND",f}var g=r[l]={exports:{}};i[l][0].call(g.exports,function(v){var y=i[l][1][v];return a(y||v)},g,g.exports,t,i,r,s)}return r[l].exports}for(var o=typeof kv=="function"&&kv,c=0;c<s.length;c++)a(s[c]);return a}({1:[function(t,i,r){var s=t("./utils"),a=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(c){for(var l,d,h,f,g,v,y,x=[],m=0,b=c.length,w=b,_=s.getTypeOf(c)!=="string";m<c.length;)w=b-m,h=_?(l=c[m++],d=m<b?c[m++]:0,m<b?c[m++]:0):(l=c.charCodeAt(m++),d=m<b?c.charCodeAt(m++):0,m<b?c.charCodeAt(m++):0),f=l>>2,g=(3&l)<<4|d>>4,v=1<w?(15&d)<<2|h>>6:64,y=2<w?63&h:64,x.push(o.charAt(f)+o.charAt(g)+o.charAt(v)+o.charAt(y));return x.join("")},r.decode=function(c){var l,d,h,f,g,v,y=0,x=0,m="data:";if(c.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");var b,w=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===o.charAt(64)&&w--,c.charAt(c.length-2)===o.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(b=a.uint8array?new Uint8Array(0|w):new Array(0|w);y<c.length;)l=o.indexOf(c.charAt(y++))<<2|(f=o.indexOf(c.charAt(y++)))>>4,d=(15&f)<<4|(g=o.indexOf(c.charAt(y++)))>>2,h=(3&g)<<6|(v=o.indexOf(c.charAt(y++))),b[x++]=l,g!==64&&(b[x++]=d),v!==64&&(b[x++]=h);return b}},{"./support":30,"./utils":32}],2:[function(t,i,r){var s=t("./external"),a=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),c=t("./stream/DataLengthProbe");function l(d,h,f,g,v){this.compressedSize=d,this.uncompressedSize=h,this.crc32=f,this.compression=g,this.compressedContent=v}l.prototype={getContentWorker:function(){var d=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),h=this;return d.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},l.createWorkerFrom=function(d,h,f){return d.pipe(new o).pipe(new c("uncompressedSize")).pipe(h.compressWorker(f)).pipe(new c("compressedSize")).withStreamInfo("compression",h)},i.exports=l},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,i,r){var s=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,i,r){var s=t("./utils"),a=function(){for(var o,c=[],l=0;l<256;l++){o=l;for(var d=0;d<8;d++)o=1&o?3988292384^o>>>1:o>>>1;c[l]=o}return c}();i.exports=function(o,c){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?function(l,d,h,f){var g=a,v=f+h;l^=-1;for(var y=f;y<v;y++)l=l>>>8^g[255&(l^d[y])];return-1^l}(0|c,o,o.length,0):function(l,d,h,f){var g=a,v=f+h;l^=-1;for(var y=f;y<v;y++)l=l>>>8^g[255&(l^d.charCodeAt(y))];return-1^l}(0|c,o,o.length,0):0}},{"./utils":32}],5:[function(t,i,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,i,r){var s=null;s=typeof Promise<"u"?Promise:t("lie"),i.exports={Promise:s}},{lie:37}],7:[function(t,i,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=t("pako"),o=t("./utils"),c=t("./stream/GenericWorker"),l=s?"uint8array":"array";function d(h,f){c.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=f,this.meta={}}r.magic="\b\0",o.inherits(d,c),d.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(l,h.data),!1)},d.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(f){h.push({data:f,meta:h.meta})}},r.compressWorker=function(h){return new d("Deflate",h)},r.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,i,r){function s(g,v){var y,x="";for(y=0;y<v;y++)x+=String.fromCharCode(255&g),g>>>=8;return x}function a(g,v,y,x,m,b){var w,_,D=g.file,A=g.compression,E=b!==l.utf8encode,F=o.transformTo("string",b(D.name)),I=o.transformTo("string",l.utf8encode(D.name)),z=D.comment,H=o.transformTo("string",b(z)),k=o.transformTo("string",l.utf8encode(z)),W=I.length!==D.name.length,S=k.length!==z.length,G="",j="",M="",R=D.dir,N=D.date,B={crc32:0,compressedSize:0,uncompressedSize:0};v&&!y||(B.crc32=g.crc32,B.compressedSize=g.compressedSize,B.uncompressedSize=g.uncompressedSize);var L=0;v&&(L|=8),E||!W&&!S||(L|=2048);var P=0,q=0;R&&(P|=16),m==="UNIX"?(q=798,P|=function(se,be){var ye=se;return se||(ye=be?16893:33204),(65535&ye)<<16}(D.unixPermissions,R)):(q=20,P|=function(se){return 63&(se||0)}(D.dosPermissions)),w=N.getUTCHours(),w<<=6,w|=N.getUTCMinutes(),w<<=5,w|=N.getUTCSeconds()/2,_=N.getUTCFullYear()-1980,_<<=4,_|=N.getUTCMonth()+1,_<<=5,_|=N.getUTCDate(),W&&(j=s(1,1)+s(d(F),4)+I,G+="up"+s(j.length,2)+j),S&&(M=s(1,1)+s(d(H),4)+k,G+="uc"+s(M.length,2)+M);var Q="";return Q+=`
\0`,Q+=s(L,2),Q+=A.magic,Q+=s(w,2),Q+=s(_,2),Q+=s(B.crc32,4),Q+=s(B.compressedSize,4),Q+=s(B.uncompressedSize,4),Q+=s(F.length,2),Q+=s(G.length,2),{fileRecord:h.LOCAL_FILE_HEADER+Q+F+G,dirRecord:h.CENTRAL_FILE_HEADER+s(q,2)+Q+s(H.length,2)+"\0\0\0\0"+s(P,4)+s(x,4)+F+G+H}}var o=t("../utils"),c=t("../stream/GenericWorker"),l=t("../utf8"),d=t("../crc32"),h=t("../signature");function f(g,v,y,x){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=y,this.encodeFileName=x,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(f,c),f.prototype.push=function(g){var v=g.meta.percent||0,y=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,c.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:y?(v+100*(y-x-1))/y:100}}))},f.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var v=this.streamFiles&&!g.file.dir;if(v){var y=a(g,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:y.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(g){this.accumulate=!1;var v=this.streamFiles&&!g.file.dir,y=a(g,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(y.dirRecord),v)this.push({data:function(x){return h.DATA_DESCRIPTOR+s(x.crc32,4)+s(x.compressedSize,4)+s(x.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:y.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var g=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var y=this.bytesWritten-g,x=function(m,b,w,_,D){var A=o.transformTo("string",D(_));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(m,2)+s(m,2)+s(b,4)+s(w,4)+s(A.length,2)+A}(this.dirRecords.length,y,g,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(g){this._sources.push(g);var v=this;return g.on("data",function(y){v.processChunk(y)}),g.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),g.on("error",function(y){v.error(y)}),this},f.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(g){var v=this._sources;if(!c.prototype.error.call(this,g))return!1;for(var y=0;y<v.length;y++)try{v[y].error(g)}catch{}return!0},f.prototype.lock=function(){c.prototype.lock.call(this);for(var g=this._sources,v=0;v<g.length;v++)g[v].lock()},i.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,i,r){var s=t("../compressions"),a=t("./ZipFileWorker");r.generateWorker=function(o,c,l){var d=new a(c.streamFiles,l,c.platform,c.encodeFileName),h=0;try{o.forEach(function(f,g){h++;var v=function(b,w){var _=b||w,D=s[_];if(!D)throw new Error(_+" is not a valid compression method !");return D}(g.options.compression,c.compression),y=g.options.compressionOptions||c.compressionOptions||{},x=g.dir,m=g.date;g._compressWorker(v,y).withStreamInfo("file",{name:f,dir:x,date:m,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(d)}),d.entriesCount=h}catch(f){d.error(f)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,i,r){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=t("./external"),i.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,i,r){var s=t("./utils"),a=t("./external"),o=t("./utf8"),c=t("./zipEntries"),l=t("./stream/Crc32Probe"),d=t("./nodejsUtils");function h(f){return new a.Promise(function(g,v){var y=f.decompressed.getContentWorker().pipe(new l);y.on("error",function(x){v(x)}).on("end",function(){y.streamInfo.crc32!==f.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}i.exports=function(f,g){var v=this;return g=s.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),d.isNode&&d.isStream(f)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",f,!0,g.optimizedBinaryString,g.base64).then(function(y){var x=new c(g);return x.load(y),x}).then(function(y){var x=[a.Promise.resolve(y)],m=y.files;if(g.checkCRC32)for(var b=0;b<m.length;b++)x.push(h(m[b]));return a.Promise.all(x)}).then(function(y){for(var x=y.shift(),m=x.files,b=0;b<m.length;b++){var w=m[b],_=w.fileNameStr,D=s.resolve(w.fileNameStr);v.file(D,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:g.createFolders}),w.dir||(v.file(D).unsafeOriginalName=_)}return x.zipComment.length&&(v.comment=x.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,i,r){var s=t("../utils"),a=t("../stream/GenericWorker");function o(c,l){a.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(l)}s.inherits(o,a),o.prototype._bindStream=function(c){var l=this;(this._stream=c).pause(),c.on("data",function(d){l.push({data:d,meta:{percent:0}})}).on("error",function(d){l.isPaused?this.generatedError=d:l.error(d)}).on("end",function(){l.isPaused?l._upstreamEnded=!0:l.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,i,r){var s=t("readable-stream").Readable;function a(o,c,l){s.call(this,c),this._helper=o;var d=this;o.on("data",function(h,f){d.push(h)||d._helper.pause(),l&&l(f)}).on("error",function(h){d.emit("error",h)}).on("end",function(){d.push(null)})}t("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},i.exports=a},{"../utils":32,"readable-stream":16}],14:[function(t,i,r){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,i,r){function s(D,A,E){var F,I=o.getTypeOf(A),z=o.extend(E||{},d);z.date=z.date||new Date,z.compression!==null&&(z.compression=z.compression.toUpperCase()),typeof z.unixPermissions=="string"&&(z.unixPermissions=parseInt(z.unixPermissions,8)),z.unixPermissions&&16384&z.unixPermissions&&(z.dir=!0),z.dosPermissions&&16&z.dosPermissions&&(z.dir=!0),z.dir&&(D=m(D)),z.createFolders&&(F=x(D))&&b.call(this,F,!0);var H=I==="string"&&z.binary===!1&&z.base64===!1;E&&E.binary!==void 0||(z.binary=!H),(A instanceof h&&A.uncompressedSize===0||z.dir||!A||A.length===0)&&(z.base64=!1,z.binary=!0,A="",z.compression="STORE",I="string");var k=null;k=A instanceof h||A instanceof c?A:v.isNode&&v.isStream(A)?new y(D,A):o.prepareContent(D,A,z.binary,z.optimizedBinaryString,z.base64);var W=new f(D,k,z);this.files[D]=W}var a=t("./utf8"),o=t("./utils"),c=t("./stream/GenericWorker"),l=t("./stream/StreamHelper"),d=t("./defaults"),h=t("./compressedObject"),f=t("./zipObject"),g=t("./generate"),v=t("./nodejsUtils"),y=t("./nodejs/NodejsStreamInputAdapter"),x=function(D){D.slice(-1)==="/"&&(D=D.substring(0,D.length-1));var A=D.lastIndexOf("/");return 0<A?D.substring(0,A):""},m=function(D){return D.slice(-1)!=="/"&&(D+="/"),D},b=function(D,A){return A=A!==void 0?A:d.createFolders,D=m(D),this.files[D]||s.call(this,D,null,{dir:!0,createFolders:A}),this.files[D]};function w(D){return Object.prototype.toString.call(D)==="[object RegExp]"}var _={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(D){var A,E,F;for(A in this.files)F=this.files[A],(E=A.slice(this.root.length,A.length))&&A.slice(0,this.root.length)===this.root&&D(E,F)},filter:function(D){var A=[];return this.forEach(function(E,F){D(E,F)&&A.push(F)}),A},file:function(D,A,E){if(arguments.length!==1)return D=this.root+D,s.call(this,D,A,E),this;if(w(D)){var F=D;return this.filter(function(z,H){return!H.dir&&F.test(z)})}var I=this.files[this.root+D];return I&&!I.dir?I:null},folder:function(D){if(!D)return this;if(w(D))return this.filter(function(I,z){return z.dir&&D.test(I)});var A=this.root+D,E=b.call(this,A),F=this.clone();return F.root=E.name,F},remove:function(D){D=this.root+D;var A=this.files[D];if(A||(D.slice(-1)!=="/"&&(D+="/"),A=this.files[D]),A&&!A.dir)delete this.files[D];else for(var E=this.filter(function(I,z){return z.name.slice(0,D.length)===D}),F=0;F<E.length;F++)delete this.files[E[F].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(D){var A,E={};try{if((E=o.extend(D||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=E.type.toLowerCase(),E.compression=E.compression.toUpperCase(),E.type==="binarystring"&&(E.type="string"),!E.type)throw new Error("No output type specified.");o.checkSupport(E.type),E.platform!=="darwin"&&E.platform!=="freebsd"&&E.platform!=="linux"&&E.platform!=="sunos"||(E.platform="UNIX"),E.platform==="win32"&&(E.platform="DOS");var F=E.comment||this.comment||"";A=g.generateWorker(this,E,F)}catch(I){(A=new c("error")).error(I)}return new l(A,E.type||"string",E.mimeType)},generateAsync:function(D,A){return this.generateInternalStream(D).accumulate(A)},generateNodeStream:function(D,A){return(D=D||{}).type||(D.type="nodebuffer"),this.generateInternalStream(D).toNodejsStream(A)}};i.exports=_},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,i,r){i.exports=t("stream")},{stream:void 0}],17:[function(t,i,r){var s=t("./DataReader");function a(o){s.call(this,o);for(var c=0;c<this.data.length;c++)o[c]=255&o[c]}t("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var c=o.charCodeAt(0),l=o.charCodeAt(1),d=o.charCodeAt(2),h=o.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===c&&this.data[f+1]===l&&this.data[f+2]===d&&this.data[f+3]===h)return f-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var c=o.charCodeAt(0),l=o.charCodeAt(1),d=o.charCodeAt(2),h=o.charCodeAt(3),f=this.readData(4);return c===f[0]&&l===f[1]&&d===f[2]&&h===f[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},i.exports=a},{"../utils":32,"./DataReader":18}],18:[function(t,i,r){var s=t("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var c,l=0;for(this.checkOffset(o),c=this.index+o-1;c>=this.index;c--)l=(l<<8)+this.byteAt(c);return this.index+=o,l},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},i.exports=a},{"../utils":32}],19:[function(t,i,r){var s=t("./Uint8ArrayReader");function a(o){s.call(this,o)}t("../utils").inherits(a,s),a.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},i.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,i,r){var s=t("./DataReader");function a(o){s.call(this,o)}t("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},i.exports=a},{"../utils":32,"./DataReader":18}],21:[function(t,i,r){var s=t("./ArrayReader");function a(o){s.call(this,o)}t("../utils").inherits(a,s),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},i.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(t,i,r){var s=t("../utils"),a=t("../support"),o=t("./ArrayReader"),c=t("./StringReader"),l=t("./NodeBufferReader"),d=t("./Uint8ArrayReader");i.exports=function(h){var f=s.getTypeOf(h);return s.checkSupport(f),f!=="string"||a.uint8array?f==="nodebuffer"?new l(h):a.uint8array?new d(s.transformTo("uint8array",h)):new o(s.transformTo("array",h)):new c(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,i,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,i,r){var s=t("./GenericWorker"),a=t("../utils");function o(c){s.call(this,"ConvertWorker to "+c),this.destType=c}a.inherits(o,s),o.prototype.processChunk=function(c){this.push({data:a.transformTo(this.destType,c.data),meta:c.meta})},i.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,i,r){var s=t("./GenericWorker"),a=t("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,s),o.prototype.processChunk=function(c){this.streamInfo.crc32=a(c.data,this.streamInfo.crc32||0),this.push(c)},i.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,i,r){var s=t("../utils"),a=t("./GenericWorker");function o(c){a.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}s.inherits(o,a),o.prototype.processChunk=function(c){if(c){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+c.data.length}a.prototype.processChunk.call(this,c)},i.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,i,r){var s=t("../utils"),a=t("./GenericWorker");function o(c){a.call(this,"DataWorker");var l=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(d){l.dataIsReady=!0,l.data=d,l.max=d&&d.length||0,l.type=s.getTypeOf(d),l.isPaused||l._tickAndRepeat()},function(d){l.error(d)})}s.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,l=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,l);break;case"uint8array":c=this.data.subarray(this.index,l);break;case"array":case"nodebuffer":c=this.data.slice(this.index,l)}return this.index=l,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,i,r){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var c=0;c<this._listeners[a].length;c++)this._listeners[a][c].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(c){o.processChunk(c)}),a.on("end",function(){o.end()}),a.on("error",function(c){o.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},i.exports=s},{}],29:[function(t,i,r){var s=t("../utils"),a=t("./ConvertWorker"),o=t("./GenericWorker"),c=t("../base64"),l=t("../support"),d=t("../external"),h=null;if(l.nodestream)try{h=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(v,y){return new d.Promise(function(x,m){var b=[],w=v._internalType,_=v._outputType,D=v._mimeType;v.on("data",function(A,E){b.push(A),y&&y(E)}).on("error",function(A){b=[],m(A)}).on("end",function(){try{var A=function(E,F,I){switch(E){case"blob":return s.newBlob(s.transformTo("arraybuffer",F),I);case"base64":return c.encode(F);default:return s.transformTo(E,F)}}(_,function(E,F){var I,z=0,H=null,k=0;for(I=0;I<F.length;I++)k+=F[I].length;switch(E){case"string":return F.join("");case"array":return Array.prototype.concat.apply([],F);case"uint8array":for(H=new Uint8Array(k),I=0;I<F.length;I++)H.set(F[I],z),z+=F[I].length;return H;case"nodebuffer":return Buffer.concat(F);default:throw new Error("concat : unsupported type '"+E+"'")}}(w,b),D);x(A)}catch(E){m(E)}b=[]}).resume()})}function g(v,y,x){var m=y;switch(y){case"blob":case"arraybuffer":m="uint8array";break;case"base64":m="string"}try{this._internalType=m,this._outputType=y,this._mimeType=x,s.checkSupport(m),this._worker=v.pipe(new a(m)),v.lock()}catch(b){this._worker=new o("error"),this._worker.error(b)}}g.prototype={accumulate:function(v){return f(this,v)},on:function(v,y){var x=this;return v==="data"?this._worker.on(v,function(m){y.call(x,m.data,m.meta)}):this._worker.on(v,function(){s.delay(y,arguments,x)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},v)}},i.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,i,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var s=new ArrayBuffer(0);try{r.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),r.blob=a.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(t,i,r){for(var s=t("./utils"),a=t("./support"),o=t("./nodejsUtils"),c=t("./stream/GenericWorker"),l=new Array(256),d=0;d<256;d++)l[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;l[254]=l[254]=1;function h(){c.call(this,"utf-8 decode"),this.leftOver=null}function f(){c.call(this,"utf-8 encode")}r.utf8encode=function(g){return a.nodebuffer?o.newBufferFrom(g,"utf-8"):function(v){var y,x,m,b,w,_=v.length,D=0;for(b=0;b<_;b++)(64512&(x=v.charCodeAt(b)))==55296&&b+1<_&&(64512&(m=v.charCodeAt(b+1)))==56320&&(x=65536+(x-55296<<10)+(m-56320),b++),D+=x<128?1:x<2048?2:x<65536?3:4;for(y=a.uint8array?new Uint8Array(D):new Array(D),b=w=0;w<D;b++)(64512&(x=v.charCodeAt(b)))==55296&&b+1<_&&(64512&(m=v.charCodeAt(b+1)))==56320&&(x=65536+(x-55296<<10)+(m-56320),b++),x<128?y[w++]=x:(x<2048?y[w++]=192|x>>>6:(x<65536?y[w++]=224|x>>>12:(y[w++]=240|x>>>18,y[w++]=128|x>>>12&63),y[w++]=128|x>>>6&63),y[w++]=128|63&x);return y}(g)},r.utf8decode=function(g){return a.nodebuffer?s.transformTo("nodebuffer",g).toString("utf-8"):function(v){var y,x,m,b,w=v.length,_=new Array(2*w);for(y=x=0;y<w;)if((m=v[y++])<128)_[x++]=m;else if(4<(b=l[m]))_[x++]=65533,y+=b-1;else{for(m&=b===2?31:b===3?15:7;1<b&&y<w;)m=m<<6|63&v[y++],b--;1<b?_[x++]=65533:m<65536?_[x++]=m:(m-=65536,_[x++]=55296|m>>10&1023,_[x++]=56320|1023&m)}return _.length!==x&&(_.subarray?_=_.subarray(0,x):_.length=x),s.applyFromCharCode(_)}(g=s.transformTo(a.uint8array?"uint8array":"array",g))},s.inherits(h,c),h.prototype.processChunk=function(g){var v=s.transformTo(a.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var y=v;(v=new Uint8Array(y.length+this.leftOver.length)).set(this.leftOver,0),v.set(y,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var x=function(b,w){var _;for((w=w||b.length)>b.length&&(w=b.length),_=w-1;0<=_&&(192&b[_])==128;)_--;return _<0||_===0?w:_+l[b[_]]>w?_:w}(v),m=v;x!==v.length&&(a.uint8array?(m=v.subarray(0,x),this.leftOver=v.subarray(x,v.length)):(m=v.slice(0,x),this.leftOver=v.slice(x,v.length))),this.push({data:r.utf8decode(m),meta:g.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=h,s.inherits(f,c),f.prototype.processChunk=function(g){this.push({data:r.utf8encode(g.data),meta:g.meta})},r.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,i,r){var s=t("./support"),a=t("./base64"),o=t("./nodejsUtils"),c=t("./external");function l(y){return y}function d(y,x){for(var m=0;m<y.length;++m)x[m]=255&y.charCodeAt(m);return x}t("setimmediate"),r.newBlob=function(y,x){r.checkSupport("blob");try{return new Blob([y],{type:x})}catch{try{var m=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return m.append(y),m.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(y,x,m){var b=[],w=0,_=y.length;if(_<=m)return String.fromCharCode.apply(null,y);for(;w<_;)x==="array"||x==="nodebuffer"?b.push(String.fromCharCode.apply(null,y.slice(w,Math.min(w+m,_)))):b.push(String.fromCharCode.apply(null,y.subarray(w,Math.min(w+m,_)))),w+=m;return b.join("")},stringifyByChar:function(y){for(var x="",m=0;m<y.length;m++)x+=String.fromCharCode(y[m]);return x},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function f(y){var x=65536,m=r.getTypeOf(y),b=!0;if(m==="uint8array"?b=h.applyCanBeUsed.uint8array:m==="nodebuffer"&&(b=h.applyCanBeUsed.nodebuffer),b)for(;1<x;)try{return h.stringifyByChunk(y,m,x)}catch{x=Math.floor(x/2)}return h.stringifyByChar(y)}function g(y,x){for(var m=0;m<y.length;m++)x[m]=y[m];return x}r.applyFromCharCode=f;var v={};v.string={string:l,array:function(y){return d(y,new Array(y.length))},arraybuffer:function(y){return v.string.uint8array(y).buffer},uint8array:function(y){return d(y,new Uint8Array(y.length))},nodebuffer:function(y){return d(y,o.allocBuffer(y.length))}},v.array={string:f,array:l,arraybuffer:function(y){return new Uint8Array(y).buffer},uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return o.newBufferFrom(y)}},v.arraybuffer={string:function(y){return f(new Uint8Array(y))},array:function(y){return g(new Uint8Array(y),new Array(y.byteLength))},arraybuffer:l,uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return o.newBufferFrom(new Uint8Array(y))}},v.uint8array={string:f,array:function(y){return g(y,new Array(y.length))},arraybuffer:function(y){return y.buffer},uint8array:l,nodebuffer:function(y){return o.newBufferFrom(y)}},v.nodebuffer={string:f,array:function(y){return g(y,new Array(y.length))},arraybuffer:function(y){return v.nodebuffer.uint8array(y).buffer},uint8array:function(y){return g(y,new Uint8Array(y.length))},nodebuffer:l},r.transformTo=function(y,x){if(x=x||"",!y)return x;r.checkSupport(y);var m=r.getTypeOf(x);return v[m][y](x)},r.resolve=function(y){for(var x=y.split("/"),m=[],b=0;b<x.length;b++){var w=x[b];w==="."||w===""&&b!==0&&b!==x.length-1||(w===".."?m.pop():m.push(w))}return m.join("/")},r.getTypeOf=function(y){return typeof y=="string"?"string":Object.prototype.toString.call(y)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(y)?"nodebuffer":s.uint8array&&y instanceof Uint8Array?"uint8array":s.arraybuffer&&y instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(y){if(!s[y.toLowerCase()])throw new Error(y+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(y){var x,m,b="";for(m=0;m<(y||"").length;m++)b+="\\x"+((x=y.charCodeAt(m))<16?"0":"")+x.toString(16).toUpperCase();return b},r.delay=function(y,x,m){setImmediate(function(){y.apply(m||null,x||[])})},r.inherits=function(y,x){function m(){}m.prototype=x.prototype,y.prototype=new m},r.extend=function(){var y,x,m={};for(y=0;y<arguments.length;y++)for(x in arguments[y])Object.prototype.hasOwnProperty.call(arguments[y],x)&&m[x]===void 0&&(m[x]=arguments[y][x]);return m},r.prepareContent=function(y,x,m,b,w){return c.Promise.resolve(x).then(function(_){return s.blob&&(_ instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(_))!==-1)&&typeof FileReader<"u"?new c.Promise(function(D,A){var E=new FileReader;E.onload=function(F){D(F.target.result)},E.onerror=function(F){A(F.target.error)},E.readAsArrayBuffer(_)}):_}).then(function(_){var D=r.getTypeOf(_);return D?(D==="arraybuffer"?_=r.transformTo("uint8array",_):D==="string"&&(w?_=a.decode(_):m&&b!==!0&&(_=function(A){return d(A,s.uint8array?new Uint8Array(A.length):new Array(A.length))}(_))),_):c.Promise.reject(new Error("Can't read the data of '"+y+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,i,r){var s=t("./reader/readerFor"),a=t("./utils"),o=t("./signature"),c=t("./zipEntry"),l=t("./support");function d(h){this.files=[],this.loadOptions=h}d.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(f)+", expected "+a.pretty(h)+")")}},isSignature:function(h,f){var g=this.reader.index;this.reader.setIndex(h);var v=this.reader.readString(4)===f;return this.reader.setIndex(g),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),f=l.uint8array?"uint8array":"array",g=a.transformTo(f,h);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,f,g,v=this.zip64EndOfCentralSize-44;0<v;)h=this.reader.readInt(2),f=this.reader.readInt(4),g=this.reader.readData(f),this.zip64ExtensibleData[h]={id:h,length:f,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,f;for(h=0;h<this.files.length;h++)f=this.files[h],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(h=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var f=h;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var v=f-g;if(0<v)this.isSignature(f,o.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(h){this.reader=s(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,i,r){var s=t("./reader/readerFor"),a=t("./utils"),o=t("./compressedObject"),c=t("./crc32"),l=t("./utf8"),d=t("./compressions"),h=t("./support");function f(g,v){this.options=g,this.loadOptions=v}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var v,y;if(g.skip(22),this.fileNameLength=g.readInt(2),y=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(y),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(x){for(var m in d)if(Object.prototype.hasOwnProperty.call(d,m)&&d[m].magic===x)return d[m];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,v,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var v=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(v),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var v,y,x,m=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<m;)v=g.readInt(2),y=g.readInt(2),x=g.readData(y),this.extraFields[v]={id:v,length:y,value:x};g.setIndex(m)},handleUTF8:function(){var g=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var y=a.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(y)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var m=a.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(m)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var v=s(g.value);return v.readInt(1)!==1||c(this.fileName)!==v.readInt(4)?null:l.utf8decode(v.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var v=s(g.value);return v.readInt(1)!==1||c(this.fileComment)!==v.readInt(4)?null:l.utf8decode(v.readData(g.length-5))}return null}},i.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,i,r){function s(v,y,x){this.name=v,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=y,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var a=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),c=t("./utf8"),l=t("./compressedObject"),d=t("./stream/GenericWorker");s.prototype={internalStream:function(v){var y=null,x="string";try{if(!v)throw new Error("No output type specified.");var m=(x=v.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),y=this._decompressWorker();var b=!this._dataBinary;b&&!m&&(y=y.pipe(new c.Utf8EncodeWorker)),!b&&m&&(y=y.pipe(new c.Utf8DecodeWorker))}catch(w){(y=new d("error")).error(w)}return new a(y,x,"")},async:function(v,y){return this.internalStream(v).accumulate(y)},nodeStream:function(v,y){return this.internalStream(v||"nodebuffer").toNodejsStream(y)},_compressWorker:function(v,y){if(this._data instanceof l&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new c.Utf8EncodeWorker)),l.createWorkerFrom(x,v,y)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof d?this._data:new o(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<h.length;g++)s.prototype[h[g]]=f;i.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,i,r){(function(s){var a,o,c=s.MutationObserver||s.WebKitMutationObserver;if(c){var l=0,d=new c(v),h=s.document.createTextNode("");d.observe(h,{characterData:!0}),a=function(){h.data=l=++l%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var y=s.document.createElement("script");y.onreadystatechange=function(){v(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},s.document.documentElement.appendChild(y)}:function(){setTimeout(v,0)};else{var f=new s.MessageChannel;f.port1.onmessage=v,a=function(){f.port2.postMessage(0)}}var g=[];function v(){var y,x;o=!0;for(var m=g.length;m;){for(x=g,g=[],y=-1;++y<m;)x[y]();m=g.length}o=!1}i.exports=function(y){g.push(y)!==1||o||a()}}).call(this,typeof ze<"u"?ze:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,i,r){var s=t("immediate");function a(){}var o={},c=["REJECTED"],l=["FULFILLED"],d=["PENDING"];function h(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,m!==a&&y(this,m)}function f(m,b,w){this.promise=m,typeof b=="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function g(m,b,w){s(function(){var _;try{_=b(w)}catch(D){return o.reject(m,D)}_===m?o.reject(m,new TypeError("Cannot resolve promise with itself")):o.resolve(m,_)})}function v(m){var b=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof b=="function")return function(){b.apply(m,arguments)}}function y(m,b){var w=!1;function _(E){w||(w=!0,o.reject(m,E))}function D(E){w||(w=!0,o.resolve(m,E))}var A=x(function(){b(D,_)});A.status==="error"&&_(A.value)}function x(m,b){var w={};try{w.value=m(b),w.status="success"}catch(_){w.status="error",w.value=_}return w}(i.exports=h).prototype.finally=function(m){if(typeof m!="function")return this;var b=this.constructor;return this.then(function(w){return b.resolve(m()).then(function(){return w})},function(w){return b.resolve(m()).then(function(){throw w})})},h.prototype.catch=function(m){return this.then(null,m)},h.prototype.then=function(m,b){if(typeof m!="function"&&this.state===l||typeof b!="function"&&this.state===c)return this;var w=new this.constructor(a);return this.state!==d?g(w,this.state===l?m:b,this.outcome):this.queue.push(new f(w,m,b)),w},f.prototype.callFulfilled=function(m){o.resolve(this.promise,m)},f.prototype.otherCallFulfilled=function(m){g(this.promise,this.onFulfilled,m)},f.prototype.callRejected=function(m){o.reject(this.promise,m)},f.prototype.otherCallRejected=function(m){g(this.promise,this.onRejected,m)},o.resolve=function(m,b){var w=x(v,b);if(w.status==="error")return o.reject(m,w.value);var _=w.value;if(_)y(m,_);else{m.state=l,m.outcome=b;for(var D=-1,A=m.queue.length;++D<A;)m.queue[D].callFulfilled(b)}return m},o.reject=function(m,b){m.state=c,m.outcome=b;for(var w=-1,_=m.queue.length;++w<_;)m.queue[w].callRejected(b);return m},h.resolve=function(m){return m instanceof this?m:o.resolve(new this(a),m)},h.reject=function(m){var b=new this(a);return o.reject(b,m)},h.all=function(m){var b=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=m.length,_=!1;if(!w)return this.resolve([]);for(var D=new Array(w),A=0,E=-1,F=new this(a);++E<w;)I(m[E],E);return F;function I(z,H){b.resolve(z).then(function(k){D[H]=k,++A!==w||_||(_=!0,o.resolve(F,D))},function(k){_||(_=!0,o.reject(F,k))})}},h.race=function(m){var b=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=m.length,_=!1;if(!w)return this.resolve([]);for(var D=-1,A=new this(a);++D<w;)E=m[D],b.resolve(E).then(function(F){_||(_=!0,o.resolve(A,F))},function(F){_||(_=!0,o.reject(A,F))});var E;return A}},{immediate:36}],38:[function(t,i,r){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),i.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,i,r){var s=t("./zlib/deflate"),a=t("./utils/common"),o=t("./utils/strings"),c=t("./zlib/messages"),l=t("./zlib/zstream"),d=Object.prototype.toString,h=0,f=-1,g=0,v=8;function y(m){if(!(this instanceof y))return new y(m);this.options=a.assign({level:f,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},m||{});var b=this.options;b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var w=s.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(w!==h)throw new Error(c[w]);if(b.header&&s.deflateSetHeader(this.strm,b.header),b.dictionary){var _;if(_=typeof b.dictionary=="string"?o.string2buf(b.dictionary):d.call(b.dictionary)==="[object ArrayBuffer]"?new Uint8Array(b.dictionary):b.dictionary,(w=s.deflateSetDictionary(this.strm,_))!==h)throw new Error(c[w]);this._dict_set=!0}}function x(m,b){var w=new y(b);if(w.push(m,!0),w.err)throw w.msg||c[w.err];return w.result}y.prototype.push=function(m,b){var w,_,D=this.strm,A=this.options.chunkSize;if(this.ended)return!1;_=b===~~b?b:b===!0?4:0,typeof m=="string"?D.input=o.string2buf(m):d.call(m)==="[object ArrayBuffer]"?D.input=new Uint8Array(m):D.input=m,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new a.Buf8(A),D.next_out=0,D.avail_out=A),(w=s.deflate(D,_))!==1&&w!==h)return this.onEnd(w),!(this.ended=!0);D.avail_out!==0&&(D.avail_in!==0||_!==4&&_!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(D.output,D.next_out))):this.onData(a.shrinkBuf(D.output,D.next_out)))}while((0<D.avail_in||D.avail_out===0)&&w!==1);return _===4?(w=s.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===h):_!==2||(this.onEnd(h),!(D.avail_out=0))},y.prototype.onData=function(m){this.chunks.push(m)},y.prototype.onEnd=function(m){m===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},r.Deflate=y,r.deflate=x,r.deflateRaw=function(m,b){return(b=b||{}).raw=!0,x(m,b)},r.gzip=function(m,b){return(b=b||{}).gzip=!0,x(m,b)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,i,r){var s=t("./zlib/inflate"),a=t("./utils/common"),o=t("./utils/strings"),c=t("./zlib/constants"),l=t("./zlib/messages"),d=t("./zlib/zstream"),h=t("./zlib/gzheader"),f=Object.prototype.toString;function g(y){if(!(this instanceof g))return new g(y);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},y||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||y&&y.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&!(15&x.windowBits)&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var m=s.inflateInit2(this.strm,x.windowBits);if(m!==c.Z_OK)throw new Error(l[m]);this.header=new h,s.inflateGetHeader(this.strm,this.header)}function v(y,x){var m=new g(x);if(m.push(y,!0),m.err)throw m.msg||l[m.err];return m.result}g.prototype.push=function(y,x){var m,b,w,_,D,A,E=this.strm,F=this.options.chunkSize,I=this.options.dictionary,z=!1;if(this.ended)return!1;b=x===~~x?x:x===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof y=="string"?E.input=o.binstring2buf(y):f.call(y)==="[object ArrayBuffer]"?E.input=new Uint8Array(y):E.input=y,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new a.Buf8(F),E.next_out=0,E.avail_out=F),(m=s.inflate(E,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&I&&(A=typeof I=="string"?o.string2buf(I):f.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,m=s.inflateSetDictionary(this.strm,A)),m===c.Z_BUF_ERROR&&z===!0&&(m=c.Z_OK,z=!1),m!==c.Z_STREAM_END&&m!==c.Z_OK)return this.onEnd(m),!(this.ended=!0);E.next_out&&(E.avail_out!==0&&m!==c.Z_STREAM_END&&(E.avail_in!==0||b!==c.Z_FINISH&&b!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=o.utf8border(E.output,E.next_out),_=E.next_out-w,D=o.buf2string(E.output,w),E.next_out=_,E.avail_out=F-_,_&&a.arraySet(E.output,E.output,w,_,0),this.onData(D)):this.onData(a.shrinkBuf(E.output,E.next_out)))),E.avail_in===0&&E.avail_out===0&&(z=!0)}while((0<E.avail_in||E.avail_out===0)&&m!==c.Z_STREAM_END);return m===c.Z_STREAM_END&&(b=c.Z_FINISH),b===c.Z_FINISH?(m=s.inflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===c.Z_OK):b!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(E.avail_out=0))},g.prototype.onData=function(y){this.chunks.push(y)},g.prototype.onEnd=function(y){y===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},r.Inflate=g,r.inflate=v,r.inflateRaw=function(y,x){return(x=x||{}).raw=!0,v(y,x)},r.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,i,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(c){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var d=l.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var h in d)d.hasOwnProperty(h)&&(c[h]=d[h])}}return c},r.shrinkBuf=function(c,l){return c.length===l?c:c.subarray?c.subarray(0,l):(c.length=l,c)};var a={arraySet:function(c,l,d,h,f){if(l.subarray&&c.subarray)c.set(l.subarray(d,d+h),f);else for(var g=0;g<h;g++)c[f+g]=l[d+g]},flattenChunks:function(c){var l,d,h,f,g,v;for(l=h=0,d=c.length;l<d;l++)h+=c[l].length;for(v=new Uint8Array(h),l=f=0,d=c.length;l<d;l++)g=c[l],v.set(g,f),f+=g.length;return v}},o={arraySet:function(c,l,d,h,f){for(var g=0;g<h;g++)c[f+g]=l[d+g]},flattenChunks:function(c){return[].concat.apply([],c)}};r.setTyped=function(c){c?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,a)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(s)},{}],42:[function(t,i,r){var s=t("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var c=new s.Buf8(256),l=0;l<256;l++)c[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function d(h,f){if(f<65537&&(h.subarray&&o||!h.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(h,f));for(var g="",v=0;v<f;v++)g+=String.fromCharCode(h[v]);return g}c[254]=c[254]=1,r.string2buf=function(h){var f,g,v,y,x,m=h.length,b=0;for(y=0;y<m;y++)(64512&(g=h.charCodeAt(y)))==55296&&y+1<m&&(64512&(v=h.charCodeAt(y+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),y++),b+=g<128?1:g<2048?2:g<65536?3:4;for(f=new s.Buf8(b),y=x=0;x<b;y++)(64512&(g=h.charCodeAt(y)))==55296&&y+1<m&&(64512&(v=h.charCodeAt(y+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),y++),g<128?f[x++]=g:(g<2048?f[x++]=192|g>>>6:(g<65536?f[x++]=224|g>>>12:(f[x++]=240|g>>>18,f[x++]=128|g>>>12&63),f[x++]=128|g>>>6&63),f[x++]=128|63&g);return f},r.buf2binstring=function(h){return d(h,h.length)},r.binstring2buf=function(h){for(var f=new s.Buf8(h.length),g=0,v=f.length;g<v;g++)f[g]=h.charCodeAt(g);return f},r.buf2string=function(h,f){var g,v,y,x,m=f||h.length,b=new Array(2*m);for(g=v=0;g<m;)if((y=h[g++])<128)b[v++]=y;else if(4<(x=c[y]))b[v++]=65533,g+=x-1;else{for(y&=x===2?31:x===3?15:7;1<x&&g<m;)y=y<<6|63&h[g++],x--;1<x?b[v++]=65533:y<65536?b[v++]=y:(y-=65536,b[v++]=55296|y>>10&1023,b[v++]=56320|1023&y)}return d(b,v)},r.utf8border=function(h,f){var g;for((f=f||h.length)>h.length&&(f=h.length),g=f-1;0<=g&&(192&h[g])==128;)g--;return g<0||g===0?f:g+c[h[g]]>f?g:f}},{"./common":41}],43:[function(t,i,r){i.exports=function(s,a,o,c){for(var l=65535&s|0,d=s>>>16&65535|0,h=0;o!==0;){for(o-=h=2e3<o?2e3:o;d=d+(l=l+a[c++]|0)|0,--h;);l%=65521,d%=65521}return l|d<<16|0}},{}],44:[function(t,i,r){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,i,r){var s=function(){for(var a,o=[],c=0;c<256;c++){a=c;for(var l=0;l<8;l++)a=1&a?3988292384^a>>>1:a>>>1;o[c]=a}return o}();i.exports=function(a,o,c,l){var d=s,h=l+c;a^=-1;for(var f=l;f<h;f++)a=a>>>8^d[255&(a^o[f])];return-1^a}},{}],46:[function(t,i,r){var s,a=t("../utils/common"),o=t("./trees"),c=t("./adler32"),l=t("./crc32"),d=t("./messages"),h=0,f=4,g=0,v=-2,y=-1,x=4,m=2,b=8,w=9,_=286,D=30,A=19,E=2*_+1,F=15,I=3,z=258,H=z+I+1,k=42,W=113,S=1,G=2,j=3,M=4;function R(C,ie){return C.msg=d[ie],ie}function N(C){return(C<<1)-(4<C?9:0)}function B(C){for(var ie=C.length;0<=--ie;)C[ie]=0}function L(C){var ie=C.state,te=ie.pending;te>C.avail_out&&(te=C.avail_out),te!==0&&(a.arraySet(C.output,ie.pending_buf,ie.pending_out,te,C.next_out),C.next_out+=te,ie.pending_out+=te,C.total_out+=te,C.avail_out-=te,ie.pending-=te,ie.pending===0&&(ie.pending_out=0))}function P(C,ie){o._tr_flush_block(C,0<=C.block_start?C.block_start:-1,C.strstart-C.block_start,ie),C.block_start=C.strstart,L(C.strm)}function q(C,ie){C.pending_buf[C.pending++]=ie}function Q(C,ie){C.pending_buf[C.pending++]=ie>>>8&255,C.pending_buf[C.pending++]=255&ie}function se(C,ie){var te,V,$=C.max_chain_length,J=C.strstart,ue=C.prev_length,pe=C.nice_match,Z=C.strstart>C.w_size-H?C.strstart-(C.w_size-H):0,X=C.window,K=C.w_mask,ne=C.prev,oe=C.strstart+z,we=X[J+ue-1],Ue=X[J+ue];C.prev_length>=C.good_match&&($>>=2),pe>C.lookahead&&(pe=C.lookahead);do if(X[(te=ie)+ue]===Ue&&X[te+ue-1]===we&&X[te]===X[J]&&X[++te]===X[J+1]){J+=2,te++;do;while(X[++J]===X[++te]&&X[++J]===X[++te]&&X[++J]===X[++te]&&X[++J]===X[++te]&&X[++J]===X[++te]&&X[++J]===X[++te]&&X[++J]===X[++te]&&X[++J]===X[++te]&&J<oe);if(V=z-(oe-J),J=oe-z,ue<V){if(C.match_start=ie,pe<=(ue=V))break;we=X[J+ue-1],Ue=X[J+ue]}}while((ie=ne[ie&K])>Z&&--$!=0);return ue<=C.lookahead?ue:C.lookahead}function be(C){var ie,te,V,$,J,ue,pe,Z,X,K,ne=C.w_size;do{if($=C.window_size-C.lookahead-C.strstart,C.strstart>=ne+(ne-H)){for(a.arraySet(C.window,C.window,ne,ne,0),C.match_start-=ne,C.strstart-=ne,C.block_start-=ne,ie=te=C.hash_size;V=C.head[--ie],C.head[ie]=ne<=V?V-ne:0,--te;);for(ie=te=ne;V=C.prev[--ie],C.prev[ie]=ne<=V?V-ne:0,--te;);$+=ne}if(C.strm.avail_in===0)break;if(ue=C.strm,pe=C.window,Z=C.strstart+C.lookahead,X=$,K=void 0,K=ue.avail_in,X<K&&(K=X),te=K===0?0:(ue.avail_in-=K,a.arraySet(pe,ue.input,ue.next_in,K,Z),ue.state.wrap===1?ue.adler=c(ue.adler,pe,K,Z):ue.state.wrap===2&&(ue.adler=l(ue.adler,pe,K,Z)),ue.next_in+=K,ue.total_in+=K,K),C.lookahead+=te,C.lookahead+C.insert>=I)for(J=C.strstart-C.insert,C.ins_h=C.window[J],C.ins_h=(C.ins_h<<C.hash_shift^C.window[J+1])&C.hash_mask;C.insert&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[J+I-1])&C.hash_mask,C.prev[J&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=J,J++,C.insert--,!(C.lookahead+C.insert<I)););}while(C.lookahead<H&&C.strm.avail_in!==0)}function ye(C,ie){for(var te,V;;){if(C.lookahead<H){if(be(C),C.lookahead<H&&ie===h)return S;if(C.lookahead===0)break}if(te=0,C.lookahead>=I&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+I-1])&C.hash_mask,te=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),te!==0&&C.strstart-te<=C.w_size-H&&(C.match_length=se(C,te)),C.match_length>=I)if(V=o._tr_tally(C,C.strstart-C.match_start,C.match_length-I),C.lookahead-=C.match_length,C.match_length<=C.max_lazy_match&&C.lookahead>=I){for(C.match_length--;C.strstart++,C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+I-1])&C.hash_mask,te=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart,--C.match_length!=0;);C.strstart++}else C.strstart+=C.match_length,C.match_length=0,C.ins_h=C.window[C.strstart],C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+1])&C.hash_mask;else V=o._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++;if(V&&(P(C,!1),C.strm.avail_out===0))return S}return C.insert=C.strstart<I-1?C.strstart:I-1,ie===f?(P(C,!0),C.strm.avail_out===0?j:M):C.last_lit&&(P(C,!1),C.strm.avail_out===0)?S:G}function fe(C,ie){for(var te,V,$;;){if(C.lookahead<H){if(be(C),C.lookahead<H&&ie===h)return S;if(C.lookahead===0)break}if(te=0,C.lookahead>=I&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+I-1])&C.hash_mask,te=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),C.prev_length=C.match_length,C.prev_match=C.match_start,C.match_length=I-1,te!==0&&C.prev_length<C.max_lazy_match&&C.strstart-te<=C.w_size-H&&(C.match_length=se(C,te),C.match_length<=5&&(C.strategy===1||C.match_length===I&&4096<C.strstart-C.match_start)&&(C.match_length=I-1)),C.prev_length>=I&&C.match_length<=C.prev_length){for($=C.strstart+C.lookahead-I,V=o._tr_tally(C,C.strstart-1-C.prev_match,C.prev_length-I),C.lookahead-=C.prev_length-1,C.prev_length-=2;++C.strstart<=$&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+I-1])&C.hash_mask,te=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),--C.prev_length!=0;);if(C.match_available=0,C.match_length=I-1,C.strstart++,V&&(P(C,!1),C.strm.avail_out===0))return S}else if(C.match_available){if((V=o._tr_tally(C,0,C.window[C.strstart-1]))&&P(C,!1),C.strstart++,C.lookahead--,C.strm.avail_out===0)return S}else C.match_available=1,C.strstart++,C.lookahead--}return C.match_available&&(V=o._tr_tally(C,0,C.window[C.strstart-1]),C.match_available=0),C.insert=C.strstart<I-1?C.strstart:I-1,ie===f?(P(C,!0),C.strm.avail_out===0?j:M):C.last_lit&&(P(C,!1),C.strm.avail_out===0)?S:G}function xe(C,ie,te,V,$){this.good_length=C,this.max_lazy=ie,this.nice_length=te,this.max_chain=V,this.func=$}function ce(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*E),this.dyn_dtree=new a.Buf16(2*(2*D+1)),this.bl_tree=new a.Buf16(2*(2*A+1)),B(this.dyn_ltree),B(this.dyn_dtree),B(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(F+1),this.heap=new a.Buf16(2*_+1),B(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*_+1),B(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function le(C){var ie;return C&&C.state?(C.total_in=C.total_out=0,C.data_type=m,(ie=C.state).pending=0,ie.pending_out=0,ie.wrap<0&&(ie.wrap=-ie.wrap),ie.status=ie.wrap?k:W,C.adler=ie.wrap===2?0:1,ie.last_flush=h,o._tr_init(ie),g):R(C,v)}function Y(C){var ie=le(C);return ie===g&&function(te){te.window_size=2*te.w_size,B(te.head),te.max_lazy_match=s[te.level].max_lazy,te.good_match=s[te.level].good_length,te.nice_match=s[te.level].nice_length,te.max_chain_length=s[te.level].max_chain,te.strstart=0,te.block_start=0,te.lookahead=0,te.insert=0,te.match_length=te.prev_length=I-1,te.match_available=0,te.ins_h=0}(C.state),ie}function ae(C,ie,te,V,$,J){if(!C)return v;var ue=1;if(ie===y&&(ie=6),V<0?(ue=0,V=-V):15<V&&(ue=2,V-=16),$<1||w<$||te!==b||V<8||15<V||ie<0||9<ie||J<0||x<J)return R(C,v);V===8&&(V=9);var pe=new ce;return(C.state=pe).strm=C,pe.wrap=ue,pe.gzhead=null,pe.w_bits=V,pe.w_size=1<<pe.w_bits,pe.w_mask=pe.w_size-1,pe.hash_bits=$+7,pe.hash_size=1<<pe.hash_bits,pe.hash_mask=pe.hash_size-1,pe.hash_shift=~~((pe.hash_bits+I-1)/I),pe.window=new a.Buf8(2*pe.w_size),pe.head=new a.Buf16(pe.hash_size),pe.prev=new a.Buf16(pe.w_size),pe.lit_bufsize=1<<$+6,pe.pending_buf_size=4*pe.lit_bufsize,pe.pending_buf=new a.Buf8(pe.pending_buf_size),pe.d_buf=1*pe.lit_bufsize,pe.l_buf=3*pe.lit_bufsize,pe.level=ie,pe.strategy=J,pe.method=te,Y(C)}s=[new xe(0,0,0,0,function(C,ie){var te=65535;for(te>C.pending_buf_size-5&&(te=C.pending_buf_size-5);;){if(C.lookahead<=1){if(be(C),C.lookahead===0&&ie===h)return S;if(C.lookahead===0)break}C.strstart+=C.lookahead,C.lookahead=0;var V=C.block_start+te;if((C.strstart===0||C.strstart>=V)&&(C.lookahead=C.strstart-V,C.strstart=V,P(C,!1),C.strm.avail_out===0)||C.strstart-C.block_start>=C.w_size-H&&(P(C,!1),C.strm.avail_out===0))return S}return C.insert=0,ie===f?(P(C,!0),C.strm.avail_out===0?j:M):(C.strstart>C.block_start&&(P(C,!1),C.strm.avail_out),S)}),new xe(4,4,8,4,ye),new xe(4,5,16,8,ye),new xe(4,6,32,32,ye),new xe(4,4,16,16,fe),new xe(8,16,32,32,fe),new xe(8,16,128,128,fe),new xe(8,32,128,256,fe),new xe(32,128,258,1024,fe),new xe(32,258,258,4096,fe)],r.deflateInit=function(C,ie){return ae(C,ie,b,15,8,0)},r.deflateInit2=ae,r.deflateReset=Y,r.deflateResetKeep=le,r.deflateSetHeader=function(C,ie){return C&&C.state?C.state.wrap!==2?v:(C.state.gzhead=ie,g):v},r.deflate=function(C,ie){var te,V,$,J;if(!C||!C.state||5<ie||ie<0)return C?R(C,v):v;if(V=C.state,!C.output||!C.input&&C.avail_in!==0||V.status===666&&ie!==f)return R(C,C.avail_out===0?-5:v);if(V.strm=C,te=V.last_flush,V.last_flush=ie,V.status===k)if(V.wrap===2)C.adler=0,q(V,31),q(V,139),q(V,8),V.gzhead?(q(V,(V.gzhead.text?1:0)+(V.gzhead.hcrc?2:0)+(V.gzhead.extra?4:0)+(V.gzhead.name?8:0)+(V.gzhead.comment?16:0)),q(V,255&V.gzhead.time),q(V,V.gzhead.time>>8&255),q(V,V.gzhead.time>>16&255),q(V,V.gzhead.time>>24&255),q(V,V.level===9?2:2<=V.strategy||V.level<2?4:0),q(V,255&V.gzhead.os),V.gzhead.extra&&V.gzhead.extra.length&&(q(V,255&V.gzhead.extra.length),q(V,V.gzhead.extra.length>>8&255)),V.gzhead.hcrc&&(C.adler=l(C.adler,V.pending_buf,V.pending,0)),V.gzindex=0,V.status=69):(q(V,0),q(V,0),q(V,0),q(V,0),q(V,0),q(V,V.level===9?2:2<=V.strategy||V.level<2?4:0),q(V,3),V.status=W);else{var ue=b+(V.w_bits-8<<4)<<8;ue|=(2<=V.strategy||V.level<2?0:V.level<6?1:V.level===6?2:3)<<6,V.strstart!==0&&(ue|=32),ue+=31-ue%31,V.status=W,Q(V,ue),V.strstart!==0&&(Q(V,C.adler>>>16),Q(V,65535&C.adler)),C.adler=1}if(V.status===69)if(V.gzhead.extra){for($=V.pending;V.gzindex<(65535&V.gzhead.extra.length)&&(V.pending!==V.pending_buf_size||(V.gzhead.hcrc&&V.pending>$&&(C.adler=l(C.adler,V.pending_buf,V.pending-$,$)),L(C),$=V.pending,V.pending!==V.pending_buf_size));)q(V,255&V.gzhead.extra[V.gzindex]),V.gzindex++;V.gzhead.hcrc&&V.pending>$&&(C.adler=l(C.adler,V.pending_buf,V.pending-$,$)),V.gzindex===V.gzhead.extra.length&&(V.gzindex=0,V.status=73)}else V.status=73;if(V.status===73)if(V.gzhead.name){$=V.pending;do{if(V.pending===V.pending_buf_size&&(V.gzhead.hcrc&&V.pending>$&&(C.adler=l(C.adler,V.pending_buf,V.pending-$,$)),L(C),$=V.pending,V.pending===V.pending_buf_size)){J=1;break}J=V.gzindex<V.gzhead.name.length?255&V.gzhead.name.charCodeAt(V.gzindex++):0,q(V,J)}while(J!==0);V.gzhead.hcrc&&V.pending>$&&(C.adler=l(C.adler,V.pending_buf,V.pending-$,$)),J===0&&(V.gzindex=0,V.status=91)}else V.status=91;if(V.status===91)if(V.gzhead.comment){$=V.pending;do{if(V.pending===V.pending_buf_size&&(V.gzhead.hcrc&&V.pending>$&&(C.adler=l(C.adler,V.pending_buf,V.pending-$,$)),L(C),$=V.pending,V.pending===V.pending_buf_size)){J=1;break}J=V.gzindex<V.gzhead.comment.length?255&V.gzhead.comment.charCodeAt(V.gzindex++):0,q(V,J)}while(J!==0);V.gzhead.hcrc&&V.pending>$&&(C.adler=l(C.adler,V.pending_buf,V.pending-$,$)),J===0&&(V.status=103)}else V.status=103;if(V.status===103&&(V.gzhead.hcrc?(V.pending+2>V.pending_buf_size&&L(C),V.pending+2<=V.pending_buf_size&&(q(V,255&C.adler),q(V,C.adler>>8&255),C.adler=0,V.status=W)):V.status=W),V.pending!==0){if(L(C),C.avail_out===0)return V.last_flush=-1,g}else if(C.avail_in===0&&N(ie)<=N(te)&&ie!==f)return R(C,-5);if(V.status===666&&C.avail_in!==0)return R(C,-5);if(C.avail_in!==0||V.lookahead!==0||ie!==h&&V.status!==666){var pe=V.strategy===2?function(Z,X){for(var K;;){if(Z.lookahead===0&&(be(Z),Z.lookahead===0)){if(X===h)return S;break}if(Z.match_length=0,K=o._tr_tally(Z,0,Z.window[Z.strstart]),Z.lookahead--,Z.strstart++,K&&(P(Z,!1),Z.strm.avail_out===0))return S}return Z.insert=0,X===f?(P(Z,!0),Z.strm.avail_out===0?j:M):Z.last_lit&&(P(Z,!1),Z.strm.avail_out===0)?S:G}(V,ie):V.strategy===3?function(Z,X){for(var K,ne,oe,we,Ue=Z.window;;){if(Z.lookahead<=z){if(be(Z),Z.lookahead<=z&&X===h)return S;if(Z.lookahead===0)break}if(Z.match_length=0,Z.lookahead>=I&&0<Z.strstart&&(ne=Ue[oe=Z.strstart-1])===Ue[++oe]&&ne===Ue[++oe]&&ne===Ue[++oe]){we=Z.strstart+z;do;while(ne===Ue[++oe]&&ne===Ue[++oe]&&ne===Ue[++oe]&&ne===Ue[++oe]&&ne===Ue[++oe]&&ne===Ue[++oe]&&ne===Ue[++oe]&&ne===Ue[++oe]&&oe<we);Z.match_length=z-(we-oe),Z.match_length>Z.lookahead&&(Z.match_length=Z.lookahead)}if(Z.match_length>=I?(K=o._tr_tally(Z,1,Z.match_length-I),Z.lookahead-=Z.match_length,Z.strstart+=Z.match_length,Z.match_length=0):(K=o._tr_tally(Z,0,Z.window[Z.strstart]),Z.lookahead--,Z.strstart++),K&&(P(Z,!1),Z.strm.avail_out===0))return S}return Z.insert=0,X===f?(P(Z,!0),Z.strm.avail_out===0?j:M):Z.last_lit&&(P(Z,!1),Z.strm.avail_out===0)?S:G}(V,ie):s[V.level].func(V,ie);if(pe!==j&&pe!==M||(V.status=666),pe===S||pe===j)return C.avail_out===0&&(V.last_flush=-1),g;if(pe===G&&(ie===1?o._tr_align(V):ie!==5&&(o._tr_stored_block(V,0,0,!1),ie===3&&(B(V.head),V.lookahead===0&&(V.strstart=0,V.block_start=0,V.insert=0))),L(C),C.avail_out===0))return V.last_flush=-1,g}return ie!==f?g:V.wrap<=0?1:(V.wrap===2?(q(V,255&C.adler),q(V,C.adler>>8&255),q(V,C.adler>>16&255),q(V,C.adler>>24&255),q(V,255&C.total_in),q(V,C.total_in>>8&255),q(V,C.total_in>>16&255),q(V,C.total_in>>24&255)):(Q(V,C.adler>>>16),Q(V,65535&C.adler)),L(C),0<V.wrap&&(V.wrap=-V.wrap),V.pending!==0?g:1)},r.deflateEnd=function(C){var ie;return C&&C.state?(ie=C.state.status)!==k&&ie!==69&&ie!==73&&ie!==91&&ie!==103&&ie!==W&&ie!==666?R(C,v):(C.state=null,ie===W?R(C,-3):g):v},r.deflateSetDictionary=function(C,ie){var te,V,$,J,ue,pe,Z,X,K=ie.length;if(!C||!C.state||(J=(te=C.state).wrap)===2||J===1&&te.status!==k||te.lookahead)return v;for(J===1&&(C.adler=c(C.adler,ie,K,0)),te.wrap=0,K>=te.w_size&&(J===0&&(B(te.head),te.strstart=0,te.block_start=0,te.insert=0),X=new a.Buf8(te.w_size),a.arraySet(X,ie,K-te.w_size,te.w_size,0),ie=X,K=te.w_size),ue=C.avail_in,pe=C.next_in,Z=C.input,C.avail_in=K,C.next_in=0,C.input=ie,be(te);te.lookahead>=I;){for(V=te.strstart,$=te.lookahead-(I-1);te.ins_h=(te.ins_h<<te.hash_shift^te.window[V+I-1])&te.hash_mask,te.prev[V&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=V,V++,--$;);te.strstart=V,te.lookahead=I-1,be(te)}return te.strstart+=te.lookahead,te.block_start=te.strstart,te.insert=te.lookahead,te.lookahead=0,te.match_length=te.prev_length=I-1,te.match_available=0,C.next_in=pe,C.input=Z,C.avail_in=ue,te.wrap=J,g},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,i,r){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,i,r){i.exports=function(s,a){var o,c,l,d,h,f,g,v,y,x,m,b,w,_,D,A,E,F,I,z,H,k,W,S,G;o=s.state,c=s.next_in,S=s.input,l=c+(s.avail_in-5),d=s.next_out,G=s.output,h=d-(a-s.avail_out),f=d+(s.avail_out-257),g=o.dmax,v=o.wsize,y=o.whave,x=o.wnext,m=o.window,b=o.hold,w=o.bits,_=o.lencode,D=o.distcode,A=(1<<o.lenbits)-1,E=(1<<o.distbits)-1;e:do{w<15&&(b+=S[c++]<<w,w+=8,b+=S[c++]<<w,w+=8),F=_[b&A];t:for(;;){if(b>>>=I=F>>>24,w-=I,(I=F>>>16&255)===0)G[d++]=65535&F;else{if(!(16&I)){if(!(64&I)){F=_[(65535&F)+(b&(1<<I)-1)];continue t}if(32&I){o.mode=12;break e}s.msg="invalid literal/length code",o.mode=30;break e}z=65535&F,(I&=15)&&(w<I&&(b+=S[c++]<<w,w+=8),z+=b&(1<<I)-1,b>>>=I,w-=I),w<15&&(b+=S[c++]<<w,w+=8,b+=S[c++]<<w,w+=8),F=D[b&E];n:for(;;){if(b>>>=I=F>>>24,w-=I,!(16&(I=F>>>16&255))){if(!(64&I)){F=D[(65535&F)+(b&(1<<I)-1)];continue n}s.msg="invalid distance code",o.mode=30;break e}if(H=65535&F,w<(I&=15)&&(b+=S[c++]<<w,(w+=8)<I&&(b+=S[c++]<<w,w+=8)),g<(H+=b&(1<<I)-1)){s.msg="invalid distance too far back",o.mode=30;break e}if(b>>>=I,w-=I,(I=d-h)<H){if(y<(I=H-I)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break e}if(W=m,(k=0)===x){if(k+=v-I,I<z){for(z-=I;G[d++]=m[k++],--I;);k=d-H,W=G}}else if(x<I){if(k+=v+x-I,(I-=x)<z){for(z-=I;G[d++]=m[k++],--I;);if(k=0,x<z){for(z-=I=x;G[d++]=m[k++],--I;);k=d-H,W=G}}}else if(k+=x-I,I<z){for(z-=I;G[d++]=m[k++],--I;);k=d-H,W=G}for(;2<z;)G[d++]=W[k++],G[d++]=W[k++],G[d++]=W[k++],z-=3;z&&(G[d++]=W[k++],1<z&&(G[d++]=W[k++]))}else{for(k=d-H;G[d++]=G[k++],G[d++]=G[k++],G[d++]=G[k++],2<(z-=3););z&&(G[d++]=G[k++],1<z&&(G[d++]=G[k++]))}break}}break}}while(c<l&&d<f);c-=z=w>>3,b&=(1<<(w-=z<<3))-1,s.next_in=c,s.next_out=d,s.avail_in=c<l?l-c+5:5-(c-l),s.avail_out=d<f?f-d+257:257-(d-f),o.hold=b,o.bits=w}},{}],49:[function(t,i,r){var s=t("../utils/common"),a=t("./adler32"),o=t("./crc32"),c=t("./inffast"),l=t("./inftrees"),d=1,h=2,f=0,g=-2,v=1,y=852,x=592;function m(k){return(k>>>24&255)+(k>>>8&65280)+((65280&k)<<8)+((255&k)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(k){var W;return k&&k.state?(W=k.state,k.total_in=k.total_out=W.total=0,k.msg="",W.wrap&&(k.adler=1&W.wrap),W.mode=v,W.last=0,W.havedict=0,W.dmax=32768,W.head=null,W.hold=0,W.bits=0,W.lencode=W.lendyn=new s.Buf32(y),W.distcode=W.distdyn=new s.Buf32(x),W.sane=1,W.back=-1,f):g}function _(k){var W;return k&&k.state?((W=k.state).wsize=0,W.whave=0,W.wnext=0,w(k)):g}function D(k,W){var S,G;return k&&k.state?(G=k.state,W<0?(S=0,W=-W):(S=1+(W>>4),W<48&&(W&=15)),W&&(W<8||15<W)?g:(G.window!==null&&G.wbits!==W&&(G.window=null),G.wrap=S,G.wbits=W,_(k))):g}function A(k,W){var S,G;return k?(G=new b,(k.state=G).window=null,(S=D(k,W))!==f&&(k.state=null),S):g}var E,F,I=!0;function z(k){if(I){var W;for(E=new s.Buf32(512),F=new s.Buf32(32),W=0;W<144;)k.lens[W++]=8;for(;W<256;)k.lens[W++]=9;for(;W<280;)k.lens[W++]=7;for(;W<288;)k.lens[W++]=8;for(l(d,k.lens,0,288,E,0,k.work,{bits:9}),W=0;W<32;)k.lens[W++]=5;l(h,k.lens,0,32,F,0,k.work,{bits:5}),I=!1}k.lencode=E,k.lenbits=9,k.distcode=F,k.distbits=5}function H(k,W,S,G){var j,M=k.state;return M.window===null&&(M.wsize=1<<M.wbits,M.wnext=0,M.whave=0,M.window=new s.Buf8(M.wsize)),G>=M.wsize?(s.arraySet(M.window,W,S-M.wsize,M.wsize,0),M.wnext=0,M.whave=M.wsize):(G<(j=M.wsize-M.wnext)&&(j=G),s.arraySet(M.window,W,S-G,j,M.wnext),(G-=j)?(s.arraySet(M.window,W,S-G,G,0),M.wnext=G,M.whave=M.wsize):(M.wnext+=j,M.wnext===M.wsize&&(M.wnext=0),M.whave<M.wsize&&(M.whave+=j))),0}r.inflateReset=_,r.inflateReset2=D,r.inflateResetKeep=w,r.inflateInit=function(k){return A(k,15)},r.inflateInit2=A,r.inflate=function(k,W){var S,G,j,M,R,N,B,L,P,q,Q,se,be,ye,fe,xe,ce,le,Y,ae,C,ie,te,V,$=0,J=new s.Buf8(4),ue=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return g;(S=k.state).mode===12&&(S.mode=13),R=k.next_out,j=k.output,B=k.avail_out,M=k.next_in,G=k.input,N=k.avail_in,L=S.hold,P=S.bits,q=N,Q=B,ie=f;e:for(;;)switch(S.mode){case v:if(S.wrap===0){S.mode=13;break}for(;P<16;){if(N===0)break e;N--,L+=G[M++]<<P,P+=8}if(2&S.wrap&&L===35615){J[S.check=0]=255&L,J[1]=L>>>8&255,S.check=o(S.check,J,2,0),P=L=0,S.mode=2;break}if(S.flags=0,S.head&&(S.head.done=!1),!(1&S.wrap)||(((255&L)<<8)+(L>>8))%31){k.msg="incorrect header check",S.mode=30;break}if((15&L)!=8){k.msg="unknown compression method",S.mode=30;break}if(P-=4,C=8+(15&(L>>>=4)),S.wbits===0)S.wbits=C;else if(C>S.wbits){k.msg="invalid window size",S.mode=30;break}S.dmax=1<<C,k.adler=S.check=1,S.mode=512&L?10:12,P=L=0;break;case 2:for(;P<16;){if(N===0)break e;N--,L+=G[M++]<<P,P+=8}if(S.flags=L,(255&S.flags)!=8){k.msg="unknown compression method",S.mode=30;break}if(57344&S.flags){k.msg="unknown header flags set",S.mode=30;break}S.head&&(S.head.text=L>>8&1),512&S.flags&&(J[0]=255&L,J[1]=L>>>8&255,S.check=o(S.check,J,2,0)),P=L=0,S.mode=3;case 3:for(;P<32;){if(N===0)break e;N--,L+=G[M++]<<P,P+=8}S.head&&(S.head.time=L),512&S.flags&&(J[0]=255&L,J[1]=L>>>8&255,J[2]=L>>>16&255,J[3]=L>>>24&255,S.check=o(S.check,J,4,0)),P=L=0,S.mode=4;case 4:for(;P<16;){if(N===0)break e;N--,L+=G[M++]<<P,P+=8}S.head&&(S.head.xflags=255&L,S.head.os=L>>8),512&S.flags&&(J[0]=255&L,J[1]=L>>>8&255,S.check=o(S.check,J,2,0)),P=L=0,S.mode=5;case 5:if(1024&S.flags){for(;P<16;){if(N===0)break e;N--,L+=G[M++]<<P,P+=8}S.length=L,S.head&&(S.head.extra_len=L),512&S.flags&&(J[0]=255&L,J[1]=L>>>8&255,S.check=o(S.check,J,2,0)),P=L=0}else S.head&&(S.head.extra=null);S.mode=6;case 6:if(1024&S.flags&&(N<(se=S.length)&&(se=N),se&&(S.head&&(C=S.head.extra_len-S.length,S.head.extra||(S.head.extra=new Array(S.head.extra_len)),s.arraySet(S.head.extra,G,M,se,C)),512&S.flags&&(S.check=o(S.check,G,se,M)),N-=se,M+=se,S.length-=se),S.length))break e;S.length=0,S.mode=7;case 7:if(2048&S.flags){if(N===0)break e;for(se=0;C=G[M+se++],S.head&&C&&S.length<65536&&(S.head.name+=String.fromCharCode(C)),C&&se<N;);if(512&S.flags&&(S.check=o(S.check,G,se,M)),N-=se,M+=se,C)break e}else S.head&&(S.head.name=null);S.length=0,S.mode=8;case 8:if(4096&S.flags){if(N===0)break e;for(se=0;C=G[M+se++],S.head&&C&&S.length<65536&&(S.head.comment+=String.fromCharCode(C)),C&&se<N;);if(512&S.flags&&(S.check=o(S.check,G,se,M)),N-=se,M+=se,C)break e}else S.head&&(S.head.comment=null);S.mode=9;case 9:if(512&S.flags){for(;P<16;){if(N===0)break e;N--,L+=G[M++]<<P,P+=8}if(L!==(65535&S.check)){k.msg="header crc mismatch",S.mode=30;break}P=L=0}S.head&&(S.head.hcrc=S.flags>>9&1,S.head.done=!0),k.adler=S.check=0,S.mode=12;break;case 10:for(;P<32;){if(N===0)break e;N--,L+=G[M++]<<P,P+=8}k.adler=S.check=m(L),P=L=0,S.mode=11;case 11:if(S.havedict===0)return k.next_out=R,k.avail_out=B,k.next_in=M,k.avail_in=N,S.hold=L,S.bits=P,2;k.adler=S.check=1,S.mode=12;case 12:if(W===5||W===6)break e;case 13:if(S.last){L>>>=7&P,P-=7&P,S.mode=27;break}for(;P<3;){if(N===0)break e;N--,L+=G[M++]<<P,P+=8}switch(S.last=1&L,P-=1,3&(L>>>=1)){case 0:S.mode=14;break;case 1:if(z(S),S.mode=20,W!==6)break;L>>>=2,P-=2;break e;case 2:S.mode=17;break;case 3:k.msg="invalid block type",S.mode=30}L>>>=2,P-=2;break;case 14:for(L>>>=7&P,P-=7&P;P<32;){if(N===0)break e;N--,L+=G[M++]<<P,P+=8}if((65535&L)!=(L>>>16^65535)){k.msg="invalid stored block lengths",S.mode=30;break}if(S.length=65535&L,P=L=0,S.mode=15,W===6)break e;case 15:S.mode=16;case 16:if(se=S.length){if(N<se&&(se=N),B<se&&(se=B),se===0)break e;s.arraySet(j,G,M,se,R),N-=se,M+=se,B-=se,R+=se,S.length-=se;break}S.mode=12;break;case 17:for(;P<14;){if(N===0)break e;N--,L+=G[M++]<<P,P+=8}if(S.nlen=257+(31&L),L>>>=5,P-=5,S.ndist=1+(31&L),L>>>=5,P-=5,S.ncode=4+(15&L),L>>>=4,P-=4,286<S.nlen||30<S.ndist){k.msg="too many length or distance symbols",S.mode=30;break}S.have=0,S.mode=18;case 18:for(;S.have<S.ncode;){for(;P<3;){if(N===0)break e;N--,L+=G[M++]<<P,P+=8}S.lens[ue[S.have++]]=7&L,L>>>=3,P-=3}for(;S.have<19;)S.lens[ue[S.have++]]=0;if(S.lencode=S.lendyn,S.lenbits=7,te={bits:S.lenbits},ie=l(0,S.lens,0,19,S.lencode,0,S.work,te),S.lenbits=te.bits,ie){k.msg="invalid code lengths set",S.mode=30;break}S.have=0,S.mode=19;case 19:for(;S.have<S.nlen+S.ndist;){for(;xe=($=S.lencode[L&(1<<S.lenbits)-1])>>>16&255,ce=65535&$,!((fe=$>>>24)<=P);){if(N===0)break e;N--,L+=G[M++]<<P,P+=8}if(ce<16)L>>>=fe,P-=fe,S.lens[S.have++]=ce;else{if(ce===16){for(V=fe+2;P<V;){if(N===0)break e;N--,L+=G[M++]<<P,P+=8}if(L>>>=fe,P-=fe,S.have===0){k.msg="invalid bit length repeat",S.mode=30;break}C=S.lens[S.have-1],se=3+(3&L),L>>>=2,P-=2}else if(ce===17){for(V=fe+3;P<V;){if(N===0)break e;N--,L+=G[M++]<<P,P+=8}P-=fe,C=0,se=3+(7&(L>>>=fe)),L>>>=3,P-=3}else{for(V=fe+7;P<V;){if(N===0)break e;N--,L+=G[M++]<<P,P+=8}P-=fe,C=0,se=11+(127&(L>>>=fe)),L>>>=7,P-=7}if(S.have+se>S.nlen+S.ndist){k.msg="invalid bit length repeat",S.mode=30;break}for(;se--;)S.lens[S.have++]=C}}if(S.mode===30)break;if(S.lens[256]===0){k.msg="invalid code -- missing end-of-block",S.mode=30;break}if(S.lenbits=9,te={bits:S.lenbits},ie=l(d,S.lens,0,S.nlen,S.lencode,0,S.work,te),S.lenbits=te.bits,ie){k.msg="invalid literal/lengths set",S.mode=30;break}if(S.distbits=6,S.distcode=S.distdyn,te={bits:S.distbits},ie=l(h,S.lens,S.nlen,S.ndist,S.distcode,0,S.work,te),S.distbits=te.bits,ie){k.msg="invalid distances set",S.mode=30;break}if(S.mode=20,W===6)break e;case 20:S.mode=21;case 21:if(6<=N&&258<=B){k.next_out=R,k.avail_out=B,k.next_in=M,k.avail_in=N,S.hold=L,S.bits=P,c(k,Q),R=k.next_out,j=k.output,B=k.avail_out,M=k.next_in,G=k.input,N=k.avail_in,L=S.hold,P=S.bits,S.mode===12&&(S.back=-1);break}for(S.back=0;xe=($=S.lencode[L&(1<<S.lenbits)-1])>>>16&255,ce=65535&$,!((fe=$>>>24)<=P);){if(N===0)break e;N--,L+=G[M++]<<P,P+=8}if(xe&&!(240&xe)){for(le=fe,Y=xe,ae=ce;xe=($=S.lencode[ae+((L&(1<<le+Y)-1)>>le)])>>>16&255,ce=65535&$,!(le+(fe=$>>>24)<=P);){if(N===0)break e;N--,L+=G[M++]<<P,P+=8}L>>>=le,P-=le,S.back+=le}if(L>>>=fe,P-=fe,S.back+=fe,S.length=ce,xe===0){S.mode=26;break}if(32&xe){S.back=-1,S.mode=12;break}if(64&xe){k.msg="invalid literal/length code",S.mode=30;break}S.extra=15&xe,S.mode=22;case 22:if(S.extra){for(V=S.extra;P<V;){if(N===0)break e;N--,L+=G[M++]<<P,P+=8}S.length+=L&(1<<S.extra)-1,L>>>=S.extra,P-=S.extra,S.back+=S.extra}S.was=S.length,S.mode=23;case 23:for(;xe=($=S.distcode[L&(1<<S.distbits)-1])>>>16&255,ce=65535&$,!((fe=$>>>24)<=P);){if(N===0)break e;N--,L+=G[M++]<<P,P+=8}if(!(240&xe)){for(le=fe,Y=xe,ae=ce;xe=($=S.distcode[ae+((L&(1<<le+Y)-1)>>le)])>>>16&255,ce=65535&$,!(le+(fe=$>>>24)<=P);){if(N===0)break e;N--,L+=G[M++]<<P,P+=8}L>>>=le,P-=le,S.back+=le}if(L>>>=fe,P-=fe,S.back+=fe,64&xe){k.msg="invalid distance code",S.mode=30;break}S.offset=ce,S.extra=15&xe,S.mode=24;case 24:if(S.extra){for(V=S.extra;P<V;){if(N===0)break e;N--,L+=G[M++]<<P,P+=8}S.offset+=L&(1<<S.extra)-1,L>>>=S.extra,P-=S.extra,S.back+=S.extra}if(S.offset>S.dmax){k.msg="invalid distance too far back",S.mode=30;break}S.mode=25;case 25:if(B===0)break e;if(se=Q-B,S.offset>se){if((se=S.offset-se)>S.whave&&S.sane){k.msg="invalid distance too far back",S.mode=30;break}be=se>S.wnext?(se-=S.wnext,S.wsize-se):S.wnext-se,se>S.length&&(se=S.length),ye=S.window}else ye=j,be=R-S.offset,se=S.length;for(B<se&&(se=B),B-=se,S.length-=se;j[R++]=ye[be++],--se;);S.length===0&&(S.mode=21);break;case 26:if(B===0)break e;j[R++]=S.length,B--,S.mode=21;break;case 27:if(S.wrap){for(;P<32;){if(N===0)break e;N--,L|=G[M++]<<P,P+=8}if(Q-=B,k.total_out+=Q,S.total+=Q,Q&&(k.adler=S.check=S.flags?o(S.check,j,Q,R-Q):a(S.check,j,Q,R-Q)),Q=B,(S.flags?L:m(L))!==S.check){k.msg="incorrect data check",S.mode=30;break}P=L=0}S.mode=28;case 28:if(S.wrap&&S.flags){for(;P<32;){if(N===0)break e;N--,L+=G[M++]<<P,P+=8}if(L!==(4294967295&S.total)){k.msg="incorrect length check",S.mode=30;break}P=L=0}S.mode=29;case 29:ie=1;break e;case 30:ie=-3;break e;case 31:return-4;case 32:default:return g}return k.next_out=R,k.avail_out=B,k.next_in=M,k.avail_in=N,S.hold=L,S.bits=P,(S.wsize||Q!==k.avail_out&&S.mode<30&&(S.mode<27||W!==4))&&H(k,k.output,k.next_out,Q-k.avail_out)?(S.mode=31,-4):(q-=k.avail_in,Q-=k.avail_out,k.total_in+=q,k.total_out+=Q,S.total+=Q,S.wrap&&Q&&(k.adler=S.check=S.flags?o(S.check,j,Q,k.next_out-Q):a(S.check,j,Q,k.next_out-Q)),k.data_type=S.bits+(S.last?64:0)+(S.mode===12?128:0)+(S.mode===20||S.mode===15?256:0),(q==0&&Q===0||W===4)&&ie===f&&(ie=-5),ie)},r.inflateEnd=function(k){if(!k||!k.state)return g;var W=k.state;return W.window&&(W.window=null),k.state=null,f},r.inflateGetHeader=function(k,W){var S;return k&&k.state&&2&(S=k.state).wrap?((S.head=W).done=!1,f):g},r.inflateSetDictionary=function(k,W){var S,G=W.length;return k&&k.state?(S=k.state).wrap!==0&&S.mode!==11?g:S.mode===11&&a(1,W,G,0)!==S.check?-3:H(k,W,G,G)?(S.mode=31,-4):(S.havedict=1,f):g},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,i,r){var s=t("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(d,h,f,g,v,y,x,m){var b,w,_,D,A,E,F,I,z,H=m.bits,k=0,W=0,S=0,G=0,j=0,M=0,R=0,N=0,B=0,L=0,P=null,q=0,Q=new s.Buf16(16),se=new s.Buf16(16),be=null,ye=0;for(k=0;k<=15;k++)Q[k]=0;for(W=0;W<g;W++)Q[h[f+W]]++;for(j=H,G=15;1<=G&&Q[G]===0;G--);if(G<j&&(j=G),G===0)return v[y++]=20971520,v[y++]=20971520,m.bits=1,0;for(S=1;S<G&&Q[S]===0;S++);for(j<S&&(j=S),k=N=1;k<=15;k++)if(N<<=1,(N-=Q[k])<0)return-1;if(0<N&&(d===0||G!==1))return-1;for(se[1]=0,k=1;k<15;k++)se[k+1]=se[k]+Q[k];for(W=0;W<g;W++)h[f+W]!==0&&(x[se[h[f+W]]++]=W);if(E=d===0?(P=be=x,19):d===1?(P=a,q-=257,be=o,ye-=257,256):(P=c,be=l,-1),k=S,A=y,R=W=L=0,_=-1,D=(B=1<<(M=j))-1,d===1&&852<B||d===2&&592<B)return 1;for(;;){for(F=k-R,z=x[W]<E?(I=0,x[W]):x[W]>E?(I=be[ye+x[W]],P[q+x[W]]):(I=96,0),b=1<<k-R,S=w=1<<M;v[A+(L>>R)+(w-=b)]=F<<24|I<<16|z|0,w!==0;);for(b=1<<k-1;L&b;)b>>=1;if(b!==0?(L&=b-1,L+=b):L=0,W++,--Q[k]==0){if(k===G)break;k=h[f+x[W]]}if(j<k&&(L&D)!==_){for(R===0&&(R=j),A+=S,N=1<<(M=k-R);M+R<G&&!((N-=Q[M+R])<=0);)M++,N<<=1;if(B+=1<<M,d===1&&852<B||d===2&&592<B)return 1;v[_=L&D]=j<<24|M<<16|A-y|0}}return L!==0&&(v[A+L]=k-R<<24|64<<16|0),m.bits=j,0}},{"../utils/common":41}],51:[function(t,i,r){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,i,r){var s=t("../utils/common"),a=0,o=1;function c($){for(var J=$.length;0<=--J;)$[J]=0}var l=0,d=29,h=256,f=h+1+d,g=30,v=19,y=2*f+1,x=15,m=16,b=7,w=256,_=16,D=17,A=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],F=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=new Array(2*(f+2));c(H);var k=new Array(2*g);c(k);var W=new Array(512);c(W);var S=new Array(256);c(S);var G=new Array(d);c(G);var j,M,R,N=new Array(g);function B($,J,ue,pe,Z){this.static_tree=$,this.extra_bits=J,this.extra_base=ue,this.elems=pe,this.max_length=Z,this.has_stree=$&&$.length}function L($,J){this.dyn_tree=$,this.max_code=0,this.stat_desc=J}function P($){return $<256?W[$]:W[256+($>>>7)]}function q($,J){$.pending_buf[$.pending++]=255&J,$.pending_buf[$.pending++]=J>>>8&255}function Q($,J,ue){$.bi_valid>m-ue?($.bi_buf|=J<<$.bi_valid&65535,q($,$.bi_buf),$.bi_buf=J>>m-$.bi_valid,$.bi_valid+=ue-m):($.bi_buf|=J<<$.bi_valid&65535,$.bi_valid+=ue)}function se($,J,ue){Q($,ue[2*J],ue[2*J+1])}function be($,J){for(var ue=0;ue|=1&$,$>>>=1,ue<<=1,0<--J;);return ue>>>1}function ye($,J,ue){var pe,Z,X=new Array(x+1),K=0;for(pe=1;pe<=x;pe++)X[pe]=K=K+ue[pe-1]<<1;for(Z=0;Z<=J;Z++){var ne=$[2*Z+1];ne!==0&&($[2*Z]=be(X[ne]++,ne))}}function fe($){var J;for(J=0;J<f;J++)$.dyn_ltree[2*J]=0;for(J=0;J<g;J++)$.dyn_dtree[2*J]=0;for(J=0;J<v;J++)$.bl_tree[2*J]=0;$.dyn_ltree[2*w]=1,$.opt_len=$.static_len=0,$.last_lit=$.matches=0}function xe($){8<$.bi_valid?q($,$.bi_buf):0<$.bi_valid&&($.pending_buf[$.pending++]=$.bi_buf),$.bi_buf=0,$.bi_valid=0}function ce($,J,ue,pe){var Z=2*J,X=2*ue;return $[Z]<$[X]||$[Z]===$[X]&&pe[J]<=pe[ue]}function le($,J,ue){for(var pe=$.heap[ue],Z=ue<<1;Z<=$.heap_len&&(Z<$.heap_len&&ce(J,$.heap[Z+1],$.heap[Z],$.depth)&&Z++,!ce(J,pe,$.heap[Z],$.depth));)$.heap[ue]=$.heap[Z],ue=Z,Z<<=1;$.heap[ue]=pe}function Y($,J,ue){var pe,Z,X,K,ne=0;if($.last_lit!==0)for(;pe=$.pending_buf[$.d_buf+2*ne]<<8|$.pending_buf[$.d_buf+2*ne+1],Z=$.pending_buf[$.l_buf+ne],ne++,pe===0?se($,Z,J):(se($,(X=S[Z])+h+1,J),(K=E[X])!==0&&Q($,Z-=G[X],K),se($,X=P(--pe),ue),(K=F[X])!==0&&Q($,pe-=N[X],K)),ne<$.last_lit;);se($,w,J)}function ae($,J){var ue,pe,Z,X=J.dyn_tree,K=J.stat_desc.static_tree,ne=J.stat_desc.has_stree,oe=J.stat_desc.elems,we=-1;for($.heap_len=0,$.heap_max=y,ue=0;ue<oe;ue++)X[2*ue]!==0?($.heap[++$.heap_len]=we=ue,$.depth[ue]=0):X[2*ue+1]=0;for(;$.heap_len<2;)X[2*(Z=$.heap[++$.heap_len]=we<2?++we:0)]=1,$.depth[Z]=0,$.opt_len--,ne&&($.static_len-=K[2*Z+1]);for(J.max_code=we,ue=$.heap_len>>1;1<=ue;ue--)le($,X,ue);for(Z=oe;ue=$.heap[1],$.heap[1]=$.heap[$.heap_len--],le($,X,1),pe=$.heap[1],$.heap[--$.heap_max]=ue,$.heap[--$.heap_max]=pe,X[2*Z]=X[2*ue]+X[2*pe],$.depth[Z]=($.depth[ue]>=$.depth[pe]?$.depth[ue]:$.depth[pe])+1,X[2*ue+1]=X[2*pe+1]=Z,$.heap[1]=Z++,le($,X,1),2<=$.heap_len;);$.heap[--$.heap_max]=$.heap[1],function(Ue,He){var je,Xe,wt,Ke,Jt,Xn,Hi=He.dyn_tree,jg=He.max_code,Rg=He.stat_desc.static_tree,Rw=He.stat_desc.has_stree,Fw=He.stat_desc.extra_bits,yc=He.stat_desc.extra_base,bc=He.stat_desc.max_length,vc=0;for(Ke=0;Ke<=x;Ke++)Ue.bl_count[Ke]=0;for(Hi[2*Ue.heap[Ue.heap_max]+1]=0,je=Ue.heap_max+1;je<y;je++)bc<(Ke=Hi[2*Hi[2*(Xe=Ue.heap[je])+1]+1]+1)&&(Ke=bc,vc++),Hi[2*Xe+1]=Ke,jg<Xe||(Ue.bl_count[Ke]++,Jt=0,yc<=Xe&&(Jt=Fw[Xe-yc]),Xn=Hi[2*Xe],Ue.opt_len+=Xn*(Ke+Jt),Rw&&(Ue.static_len+=Xn*(Rg[2*Xe+1]+Jt)));if(vc!==0){do{for(Ke=bc-1;Ue.bl_count[Ke]===0;)Ke--;Ue.bl_count[Ke]--,Ue.bl_count[Ke+1]+=2,Ue.bl_count[bc]--,vc-=2}while(0<vc);for(Ke=bc;Ke!==0;Ke--)for(Xe=Ue.bl_count[Ke];Xe!==0;)jg<(wt=Ue.heap[--je])||(Hi[2*wt+1]!==Ke&&(Ue.opt_len+=(Ke-Hi[2*wt+1])*Hi[2*wt],Hi[2*wt+1]=Ke),Xe--)}}($,J),ye(X,we,$.bl_count)}function C($,J,ue){var pe,Z,X=-1,K=J[1],ne=0,oe=7,we=4;for(K===0&&(oe=138,we=3),J[2*(ue+1)+1]=65535,pe=0;pe<=ue;pe++)Z=K,K=J[2*(pe+1)+1],++ne<oe&&Z===K||(ne<we?$.bl_tree[2*Z]+=ne:Z!==0?(Z!==X&&$.bl_tree[2*Z]++,$.bl_tree[2*_]++):ne<=10?$.bl_tree[2*D]++:$.bl_tree[2*A]++,X=Z,we=(ne=0)===K?(oe=138,3):Z===K?(oe=6,3):(oe=7,4))}function ie($,J,ue){var pe,Z,X=-1,K=J[1],ne=0,oe=7,we=4;for(K===0&&(oe=138,we=3),pe=0;pe<=ue;pe++)if(Z=K,K=J[2*(pe+1)+1],!(++ne<oe&&Z===K)){if(ne<we)for(;se($,Z,$.bl_tree),--ne!=0;);else Z!==0?(Z!==X&&(se($,Z,$.bl_tree),ne--),se($,_,$.bl_tree),Q($,ne-3,2)):ne<=10?(se($,D,$.bl_tree),Q($,ne-3,3)):(se($,A,$.bl_tree),Q($,ne-11,7));X=Z,we=(ne=0)===K?(oe=138,3):Z===K?(oe=6,3):(oe=7,4)}}c(N);var te=!1;function V($,J,ue,pe){Q($,(l<<1)+(pe?1:0),3),function(Z,X,K,ne){xe(Z),q(Z,K),q(Z,~K),s.arraySet(Z.pending_buf,Z.window,X,K,Z.pending),Z.pending+=K}($,J,ue)}r._tr_init=function($){te||(function(){var J,ue,pe,Z,X,K=new Array(x+1);for(Z=pe=0;Z<d-1;Z++)for(G[Z]=pe,J=0;J<1<<E[Z];J++)S[pe++]=Z;for(S[pe-1]=Z,Z=X=0;Z<16;Z++)for(N[Z]=X,J=0;J<1<<F[Z];J++)W[X++]=Z;for(X>>=7;Z<g;Z++)for(N[Z]=X<<7,J=0;J<1<<F[Z]-7;J++)W[256+X++]=Z;for(ue=0;ue<=x;ue++)K[ue]=0;for(J=0;J<=143;)H[2*J+1]=8,J++,K[8]++;for(;J<=255;)H[2*J+1]=9,J++,K[9]++;for(;J<=279;)H[2*J+1]=7,J++,K[7]++;for(;J<=287;)H[2*J+1]=8,J++,K[8]++;for(ye(H,f+1,K),J=0;J<g;J++)k[2*J+1]=5,k[2*J]=be(J,5);j=new B(H,E,h+1,f,x),M=new B(k,F,0,g,x),R=new B(new Array(0),I,0,v,b)}(),te=!0),$.l_desc=new L($.dyn_ltree,j),$.d_desc=new L($.dyn_dtree,M),$.bl_desc=new L($.bl_tree,R),$.bi_buf=0,$.bi_valid=0,fe($)},r._tr_stored_block=V,r._tr_flush_block=function($,J,ue,pe){var Z,X,K=0;0<$.level?($.strm.data_type===2&&($.strm.data_type=function(ne){var oe,we=4093624447;for(oe=0;oe<=31;oe++,we>>>=1)if(1&we&&ne.dyn_ltree[2*oe]!==0)return a;if(ne.dyn_ltree[18]!==0||ne.dyn_ltree[20]!==0||ne.dyn_ltree[26]!==0)return o;for(oe=32;oe<h;oe++)if(ne.dyn_ltree[2*oe]!==0)return o;return a}($)),ae($,$.l_desc),ae($,$.d_desc),K=function(ne){var oe;for(C(ne,ne.dyn_ltree,ne.l_desc.max_code),C(ne,ne.dyn_dtree,ne.d_desc.max_code),ae(ne,ne.bl_desc),oe=v-1;3<=oe&&ne.bl_tree[2*z[oe]+1]===0;oe--);return ne.opt_len+=3*(oe+1)+5+5+4,oe}($),Z=$.opt_len+3+7>>>3,(X=$.static_len+3+7>>>3)<=Z&&(Z=X)):Z=X=ue+5,ue+4<=Z&&J!==-1?V($,J,ue,pe):$.strategy===4||X===Z?(Q($,2+(pe?1:0),3),Y($,H,k)):(Q($,4+(pe?1:0),3),function(ne,oe,we,Ue){var He;for(Q(ne,oe-257,5),Q(ne,we-1,5),Q(ne,Ue-4,4),He=0;He<Ue;He++)Q(ne,ne.bl_tree[2*z[He]+1],3);ie(ne,ne.dyn_ltree,oe-1),ie(ne,ne.dyn_dtree,we-1)}($,$.l_desc.max_code+1,$.d_desc.max_code+1,K+1),Y($,$.dyn_ltree,$.dyn_dtree)),fe($),pe&&xe($)},r._tr_tally=function($,J,ue){return $.pending_buf[$.d_buf+2*$.last_lit]=J>>>8&255,$.pending_buf[$.d_buf+2*$.last_lit+1]=255&J,$.pending_buf[$.l_buf+$.last_lit]=255&ue,$.last_lit++,J===0?$.dyn_ltree[2*ue]++:($.matches++,J--,$.dyn_ltree[2*(S[ue]+h+1)]++,$.dyn_dtree[2*P(J)]++),$.last_lit===$.lit_bufsize-1},r._tr_align=function($){Q($,2,3),se($,w,H),function(J){J.bi_valid===16?(q(J,J.bi_buf),J.bi_buf=0,J.bi_valid=0):8<=J.bi_valid&&(J.pending_buf[J.pending++]=255&J.bi_buf,J.bi_buf>>=8,J.bi_valid-=8)}($)}},{"../utils/common":41}],53:[function(t,i,r){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,i,r){(function(s){(function(a,o){if(!a.setImmediate){var c,l,d,h,f=1,g={},v=!1,y=a.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(a);x=x&&x.setTimeout?x:a,c={}.toString.call(a.process)==="[object process]"?function(_){process.nextTick(function(){b(_)})}:function(){if(a.postMessage&&!a.importScripts){var _=!0,D=a.onmessage;return a.onmessage=function(){_=!1},a.postMessage("","*"),a.onmessage=D,_}}()?(h="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",w,!1):a.attachEvent("onmessage",w),function(_){a.postMessage(h+_,"*")}):a.MessageChannel?((d=new MessageChannel).port1.onmessage=function(_){b(_.data)},function(_){d.port2.postMessage(_)}):y&&"onreadystatechange"in y.createElement("script")?(l=y.documentElement,function(_){var D=y.createElement("script");D.onreadystatechange=function(){b(_),D.onreadystatechange=null,l.removeChild(D),D=null},l.appendChild(D)}):function(_){setTimeout(b,0,_)},x.setImmediate=function(_){typeof _!="function"&&(_=new Function(""+_));for(var D=new Array(arguments.length-1),A=0;A<D.length;A++)D[A]=arguments[A+1];var E={callback:_,args:D};return g[f]=E,c(f),f++},x.clearImmediate=m}function m(_){delete g[_]}function b(_){if(v)setTimeout(b,0,_);else{var D=g[_];if(D){v=!0;try{(function(A){var E=A.callback,F=A.args;switch(F.length){case 0:E();break;case 1:E(F[0]);break;case 2:E(F[0],F[1]);break;case 3:E(F[0],F[1],F[2]);break;default:E.apply(o,F)}})(D)}finally{m(_),v=!1}}}}function w(_){_.source===a&&typeof _.data=="string"&&_.data.indexOf(h)===0&&b(+_.data.slice(h.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof ze<"u"?ze:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(EB);var OV=EB.exports,MV=nw,BV=OV;B0.openArrayBuffer=LV;B0.splitPath=IV;B0.joinPath=PV;function LV(n){return BV.loadAsync(n).then(function(e){function t(a){return e.file(a)!==null}function i(a,o){return e.file(a).async("uint8array").then(function(c){if(o==="base64")return MV.fromByteArray(c);if(o){var l=new TextDecoder(o);return l.decode(c)}else return c})}function r(a,o){e.file(a,o)}function s(){return e.generateAsync({type:"arraybuffer"})}return{exists:t,read:i,write:r,toArrayBuffer:s}})}function IV(n){var e=n.lastIndexOf("/");return e===-1?{dirname:"",basename:n}:{dirname:n.substring(0,e),basename:n.substring(e+1)}}function PV(){var n=Array.prototype.filter.call(arguments,function(t){return t}),e=[];return n.forEach(function(t){/^\//.test(t)?e=[t]:e.push(t)}),e.join("/")}var KC={},gc={},kg={},iw=mn;kg.Element=Ug;kg.element=function(n,e,t){return new Ug(n,e,t)};kg.text=function(n){return{type:"text",value:n}};var SB=kg.emptyElement={first:function(){return null},firstOrEmpty:function(){return SB},attributes:{},children:[]};function Ug(n,e,t){this.type="element",this.name=n,this.attributes=e||{},this.children=t||[]}Ug.prototype.first=function(n){return iw.find(this.children,function(e){return e.name===n})};Ug.prototype.firstOrEmpty=function(n){return this.first(n)||SB};Ug.prototype.getElementsByTagName=function(n){var e=iw.filter(this.children,function(t){return t.name===n});return TB(e)};Ug.prototype.text=function(){if(this.children.length===0)return"";if(this.children.length!==1||this.children[0].type!=="text")throw new Error("Not implemented");return this.children[0].value};var zV={getElementsByTagName:function(n){return TB(iw.flatten(this.map(function(e){return e.getElementsByTagName(n)},!0)))}};function TB(n){return iw.extend(n,zV)}var CB={},QC={},rw={},Ga={},mc={};function WV(n,e,t){if(t===void 0&&(t=Array.prototype),n&&typeof t.find=="function")return t.find.call(n,e);for(var i=0;i<n.length;i++)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];if(e.call(void 0,r,i,n))return r}}function JC(n,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(n):n}function qV(n,e){if(n===null||typeof n!="object")throw new TypeError("target is not an object");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}var kB=JC({HTML:"text/html",isHTML:function(n){return n===kB.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),UB=JC({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(n){return n===UB.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});mc.assign=qV;mc.find=WV;mc.freeze=JC;mc.MIME_TYPE=kB;mc.NAMESPACE=UB;var NB=mc,Pa=NB.find,by=NB.NAMESPACE;function $V(n){return n!==""}function HV(n){return n?n.split(/[\t\n\f\r ]+/).filter($V):[]}function VV(n,e){return n.hasOwnProperty(e)||(n[e]=!0),n}function KN(n){if(!n)return[];var e=HV(n);return Object.keys(e.reduce(VV,{}))}function GV(n){return function(e){return n&&n.indexOf(e)!==-1}}function L0(n,e){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}function yr(n,e){var t=n.prototype;if(!(t instanceof e)){let i=function(){};i.prototype=e.prototype,i=new i,L0(t,i),n.prototype=t=i}t.constructor!=n&&(typeof n!="function"&&console.error("unknown Class:"+n),t.constructor=n)}var br={},js=br.ELEMENT_NODE=1,lg=br.ATTRIBUTE_NODE=2,W2=br.TEXT_NODE=3,jB=br.CDATA_SECTION_NODE=4,RB=br.ENTITY_REFERENCE_NODE=5,XV=br.ENTITY_NODE=6,FB=br.PROCESSING_INSTRUCTION_NODE=7,OB=br.COMMENT_NODE=8,MB=br.DOCUMENT_NODE=9,BB=br.DOCUMENT_TYPE_NODE=10,lc=br.DOCUMENT_FRAGMENT_NODE=11,YV=br.NOTATION_NODE=12,ki={},Vn={};ki.INDEX_SIZE_ERR=(Vn[1]="Index size error",1);ki.DOMSTRING_SIZE_ERR=(Vn[2]="DOMString size error",2);var lr=ki.HIERARCHY_REQUEST_ERR=(Vn[3]="Hierarchy request error",3);ki.WRONG_DOCUMENT_ERR=(Vn[4]="Wrong document",4);ki.INVALID_CHARACTER_ERR=(Vn[5]="Invalid character",5);ki.NO_DATA_ALLOWED_ERR=(Vn[6]="No data allowed",6);ki.NO_MODIFICATION_ALLOWED_ERR=(Vn[7]="No modification allowed",7);var LB=ki.NOT_FOUND_ERR=(Vn[8]="Not found",8);ki.NOT_SUPPORTED_ERR=(Vn[9]="Not supported",9);var QN=ki.INUSE_ATTRIBUTE_ERR=(Vn[10]="Attribute in use",10);ki.INVALID_STATE_ERR=(Vn[11]="Invalid state",11);ki.SYNTAX_ERR=(Vn[12]="Syntax error",12);ki.INVALID_MODIFICATION_ERR=(Vn[13]="Invalid modification",13);ki.NAMESPACE_ERR=(Vn[14]="Invalid namespace",14);ki.INVALID_ACCESS_ERR=(Vn[15]="Invalid access",15);function fn(n,e){if(e instanceof Error)var t=e;else t=this,Error.call(this,Vn[n]),this.message=Vn[n],Error.captureStackTrace&&Error.captureStackTrace(this,fn);return t.code=n,e&&(this.message=this.message+": "+e),t}fn.prototype=Error.prototype;L0(ki,fn);function Zo(){}Zo.prototype={length:0,item:function(n){return n>=0&&n<this.length?this[n]:null},toString:function(n,e){for(var t=[],i=0;i<this.length;i++)rf(this[i],t,n,e);return t.join("")},filter:function(n){return Array.prototype.filter.call(this,n)},indexOf:function(n){return Array.prototype.indexOf.call(this,n)}};function ug(n,e){this._node=n,this._refresh=e,ZC(this)}function ZC(n){var e=n._node._inc||n._node.ownerDocument._inc;if(n._inc!==e){var t=n._refresh(n._node);if(KB(n,"length",t.length),!n.$$length||t.length<n.$$length)for(var i=t.length;i in n;i++)Object.prototype.hasOwnProperty.call(n,i)&&delete n[i];L0(t,n),n._inc=e}}ug.prototype.item=function(n){return ZC(this),this[n]||null};yr(ug,Zo);function q2(){}function IB(n,e){for(var t=n.length;t--;)if(n[t]===e)return t}function JN(n,e,t,i){if(i?e[IB(e,i)]=t:e[e.length++]=t,n){t.ownerElement=n;var r=n.ownerDocument;r&&(i&&WB(r,n,i),KV(r,n,t))}}function ZN(n,e,t){var i=IB(e,t);if(i>=0){for(var r=e.length-1;i<r;)e[i]=e[++i];if(e.length=r,n){var s=n.ownerDocument;s&&(WB(s,n,t),t.ownerElement=null)}}else throw new fn(LB,new Error(n.tagName+"@"+t))}q2.prototype={length:0,item:Zo.prototype.item,getNamedItem:function(n){for(var e=this.length;e--;){var t=this[e];if(t.nodeName==n)return t}},setNamedItem:function(n){var e=n.ownerElement;if(e&&e!=this._ownerElement)throw new fn(QN);var t=this.getNamedItem(n.nodeName);return JN(this._ownerElement,this,n,t),t},setNamedItemNS:function(n){var e=n.ownerElement,t;if(e&&e!=this._ownerElement)throw new fn(QN);return t=this.getNamedItemNS(n.namespaceURI,n.localName),JN(this._ownerElement,this,n,t),t},removeNamedItem:function(n){var e=this.getNamedItem(n);return ZN(this._ownerElement,this,e),e},removeNamedItemNS:function(n,e){var t=this.getNamedItemNS(n,e);return ZN(this._ownerElement,this,t),t},getNamedItemNS:function(n,e){for(var t=this.length;t--;){var i=this[t];if(i.localName==e&&i.namespaceURI==n)return i}return null}};function PB(){}PB.prototype={hasFeature:function(n,e){return!0},createDocument:function(n,e,t){var i=new I0;if(i.implementation=this,i.childNodes=new Zo,i.doctype=t||null,t&&i.appendChild(t),e){var r=i.createElementNS(n,e);i.appendChild(r)}return i},createDocumentType:function(n,e,t){var i=new sw;return i.name=n,i.nodeName=n,i.publicId=e||"",i.systemId=t||"",i}};function xt(){}xt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(n,e){return $2(this,n,e)},replaceChild:function(n,e){$2(this,n,e,$B),e&&this.removeChild(e)},removeChild:function(n){return qB(this,n)},appendChild:function(n){return this.insertBefore(n,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(n){return LS(this.ownerDocument||this,this,n)},normalize:function(){for(var n=this.firstChild;n;){var e=n.nextSibling;e&&e.nodeType==W2&&n.nodeType==W2?(this.removeChild(e),n.appendData(e.data)):(n.normalize(),n=e)}},isSupported:function(n,e){return this.ownerDocument.implementation.hasFeature(n,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(n){for(var e=this;e;){var t=e._nsMap;if(t){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&t[i]===n)return i}e=e.nodeType==lg?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(n){for(var e=this;e;){var t=e._nsMap;if(t&&Object.prototype.hasOwnProperty.call(t,n))return t[n];e=e.nodeType==lg?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(n){var e=this.lookupPrefix(n);return e==null}};function zB(n){return n=="<"&&"&lt;"||n==">"&&"&gt;"||n=="&"&&"&amp;"||n=='"'&&"&quot;"||"&#"+n.charCodeAt()+";"}L0(br,xt);L0(br,xt.prototype);function vy(n,e){if(e(n))return!0;if(n=n.firstChild)do if(vy(n,e))return!0;while(n=n.nextSibling)}function I0(){this.ownerDocument=this}function KV(n,e,t){n&&n._inc++;var i=t.namespaceURI;i===by.XMLNS&&(e._nsMap[t.prefix?t.localName:""]=t.value)}function WB(n,e,t,i){n&&n._inc++;var r=t.namespaceURI;r===by.XMLNS&&delete e._nsMap[t.prefix?t.localName:""]}function ek(n,e,t){if(n&&n._inc){n._inc++;var i=e.childNodes;if(t)i[i.length++]=t;else{for(var r=e.firstChild,s=0;r;)i[s++]=r,r=r.nextSibling;i.length=s,delete i[i.length]}}}function qB(n,e){var t=e.previousSibling,i=e.nextSibling;return t?t.nextSibling=i:n.firstChild=i,i?i.previousSibling=t:n.lastChild=t,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,ek(n.ownerDocument,n),e}function QV(n){return n&&(n.nodeType===xt.DOCUMENT_NODE||n.nodeType===xt.DOCUMENT_FRAGMENT_NODE||n.nodeType===xt.ELEMENT_NODE)}function JV(n){return n&&(za(n)||tk(n)||uc(n)||n.nodeType===xt.DOCUMENT_FRAGMENT_NODE||n.nodeType===xt.COMMENT_NODE||n.nodeType===xt.PROCESSING_INSTRUCTION_NODE)}function uc(n){return n&&n.nodeType===xt.DOCUMENT_TYPE_NODE}function za(n){return n&&n.nodeType===xt.ELEMENT_NODE}function tk(n){return n&&n.nodeType===xt.TEXT_NODE}function e5(n,e){var t=n.childNodes||[];if(Pa(t,za)||uc(e))return!1;var i=Pa(t,uc);return!(e&&i&&t.indexOf(i)>t.indexOf(e))}function t5(n,e){var t=n.childNodes||[];function i(s){return za(s)&&s!==e}if(Pa(t,i))return!1;var r=Pa(t,uc);return!(e&&r&&t.indexOf(r)>t.indexOf(e))}function ZV(n,e,t){if(!QV(n))throw new fn(lr,"Unexpected parent node type "+n.nodeType);if(t&&t.parentNode!==n)throw new fn(LB,"child not in parent");if(!JV(e)||uc(e)&&n.nodeType!==xt.DOCUMENT_NODE)throw new fn(lr,"Unexpected node type "+e.nodeType+" for parent node type "+n.nodeType)}function eG(n,e,t){var i=n.childNodes||[],r=e.childNodes||[];if(e.nodeType===xt.DOCUMENT_FRAGMENT_NODE){var s=r.filter(za);if(s.length>1||Pa(r,tk))throw new fn(lr,"More than one element or text in fragment");if(s.length===1&&!e5(n,t))throw new fn(lr,"Element in fragment can not be inserted before doctype")}if(za(e)&&!e5(n,t))throw new fn(lr,"Only one element can be added and only after doctype");if(uc(e)){if(Pa(i,uc))throw new fn(lr,"Only one doctype is allowed");var a=Pa(i,za);if(t&&i.indexOf(a)<i.indexOf(t))throw new fn(lr,"Doctype can only be inserted before an element");if(!t&&a)throw new fn(lr,"Doctype can not be appended since element is present")}}function $B(n,e,t){var i=n.childNodes||[],r=e.childNodes||[];if(e.nodeType===xt.DOCUMENT_FRAGMENT_NODE){var s=r.filter(za);if(s.length>1||Pa(r,tk))throw new fn(lr,"More than one element or text in fragment");if(s.length===1&&!t5(n,t))throw new fn(lr,"Element in fragment can not be inserted before doctype")}if(za(e)&&!t5(n,t))throw new fn(lr,"Only one element can be added and only after doctype");if(uc(e)){if(Pa(i,function(c){return uc(c)&&c!==t}))throw new fn(lr,"Only one doctype is allowed");var a=Pa(i,za);if(t&&i.indexOf(a)<i.indexOf(t))throw new fn(lr,"Doctype can only be inserted before an element")}}function $2(n,e,t,i){ZV(n,e,t),n.nodeType===xt.DOCUMENT_NODE&&(i||eG)(n,e,t);var r=e.parentNode;if(r&&r.removeChild(e),e.nodeType===lc){var s=e.firstChild;if(s==null)return e;var a=e.lastChild}else s=a=e;var o=t?t.previousSibling:n.lastChild;s.previousSibling=o,a.nextSibling=t,o?o.nextSibling=s:n.firstChild=s,t==null?n.lastChild=a:t.previousSibling=a;do{s.parentNode=n;var c=n.ownerDocument||n;xy(s,c)}while(s!==a&&(s=s.nextSibling));return ek(n.ownerDocument||n,n),e.nodeType==lc&&(e.firstChild=e.lastChild=null),e}function xy(n,e){if(n.ownerDocument!==e){if(n.ownerDocument=e,n.nodeType===js&&n.attributes)for(var t=0;t<n.attributes.length;t++){var i=n.attributes.item(t);i&&(i.ownerDocument=e)}for(var r=n.firstChild;r;)xy(r,e),r=r.nextSibling}}function tG(n,e){e.parentNode&&e.parentNode.removeChild(e),e.parentNode=n,e.previousSibling=n.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:n.firstChild=e,n.lastChild=e,ek(n.ownerDocument,n,e);var t=n.ownerDocument||n;return xy(e,t),e}I0.prototype={nodeName:"#document",nodeType:MB,doctype:null,documentElement:null,_inc:1,insertBefore:function(n,e){if(n.nodeType==lc){for(var t=n.firstChild;t;){var i=t.nextSibling;this.insertBefore(t,e),t=i}return n}return $2(this,n,e),xy(n,this),this.documentElement===null&&n.nodeType===js&&(this.documentElement=n),n},removeChild:function(n){return this.documentElement==n&&(this.documentElement=null),qB(this,n)},replaceChild:function(n,e){$2(this,n,e,$B),xy(n,this),e&&this.removeChild(e),za(n)&&(this.documentElement=n)},importNode:function(n,e){return YB(this,n,e)},getElementById:function(n){var e=null;return vy(this.documentElement,function(t){if(t.nodeType==js&&t.getAttribute("id")==n)return e=t,!0}),e},getElementsByClassName:function(n){var e=KN(n);return new ug(this,function(t){var i=[];return e.length>0&&vy(t.documentElement,function(r){if(r!==t&&r.nodeType===js){var s=r.getAttribute("class");if(s){var a=n===s;if(!a){var o=KN(s);a=e.every(GV(o))}a&&i.push(r)}}}),i})},createElement:function(n){var e=new nh;e.ownerDocument=this,e.nodeName=n,e.tagName=n,e.localName=n,e.childNodes=new Zo;var t=e.attributes=new q2;return t._ownerElement=e,e},createDocumentFragment:function(){var n=new aw;return n.ownerDocument=this,n.childNodes=new Zo,n},createTextNode:function(n){var e=new nk;return e.ownerDocument=this,e.appendData(n),e},createComment:function(n){var e=new ik;return e.ownerDocument=this,e.appendData(n),e},createCDATASection:function(n){var e=new rk;return e.ownerDocument=this,e.appendData(n),e},createProcessingInstruction:function(n,e){var t=new ak;return t.ownerDocument=this,t.tagName=t.nodeName=t.target=n,t.nodeValue=t.data=e,t},createAttribute:function(n){var e=new H2;return e.ownerDocument=this,e.name=n,e.nodeName=n,e.localName=n,e.specified=!0,e},createEntityReference:function(n){var e=new sk;return e.ownerDocument=this,e.nodeName=n,e},createElementNS:function(n,e){var t=new nh,i=e.split(":"),r=t.attributes=new q2;return t.childNodes=new Zo,t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.namespaceURI=n,i.length==2?(t.prefix=i[0],t.localName=i[1]):t.localName=e,r._ownerElement=t,t},createAttributeNS:function(n,e){var t=new H2,i=e.split(":");return t.ownerDocument=this,t.nodeName=e,t.name=e,t.namespaceURI=n,t.specified=!0,i.length==2?(t.prefix=i[0],t.localName=i[1]):t.localName=e,t}};yr(I0,xt);function nh(){this._nsMap={}}nh.prototype={nodeType:js,hasAttribute:function(n){return this.getAttributeNode(n)!=null},getAttribute:function(n){var e=this.getAttributeNode(n);return e&&e.value||""},getAttributeNode:function(n){return this.attributes.getNamedItem(n)},setAttribute:function(n,e){var t=this.ownerDocument.createAttribute(n);t.value=t.nodeValue=""+e,this.setAttributeNode(t)},removeAttribute:function(n){var e=this.getAttributeNode(n);e&&this.removeAttributeNode(e)},appendChild:function(n){return n.nodeType===lc?this.insertBefore(n,null):tG(this,n)},setAttributeNode:function(n){return this.attributes.setNamedItem(n)},setAttributeNodeNS:function(n){return this.attributes.setNamedItemNS(n)},removeAttributeNode:function(n){return this.attributes.removeNamedItem(n.nodeName)},removeAttributeNS:function(n,e){var t=this.getAttributeNodeNS(n,e);t&&this.removeAttributeNode(t)},hasAttributeNS:function(n,e){return this.getAttributeNodeNS(n,e)!=null},getAttributeNS:function(n,e){var t=this.getAttributeNodeNS(n,e);return t&&t.value||""},setAttributeNS:function(n,e,t){var i=this.ownerDocument.createAttributeNS(n,e);i.value=i.nodeValue=""+t,this.setAttributeNode(i)},getAttributeNodeNS:function(n,e){return this.attributes.getNamedItemNS(n,e)},getElementsByTagName:function(n){return new ug(this,function(e){var t=[];return vy(e,function(i){i!==e&&i.nodeType==js&&(n==="*"||i.tagName==n)&&t.push(i)}),t})},getElementsByTagNameNS:function(n,e){return new ug(this,function(t){var i=[];return vy(t,function(r){r!==t&&r.nodeType===js&&(n==="*"||r.namespaceURI===n)&&(e==="*"||r.localName==e)&&i.push(r)}),i})}};I0.prototype.getElementsByTagName=nh.prototype.getElementsByTagName;I0.prototype.getElementsByTagNameNS=nh.prototype.getElementsByTagNameNS;yr(nh,xt);function H2(){}H2.prototype.nodeType=lg;yr(H2,xt);function P0(){}P0.prototype={data:"",substringData:function(n,e){return this.data.substring(n,n+e)},appendData:function(n){n=this.data+n,this.nodeValue=this.data=n,this.length=n.length},insertData:function(n,e){this.replaceData(n,0,e)},appendChild:function(n){throw new Error(Vn[lr])},deleteData:function(n,e){this.replaceData(n,e,"")},replaceData:function(n,e,t){var i=this.data.substring(0,n),r=this.data.substring(n+e);t=i+t+r,this.nodeValue=this.data=t,this.length=t.length}};yr(P0,xt);function nk(){}nk.prototype={nodeName:"#text",nodeType:W2,splitText:function(n){var e=this.data,t=e.substring(n);e=e.substring(0,n),this.data=this.nodeValue=e,this.length=e.length;var i=this.ownerDocument.createTextNode(t);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}};yr(nk,P0);function ik(){}ik.prototype={nodeName:"#comment",nodeType:OB};yr(ik,P0);function rk(){}rk.prototype={nodeName:"#cdata-section",nodeType:jB};yr(rk,P0);function sw(){}sw.prototype.nodeType=BB;yr(sw,xt);function HB(){}HB.prototype.nodeType=YV;yr(HB,xt);function VB(){}VB.prototype.nodeType=XV;yr(VB,xt);function sk(){}sk.prototype.nodeType=RB;yr(sk,xt);function aw(){}aw.prototype.nodeName="#document-fragment";aw.prototype.nodeType=lc;yr(aw,xt);function ak(){}ak.prototype.nodeType=FB;yr(ak,xt);function GB(){}GB.prototype.serializeToString=function(n,e,t){return XB.call(n,e,t)};xt.prototype.toString=XB;function XB(n,e){var t=[],i=this.nodeType==9&&this.documentElement||this,r=i.prefix,s=i.namespaceURI;if(s&&r==null){var r=i.lookupPrefix(s);if(r==null)var a=[{namespace:s,prefix:null}]}return rf(this,t,n,e,a),t.join("")}function n5(n,e,t){var i=n.prefix||"",r=n.namespaceURI;if(!r||i==="xml"&&r===by.XML||r===by.XMLNS)return!1;for(var s=t.length;s--;){var a=t[s];if(a.prefix===i)return a.namespace!==r}return!0}function bD(n,e,t){n.push(" ",e,'="',t.replace(/[<>&"\t\n\r]/g,zB),'"')}function rf(n,e,t,i,r){if(r||(r=[]),i)if(n=i(n),n){if(typeof n=="string"){e.push(n);return}}else return;switch(n.nodeType){case js:var s=n.attributes,a=s.length,m=n.firstChild,o=n.tagName;t=by.isHTML(n.namespaceURI)||t;var c=o;if(!t&&!n.prefix&&n.namespaceURI){for(var l,d=0;d<s.length;d++)if(s.item(d).name==="xmlns"){l=s.item(d).value;break}if(!l)for(var h=r.length-1;h>=0;h--){var f=r[h];if(f.prefix===""&&f.namespace===n.namespaceURI){l=f.namespace;break}}if(l!==n.namespaceURI)for(var h=r.length-1;h>=0;h--){var f=r[h];if(f.namespace===n.namespaceURI){f.prefix&&(c=f.prefix+":"+o);break}}}e.push("<",c);for(var g=0;g<a;g++){var v=s.item(g);v.prefix=="xmlns"?r.push({prefix:v.localName,namespace:v.value}):v.nodeName=="xmlns"&&r.push({prefix:"",namespace:v.value})}for(var g=0;g<a;g++){var v=s.item(g);if(n5(v,t,r)){var y=v.prefix||"",x=v.namespaceURI;bD(e,y?"xmlns:"+y:"xmlns",x),r.push({prefix:y,namespace:x})}rf(v,e,t,i,r)}if(o===c&&n5(n,t,r)){var y=n.prefix||"",x=n.namespaceURI;bD(e,y?"xmlns:"+y:"xmlns",x),r.push({prefix:y,namespace:x})}if(m||t&&!/^(?:meta|link|img|br|hr|input)$/i.test(o)){if(e.push(">"),t&&/^script$/i.test(o))for(;m;)m.data?e.push(m.data):rf(m,e,t,i,r.slice()),m=m.nextSibling;else for(;m;)rf(m,e,t,i,r.slice()),m=m.nextSibling;e.push("</",c,">")}else e.push("/>");return;case MB:case lc:for(var m=n.firstChild;m;)rf(m,e,t,i,r.slice()),m=m.nextSibling;return;case lg:return bD(e,n.name,n.value);case W2:return e.push(n.data.replace(/[<&>]/g,zB));case jB:return e.push("<![CDATA[",n.data,"]]>");case OB:return e.push("<!--",n.data,"-->");case BB:var b=n.publicId,w=n.systemId;if(e.push("<!DOCTYPE ",n.name),b)e.push(" PUBLIC ",b),w&&w!="."&&e.push(" ",w),e.push(">");else if(w&&w!=".")e.push(" SYSTEM ",w,">");else{var _=n.internalSubset;_&&e.push(" [",_,"]"),e.push(">")}return;case FB:return e.push("<?",n.target," ",n.data,"?>");case RB:return e.push("&",n.nodeName,";");default:e.push("??",n.nodeName)}}function YB(n,e,t){var i;switch(e.nodeType){case js:i=e.cloneNode(!1),i.ownerDocument=n;case lc:break;case lg:t=!0;break}if(i||(i=e.cloneNode(!1)),i.ownerDocument=n,i.parentNode=null,t)for(var r=e.firstChild;r;)i.appendChild(YB(n,r,t)),r=r.nextSibling;return i}function LS(n,e,t){var i=new e.constructor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=e[r];typeof s!="object"&&s!=i[r]&&(i[r]=s)}switch(e.childNodes&&(i.childNodes=new Zo),i.ownerDocument=n,i.nodeType){case js:var a=e.attributes,o=i.attributes=new q2,c=a.length;o._ownerElement=i;for(var l=0;l<c;l++)i.setAttributeNode(LS(n,a.item(l),!0));break;case lg:t=!0}if(t)for(var d=e.firstChild;d;)i.appendChild(LS(n,d,t)),d=d.nextSibling;return i}function KB(n,e,t){n[e]=t}try{if(Object.defineProperty){let n=function(e){switch(e.nodeType){case js:case lc:var t=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&t.push(n(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}};Object.defineProperty(ug.prototype,"length",{get:function(){return ZC(this),this.$$length}}),Object.defineProperty(xt.prototype,"textContent",{get:function(){return n(this)},set:function(e){switch(this.nodeType){case js:case lc:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),KB=function(e,t,i){e["$$"+t]=i}}}catch{}Ga.DocumentType=sw;Ga.DOMException=fn;Ga.DOMImplementation=PB;Ga.Element=nh;Ga.Node=xt;Ga.NodeList=Zo;Ga.XMLSerializer=GB;var ow={},QB={};(function(n){var e=mc.freeze;n.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),n.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),n.entityMap=n.HTML_ENTITIES})(QB);var ok={},wy=mc.NAMESPACE,IS=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,i5=new RegExp("[\\-\\.0-9"+IS.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),r5=new RegExp("^"+IS.source+i5.source+"*(?::"+IS.source+i5.source+"*)?$"),Xg=0,wc=1,Eh=2,Yg=3,Sh=4,Th=5,Kg=6,Uv=7;function dg(n,e){this.message=n,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,dg)}dg.prototype=new Error;dg.prototype.name=dg.name;function JB(){}JB.prototype={parse:function(n,e,t){var i=this.domBuilder;i.startDocument(),ZB(e,e={}),nG(n,e,t,i,this.errorHandler),i.endDocument()}};function nG(n,e,t,i,r){function s(j){if(j>65535){j-=65536;var M=55296+(j>>10),R=56320+(j&1023);return String.fromCharCode(M,R)}else return String.fromCharCode(j)}function a(j){var M=j.slice(1,-1);return Object.hasOwnProperty.call(t,M)?t[M]:M.charAt(0)==="#"?s(parseInt(M.substr(1).replace("x","0x"))):(r.error("entity not found:"+j),j)}function o(j){if(j>y){var M=n.substring(y,j).replace(/&#?\w+;/g,a);f&&c(y),i.characters(M,0,j-y),y=j}}function c(j,M){for(;j>=d&&(M=h.exec(n));)l=M.index,d=l+M[0].length,f.lineNumber++;f.columnNumber=j-l+1}for(var l=0,d=0,h=/.*(?:\r\n?|\n)|.*$/g,f=i.locator,g=[{currentNSMap:e}],v={},y=0;;){try{var x=n.indexOf("<",y);if(x<0){if(!n.substr(y).match(/^\s*$/)){var m=i.doc,b=m.createTextNode(n.substr(y));m.appendChild(b),i.currentElement=b}return}switch(x>y&&o(x),n.charAt(x+1)){case"/":var H=n.indexOf(">",x+3),w=n.substring(x+2,H).replace(/[ \t\n\r]+$/g,""),_=g.pop();H<0?(w=n.substring(x+2).replace(/[\s<].*/,""),r.error("end tag name: "+w+" is not complete:"+_.tagName),H=x+1+w.length):w.match(/\s</)&&(w=w.replace(/[\s<].*/,""),r.error("end tag name: "+w+" maybe not complete"),H=x+1+w.length);var D=_.localNSMap,A=_.tagName==w,E=A||_.tagName&&_.tagName.toLowerCase()==w.toLowerCase();if(E){if(i.endElement(_.uri,_.localName,w),D)for(var F in D)Object.prototype.hasOwnProperty.call(D,F)&&i.endPrefixMapping(F);A||r.fatalError("end tag name: "+w+" is not match the current start tagName:"+_.tagName)}else g.push(_);H++;break;case"?":f&&c(x),H=oG(n,x,i);break;case"!":f&&c(x),H=aG(n,x,i,r);break;default:f&&c(x);var I=new eL,z=g[g.length-1].currentNSMap,H=iG(n,x,I,z,a,r),k=I.length;if(!I.closed&&sG(n,H,I.tagName,v)&&(I.closed=!0,t.nbsp||r.warning("unclosed xml attribute")),f&&k){for(var W=s5(f,{}),S=0;S<k;S++){var G=I[S];c(G.offset),G.locator=s5(f,{})}i.locator=W,a5(I,i,z)&&g.push(I),i.locator=f}else a5(I,i,z)&&g.push(I);wy.isHTML(I.uri)&&!I.closed?H=rG(n,H,I.tagName,a,i):H++}}catch(j){if(j instanceof dg)throw j;r.error("element parse error: "+j),H=-1}H>y?y=H:o(Math.max(x,y)+1)}}function s5(n,e){return e.lineNumber=n.lineNumber,e.columnNumber=n.columnNumber,e}function iG(n,e,t,i,r,s){function a(f,g,v){t.attributeNames.hasOwnProperty(f)&&s.fatalError("Attribute "+f+" redefined"),t.addValue(f,g.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,r),v)}for(var o,c,l=++e,d=Xg;;){var h=n.charAt(l);switch(h){case"=":if(d===wc)o=n.slice(e,l),d=Yg;else if(d===Eh)d=Yg;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(d===Yg||d===wc)if(d===wc&&(s.warning('attribute value must after "="'),o=n.slice(e,l)),e=l+1,l=n.indexOf(h,e),l>0)c=n.slice(e,l),a(o,c,e-1),d=Th;else throw new Error("attribute value no end '"+h+"' match");else if(d==Sh)c=n.slice(e,l),a(o,c,e),s.warning('attribute "'+o+'" missed start quot('+h+")!!"),e=l+1,d=Th;else throw new Error('attribute value must after "="');break;case"/":switch(d){case Xg:t.setTagName(n.slice(e,l));case Th:case Kg:case Uv:d=Uv,t.closed=!0;case Sh:case wc:break;case Eh:t.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),d==Xg&&t.setTagName(n.slice(e,l)),l;case">":switch(d){case Xg:t.setTagName(n.slice(e,l));case Th:case Kg:case Uv:break;case Sh:case wc:c=n.slice(e,l),c.slice(-1)==="/"&&(t.closed=!0,c=c.slice(0,-1));case Eh:d===Eh&&(c=o),d==Sh?(s.warning('attribute "'+c+'" missed quot(")!'),a(o,c,e)):((!wy.isHTML(i[""])||!c.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+c+'" missed value!! "'+c+'" instead!!'),a(c,c,e));break;case Yg:throw new Error("attribute value missed!!")}return l;case"":h=" ";default:if(h<=" ")switch(d){case Xg:t.setTagName(n.slice(e,l)),d=Kg;break;case wc:o=n.slice(e,l),d=Eh;break;case Sh:var c=n.slice(e,l);s.warning('attribute "'+c+'" missed quot(")!!'),a(o,c,e);case Th:d=Kg;break}else switch(d){case Eh:t.tagName,(!wy.isHTML(i[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),a(o,o,e),e=l,d=wc;break;case Th:s.warning('attribute space is required"'+o+'"!!');case Kg:d=wc,e=l;break;case Yg:d=Sh,e=l;break;case Uv:throw new Error("elements closed character '/' and '>' must be connected to")}}l++}}function a5(n,e,t){for(var i=n.tagName,r=null,h=n.length;h--;){var s=n[h],a=s.qName,o=s.value,f=a.indexOf(":");if(f>0)var c=s.prefix=a.slice(0,f),l=a.slice(f+1),d=c==="xmlns"&&l;else l=a,c=null,d=a==="xmlns"&&"";s.localName=l,d!==!1&&(r==null&&(r={},ZB(t,t={})),t[d]=r[d]=o,s.uri=wy.XMLNS,e.startPrefixMapping(d,o))}for(var h=n.length;h--;){s=n[h];var c=s.prefix;c&&(c==="xml"&&(s.uri=wy.XML),c!=="xmlns"&&(s.uri=t[c||""]))}var f=i.indexOf(":");f>0?(c=n.prefix=i.slice(0,f),l=n.localName=i.slice(f+1)):(c=null,l=n.localName=i);var g=n.uri=t[c||""];if(e.startElement(g,l,i,n),n.closed){if(e.endElement(g,l,i),r)for(c in r)Object.prototype.hasOwnProperty.call(r,c)&&e.endPrefixMapping(c)}else return n.currentNSMap=t,n.localNSMap=r,!0}function rG(n,e,t,i,r){if(/^(?:script|textarea)$/i.test(t)){var s=n.indexOf("</"+t+">",e),a=n.substring(e+1,s);if(/[&<]/.test(a))return/^script$/i.test(t)?(r.characters(a,0,a.length),s):(a=a.replace(/&#?\w+;/g,i),r.characters(a,0,a.length),s)}return e+1}function sG(n,e,t,i){var r=i[t];return r==null&&(r=n.lastIndexOf("</"+t+">"),r<e&&(r=n.lastIndexOf("</"+t)),i[t]=r),r<e}function ZB(n,e){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}function aG(n,e,t,i){var r=n.charAt(e+2);switch(r){case"-":if(n.charAt(e+3)==="-"){var s=n.indexOf("-->",e+4);return s>e?(t.comment(n,e+4,s-e-4),s+3):(i.error("Unclosed comment"),-1)}else return-1;default:if(n.substr(e+3,6)=="CDATA["){var s=n.indexOf("]]>",e+9);return t.startCDATA(),t.characters(n,e+9,s-e-9),t.endCDATA(),s+3}var a=cG(n,e),o=a.length;if(o>1&&/!doctype/i.test(a[0][0])){var c=a[1][0],l=!1,d=!1;o>3&&(/^public$/i.test(a[2][0])?(l=a[3][0],d=o>4&&a[4][0]):/^system$/i.test(a[2][0])&&(d=a[3][0]));var h=a[o-1];return t.startDTD(c,l,d),t.endDTD(),h.index+h[0].length}}return-1}function oG(n,e,t){var i=n.indexOf("?>",e);if(i){var r=n.substring(e,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return r?(r[0].length,t.processingInstruction(r[1],r[2]),i+2):-1}return-1}function eL(){this.attributeNames={}}eL.prototype={setTagName:function(n){if(!r5.test(n))throw new Error("invalid tagName:"+n);this.tagName=n},addValue:function(n,e,t){if(!r5.test(n))throw new Error("invalid attribute:"+n);this.attributeNames[n]=this.length,this[this.length++]={qName:n,value:e,offset:t}},length:0,getLocalName:function(n){return this[n].localName},getLocator:function(n){return this[n].locator},getQName:function(n){return this[n].qName},getURI:function(n){return this[n].uri},getValue:function(n){return this[n].value}};function cG(n,e){var t,i=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(r.lastIndex=e,r.exec(n);t=r.exec(n);)if(i.push(t),t[1])return i}ok.XMLReader=JB;ok.ParseError=dg;var lG=mc,uG=Ga,o5=QB,tL=ok,dG=uG.DOMImplementation,c5=lG.NAMESPACE,hG=tL.ParseError,fG=tL.XMLReader;function nL(n){return n.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function iL(n){this.options=n||{locator:{}}}iL.prototype.parseFromString=function(n,e){var t=this.options,i=new fG,r=t.domBuilder||new z0,s=t.errorHandler,a=t.locator,o=t.xmlns||{},c=/\/x?html?$/.test(e),l=c?o5.HTML_ENTITIES:o5.XML_ENTITIES;a&&r.setDocumentLocator(a),i.errorHandler=pG(s,r,a),i.domBuilder=t.domBuilder||r,c&&(o[""]=c5.HTML),o.xml=o.xml||c5.XML;var d=t.normalizeLineEndings||nL;return n&&typeof n=="string"?i.parse(d(n),o,l):i.errorHandler.error("invalid doc source"),r.doc};function pG(n,e,t){if(!n){if(e instanceof z0)return e;n=e}var i={},r=n instanceof Function;t=t||{};function s(a){var o=n[a];!o&&r&&(o=n.length==2?function(c){n(a,c)}:n),i[a]=o&&function(c){o("[xmldom "+a+"]	"+c+PS(t))}||function(){}}return s("warning"),s("error"),s("fatalError"),i}function z0(){this.cdata=!1}function Ch(n,e){e.lineNumber=n.lineNumber,e.columnNumber=n.columnNumber}z0.prototype={startDocument:function(){this.doc=new dG().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(n,e,t,i){var r=this.doc,s=r.createElementNS(n,t||e),a=i.length;Nv(this,s),this.currentElement=s,this.locator&&Ch(this.locator,s);for(var o=0;o<a;o++){var n=i.getURI(o),c=i.getValue(o),t=i.getQName(o),l=r.createAttributeNS(n,t);this.locator&&Ch(i.getLocator(o),l),l.value=l.nodeValue=c,s.setAttributeNode(l)}},endElement:function(n,e,t){var i=this.currentElement;i.tagName,this.currentElement=i.parentNode},startPrefixMapping:function(n,e){},endPrefixMapping:function(n){},processingInstruction:function(n,e){var t=this.doc.createProcessingInstruction(n,e);this.locator&&Ch(this.locator,t),Nv(this,t)},ignorableWhitespace:function(n,e,t){},characters:function(n,e,t){if(n=l5.apply(this,arguments),n){if(this.cdata)var i=this.doc.createCDATASection(n);else var i=this.doc.createTextNode(n);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(n)&&this.doc.appendChild(i),this.locator&&Ch(this.locator,i)}},skippedEntity:function(n){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(n){(this.locator=n)&&(n.lineNumber=0)},comment:function(n,e,t){n=l5.apply(this,arguments);var i=this.doc.createComment(n);this.locator&&Ch(this.locator,i),Nv(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(n,e,t){var i=this.doc.implementation;if(i&&i.createDocumentType){var r=i.createDocumentType(n,e,t);this.locator&&Ch(this.locator,r),Nv(this,r),this.doc.doctype=r}},warning:function(n){console.warn("[xmldom warning]	"+n,PS(this.locator))},error:function(n){console.error("[xmldom error]	"+n,PS(this.locator))},fatalError:function(n){throw new hG(n,this.locator)}};function PS(n){if(n)return`
@`+(n.systemId||"")+"#[line:"+n.lineNumber+",col:"+n.columnNumber+"]"}function l5(n,e,t){return typeof n=="string"?n.substr(e,t):n.length>=e+t||e?new java.lang.String(n,e,t)+"":n}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(n){z0.prototype[n]=function(){return null}});function Nv(n,e){n.currentElement?n.currentElement.appendChild(e):n.doc.appendChild(e)}ow.__DOMHandler=z0;ow.normalizeLineEndings=nL;ow.DOMParser=iL;var rL=Ga;rw.DOMImplementation=rL.DOMImplementation;rw.XMLSerializer=rL.XMLSerializer;rw.DOMParser=ow.DOMParser;var gG=rw,mG=Ga;function yG(n){var e=null,t=new gG.DOMParser({errorHandler:function(r,s){e={level:r,message:s}}}),i=t.parseFromString(n);if(e===null)return i;throw new Error(e.level+": "+e.message)}QC.parseFromString=yG;QC.Node=mG.Node;var vD=Gn,u5=mn,sL=QC,aL=kg,bG=aL.Element;CB.readString=vG;var d5=sL.Node;function vG(n,e){e=e||{};try{var t=sL.parseFromString(n,"text/xml")}catch(a){return vD.reject(a)}if(t.documentElement.tagName==="parsererror")return vD.resolve(new Error(t.documentElement.textContent));function i(a){switch(a.nodeType){case d5.ELEMENT_NODE:return r(a);case d5.TEXT_NODE:return aL.text(a.nodeValue)}}function r(a){var o=s(a),c=[];u5.forEach(a.childNodes,function(d){var h=i(d);h&&c.push(h)});var l={};return u5.forEach(a.attributes,function(d){l[s(d)]=d.value}),new bG(o,l,c)}function s(a){if(a.namespaceURI){var o=e[a.namespaceURI],c;return o?c=o+":":c="{"+a.namespaceURI+"}",c+a.localName}else return a.localName}return vD.resolve(i(t.documentElement))}var oL={},Cm={},Ja={},h5;function tu(){return h5||(h5=1,(function(){var n,e,t,i,r,s,a,o=[].slice,c={}.hasOwnProperty;n=function(){var l,d,h,f,g,v;if(v=arguments[0],g=2<=arguments.length?o.call(arguments,1):[],r(Object.assign))Object.assign.apply(null,arguments);else for(l=0,h=g.length;l<h;l++)if(f=g[l],f!=null)for(d in f)c.call(f,d)&&(v[d]=f[d]);return v},r=function(l){return!!l&&Object.prototype.toString.call(l)==="[object Function]"},s=function(l){var d;return!!l&&((d=typeof l)=="function"||d==="object")},t=function(l){return r(Array.isArray)?Array.isArray(l):Object.prototype.toString.call(l)==="[object Array]"},i=function(l){var d;if(t(l))return!l.length;for(d in l)if(c.call(l,d))return!1;return!0},a=function(l){var d,h;return s(l)&&(h=Object.getPrototypeOf(l))&&(d=h.constructor)&&typeof d=="function"&&d instanceof d&&Function.prototype.toString.call(d)===Function.prototype.toString.call(Object)},e=function(l){return r(l.valueOf)?l.valueOf():l},Ja.assign=n,Ja.isFunction=r,Ja.isObject=s,Ja.isArray=t,Ja.isEmpty=i,Ja.isPlainObject=a,Ja.getValue=e}).call(ze)),Ja}var xD={exports:{}},wD={exports:{}},_D={exports:{}},DD={exports:{}},f5;function cL(){return f5||(f5=1,(function(){DD.exports=function(){function n(e,t,i){if(this.options=e.options,this.stringify=e.stringify,this.parent=e,t==null)throw new Error("Missing attribute name. "+this.debugInfo(t));if(i==null)throw new Error("Missing attribute value. "+this.debugInfo(t));this.name=this.stringify.attName(t),this.value=this.stringify.attValue(i)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.set(e).attribute(this)},n.prototype.debugInfo=function(e){return e=e||this.name,e==null?"parent: <"+this.parent.name+">":"attribute: {"+e+"}, parent: <"+this.parent.name+">"},n}()}).call(ze)),DD.exports}var p5;function cw(){return p5||(p5=1,(function(){var n,e,t,i,r,s,a=function(c,l){for(var d in l)o.call(l,d)&&(c[d]=l[d]);function h(){this.constructor=c}return h.prototype=l.prototype,c.prototype=new h,c.__super__=l.prototype,c},o={}.hasOwnProperty;s=tu(),r=s.isObject,i=s.isFunction,t=s.getValue,e=vr(),n=cL(),_D.exports=function(c){a(l,c);function l(d,h,f){if(l.__super__.constructor.call(this,d),h==null)throw new Error("Missing element name. "+this.debugInfo());this.name=this.stringify.eleName(h),this.attributes={},f!=null&&this.attribute(f),d.isDocument&&(this.isRoot=!0,this.documentObject=d,d.rootObject=this)}return l.prototype.clone=function(){var d,h,f,g;f=Object.create(this),f.isRoot&&(f.documentObject=null),f.attributes={},g=this.attributes;for(h in g)o.call(g,h)&&(d=g[h],f.attributes[h]=d.clone());return f.children=[],this.children.forEach(function(v){var y;return y=v.clone(),y.parent=f,f.children.push(y)}),f},l.prototype.attribute=function(d,h){var f,g;if(d!=null&&(d=t(d)),r(d))for(f in d)o.call(d,f)&&(g=d[f],this.attribute(f,g));else i(h)&&(h=h.apply()),(!this.options.skipNullAttributes||h!=null)&&(this.attributes[d]=new n(this,d,h));return this},l.prototype.removeAttribute=function(d){var h,f,g;if(d==null)throw new Error("Missing attribute name. "+this.debugInfo());if(d=t(d),Array.isArray(d))for(f=0,g=d.length;f<g;f++)h=d[f],delete this.attributes[h];else delete this.attributes[d];return this},l.prototype.toString=function(d){return this.options.writer.set(d).element(this)},l.prototype.att=function(d,h){return this.attribute(d,h)},l.prototype.a=function(d,h){return this.attribute(d,h)},l}(e)}).call(ze)),_D.exports}var AD={exports:{}},g5;function lw(){return g5||(g5=1,(function(){var n,e=function(i,r){for(var s in r)t.call(r,s)&&(i[s]=r[s]);function a(){this.constructor=i}return a.prototype=r.prototype,i.prototype=new a,i.__super__=r.prototype,i},t={}.hasOwnProperty;n=vr(),AD.exports=function(i){e(r,i);function r(s,a){if(r.__super__.constructor.call(this,s),a==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.text=this.stringify.cdata(a)}return r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(s){return this.options.writer.set(s).cdata(this)},r}(n)}).call(ze)),AD.exports}var ED={exports:{}},m5;function uw(){return m5||(m5=1,(function(){var n,e=function(i,r){for(var s in r)t.call(r,s)&&(i[s]=r[s]);function a(){this.constructor=i}return a.prototype=r.prototype,i.prototype=new a,i.__super__=r.prototype,i},t={}.hasOwnProperty;n=vr(),ED.exports=function(i){e(r,i);function r(s,a){if(r.__super__.constructor.call(this,s),a==null)throw new Error("Missing comment text. "+this.debugInfo());this.text=this.stringify.comment(a)}return r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(s){return this.options.writer.set(s).comment(this)},r}(n)}).call(ze)),ED.exports}var SD={exports:{}},y5;function dw(){return y5||(y5=1,(function(){var n,e,t=function(r,s){for(var a in s)i.call(s,a)&&(r[a]=s[a]);function o(){this.constructor=r}return o.prototype=s.prototype,r.prototype=new o,r.__super__=s.prototype,r},i={}.hasOwnProperty;e=tu().isObject,n=vr(),SD.exports=function(r){t(s,r);function s(a,o,c,l){var d;s.__super__.constructor.call(this,a),e(o)&&(d=o,o=d.version,c=d.encoding,l=d.standalone),o||(o="1.0"),this.version=this.stringify.xmlVersion(o),c!=null&&(this.encoding=this.stringify.xmlEncoding(c)),l!=null&&(this.standalone=this.stringify.xmlStandalone(l))}return s.prototype.toString=function(a){return this.options.writer.set(a).declaration(this)},s}(n)}).call(ze)),SD.exports}var TD={exports:{}},CD={exports:{}},b5;function hw(){return b5||(b5=1,(function(){var n,e=function(i,r){for(var s in r)t.call(r,s)&&(i[s]=r[s]);function a(){this.constructor=i}return a.prototype=r.prototype,i.prototype=new a,i.__super__=r.prototype,i},t={}.hasOwnProperty;n=vr(),CD.exports=function(i){e(r,i);function r(s,a,o,c,l,d){if(r.__super__.constructor.call(this,s),a==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(o==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(a));if(!c)throw new Error("Missing DTD attribute type. "+this.debugInfo(a));if(!l)throw new Error("Missing DTD attribute default. "+this.debugInfo(a));if(l.indexOf("#")!==0&&(l="#"+l),!l.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(a));if(d&&!l.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(a));this.elementName=this.stringify.eleName(a),this.attributeName=this.stringify.attName(o),this.attributeType=this.stringify.dtdAttType(c),this.defaultValue=this.stringify.dtdAttDefault(d),this.defaultValueType=l}return r.prototype.toString=function(s){return this.options.writer.set(s).dtdAttList(this)},r}(n)}).call(ze)),CD.exports}var kD={exports:{}},v5;function fw(){return v5||(v5=1,(function(){var n,e,t=function(r,s){for(var a in s)i.call(s,a)&&(r[a]=s[a]);function o(){this.constructor=r}return o.prototype=s.prototype,r.prototype=new o,r.__super__=s.prototype,r},i={}.hasOwnProperty;e=tu().isObject,n=vr(),kD.exports=function(r){t(s,r);function s(a,o,c,l){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing DTD entity name. "+this.debugInfo(c));if(l==null)throw new Error("Missing DTD entity value. "+this.debugInfo(c));if(this.pe=!!o,this.name=this.stringify.eleName(c),!e(l))this.value=this.stringify.dtdEntityValue(l);else{if(!l.pubID&&!l.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(c));if(l.pubID&&!l.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(c));if(l.pubID!=null&&(this.pubID=this.stringify.dtdPubID(l.pubID)),l.sysID!=null&&(this.sysID=this.stringify.dtdSysID(l.sysID)),l.nData!=null&&(this.nData=this.stringify.dtdNData(l.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(c))}}return s.prototype.toString=function(a){return this.options.writer.set(a).dtdEntity(this)},s}(n)}).call(ze)),kD.exports}var UD={exports:{}},x5;function pw(){return x5||(x5=1,(function(){var n,e=function(i,r){for(var s in r)t.call(r,s)&&(i[s]=r[s]);function a(){this.constructor=i}return a.prototype=r.prototype,i.prototype=new a,i.__super__=r.prototype,i},t={}.hasOwnProperty;n=vr(),UD.exports=function(i){e(r,i);function r(s,a,o){if(r.__super__.constructor.call(this,s),a==null)throw new Error("Missing DTD element name. "+this.debugInfo());o||(o="(#PCDATA)"),Array.isArray(o)&&(o="("+o.join(",")+")"),this.name=this.stringify.eleName(a),this.value=this.stringify.dtdElementValue(o)}return r.prototype.toString=function(s){return this.options.writer.set(s).dtdElement(this)},r}(n)}).call(ze)),UD.exports}var ND={exports:{}},w5;function gw(){return w5||(w5=1,(function(){var n,e=function(i,r){for(var s in r)t.call(r,s)&&(i[s]=r[s]);function a(){this.constructor=i}return a.prototype=r.prototype,i.prototype=new a,i.__super__=r.prototype,i},t={}.hasOwnProperty;n=vr(),ND.exports=function(i){e(r,i);function r(s,a,o){if(r.__super__.constructor.call(this,s),a==null)throw new Error("Missing DTD notation name. "+this.debugInfo(a));if(!o.pubID&&!o.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(a));this.name=this.stringify.eleName(a),o.pubID!=null&&(this.pubID=this.stringify.dtdPubID(o.pubID)),o.sysID!=null&&(this.sysID=this.stringify.dtdSysID(o.sysID))}return r.prototype.toString=function(s){return this.options.writer.set(s).dtdNotation(this)},r}(n)}).call(ze)),ND.exports}var _5;function mw(){return _5||(_5=1,(function(){var n,e,t,i,r,s,a=function(c,l){for(var d in l)o.call(l,d)&&(c[d]=l[d]);function h(){this.constructor=c}return h.prototype=l.prototype,c.prototype=new h,c.__super__=l.prototype,c},o={}.hasOwnProperty;s=tu().isObject,r=vr(),n=hw(),t=fw(),e=pw(),i=gw(),TD.exports=function(c){a(l,c);function l(d,h,f){var g,v;l.__super__.constructor.call(this,d),this.name="!DOCTYPE",this.documentObject=d,s(h)&&(g=h,h=g.pubID,f=g.sysID),f==null&&(v=[h,f],f=v[0],h=v[1]),h!=null&&(this.pubID=this.stringify.dtdPubID(h)),f!=null&&(this.sysID=this.stringify.dtdSysID(f))}return l.prototype.element=function(d,h){var f;return f=new e(this,d,h),this.children.push(f),this},l.prototype.attList=function(d,h,f,g,v){var y;return y=new n(this,d,h,f,g,v),this.children.push(y),this},l.prototype.entity=function(d,h){var f;return f=new t(this,!1,d,h),this.children.push(f),this},l.prototype.pEntity=function(d,h){var f;return f=new t(this,!0,d,h),this.children.push(f),this},l.prototype.notation=function(d,h){var f;return f=new i(this,d,h),this.children.push(f),this},l.prototype.toString=function(d){return this.options.writer.set(d).docType(this)},l.prototype.ele=function(d,h){return this.element(d,h)},l.prototype.att=function(d,h,f,g,v){return this.attList(d,h,f,g,v)},l.prototype.ent=function(d,h){return this.entity(d,h)},l.prototype.pent=function(d,h){return this.pEntity(d,h)},l.prototype.not=function(d,h){return this.notation(d,h)},l.prototype.up=function(){return this.root()||this.documentObject},l}(r)}).call(ze)),TD.exports}var jD={exports:{}},D5;function yw(){return D5||(D5=1,(function(){var n,e=function(i,r){for(var s in r)t.call(r,s)&&(i[s]=r[s]);function a(){this.constructor=i}return a.prototype=r.prototype,i.prototype=new a,i.__super__=r.prototype,i},t={}.hasOwnProperty;n=vr(),jD.exports=function(i){e(r,i);function r(s,a){if(r.__super__.constructor.call(this,s),a==null)throw new Error("Missing raw text. "+this.debugInfo());this.value=this.stringify.raw(a)}return r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(s){return this.options.writer.set(s).raw(this)},r}(n)}).call(ze)),jD.exports}var RD={exports:{}},A5;function bw(){return A5||(A5=1,(function(){var n,e=function(i,r){for(var s in r)t.call(r,s)&&(i[s]=r[s]);function a(){this.constructor=i}return a.prototype=r.prototype,i.prototype=new a,i.__super__=r.prototype,i},t={}.hasOwnProperty;n=vr(),RD.exports=function(i){e(r,i);function r(s,a){if(r.__super__.constructor.call(this,s),a==null)throw new Error("Missing element text. "+this.debugInfo());this.value=this.stringify.eleText(a)}return r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(s){return this.options.writer.set(s).text(this)},r}(n)}).call(ze)),RD.exports}var FD={exports:{}},E5;function vw(){return E5||(E5=1,(function(){var n,e=function(i,r){for(var s in r)t.call(r,s)&&(i[s]=r[s]);function a(){this.constructor=i}return a.prototype=r.prototype,i.prototype=new a,i.__super__=r.prototype,i},t={}.hasOwnProperty;n=vr(),FD.exports=function(i){e(r,i);function r(s,a,o){if(r.__super__.constructor.call(this,s),a==null)throw new Error("Missing instruction target. "+this.debugInfo());this.target=this.stringify.insTarget(a),o&&(this.value=this.stringify.insValue(o))}return r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(s){return this.options.writer.set(s).processingInstruction(this)},r}(n)}).call(ze)),FD.exports}var OD={exports:{}},S5;function ck(){return S5||(S5=1,(function(){var n,e=function(i,r){for(var s in r)t.call(r,s)&&(i[s]=r[s]);function a(){this.constructor=i}return a.prototype=r.prototype,i.prototype=new a,i.__super__=r.prototype,i},t={}.hasOwnProperty;n=vr(),OD.exports=function(i){e(r,i);function r(s){r.__super__.constructor.call(this,s),this.isDummy=!0}return r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(s){return""},r}(n)}).call(ze)),OD.exports}var T5;function vr(){return T5||(T5=1,(function(){var n,e,t,i,r,s,a,o,c,l,d,h,f,g,v={}.hasOwnProperty;g=tu(),f=g.isObject,h=g.isFunction,d=g.isEmpty,l=g.getValue,s=null,n=null,e=null,t=null,i=null,o=null,c=null,a=null,r=null,wD.exports=function(){function y(x){this.parent=x,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.children=[],s||(s=cw(),n=lw(),e=uw(),t=dw(),i=mw(),o=yw(),c=bw(),a=vw(),r=ck())}return y.prototype.element=function(x,m,b){var w,_,D,A,E,F,I,z,H,k,W;if(F=null,m===null&&b==null&&(H=[{},null],m=H[0],b=H[1]),m==null&&(m={}),m=l(m),f(m)||(k=[m,b],b=k[0],m=k[1]),x!=null&&(x=l(x)),Array.isArray(x))for(D=0,I=x.length;D<I;D++)_=x[D],F=this.element(_);else if(h(x))F=this.element(x.apply());else if(f(x)){for(E in x)if(v.call(x,E))if(W=x[E],h(W)&&(W=W.apply()),f(W)&&d(W)&&(W=null),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&E.indexOf(this.stringify.convertAttKey)===0)F=this.attribute(E.substr(this.stringify.convertAttKey.length),W);else if(!this.options.separateArrayItems&&Array.isArray(W))for(A=0,z=W.length;A<z;A++)_=W[A],w={},w[E]=_,F=this.element(w);else f(W)?(F=this.element(E),F.element(W)):F=this.element(E,W)}else this.options.skipNullNodes&&b===null?F=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&x.indexOf(this.stringify.convertTextKey)===0?F=this.text(b):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&x.indexOf(this.stringify.convertCDataKey)===0?F=this.cdata(b):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&x.indexOf(this.stringify.convertCommentKey)===0?F=this.comment(b):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&x.indexOf(this.stringify.convertRawKey)===0?F=this.raw(b):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&x.indexOf(this.stringify.convertPIKey)===0?F=this.instruction(x.substr(this.stringify.convertPIKey.length),b):F=this.node(x,m,b);if(F==null)throw new Error("Could not create any elements with: "+x+". "+this.debugInfo());return F},y.prototype.insertBefore=function(x,m,b){var w,_,D;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(x));return _=this.parent.children.indexOf(this),D=this.parent.children.splice(_),w=this.parent.element(x,m,b),Array.prototype.push.apply(this.parent.children,D),w},y.prototype.insertAfter=function(x,m,b){var w,_,D;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(x));return _=this.parent.children.indexOf(this),D=this.parent.children.splice(_+1),w=this.parent.element(x,m,b),Array.prototype.push.apply(this.parent.children,D),w},y.prototype.remove=function(){var x;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return x=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[x,x-x+1].concat([])),this.parent},y.prototype.node=function(x,m,b){var w,_;return x!=null&&(x=l(x)),m||(m={}),m=l(m),f(m)||(_=[m,b],b=_[0],m=_[1]),w=new s(this,x,m),b!=null&&w.text(b),this.children.push(w),w},y.prototype.text=function(x){var m;return m=new c(this,x),this.children.push(m),this},y.prototype.cdata=function(x){var m;return m=new n(this,x),this.children.push(m),this},y.prototype.comment=function(x){var m;return m=new e(this,x),this.children.push(m),this},y.prototype.commentBefore=function(x){var m,b;return m=this.parent.children.indexOf(this),b=this.parent.children.splice(m),this.parent.comment(x),Array.prototype.push.apply(this.parent.children,b),this},y.prototype.commentAfter=function(x){var m,b;return m=this.parent.children.indexOf(this),b=this.parent.children.splice(m+1),this.parent.comment(x),Array.prototype.push.apply(this.parent.children,b),this},y.prototype.raw=function(x){var m;return m=new o(this,x),this.children.push(m),this},y.prototype.dummy=function(){var x;return x=new r(this),this.children.push(x),x},y.prototype.instruction=function(x,m){var b,w,_,D,A;if(x!=null&&(x=l(x)),m!=null&&(m=l(m)),Array.isArray(x))for(D=0,A=x.length;D<A;D++)b=x[D],this.instruction(b);else if(f(x))for(b in x)v.call(x,b)&&(w=x[b],this.instruction(b,w));else h(m)&&(m=m.apply()),_=new a(this,x,m),this.children.push(_);return this},y.prototype.instructionBefore=function(x,m){var b,w;return b=this.parent.children.indexOf(this),w=this.parent.children.splice(b),this.parent.instruction(x,m),Array.prototype.push.apply(this.parent.children,w),this},y.prototype.instructionAfter=function(x,m){var b,w;return b=this.parent.children.indexOf(this),w=this.parent.children.splice(b+1),this.parent.instruction(x,m),Array.prototype.push.apply(this.parent.children,w),this},y.prototype.declaration=function(x,m,b){var w,_;return w=this.document(),_=new t(w,x,m,b),w.children[0]instanceof t?w.children[0]=_:w.children.unshift(_),w.root()||w},y.prototype.doctype=function(x,m){var b,w,_,D,A,E,F,I,z,H;for(w=this.document(),_=new i(w,x,m),z=w.children,D=A=0,F=z.length;A<F;D=++A)if(b=z[D],b instanceof i)return w.children[D]=_,_;for(H=w.children,D=E=0,I=H.length;E<I;D=++E)if(b=H[D],b.isRoot)return w.children.splice(D,0,_),_;return w.children.push(_),_},y.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},y.prototype.root=function(){var x;for(x=this;x;){if(x.isDocument)return x.rootObject;if(x.isRoot)return x;x=x.parent}},y.prototype.document=function(){var x;for(x=this;x;){if(x.isDocument)return x;x=x.parent}},y.prototype.end=function(x){return this.document().end(x)},y.prototype.prev=function(){var x;for(x=this.parent.children.indexOf(this);x>0&&this.parent.children[x-1].isDummy;)x=x-1;if(x<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[x-1]},y.prototype.next=function(){var x;for(x=this.parent.children.indexOf(this);x<this.parent.children.length-1&&this.parent.children[x+1].isDummy;)x=x+1;if(x===-1||x===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[x+1]},y.prototype.importDocument=function(x){var m;return m=x.root().clone(),m.parent=this,m.isRoot=!1,this.children.push(m),this},y.prototype.debugInfo=function(x){var m,b;return x=x||this.name,x==null&&!((m=this.parent)!=null&&m.name)?"":x==null?"parent: <"+this.parent.name+">":(b=this.parent)!=null&&b.name?"node: <"+x+">, parent: <"+this.parent.name+">":"node: <"+x+">"},y.prototype.ele=function(x,m,b){return this.element(x,m,b)},y.prototype.nod=function(x,m,b){return this.node(x,m,b)},y.prototype.txt=function(x){return this.text(x)},y.prototype.dat=function(x){return this.cdata(x)},y.prototype.com=function(x){return this.comment(x)},y.prototype.ins=function(x,m){return this.instruction(x,m)},y.prototype.doc=function(){return this.document()},y.prototype.dec=function(x,m,b){return this.declaration(x,m,b)},y.prototype.dtd=function(x,m){return this.doctype(x,m)},y.prototype.e=function(x,m,b){return this.element(x,m,b)},y.prototype.n=function(x,m,b){return this.node(x,m,b)},y.prototype.t=function(x){return this.text(x)},y.prototype.d=function(x){return this.cdata(x)},y.prototype.c=function(x){return this.comment(x)},y.prototype.r=function(x){return this.raw(x)},y.prototype.i=function(x,m){return this.instruction(x,m)},y.prototype.u=function(){return this.up()},y.prototype.importXMLBuilder=function(x){return this.importDocument(x)},y}()}).call(ze)),wD.exports}var MD={exports:{}},C5;function lL(){return C5||(C5=1,(function(){var n=function(t,i){return function(){return t.apply(i,arguments)}},e={}.hasOwnProperty;MD.exports=function(){function t(i){this.assertLegalChar=n(this.assertLegalChar,this);var r,s,a;i||(i={}),this.noDoubleEncoding=i.noDoubleEncoding,s=i.stringify||{};for(r in s)e.call(s,r)&&(a=s[r],this[r]=a)}return t.prototype.eleName=function(i){return i=""+i||"",this.assertLegalChar(i)},t.prototype.eleText=function(i){return i=""+i||"",this.assertLegalChar(this.elEscape(i))},t.prototype.cdata=function(i){return i=""+i||"",i=i.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(i)},t.prototype.comment=function(i){if(i=""+i||"",i.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+i);return this.assertLegalChar(i)},t.prototype.raw=function(i){return""+i||""},t.prototype.attName=function(i){return i=""+i||""},t.prototype.attValue=function(i){return i=""+i||"",this.attEscape(i)},t.prototype.insTarget=function(i){return""+i||""},t.prototype.insValue=function(i){if(i=""+i||"",i.match(/\?>/))throw new Error("Invalid processing instruction value: "+i);return i},t.prototype.xmlVersion=function(i){if(i=""+i||"",!i.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+i);return i},t.prototype.xmlEncoding=function(i){if(i=""+i||"",!i.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+i);return i},t.prototype.xmlStandalone=function(i){return i?"yes":"no"},t.prototype.dtdPubID=function(i){return""+i||""},t.prototype.dtdSysID=function(i){return""+i||""},t.prototype.dtdElementValue=function(i){return""+i||""},t.prototype.dtdAttType=function(i){return""+i||""},t.prototype.dtdAttDefault=function(i){return i!=null?""+i||"":i},t.prototype.dtdEntityValue=function(i){return""+i||""},t.prototype.dtdNData=function(i){return""+i||""},t.prototype.convertAttKey="@",t.prototype.convertPIKey="?",t.prototype.convertTextKey="#text",t.prototype.convertCDataKey="#cdata",t.prototype.convertCommentKey="#comment",t.prototype.convertRawKey="#raw",t.prototype.assertLegalChar=function(i){var r;if(r=i.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/),r)throw new Error("Invalid character in string: "+i+" at index "+r.index);return i},t.prototype.elEscape=function(i){var r;return r=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(r,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},t.prototype.attEscape=function(i){var r;return r=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(r,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},t}()}).call(ze)),MD.exports}var BD={exports:{}},LD={exports:{}},k5;function uL(){return k5||(k5=1,(function(){var n={}.hasOwnProperty;LD.exports=function(){function e(t){var i,r,s,a,o,c,l,d,h;t||(t={}),this.pretty=t.pretty||!1,this.allowEmpty=(r=t.allowEmpty)!=null?r:!1,this.pretty?(this.indent=(s=t.indent)!=null?s:"  ",this.newline=(a=t.newline)!=null?a:`
`,this.offset=(o=t.offset)!=null?o:0,this.dontprettytextnodes=(c=t.dontprettytextnodes)!=null?c:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash=(l=t.spacebeforeslash)!=null?l:"",this.spacebeforeslash===!0&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,d=t.writer||{};for(i in d)n.call(d,i)&&(h=d[i],this[i]=h)}return e.prototype.set=function(t){var i,r,s;t||(t={}),"pretty"in t&&(this.pretty=t.pretty),"allowEmpty"in t&&(this.allowEmpty=t.allowEmpty),this.pretty?(this.indent="indent"in t?t.indent:"  ",this.newline="newline"in t?t.newline:`
`,this.offset="offset"in t?t.offset:0,this.dontprettytextnodes="dontprettytextnodes"in t?t.dontprettytextnodes:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash="spacebeforeslash"in t?t.spacebeforeslash:"",this.spacebeforeslash===!0&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,r=t.writer||{};for(i in r)n.call(r,i)&&(s=r[i],this[i]=s);return this},e.prototype.space=function(t){var i;return this.pretty?(i=(t||0)+this.offset+1,i>0?new Array(i).join(this.indent):""):""},e}()}).call(ze)),LD.exports}var U5;function lk(){return U5||(U5=1,(function(){var n,e,t,i,r,s,a,o,c,l,d,h,f,g,v=function(x,m){for(var b in m)y.call(m,b)&&(x[b]=m[b]);function w(){this.constructor=x}return w.prototype=m.prototype,x.prototype=new w,x.__super__=m.prototype,x},y={}.hasOwnProperty;a=dw(),o=mw(),n=lw(),e=uw(),l=cw(),h=yw(),f=bw(),d=vw(),c=ck(),t=hw(),i=pw(),r=fw(),s=gw(),g=uL(),BD.exports=function(x){v(m,x);function m(b){m.__super__.constructor.call(this,b)}return m.prototype.document=function(b){var w,_,D,A,E;for(this.textispresent=!1,A="",E=b.children,_=0,D=E.length;_<D;_++)w=E[_],!(w instanceof c)&&(A+=(function(){switch(!1){case!(w instanceof a):return this.declaration(w);case!(w instanceof o):return this.docType(w);case!(w instanceof e):return this.comment(w);case!(w instanceof d):return this.processingInstruction(w);default:return this.element(w,0)}}).call(this));return this.pretty&&A.slice(-this.newline.length)===this.newline&&(A=A.slice(0,-this.newline.length)),A},m.prototype.attribute=function(b){return" "+b.name+'="'+b.value+'"'},m.prototype.cdata=function(b,w){return this.space(w)+"<![CDATA["+b.text+"]]>"+this.newline},m.prototype.comment=function(b,w){return this.space(w)+"<!-- "+b.text+" -->"+this.newline},m.prototype.declaration=function(b,w){var _;return _=this.space(w),_+='<?xml version="'+b.version+'"',b.encoding!=null&&(_+=' encoding="'+b.encoding+'"'),b.standalone!=null&&(_+=' standalone="'+b.standalone+'"'),_+=this.spacebeforeslash+"?>",_+=this.newline,_},m.prototype.docType=function(b,w){var _,D,A,E,F;if(w||(w=0),E=this.space(w),E+="<!DOCTYPE "+b.root().name,b.pubID&&b.sysID?E+=' PUBLIC "'+b.pubID+'" "'+b.sysID+'"':b.sysID&&(E+=' SYSTEM "'+b.sysID+'"'),b.children.length>0){for(E+=" [",E+=this.newline,F=b.children,D=0,A=F.length;D<A;D++)_=F[D],E+=(function(){switch(!1){case!(_ instanceof t):return this.dtdAttList(_,w+1);case!(_ instanceof i):return this.dtdElement(_,w+1);case!(_ instanceof r):return this.dtdEntity(_,w+1);case!(_ instanceof s):return this.dtdNotation(_,w+1);case!(_ instanceof n):return this.cdata(_,w+1);case!(_ instanceof e):return this.comment(_,w+1);case!(_ instanceof d):return this.processingInstruction(_,w+1);default:throw new Error("Unknown DTD node type: "+_.constructor.name)}}).call(this);E+="]"}return E+=this.spacebeforeslash+">",E+=this.newline,E},m.prototype.element=function(b,w){var _,D,A,E,F,I,z,H,k,W,S,G,j;w||(w=0),j=!1,this.textispresent?(this.newline="",this.pretty=!1):(this.newline=this.newlinedefault,this.pretty=this.prettydefault),G=this.space(w),H="",H+=G+"<"+b.name,k=b.attributes;for(z in k)y.call(k,z)&&(_=k[z],H+=this.attribute(_));if(b.children.length===0||b.children.every(function(M){return M.value===""}))this.allowEmpty?H+="></"+b.name+">"+this.newline:H+=this.spacebeforeslash+"/>"+this.newline;else if(this.pretty&&b.children.length===1&&b.children[0].value!=null)H+=">",H+=b.children[0].value,H+="</"+b.name+">"+this.newline;else{if(this.dontprettytextnodes){for(W=b.children,A=0,F=W.length;A<F;A++)if(D=W[A],D.value!=null){this.textispresent++,j=!0;break}}for(this.textispresent&&(this.newline="",this.pretty=!1,G=this.space(w)),H+=">"+this.newline,S=b.children,E=0,I=S.length;E<I;E++)D=S[E],H+=(function(){switch(!1){case!(D instanceof n):return this.cdata(D,w+1);case!(D instanceof e):return this.comment(D,w+1);case!(D instanceof l):return this.element(D,w+1);case!(D instanceof h):return this.raw(D,w+1);case!(D instanceof f):return this.text(D,w+1);case!(D instanceof d):return this.processingInstruction(D,w+1);case!(D instanceof c):return"";default:throw new Error("Unknown XML node type: "+D.constructor.name)}}).call(this);j&&this.textispresent--,this.textispresent||(this.newline=this.newlinedefault,this.pretty=this.prettydefault),H+=G+"</"+b.name+">"+this.newline}return H},m.prototype.processingInstruction=function(b,w){var _;return _=this.space(w)+"<?"+b.target,b.value&&(_+=" "+b.value),_+=this.spacebeforeslash+"?>"+this.newline,_},m.prototype.raw=function(b,w){return this.space(w)+b.value+this.newline},m.prototype.text=function(b,w){return this.space(w)+b.value+this.newline},m.prototype.dtdAttList=function(b,w){var _;return _=this.space(w)+"<!ATTLIST "+b.elementName+" "+b.attributeName+" "+b.attributeType,b.defaultValueType!=="#DEFAULT"&&(_+=" "+b.defaultValueType),b.defaultValue&&(_+=' "'+b.defaultValue+'"'),_+=this.spacebeforeslash+">"+this.newline,_},m.prototype.dtdElement=function(b,w){return this.space(w)+"<!ELEMENT "+b.name+" "+b.value+this.spacebeforeslash+">"+this.newline},m.prototype.dtdEntity=function(b,w){var _;return _=this.space(w)+"<!ENTITY",b.pe&&(_+=" %"),_+=" "+b.name,b.value?_+=' "'+b.value+'"':(b.pubID&&b.sysID?_+=' PUBLIC "'+b.pubID+'" "'+b.sysID+'"':b.sysID&&(_+=' SYSTEM "'+b.sysID+'"'),b.nData&&(_+=" NDATA "+b.nData)),_+=this.spacebeforeslash+">"+this.newline,_},m.prototype.dtdNotation=function(b,w){var _;return _=this.space(w)+"<!NOTATION "+b.name,b.pubID&&b.sysID?_+=' PUBLIC "'+b.pubID+'" "'+b.sysID+'"':b.pubID?_+=' PUBLIC "'+b.pubID+'"':b.sysID&&(_+=' SYSTEM "'+b.sysID+'"'),_+=this.spacebeforeslash+">"+this.newline,_},m.prototype.openNode=function(b,w){var _,D,A,E;if(w||(w=0),b instanceof l){A=this.space(w)+"<"+b.name,E=b.attributes;for(D in E)y.call(E,D)&&(_=E[D],A+=this.attribute(_));return A+=(b.children?">":"/>")+this.newline,A}else return A=this.space(w)+"<!DOCTYPE "+b.rootNodeName,b.pubID&&b.sysID?A+=' PUBLIC "'+b.pubID+'" "'+b.sysID+'"':b.sysID&&(A+=' SYSTEM "'+b.sysID+'"'),A+=(b.children?" [":">")+this.newline,A},m.prototype.closeNode=function(b,w){switch(w||(w=0),!1){case!(b instanceof l):return this.space(w)+"</"+b.name+">"+this.newline;case!(b instanceof o):return this.space(w)+"]>"+this.newline}},m}(g)}).call(ze)),BD.exports}var N5;function xG(){return N5||(N5=1,(function(){var n,e,t,i,r=function(a,o){for(var c in o)s.call(o,c)&&(a[c]=o[c]);function l(){this.constructor=a}return l.prototype=o.prototype,a.prototype=new l,a.__super__=o.prototype,a},s={}.hasOwnProperty;i=tu().isPlainObject,n=vr(),t=lL(),e=lk(),xD.exports=function(a){r(o,a);function o(c){o.__super__.constructor.call(this,null),this.name="?xml",c||(c={}),c.writer||(c.writer=new e),this.options=c,this.stringify=new t(c),this.isDocument=!0}return o.prototype.end=function(c){var l;return c?i(c)&&(l=c,c=this.options.writer.set(l)):c=this.options.writer,c.document(this)},o.prototype.toString=function(c){return this.options.writer.set(c).document(this)},o}(n)}).call(ze)),xD.exports}var ID={exports:{}},j5;function wG(){return j5||(j5=1,(function(){var n,e,t,i,r,s,a,o,c,l,d,h,f,g,v,y,x,m,b,w,_={}.hasOwnProperty;w=tu(),m=w.isObject,x=w.isFunction,b=w.isPlainObject,y=w.getValue,l=cw(),e=lw(),t=uw(),h=yw(),v=bw(),d=vw(),o=dw(),c=mw(),i=hw(),s=fw(),r=pw(),a=gw(),n=cL(),g=lL(),f=lk(),ID.exports=function(){function D(A,E,F){var I;this.name="?xml",A||(A={}),A.writer?b(A.writer)&&(I=A.writer,A.writer=new f(I)):A.writer=new f(A),this.options=A,this.writer=A.writer,this.stringify=new g(A),this.onDataCallback=E||function(){},this.onEndCallback=F||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return D.prototype.node=function(A,E,F){var I,z;if(A==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(A));return this.openCurrent(),A=y(A),E===null&&F==null&&(I=[{},null],E=I[0],F=I[1]),E==null&&(E={}),E=y(E),m(E)||(z=[E,F],F=z[0],E=z[1]),this.currentNode=new l(this,A,E),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,F!=null&&this.text(F),this},D.prototype.element=function(A,E,F){return this.currentNode&&this.currentNode instanceof c?this.dtdElement.apply(this,arguments):this.node(A,E,F)},D.prototype.attribute=function(A,E){var F,I;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(A));if(A!=null&&(A=y(A)),m(A))for(F in A)_.call(A,F)&&(I=A[F],this.attribute(F,I));else x(E)&&(E=E.apply()),(!this.options.skipNullAttributes||E!=null)&&(this.currentNode.attributes[A]=new n(this,A,E));return this},D.prototype.text=function(A){var E;return this.openCurrent(),E=new v(this,A),this.onData(this.writer.text(E,this.currentLevel+1),this.currentLevel+1),this},D.prototype.cdata=function(A){var E;return this.openCurrent(),E=new e(this,A),this.onData(this.writer.cdata(E,this.currentLevel+1),this.currentLevel+1),this},D.prototype.comment=function(A){var E;return this.openCurrent(),E=new t(this,A),this.onData(this.writer.comment(E,this.currentLevel+1),this.currentLevel+1),this},D.prototype.raw=function(A){var E;return this.openCurrent(),E=new h(this,A),this.onData(this.writer.raw(E,this.currentLevel+1),this.currentLevel+1),this},D.prototype.instruction=function(A,E){var F,I,z,H,k;if(this.openCurrent(),A!=null&&(A=y(A)),E!=null&&(E=y(E)),Array.isArray(A))for(F=0,H=A.length;F<H;F++)I=A[F],this.instruction(I);else if(m(A))for(I in A)_.call(A,I)&&(z=A[I],this.instruction(I,z));else x(E)&&(E=E.apply()),k=new d(this,A,E),this.onData(this.writer.processingInstruction(k,this.currentLevel+1),this.currentLevel+1);return this},D.prototype.declaration=function(A,E,F){var I;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return I=new o(this,A,E,F),this.onData(this.writer.declaration(I,this.currentLevel+1),this.currentLevel+1),this},D.prototype.doctype=function(A,E,F){if(this.openCurrent(),A==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new c(this,E,F),this.currentNode.rootNodeName=A,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},D.prototype.dtdElement=function(A,E){var F;return this.openCurrent(),F=new r(this,A,E),this.onData(this.writer.dtdElement(F,this.currentLevel+1),this.currentLevel+1),this},D.prototype.attList=function(A,E,F,I,z){var H;return this.openCurrent(),H=new i(this,A,E,F,I,z),this.onData(this.writer.dtdAttList(H,this.currentLevel+1),this.currentLevel+1),this},D.prototype.entity=function(A,E){var F;return this.openCurrent(),F=new s(this,!1,A,E),this.onData(this.writer.dtdEntity(F,this.currentLevel+1),this.currentLevel+1),this},D.prototype.pEntity=function(A,E){var F;return this.openCurrent(),F=new s(this,!0,A,E),this.onData(this.writer.dtdEntity(F,this.currentLevel+1),this.currentLevel+1),this},D.prototype.notation=function(A,E){var F;return this.openCurrent(),F=new a(this,A,E),this.onData(this.writer.dtdNotation(F,this.currentLevel+1),this.currentLevel+1),this},D.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},D.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},D.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},D.prototype.openNode=function(A){if(!A.isOpen)return!this.root&&this.currentLevel===0&&A instanceof l&&(this.root=A),this.onData(this.writer.openNode(A,this.currentLevel),this.currentLevel),A.isOpen=!0},D.prototype.closeNode=function(A){if(!A.isClosed)return this.onData(this.writer.closeNode(A,this.currentLevel),this.currentLevel),A.isClosed=!0},D.prototype.onData=function(A,E){return this.documentStarted=!0,this.onDataCallback(A,E+1)},D.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},D.prototype.debugInfo=function(A){return A==null?"":"node: <"+A+">"},D.prototype.ele=function(){return this.element.apply(this,arguments)},D.prototype.nod=function(A,E,F){return this.node(A,E,F)},D.prototype.txt=function(A){return this.text(A)},D.prototype.dat=function(A){return this.cdata(A)},D.prototype.com=function(A){return this.comment(A)},D.prototype.ins=function(A,E){return this.instruction(A,E)},D.prototype.dec=function(A,E,F){return this.declaration(A,E,F)},D.prototype.dtd=function(A,E,F){return this.doctype(A,E,F)},D.prototype.e=function(A,E,F){return this.element(A,E,F)},D.prototype.n=function(A,E,F){return this.node(A,E,F)},D.prototype.t=function(A){return this.text(A)},D.prototype.d=function(A){return this.cdata(A)},D.prototype.c=function(A){return this.comment(A)},D.prototype.r=function(A){return this.raw(A)},D.prototype.i=function(A,E){return this.instruction(A,E)},D.prototype.att=function(){return this.currentNode&&this.currentNode instanceof c?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},D.prototype.a=function(){return this.currentNode&&this.currentNode instanceof c?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},D.prototype.ent=function(A,E){return this.entity(A,E)},D.prototype.pent=function(A,E){return this.pEntity(A,E)},D.prototype.not=function(A,E){return this.notation(A,E)},D}()}).call(ze)),ID.exports}var PD={exports:{}},R5;function _G(){return R5||(R5=1,(function(){var n,e,t,i,r,s,a,o,c,l,d,h,f,g,v=function(x,m){for(var b in m)y.call(m,b)&&(x[b]=m[b]);function w(){this.constructor=x}return w.prototype=m.prototype,x.prototype=new w,x.__super__=m.prototype,x},y={}.hasOwnProperty;a=dw(),o=mw(),n=lw(),e=uw(),l=cw(),h=yw(),f=bw(),d=vw(),c=ck(),t=hw(),i=pw(),r=fw(),s=gw(),g=uL(),PD.exports=function(x){v(m,x);function m(b,w){m.__super__.constructor.call(this,w),this.stream=b}return m.prototype.document=function(b){var w,_,D,A,E,F,I,z;for(F=b.children,_=0,A=F.length;_<A;_++)w=F[_],w.isLastRootNode=!1;for(b.children[b.children.length-1].isLastRootNode=!0,I=b.children,z=[],D=0,E=I.length;D<E;D++)if(w=I[D],!(w instanceof c))switch(!1){case!(w instanceof a):z.push(this.declaration(w));break;case!(w instanceof o):z.push(this.docType(w));break;case!(w instanceof e):z.push(this.comment(w));break;case!(w instanceof d):z.push(this.processingInstruction(w));break;default:z.push(this.element(w))}return z},m.prototype.attribute=function(b){return this.stream.write(" "+b.name+'="'+b.value+'"')},m.prototype.cdata=function(b,w){return this.stream.write(this.space(w)+"<![CDATA["+b.text+"]]>"+this.endline(b))},m.prototype.comment=function(b,w){return this.stream.write(this.space(w)+"<!-- "+b.text+" -->"+this.endline(b))},m.prototype.declaration=function(b,w){return this.stream.write(this.space(w)),this.stream.write('<?xml version="'+b.version+'"'),b.encoding!=null&&this.stream.write(' encoding="'+b.encoding+'"'),b.standalone!=null&&this.stream.write(' standalone="'+b.standalone+'"'),this.stream.write(this.spacebeforeslash+"?>"),this.stream.write(this.endline(b))},m.prototype.docType=function(b,w){var _,D,A,E;if(w||(w=0),this.stream.write(this.space(w)),this.stream.write("<!DOCTYPE "+b.root().name),b.pubID&&b.sysID?this.stream.write(' PUBLIC "'+b.pubID+'" "'+b.sysID+'"'):b.sysID&&this.stream.write(' SYSTEM "'+b.sysID+'"'),b.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(b)),E=b.children,D=0,A=E.length;D<A;D++)switch(_=E[D],!1){case!(_ instanceof t):this.dtdAttList(_,w+1);break;case!(_ instanceof i):this.dtdElement(_,w+1);break;case!(_ instanceof r):this.dtdEntity(_,w+1);break;case!(_ instanceof s):this.dtdNotation(_,w+1);break;case!(_ instanceof n):this.cdata(_,w+1);break;case!(_ instanceof e):this.comment(_,w+1);break;case!(_ instanceof d):this.processingInstruction(_,w+1);break;default:throw new Error("Unknown DTD node type: "+_.constructor.name)}this.stream.write("]")}return this.stream.write(this.spacebeforeslash+">"),this.stream.write(this.endline(b))},m.prototype.element=function(b,w){var _,D,A,E,F,I,z,H;w||(w=0),H=this.space(w),this.stream.write(H+"<"+b.name),I=b.attributes;for(F in I)y.call(I,F)&&(_=I[F],this.attribute(_));if(b.children.length===0||b.children.every(function(k){return k.value===""}))this.allowEmpty?this.stream.write("></"+b.name+">"):this.stream.write(this.spacebeforeslash+"/>");else if(this.pretty&&b.children.length===1&&b.children[0].value!=null)this.stream.write(">"),this.stream.write(b.children[0].value),this.stream.write("</"+b.name+">");else{for(this.stream.write(">"+this.newline),z=b.children,A=0,E=z.length;A<E;A++)switch(D=z[A],!1){case!(D instanceof n):this.cdata(D,w+1);break;case!(D instanceof e):this.comment(D,w+1);break;case!(D instanceof l):this.element(D,w+1);break;case!(D instanceof h):this.raw(D,w+1);break;case!(D instanceof f):this.text(D,w+1);break;case!(D instanceof d):this.processingInstruction(D,w+1);break;case!(D instanceof c):break;default:throw new Error("Unknown XML node type: "+D.constructor.name)}this.stream.write(H+"</"+b.name+">")}return this.stream.write(this.endline(b))},m.prototype.processingInstruction=function(b,w){return this.stream.write(this.space(w)+"<?"+b.target),b.value&&this.stream.write(" "+b.value),this.stream.write(this.spacebeforeslash+"?>"+this.endline(b))},m.prototype.raw=function(b,w){return this.stream.write(this.space(w)+b.value+this.endline(b))},m.prototype.text=function(b,w){return this.stream.write(this.space(w)+b.value+this.endline(b))},m.prototype.dtdAttList=function(b,w){return this.stream.write(this.space(w)+"<!ATTLIST "+b.elementName+" "+b.attributeName+" "+b.attributeType),b.defaultValueType!=="#DEFAULT"&&this.stream.write(" "+b.defaultValueType),b.defaultValue&&this.stream.write(' "'+b.defaultValue+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(b))},m.prototype.dtdElement=function(b,w){return this.stream.write(this.space(w)+"<!ELEMENT "+b.name+" "+b.value),this.stream.write(this.spacebeforeslash+">"+this.endline(b))},m.prototype.dtdEntity=function(b,w){return this.stream.write(this.space(w)+"<!ENTITY"),b.pe&&this.stream.write(" %"),this.stream.write(" "+b.name),b.value?this.stream.write(' "'+b.value+'"'):(b.pubID&&b.sysID?this.stream.write(' PUBLIC "'+b.pubID+'" "'+b.sysID+'"'):b.sysID&&this.stream.write(' SYSTEM "'+b.sysID+'"'),b.nData&&this.stream.write(" NDATA "+b.nData)),this.stream.write(this.spacebeforeslash+">"+this.endline(b))},m.prototype.dtdNotation=function(b,w){return this.stream.write(this.space(w)+"<!NOTATION "+b.name),b.pubID&&b.sysID?this.stream.write(' PUBLIC "'+b.pubID+'" "'+b.sysID+'"'):b.pubID?this.stream.write(' PUBLIC "'+b.pubID+'"'):b.sysID&&this.stream.write(' SYSTEM "'+b.sysID+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(b))},m.prototype.endline=function(b){return b.isLastRootNode?"":this.newline},m}(g)}).call(ze)),PD.exports}(function(){var n,e,t,i,r,s,a;a=tu(),r=a.assign,s=a.isFunction,n=xG(),e=wG(),i=lk(),t=_G(),Cm.create=function(o,c,l,d){var h,f;if(o==null)throw new Error("Root element needs a name.");return d=r({},c,l,d),h=new n(d),f=h.element(o),d.headless||(h.declaration(d),(d.pubID!=null||d.sysID!=null)&&h.doctype(d)),f},Cm.begin=function(o,c,l){var d;return s(o)&&(d=[o,c],c=d[0],l=d[1],o={}),c?new e(o,c,l):new n(o)},Cm.stringWriter=function(o){return new i(o)},Cm.streamWriter=function(o,c){return new t(o,c)}}).call(ze);var F5=mn,DG=Cm;oL.writeString=AG;function AG(n,e){var t=F5.invert(e),i={element:s,text:EG};function r(c,l){return i[l.type](c,l)}function s(c,l){var d=c.element(a(l.name),l.attributes);l.children.forEach(function(h){r(d,h)})}function a(c){var l=/^\{(.*)\}(.*)$/.exec(c);if(l){var d=t[l[1]];return d+(d===""?"":":")+l[2]}else return c}function o(c){var l=DG.create(a(c.name),{version:"1.0",encoding:"UTF-8",standalone:!0});return F5.forEach(e,function(d,h){var f="xmlns"+(h===""?"":":"+h);l.attribute(f,d)}),c.children.forEach(function(d){r(l,d)}),l.end()}return o(n)}function EG(n,e){n.text(e.value)}var xw=kg;gc.Element=xw.Element;gc.element=xw.element;gc.emptyElement=xw.emptyElement;gc.text=xw.text;gc.readString=CB.readString;gc.writeString=oL.writeString;var SG=mn,TG=Gn,CG=gc;KC.read=dL;KC.readXmlFromZipFile=UG;var kG={"http://schemas.openxmlformats.org/wordprocessingml/2006/main":"w","http://schemas.openxmlformats.org/officeDocument/2006/relationships":"r","http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing":"wp","http://schemas.openxmlformats.org/drawingml/2006/main":"a","http://schemas.openxmlformats.org/drawingml/2006/picture":"pic","http://purl.oclc.org/ooxml/wordprocessingml/main":"w","http://purl.oclc.org/ooxml/officeDocument/relationships":"r","http://purl.oclc.org/ooxml/drawingml/wordprocessingDrawing":"wp","http://purl.oclc.org/ooxml/drawingml/main":"a","http://purl.oclc.org/ooxml/drawingml/picture":"pic","http://schemas.openxmlformats.org/package/2006/content-types":"content-types","http://schemas.openxmlformats.org/package/2006/relationships":"relationships","http://schemas.openxmlformats.org/markup-compatibility/2006":"mc","urn:schemas-microsoft-com:vml":"v","urn:schemas-microsoft-com:office:word":"office-word","http://schemas.microsoft.com/office/word/2010/wordml":"wordml"};function dL(n){return CG.readString(n,kG).then(function(e){return hL(e)[0]})}function UG(n,e){return n.exists(e)?n.read(e,"utf-8").then(NG).then(dL):TG.resolve(null)}function NG(n){return n.replace(/^\uFEFF/g,"")}function hL(n){return n.type==="element"?n.name==="mc:AlternateContent"?n.firstOrEmpty("mc:Fallback").children:(n.children=SG.flatten(n.children.map(hL,!0)),[n]):[n]}var uk={},Il={},dk={};Object.defineProperty(dk,"__esModule",{value:!0});var jG=[{"Typeface name":"Symbol","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Symbol","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"33","Unicode hex":"21"},{"Typeface name":"Symbol","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"8704","Unicode hex":"2200"},{"Typeface name":"Symbol","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"35","Unicode hex":"23"},{"Typeface name":"Symbol","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"8707","Unicode hex":"2203"},{"Typeface name":"Symbol","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"37","Unicode hex":"25"},{"Typeface name":"Symbol","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"38","Unicode hex":"26"},{"Typeface name":"Symbol","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"8717","Unicode hex":"220D"},{"Typeface name":"Symbol","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"40","Unicode hex":"28"},{"Typeface name":"Symbol","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"41","Unicode hex":"29"},{"Typeface name":"Symbol","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"42","Unicode hex":"2A"},{"Typeface name":"Symbol","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"43","Unicode hex":"2B"},{"Typeface name":"Symbol","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"44","Unicode hex":"2C"},{"Typeface name":"Symbol","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"8722","Unicode hex":"2212"},{"Typeface name":"Symbol","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"46","Unicode hex":"2E"},{"Typeface name":"Symbol","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"47","Unicode hex":"2F"},{"Typeface name":"Symbol","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"48","Unicode hex":"30"},{"Typeface name":"Symbol","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"49","Unicode hex":"31"},{"Typeface name":"Symbol","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"50","Unicode hex":"32"},{"Typeface name":"Symbol","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"51","Unicode hex":"33"},{"Typeface name":"Symbol","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"52","Unicode hex":"34"},{"Typeface name":"Symbol","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"53","Unicode hex":"35"},{"Typeface name":"Symbol","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"54","Unicode hex":"36"},{"Typeface name":"Symbol","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"55","Unicode hex":"37"},{"Typeface name":"Symbol","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"56","Unicode hex":"38"},{"Typeface name":"Symbol","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"57","Unicode hex":"39"},{"Typeface name":"Symbol","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"58","Unicode hex":"3A"},{"Typeface name":"Symbol","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"59","Unicode hex":"3B"},{"Typeface name":"Symbol","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"60","Unicode hex":"3C"},{"Typeface name":"Symbol","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"61","Unicode hex":"3D"},{"Typeface name":"Symbol","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"62","Unicode hex":"3E"},{"Typeface name":"Symbol","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"63","Unicode hex":"3F"},{"Typeface name":"Symbol","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"8773","Unicode hex":"2245"},{"Typeface name":"Symbol","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"913","Unicode hex":"391"},{"Typeface name":"Symbol","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"914","Unicode hex":"392"},{"Typeface name":"Symbol","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"935","Unicode hex":"3A7"},{"Typeface name":"Symbol","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"916","Unicode hex":"394"},{"Typeface name":"Symbol","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"917","Unicode hex":"395"},{"Typeface name":"Symbol","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"934","Unicode hex":"3A6"},{"Typeface name":"Symbol","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"915","Unicode hex":"393"},{"Typeface name":"Symbol","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"919","Unicode hex":"397"},{"Typeface name":"Symbol","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"921","Unicode hex":"399"},{"Typeface name":"Symbol","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"977","Unicode hex":"3D1"},{"Typeface name":"Symbol","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"922","Unicode hex":"39A"},{"Typeface name":"Symbol","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"923","Unicode hex":"39B"},{"Typeface name":"Symbol","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"924","Unicode hex":"39C"},{"Typeface name":"Symbol","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"925","Unicode hex":"39D"},{"Typeface name":"Symbol","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"927","Unicode hex":"39F"},{"Typeface name":"Symbol","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"928","Unicode hex":"3A0"},{"Typeface name":"Symbol","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"920","Unicode hex":"398"},{"Typeface name":"Symbol","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"929","Unicode hex":"3A1"},{"Typeface name":"Symbol","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"931","Unicode hex":"3A3"},{"Typeface name":"Symbol","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"932","Unicode hex":"3A4"},{"Typeface name":"Symbol","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"933","Unicode hex":"3A5"},{"Typeface name":"Symbol","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"962","Unicode hex":"3C2"},{"Typeface name":"Symbol","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"937","Unicode hex":"3A9"},{"Typeface name":"Symbol","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"926","Unicode hex":"39E"},{"Typeface name":"Symbol","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"936","Unicode hex":"3A8"},{"Typeface name":"Symbol","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"918","Unicode hex":"396"},{"Typeface name":"Symbol","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"91","Unicode hex":"5B"},{"Typeface name":"Symbol","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"8756","Unicode hex":"2234"},{"Typeface name":"Symbol","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"93","Unicode hex":"5D"},{"Typeface name":"Symbol","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"8869","Unicode hex":"22A5"},{"Typeface name":"Symbol","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"95","Unicode hex":"5F"},{"Typeface name":"Symbol","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"8254","Unicode hex":"203E"},{"Typeface name":"Symbol","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"945","Unicode hex":"3B1"},{"Typeface name":"Symbol","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"946","Unicode hex":"3B2"},{"Typeface name":"Symbol","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"967","Unicode hex":"3C7"},{"Typeface name":"Symbol","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"948","Unicode hex":"3B4"},{"Typeface name":"Symbol","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"949","Unicode hex":"3B5"},{"Typeface name":"Symbol","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"966","Unicode hex":"3C6"},{"Typeface name":"Symbol","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"947","Unicode hex":"3B3"},{"Typeface name":"Symbol","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"951","Unicode hex":"3B7"},{"Typeface name":"Symbol","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"953","Unicode hex":"3B9"},{"Typeface name":"Symbol","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"981","Unicode hex":"3D5"},{"Typeface name":"Symbol","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"954","Unicode hex":"3BA"},{"Typeface name":"Symbol","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"955","Unicode hex":"3BB"},{"Typeface name":"Symbol","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"956","Unicode hex":"3BC"},{"Typeface name":"Symbol","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"957","Unicode hex":"3BD"},{"Typeface name":"Symbol","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"959","Unicode hex":"3BF"},{"Typeface name":"Symbol","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"960","Unicode hex":"3C0"},{"Typeface name":"Symbol","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"952","Unicode hex":"3B8"},{"Typeface name":"Symbol","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"961","Unicode hex":"3C1"},{"Typeface name":"Symbol","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"963","Unicode hex":"3C3"},{"Typeface name":"Symbol","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"964","Unicode hex":"3C4"},{"Typeface name":"Symbol","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"965","Unicode hex":"3C5"},{"Typeface name":"Symbol","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"982","Unicode hex":"3D6"},{"Typeface name":"Symbol","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"969","Unicode hex":"3C9"},{"Typeface name":"Symbol","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"958","Unicode hex":"3BE"},{"Typeface name":"Symbol","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"968","Unicode hex":"3C8"},{"Typeface name":"Symbol","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"950","Unicode hex":"3B6"},{"Typeface name":"Symbol","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"123","Unicode hex":"7B"},{"Typeface name":"Symbol","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"124","Unicode hex":"7C"},{"Typeface name":"Symbol","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"125","Unicode hex":"7D"},{"Typeface name":"Symbol","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"126","Unicode hex":"7E"},{"Typeface name":"Symbol","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"8364","Unicode hex":"20AC"},{"Typeface name":"Symbol","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"978","Unicode hex":"3D2"},{"Typeface name":"Symbol","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"8242","Unicode hex":"2032"},{"Typeface name":"Symbol","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"8804","Unicode hex":"2264"},{"Typeface name":"Symbol","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"8260","Unicode hex":"2044"},{"Typeface name":"Symbol","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"8734","Unicode hex":"221E"},{"Typeface name":"Symbol","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"402","Unicode hex":"192"},{"Typeface name":"Symbol","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"9827","Unicode hex":"2663"},{"Typeface name":"Symbol","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"9830","Unicode hex":"2666"},{"Typeface name":"Symbol","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"9829","Unicode hex":"2665"},{"Typeface name":"Symbol","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"9824","Unicode hex":"2660"},{"Typeface name":"Symbol","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"8596","Unicode hex":"2194"},{"Typeface name":"Symbol","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"8592","Unicode hex":"2190"},{"Typeface name":"Symbol","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"8593","Unicode hex":"2191"},{"Typeface name":"Symbol","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"8594","Unicode hex":"2192"},{"Typeface name":"Symbol","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"8595","Unicode hex":"2193"},{"Typeface name":"Symbol","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"176","Unicode hex":"B0"},{"Typeface name":"Symbol","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"177","Unicode hex":"B1"},{"Typeface name":"Symbol","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"8243","Unicode hex":"2033"},{"Typeface name":"Symbol","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"8805","Unicode hex":"2265"},{"Typeface name":"Symbol","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"215","Unicode hex":"D7"},{"Typeface name":"Symbol","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"8733","Unicode hex":"221D"},{"Typeface name":"Symbol","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"8706","Unicode hex":"2202"},{"Typeface name":"Symbol","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"8226","Unicode hex":"2022"},{"Typeface name":"Symbol","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"247","Unicode hex":"F7"},{"Typeface name":"Symbol","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"8800","Unicode hex":"2260"},{"Typeface name":"Symbol","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"8801","Unicode hex":"2261"},{"Typeface name":"Symbol","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"8776","Unicode hex":"2248"},{"Typeface name":"Symbol","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"8230","Unicode hex":"2026"},{"Typeface name":"Symbol","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"9168","Unicode hex":"23D0"},{"Typeface name":"Symbol","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"9135","Unicode hex":"23AF"},{"Typeface name":"Symbol","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"8629","Unicode hex":"21B5"},{"Typeface name":"Symbol","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"8501","Unicode hex":"2135"},{"Typeface name":"Symbol","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"8465","Unicode hex":"2111"},{"Typeface name":"Symbol","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"8476","Unicode hex":"211C"},{"Typeface name":"Symbol","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"8472","Unicode hex":"2118"},{"Typeface name":"Symbol","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"8855","Unicode hex":"2297"},{"Typeface name":"Symbol","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"8853","Unicode hex":"2295"},{"Typeface name":"Symbol","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"8709","Unicode hex":"2205"},{"Typeface name":"Symbol","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"8745","Unicode hex":"2229"},{"Typeface name":"Symbol","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"8746","Unicode hex":"222A"},{"Typeface name":"Symbol","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"8835","Unicode hex":"2283"},{"Typeface name":"Symbol","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"8839","Unicode hex":"2287"},{"Typeface name":"Symbol","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"8836","Unicode hex":"2284"},{"Typeface name":"Symbol","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"8834","Unicode hex":"2282"},{"Typeface name":"Symbol","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"8838","Unicode hex":"2286"},{"Typeface name":"Symbol","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"8712","Unicode hex":"2208"},{"Typeface name":"Symbol","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"8713","Unicode hex":"2209"},{"Typeface name":"Symbol","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"8736","Unicode hex":"2220"},{"Typeface name":"Symbol","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"8711","Unicode hex":"2207"},{"Typeface name":"Symbol","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"174","Unicode hex":"AE"},{"Typeface name":"Symbol","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"169","Unicode hex":"A9"},{"Typeface name":"Symbol","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"8482","Unicode hex":"2122"},{"Typeface name":"Symbol","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"8719","Unicode hex":"220F"},{"Typeface name":"Symbol","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"8730","Unicode hex":"221A"},{"Typeface name":"Symbol","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"8901","Unicode hex":"22C5"},{"Typeface name":"Symbol","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"172","Unicode hex":"AC"},{"Typeface name":"Symbol","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"8743","Unicode hex":"2227"},{"Typeface name":"Symbol","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"8744","Unicode hex":"2228"},{"Typeface name":"Symbol","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"8660","Unicode hex":"21D4"},{"Typeface name":"Symbol","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"8656","Unicode hex":"21D0"},{"Typeface name":"Symbol","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"8657","Unicode hex":"21D1"},{"Typeface name":"Symbol","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"8658","Unicode hex":"21D2"},{"Typeface name":"Symbol","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"8659","Unicode hex":"21D3"},{"Typeface name":"Symbol","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"9674","Unicode hex":"25CA"},{"Typeface name":"Symbol","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"12296","Unicode hex":"3008"},{"Typeface name":"Symbol","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"174","Unicode hex":"AE"},{"Typeface name":"Symbol","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"169","Unicode hex":"A9"},{"Typeface name":"Symbol","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"8482","Unicode hex":"2122"},{"Typeface name":"Symbol","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"8721","Unicode hex":"2211"},{"Typeface name":"Symbol","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"9115","Unicode hex":"239B"},{"Typeface name":"Symbol","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"9116","Unicode hex":"239C"},{"Typeface name":"Symbol","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"9117","Unicode hex":"239D"},{"Typeface name":"Symbol","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"9121","Unicode hex":"23A1"},{"Typeface name":"Symbol","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"9122","Unicode hex":"23A2"},{"Typeface name":"Symbol","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"9123","Unicode hex":"23A3"},{"Typeface name":"Symbol","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"9127","Unicode hex":"23A7"},{"Typeface name":"Symbol","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"9128","Unicode hex":"23A8"},{"Typeface name":"Symbol","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"9129","Unicode hex":"23A9"},{"Typeface name":"Symbol","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"9130","Unicode hex":"23AA"},{"Typeface name":"Symbol","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"63743","Unicode hex":"F8FF"},{"Typeface name":"Symbol","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"12297","Unicode hex":"3009"},{"Typeface name":"Symbol","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"8747","Unicode hex":"222B"},{"Typeface name":"Symbol","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"8992","Unicode hex":"2320"},{"Typeface name":"Symbol","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"9134","Unicode hex":"23AE"},{"Typeface name":"Symbol","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"8993","Unicode hex":"2321"},{"Typeface name":"Symbol","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"9118","Unicode hex":"239E"},{"Typeface name":"Symbol","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"9119","Unicode hex":"239F"},{"Typeface name":"Symbol","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"9120","Unicode hex":"23A0"},{"Typeface name":"Symbol","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"9124","Unicode hex":"23A4"},{"Typeface name":"Symbol","Dingbat dec":"250","Dingbat hex":"FA","Unicode dec":"9125","Unicode hex":"23A5"},{"Typeface name":"Symbol","Dingbat dec":"251","Dingbat hex":"FB","Unicode dec":"9126","Unicode hex":"23A6"},{"Typeface name":"Symbol","Dingbat dec":"252","Dingbat hex":"FC","Unicode dec":"9131","Unicode hex":"23AB"},{"Typeface name":"Symbol","Dingbat dec":"253","Dingbat hex":"FD","Unicode dec":"9132","Unicode hex":"23AC"},{"Typeface name":"Symbol","Dingbat dec":"254","Dingbat hex":"FE","Unicode dec":"9133","Unicode hex":"23AD"},{"Typeface name":"Webdings","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Webdings","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"128375","Unicode hex":"1F577"},{"Typeface name":"Webdings","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"128376","Unicode hex":"1F578"},{"Typeface name":"Webdings","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"128370","Unicode hex":"1F572"},{"Typeface name":"Webdings","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"128374","Unicode hex":"1F576"},{"Typeface name":"Webdings","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"127942","Unicode hex":"1F3C6"},{"Typeface name":"Webdings","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"127894","Unicode hex":"1F396"},{"Typeface name":"Webdings","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"128391","Unicode hex":"1F587"},{"Typeface name":"Webdings","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"128488","Unicode hex":"1F5E8"},{"Typeface name":"Webdings","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"128489","Unicode hex":"1F5E9"},{"Typeface name":"Webdings","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"128496","Unicode hex":"1F5F0"},{"Typeface name":"Webdings","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"128497","Unicode hex":"1F5F1"},{"Typeface name":"Webdings","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"127798","Unicode hex":"1F336"},{"Typeface name":"Webdings","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"127895","Unicode hex":"1F397"},{"Typeface name":"Webdings","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"128638","Unicode hex":"1F67E"},{"Typeface name":"Webdings","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"128636","Unicode hex":"1F67C"},{"Typeface name":"Webdings","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"128469","Unicode hex":"1F5D5"},{"Typeface name":"Webdings","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"128470","Unicode hex":"1F5D6"},{"Typeface name":"Webdings","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"128471","Unicode hex":"1F5D7"},{"Typeface name":"Webdings","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"9204","Unicode hex":"23F4"},{"Typeface name":"Webdings","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"9205","Unicode hex":"23F5"},{"Typeface name":"Webdings","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"9206","Unicode hex":"23F6"},{"Typeface name":"Webdings","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"9207","Unicode hex":"23F7"},{"Typeface name":"Webdings","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"9194","Unicode hex":"23EA"},{"Typeface name":"Webdings","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"9193","Unicode hex":"23E9"},{"Typeface name":"Webdings","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"9198","Unicode hex":"23EE"},{"Typeface name":"Webdings","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"9197","Unicode hex":"23ED"},{"Typeface name":"Webdings","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"9208","Unicode hex":"23F8"},{"Typeface name":"Webdings","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"9209","Unicode hex":"23F9"},{"Typeface name":"Webdings","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"9210","Unicode hex":"23FA"},{"Typeface name":"Webdings","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"128474","Unicode hex":"1F5DA"},{"Typeface name":"Webdings","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"128499","Unicode hex":"1F5F3"},{"Typeface name":"Webdings","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"128736","Unicode hex":"1F6E0"},{"Typeface name":"Webdings","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"127959","Unicode hex":"1F3D7"},{"Typeface name":"Webdings","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"127960","Unicode hex":"1F3D8"},{"Typeface name":"Webdings","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"127961","Unicode hex":"1F3D9"},{"Typeface name":"Webdings","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"127962","Unicode hex":"1F3DA"},{"Typeface name":"Webdings","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"127964","Unicode hex":"1F3DC"},{"Typeface name":"Webdings","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"127981","Unicode hex":"1F3ED"},{"Typeface name":"Webdings","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"127963","Unicode hex":"1F3DB"},{"Typeface name":"Webdings","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"127968","Unicode hex":"1F3E0"},{"Typeface name":"Webdings","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"127958","Unicode hex":"1F3D6"},{"Typeface name":"Webdings","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"127965","Unicode hex":"1F3DD"},{"Typeface name":"Webdings","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"128739","Unicode hex":"1F6E3"},{"Typeface name":"Webdings","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"128269","Unicode hex":"1F50D"},{"Typeface name":"Webdings","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"127956","Unicode hex":"1F3D4"},{"Typeface name":"Webdings","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"128065","Unicode hex":"1F441"},{"Typeface name":"Webdings","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"128066","Unicode hex":"1F442"},{"Typeface name":"Webdings","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"127966","Unicode hex":"1F3DE"},{"Typeface name":"Webdings","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"127957","Unicode hex":"1F3D5"},{"Typeface name":"Webdings","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"128740","Unicode hex":"1F6E4"},{"Typeface name":"Webdings","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"127967","Unicode hex":"1F3DF"},{"Typeface name":"Webdings","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"128755","Unicode hex":"1F6F3"},{"Typeface name":"Webdings","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"128364","Unicode hex":"1F56C"},{"Typeface name":"Webdings","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"128363","Unicode hex":"1F56B"},{"Typeface name":"Webdings","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"128360","Unicode hex":"1F568"},{"Typeface name":"Webdings","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"128264","Unicode hex":"1F508"},{"Typeface name":"Webdings","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"127892","Unicode hex":"1F394"},{"Typeface name":"Webdings","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"127893","Unicode hex":"1F395"},{"Typeface name":"Webdings","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"128492","Unicode hex":"1F5EC"},{"Typeface name":"Webdings","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"128637","Unicode hex":"1F67D"},{"Typeface name":"Webdings","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"128493","Unicode hex":"1F5ED"},{"Typeface name":"Webdings","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"128490","Unicode hex":"1F5EA"},{"Typeface name":"Webdings","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"128491","Unicode hex":"1F5EB"},{"Typeface name":"Webdings","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"11156","Unicode hex":"2B94"},{"Typeface name":"Webdings","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"10004","Unicode hex":"2714"},{"Typeface name":"Webdings","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"128690","Unicode hex":"1F6B2"},{"Typeface name":"Webdings","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"11036","Unicode hex":"2B1C"},{"Typeface name":"Webdings","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"128737","Unicode hex":"1F6E1"},{"Typeface name":"Webdings","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"128230","Unicode hex":"1F4E6"},{"Typeface name":"Webdings","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"128753","Unicode hex":"1F6F1"},{"Typeface name":"Webdings","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"11035","Unicode hex":"2B1B"},{"Typeface name":"Webdings","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"128657","Unicode hex":"1F691"},{"Typeface name":"Webdings","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"128712","Unicode hex":"1F6C8"},{"Typeface name":"Webdings","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"128745","Unicode hex":"1F6E9"},{"Typeface name":"Webdings","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"128752","Unicode hex":"1F6F0"},{"Typeface name":"Webdings","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"128968","Unicode hex":"1F7C8"},{"Typeface name":"Webdings","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"128372","Unicode hex":"1F574"},{"Typeface name":"Webdings","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"11044","Unicode hex":"2B24"},{"Typeface name":"Webdings","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"128741","Unicode hex":"1F6E5"},{"Typeface name":"Webdings","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"128660","Unicode hex":"1F694"},{"Typeface name":"Webdings","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"128472","Unicode hex":"1F5D8"},{"Typeface name":"Webdings","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"128473","Unicode hex":"1F5D9"},{"Typeface name":"Webdings","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"10067","Unicode hex":"2753"},{"Typeface name":"Webdings","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"128754","Unicode hex":"1F6F2"},{"Typeface name":"Webdings","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"128647","Unicode hex":"1F687"},{"Typeface name":"Webdings","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"128653","Unicode hex":"1F68D"},{"Typeface name":"Webdings","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"9971","Unicode hex":"26F3"},{"Typeface name":"Webdings","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"10680","Unicode hex":"29B8"},{"Typeface name":"Webdings","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"8854","Unicode hex":"2296"},{"Typeface name":"Webdings","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"128685","Unicode hex":"1F6AD"},{"Typeface name":"Webdings","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"128494","Unicode hex":"1F5EE"},{"Typeface name":"Webdings","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"9168","Unicode hex":"23D0"},{"Typeface name":"Webdings","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"128495","Unicode hex":"1F5EF"},{"Typeface name":"Webdings","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"128498","Unicode hex":"1F5F2"},{"Typeface name":"Webdings","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"128697","Unicode hex":"1F6B9"},{"Typeface name":"Webdings","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"128698","Unicode hex":"1F6BA"},{"Typeface name":"Webdings","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"128713","Unicode hex":"1F6C9"},{"Typeface name":"Webdings","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"128714","Unicode hex":"1F6CA"},{"Typeface name":"Webdings","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"128700","Unicode hex":"1F6BC"},{"Typeface name":"Webdings","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"128125","Unicode hex":"1F47D"},{"Typeface name":"Webdings","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"127947","Unicode hex":"1F3CB"},{"Typeface name":"Webdings","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"9975","Unicode hex":"26F7"},{"Typeface name":"Webdings","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"127938","Unicode hex":"1F3C2"},{"Typeface name":"Webdings","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"127948","Unicode hex":"1F3CC"},{"Typeface name":"Webdings","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"127946","Unicode hex":"1F3CA"},{"Typeface name":"Webdings","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"127940","Unicode hex":"1F3C4"},{"Typeface name":"Webdings","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"127949","Unicode hex":"1F3CD"},{"Typeface name":"Webdings","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"127950","Unicode hex":"1F3CE"},{"Typeface name":"Webdings","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"128664","Unicode hex":"1F698"},{"Typeface name":"Webdings","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"128480","Unicode hex":"1F5E0"},{"Typeface name":"Webdings","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"128738","Unicode hex":"1F6E2"},{"Typeface name":"Webdings","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"128176","Unicode hex":"1F4B0"},{"Typeface name":"Webdings","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"127991","Unicode hex":"1F3F7"},{"Typeface name":"Webdings","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"128179","Unicode hex":"1F4B3"},{"Typeface name":"Webdings","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"128106","Unicode hex":"1F46A"},{"Typeface name":"Webdings","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"128481","Unicode hex":"1F5E1"},{"Typeface name":"Webdings","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"128482","Unicode hex":"1F5E2"},{"Typeface name":"Webdings","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"128483","Unicode hex":"1F5E3"},{"Typeface name":"Webdings","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"10031","Unicode hex":"272F"},{"Typeface name":"Webdings","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"128388","Unicode hex":"1F584"},{"Typeface name":"Webdings","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"128389","Unicode hex":"1F585"},{"Typeface name":"Webdings","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"128387","Unicode hex":"1F583"},{"Typeface name":"Webdings","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"128390","Unicode hex":"1F586"},{"Typeface name":"Webdings","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"128441","Unicode hex":"1F5B9"},{"Typeface name":"Webdings","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"128442","Unicode hex":"1F5BA"},{"Typeface name":"Webdings","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"128443","Unicode hex":"1F5BB"},{"Typeface name":"Webdings","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"128373","Unicode hex":"1F575"},{"Typeface name":"Webdings","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"128368","Unicode hex":"1F570"},{"Typeface name":"Webdings","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"128445","Unicode hex":"1F5BD"},{"Typeface name":"Webdings","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"128446","Unicode hex":"1F5BE"},{"Typeface name":"Webdings","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"128203","Unicode hex":"1F4CB"},{"Typeface name":"Webdings","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"128466","Unicode hex":"1F5D2"},{"Typeface name":"Webdings","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"128467","Unicode hex":"1F5D3"},{"Typeface name":"Webdings","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"128366","Unicode hex":"1F56E"},{"Typeface name":"Webdings","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"128218","Unicode hex":"1F4DA"},{"Typeface name":"Webdings","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"128478","Unicode hex":"1F5DE"},{"Typeface name":"Webdings","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"128479","Unicode hex":"1F5DF"},{"Typeface name":"Webdings","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"128451","Unicode hex":"1F5C3"},{"Typeface name":"Webdings","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"128450","Unicode hex":"1F5C2"},{"Typeface name":"Webdings","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"128444","Unicode hex":"1F5BC"},{"Typeface name":"Webdings","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"127917","Unicode hex":"1F3AD"},{"Typeface name":"Webdings","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"127900","Unicode hex":"1F39C"},{"Typeface name":"Webdings","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"127896","Unicode hex":"1F398"},{"Typeface name":"Webdings","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"127897","Unicode hex":"1F399"},{"Typeface name":"Webdings","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"127911","Unicode hex":"1F3A7"},{"Typeface name":"Webdings","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"128191","Unicode hex":"1F4BF"},{"Typeface name":"Webdings","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"127902","Unicode hex":"1F39E"},{"Typeface name":"Webdings","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"128247","Unicode hex":"1F4F7"},{"Typeface name":"Webdings","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"127903","Unicode hex":"1F39F"},{"Typeface name":"Webdings","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"127916","Unicode hex":"1F3AC"},{"Typeface name":"Webdings","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"128253","Unicode hex":"1F4FD"},{"Typeface name":"Webdings","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"128249","Unicode hex":"1F4F9"},{"Typeface name":"Webdings","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"128254","Unicode hex":"1F4FE"},{"Typeface name":"Webdings","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"128251","Unicode hex":"1F4FB"},{"Typeface name":"Webdings","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"127898","Unicode hex":"1F39A"},{"Typeface name":"Webdings","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"127899","Unicode hex":"1F39B"},{"Typeface name":"Webdings","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"128250","Unicode hex":"1F4FA"},{"Typeface name":"Webdings","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"128187","Unicode hex":"1F4BB"},{"Typeface name":"Webdings","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"128421","Unicode hex":"1F5A5"},{"Typeface name":"Webdings","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"128422","Unicode hex":"1F5A6"},{"Typeface name":"Webdings","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"128423","Unicode hex":"1F5A7"},{"Typeface name":"Webdings","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"128377","Unicode hex":"1F579"},{"Typeface name":"Webdings","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"127918","Unicode hex":"1F3AE"},{"Typeface name":"Webdings","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"128379","Unicode hex":"1F57B"},{"Typeface name":"Webdings","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"128380","Unicode hex":"1F57C"},{"Typeface name":"Webdings","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"128223","Unicode hex":"1F4DF"},{"Typeface name":"Webdings","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"128385","Unicode hex":"1F581"},{"Typeface name":"Webdings","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"128384","Unicode hex":"1F580"},{"Typeface name":"Webdings","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"128424","Unicode hex":"1F5A8"},{"Typeface name":"Webdings","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"128425","Unicode hex":"1F5A9"},{"Typeface name":"Webdings","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"128447","Unicode hex":"1F5BF"},{"Typeface name":"Webdings","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"128426","Unicode hex":"1F5AA"},{"Typeface name":"Webdings","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"128476","Unicode hex":"1F5DC"},{"Typeface name":"Webdings","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"128274","Unicode hex":"1F512"},{"Typeface name":"Webdings","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"128275","Unicode hex":"1F513"},{"Typeface name":"Webdings","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"128477","Unicode hex":"1F5DD"},{"Typeface name":"Webdings","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"128229","Unicode hex":"1F4E5"},{"Typeface name":"Webdings","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"128228","Unicode hex":"1F4E4"},{"Typeface name":"Webdings","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"128371","Unicode hex":"1F573"},{"Typeface name":"Webdings","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"127779","Unicode hex":"1F323"},{"Typeface name":"Webdings","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"127780","Unicode hex":"1F324"},{"Typeface name":"Webdings","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"127781","Unicode hex":"1F325"},{"Typeface name":"Webdings","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"127782","Unicode hex":"1F326"},{"Typeface name":"Webdings","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"9729","Unicode hex":"2601"},{"Typeface name":"Webdings","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"127784","Unicode hex":"1F328"},{"Typeface name":"Webdings","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"127783","Unicode hex":"1F327"},{"Typeface name":"Webdings","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"127785","Unicode hex":"1F329"},{"Typeface name":"Webdings","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"127786","Unicode hex":"1F32A"},{"Typeface name":"Webdings","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"127788","Unicode hex":"1F32C"},{"Typeface name":"Webdings","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"127787","Unicode hex":"1F32B"},{"Typeface name":"Webdings","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"127772","Unicode hex":"1F31C"},{"Typeface name":"Webdings","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"127777","Unicode hex":"1F321"},{"Typeface name":"Webdings","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"128715","Unicode hex":"1F6CB"},{"Typeface name":"Webdings","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"128719","Unicode hex":"1F6CF"},{"Typeface name":"Webdings","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"127869","Unicode hex":"1F37D"},{"Typeface name":"Webdings","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"127864","Unicode hex":"1F378"},{"Typeface name":"Webdings","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"128718","Unicode hex":"1F6CE"},{"Typeface name":"Webdings","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"128717","Unicode hex":"1F6CD"},{"Typeface name":"Webdings","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"9413","Unicode hex":"24C5"},{"Typeface name":"Webdings","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"9855","Unicode hex":"267F"},{"Typeface name":"Webdings","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"128710","Unicode hex":"1F6C6"},{"Typeface name":"Webdings","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"128392","Unicode hex":"1F588"},{"Typeface name":"Webdings","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"127891","Unicode hex":"1F393"},{"Typeface name":"Webdings","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"128484","Unicode hex":"1F5E4"},{"Typeface name":"Webdings","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"128485","Unicode hex":"1F5E5"},{"Typeface name":"Webdings","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"128486","Unicode hex":"1F5E6"},{"Typeface name":"Webdings","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"128487","Unicode hex":"1F5E7"},{"Typeface name":"Webdings","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"128746","Unicode hex":"1F6EA"},{"Typeface name":"Webdings","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"128063","Unicode hex":"1F43F"},{"Typeface name":"Webdings","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"128038","Unicode hex":"1F426"},{"Typeface name":"Webdings","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"128031","Unicode hex":"1F41F"},{"Typeface name":"Webdings","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"128021","Unicode hex":"1F415"},{"Typeface name":"Webdings","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"128008","Unicode hex":"1F408"},{"Typeface name":"Webdings","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"128620","Unicode hex":"1F66C"},{"Typeface name":"Webdings","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"128622","Unicode hex":"1F66E"},{"Typeface name":"Webdings","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"128621","Unicode hex":"1F66D"},{"Typeface name":"Webdings","Dingbat dec":"250","Dingbat hex":"FA","Unicode dec":"128623","Unicode hex":"1F66F"},{"Typeface name":"Webdings","Dingbat dec":"251","Dingbat hex":"FB","Unicode dec":"128506","Unicode hex":"1F5FA"},{"Typeface name":"Webdings","Dingbat dec":"252","Dingbat hex":"FC","Unicode dec":"127757","Unicode hex":"1F30D"},{"Typeface name":"Webdings","Dingbat dec":"253","Dingbat hex":"FD","Unicode dec":"127759","Unicode hex":"1F30F"},{"Typeface name":"Webdings","Dingbat dec":"254","Dingbat hex":"FE","Unicode dec":"127758","Unicode hex":"1F30E"},{"Typeface name":"Webdings","Dingbat dec":"255","Dingbat hex":"FF","Unicode dec":"128330","Unicode hex":"1F54A"},{"Typeface name":"Wingdings","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Wingdings","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"128393","Unicode hex":"1F589"},{"Typeface name":"Wingdings","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"9986","Unicode hex":"2702"},{"Typeface name":"Wingdings","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"9985","Unicode hex":"2701"},{"Typeface name":"Wingdings","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"128083","Unicode hex":"1F453"},{"Typeface name":"Wingdings","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"128365","Unicode hex":"1F56D"},{"Typeface name":"Wingdings","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"128366","Unicode hex":"1F56E"},{"Typeface name":"Wingdings","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"128367","Unicode hex":"1F56F"},{"Typeface name":"Wingdings","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"128383","Unicode hex":"1F57F"},{"Typeface name":"Wingdings","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"9990","Unicode hex":"2706"},{"Typeface name":"Wingdings","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"128386","Unicode hex":"1F582"},{"Typeface name":"Wingdings","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"128387","Unicode hex":"1F583"},{"Typeface name":"Wingdings","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"128234","Unicode hex":"1F4EA"},{"Typeface name":"Wingdings","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"128235","Unicode hex":"1F4EB"},{"Typeface name":"Wingdings","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"128236","Unicode hex":"1F4EC"},{"Typeface name":"Wingdings","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"128237","Unicode hex":"1F4ED"},{"Typeface name":"Wingdings","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"128448","Unicode hex":"1F5C0"},{"Typeface name":"Wingdings","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"128449","Unicode hex":"1F5C1"},{"Typeface name":"Wingdings","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"128462","Unicode hex":"1F5CE"},{"Typeface name":"Wingdings","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"128463","Unicode hex":"1F5CF"},{"Typeface name":"Wingdings","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"128464","Unicode hex":"1F5D0"},{"Typeface name":"Wingdings","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"128452","Unicode hex":"1F5C4"},{"Typeface name":"Wingdings","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"8987","Unicode hex":"231B"},{"Typeface name":"Wingdings","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"128430","Unicode hex":"1F5AE"},{"Typeface name":"Wingdings","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"128432","Unicode hex":"1F5B0"},{"Typeface name":"Wingdings","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"128434","Unicode hex":"1F5B2"},{"Typeface name":"Wingdings","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"128435","Unicode hex":"1F5B3"},{"Typeface name":"Wingdings","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"128436","Unicode hex":"1F5B4"},{"Typeface name":"Wingdings","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"128427","Unicode hex":"1F5AB"},{"Typeface name":"Wingdings","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"128428","Unicode hex":"1F5AC"},{"Typeface name":"Wingdings","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"9991","Unicode hex":"2707"},{"Typeface name":"Wingdings","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"9997","Unicode hex":"270D"},{"Typeface name":"Wingdings","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"128398","Unicode hex":"1F58E"},{"Typeface name":"Wingdings","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"9996","Unicode hex":"270C"},{"Typeface name":"Wingdings","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"128399","Unicode hex":"1F58F"},{"Typeface name":"Wingdings","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"128077","Unicode hex":"1F44D"},{"Typeface name":"Wingdings","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"128078","Unicode hex":"1F44E"},{"Typeface name":"Wingdings","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"9756","Unicode hex":"261C"},{"Typeface name":"Wingdings","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"9758","Unicode hex":"261E"},{"Typeface name":"Wingdings","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"9757","Unicode hex":"261D"},{"Typeface name":"Wingdings","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"9759","Unicode hex":"261F"},{"Typeface name":"Wingdings","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"128400","Unicode hex":"1F590"},{"Typeface name":"Wingdings","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"9786","Unicode hex":"263A"},{"Typeface name":"Wingdings","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"128528","Unicode hex":"1F610"},{"Typeface name":"Wingdings","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"9785","Unicode hex":"2639"},{"Typeface name":"Wingdings","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"128163","Unicode hex":"1F4A3"},{"Typeface name":"Wingdings","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"128369","Unicode hex":"1F571"},{"Typeface name":"Wingdings","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"127987","Unicode hex":"1F3F3"},{"Typeface name":"Wingdings","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"127985","Unicode hex":"1F3F1"},{"Typeface name":"Wingdings","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"9992","Unicode hex":"2708"},{"Typeface name":"Wingdings","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"9788","Unicode hex":"263C"},{"Typeface name":"Wingdings","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"127778","Unicode hex":"1F322"},{"Typeface name":"Wingdings","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"10052","Unicode hex":"2744"},{"Typeface name":"Wingdings","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"128326","Unicode hex":"1F546"},{"Typeface name":"Wingdings","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"10014","Unicode hex":"271E"},{"Typeface name":"Wingdings","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"128328","Unicode hex":"1F548"},{"Typeface name":"Wingdings","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"10016","Unicode hex":"2720"},{"Typeface name":"Wingdings","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"10017","Unicode hex":"2721"},{"Typeface name":"Wingdings","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"9770","Unicode hex":"262A"},{"Typeface name":"Wingdings","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"9775","Unicode hex":"262F"},{"Typeface name":"Wingdings","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"128329","Unicode hex":"1F549"},{"Typeface name":"Wingdings","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"9784","Unicode hex":"2638"},{"Typeface name":"Wingdings","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"9800","Unicode hex":"2648"},{"Typeface name":"Wingdings","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"9801","Unicode hex":"2649"},{"Typeface name":"Wingdings","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"9802","Unicode hex":"264A"},{"Typeface name":"Wingdings","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"9803","Unicode hex":"264B"},{"Typeface name":"Wingdings","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"9804","Unicode hex":"264C"},{"Typeface name":"Wingdings","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"9805","Unicode hex":"264D"},{"Typeface name":"Wingdings","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"9806","Unicode hex":"264E"},{"Typeface name":"Wingdings","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"9807","Unicode hex":"264F"},{"Typeface name":"Wingdings","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"9808","Unicode hex":"2650"},{"Typeface name":"Wingdings","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"9809","Unicode hex":"2651"},{"Typeface name":"Wingdings","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"9810","Unicode hex":"2652"},{"Typeface name":"Wingdings","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"9811","Unicode hex":"2653"},{"Typeface name":"Wingdings","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"128624","Unicode hex":"1F670"},{"Typeface name":"Wingdings","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"128629","Unicode hex":"1F675"},{"Typeface name":"Wingdings","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"9899","Unicode hex":"26AB"},{"Typeface name":"Wingdings","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"128318","Unicode hex":"1F53E"},{"Typeface name":"Wingdings","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"9724","Unicode hex":"25FC"},{"Typeface name":"Wingdings","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"128911","Unicode hex":"1F78F"},{"Typeface name":"Wingdings","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"128912","Unicode hex":"1F790"},{"Typeface name":"Wingdings","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"10065","Unicode hex":"2751"},{"Typeface name":"Wingdings","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"10066","Unicode hex":"2752"},{"Typeface name":"Wingdings","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"128927","Unicode hex":"1F79F"},{"Typeface name":"Wingdings","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"10731","Unicode hex":"29EB"},{"Typeface name":"Wingdings","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"9670","Unicode hex":"25C6"},{"Typeface name":"Wingdings","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"10070","Unicode hex":"2756"},{"Typeface name":"Wingdings","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"11049","Unicode hex":"2B29"},{"Typeface name":"Wingdings","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"8999","Unicode hex":"2327"},{"Typeface name":"Wingdings","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"11193","Unicode hex":"2BB9"},{"Typeface name":"Wingdings","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"8984","Unicode hex":"2318"},{"Typeface name":"Wingdings","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"127989","Unicode hex":"1F3F5"},{"Typeface name":"Wingdings","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"127990","Unicode hex":"1F3F6"},{"Typeface name":"Wingdings","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"128630","Unicode hex":"1F676"},{"Typeface name":"Wingdings","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"128631","Unicode hex":"1F677"},{"Typeface name":"Wingdings","Dingbat dec":"127","Dingbat hex":"7F","Unicode dec":"9647","Unicode hex":"25AF"},{"Typeface name":"Wingdings","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"127243","Unicode hex":"1F10B"},{"Typeface name":"Wingdings","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"10112","Unicode hex":"2780"},{"Typeface name":"Wingdings","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"10113","Unicode hex":"2781"},{"Typeface name":"Wingdings","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"10114","Unicode hex":"2782"},{"Typeface name":"Wingdings","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"10115","Unicode hex":"2783"},{"Typeface name":"Wingdings","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"10116","Unicode hex":"2784"},{"Typeface name":"Wingdings","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"10117","Unicode hex":"2785"},{"Typeface name":"Wingdings","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"10118","Unicode hex":"2786"},{"Typeface name":"Wingdings","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"10119","Unicode hex":"2787"},{"Typeface name":"Wingdings","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"10120","Unicode hex":"2788"},{"Typeface name":"Wingdings","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"10121","Unicode hex":"2789"},{"Typeface name":"Wingdings","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"127244","Unicode hex":"1F10C"},{"Typeface name":"Wingdings","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"10122","Unicode hex":"278A"},{"Typeface name":"Wingdings","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"10123","Unicode hex":"278B"},{"Typeface name":"Wingdings","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"10124","Unicode hex":"278C"},{"Typeface name":"Wingdings","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"10125","Unicode hex":"278D"},{"Typeface name":"Wingdings","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"10126","Unicode hex":"278E"},{"Typeface name":"Wingdings","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"10127","Unicode hex":"278F"},{"Typeface name":"Wingdings","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"10128","Unicode hex":"2790"},{"Typeface name":"Wingdings","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"10129","Unicode hex":"2791"},{"Typeface name":"Wingdings","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"10130","Unicode hex":"2792"},{"Typeface name":"Wingdings","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"10131","Unicode hex":"2793"},{"Typeface name":"Wingdings","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"128610","Unicode hex":"1F662"},{"Typeface name":"Wingdings","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"128608","Unicode hex":"1F660"},{"Typeface name":"Wingdings","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"128609","Unicode hex":"1F661"},{"Typeface name":"Wingdings","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"128611","Unicode hex":"1F663"},{"Typeface name":"Wingdings","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"128606","Unicode hex":"1F65E"},{"Typeface name":"Wingdings","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"128604","Unicode hex":"1F65C"},{"Typeface name":"Wingdings","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"128605","Unicode hex":"1F65D"},{"Typeface name":"Wingdings","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"128607","Unicode hex":"1F65F"},{"Typeface name":"Wingdings","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"8729","Unicode hex":"2219"},{"Typeface name":"Wingdings","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"8226","Unicode hex":"2022"},{"Typeface name":"Wingdings","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"11037","Unicode hex":"2B1D"},{"Typeface name":"Wingdings","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"11096","Unicode hex":"2B58"},{"Typeface name":"Wingdings","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"128902","Unicode hex":"1F786"},{"Typeface name":"Wingdings","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"128904","Unicode hex":"1F788"},{"Typeface name":"Wingdings","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"128906","Unicode hex":"1F78A"},{"Typeface name":"Wingdings","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"128907","Unicode hex":"1F78B"},{"Typeface name":"Wingdings","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"128319","Unicode hex":"1F53F"},{"Typeface name":"Wingdings","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"9642","Unicode hex":"25AA"},{"Typeface name":"Wingdings","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"128910","Unicode hex":"1F78E"},{"Typeface name":"Wingdings","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"128961","Unicode hex":"1F7C1"},{"Typeface name":"Wingdings","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"128965","Unicode hex":"1F7C5"},{"Typeface name":"Wingdings","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"9733","Unicode hex":"2605"},{"Typeface name":"Wingdings","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"128971","Unicode hex":"1F7CB"},{"Typeface name":"Wingdings","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"128975","Unicode hex":"1F7CF"},{"Typeface name":"Wingdings","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"128979","Unicode hex":"1F7D3"},{"Typeface name":"Wingdings","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"128977","Unicode hex":"1F7D1"},{"Typeface name":"Wingdings","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"11216","Unicode hex":"2BD0"},{"Typeface name":"Wingdings","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"8982","Unicode hex":"2316"},{"Typeface name":"Wingdings","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"11214","Unicode hex":"2BCE"},{"Typeface name":"Wingdings","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"11215","Unicode hex":"2BCF"},{"Typeface name":"Wingdings","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"11217","Unicode hex":"2BD1"},{"Typeface name":"Wingdings","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"10026","Unicode hex":"272A"},{"Typeface name":"Wingdings","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"10032","Unicode hex":"2730"},{"Typeface name":"Wingdings","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"128336","Unicode hex":"1F550"},{"Typeface name":"Wingdings","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"128337","Unicode hex":"1F551"},{"Typeface name":"Wingdings","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"128338","Unicode hex":"1F552"},{"Typeface name":"Wingdings","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"128339","Unicode hex":"1F553"},{"Typeface name":"Wingdings","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"128340","Unicode hex":"1F554"},{"Typeface name":"Wingdings","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"128341","Unicode hex":"1F555"},{"Typeface name":"Wingdings","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"128342","Unicode hex":"1F556"},{"Typeface name":"Wingdings","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"128343","Unicode hex":"1F557"},{"Typeface name":"Wingdings","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"128344","Unicode hex":"1F558"},{"Typeface name":"Wingdings","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"128345","Unicode hex":"1F559"},{"Typeface name":"Wingdings","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"128346","Unicode hex":"1F55A"},{"Typeface name":"Wingdings","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"128347","Unicode hex":"1F55B"},{"Typeface name":"Wingdings","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"11184","Unicode hex":"2BB0"},{"Typeface name":"Wingdings","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"11185","Unicode hex":"2BB1"},{"Typeface name":"Wingdings","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"11186","Unicode hex":"2BB2"},{"Typeface name":"Wingdings","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"11187","Unicode hex":"2BB3"},{"Typeface name":"Wingdings","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"11188","Unicode hex":"2BB4"},{"Typeface name":"Wingdings","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"11189","Unicode hex":"2BB5"},{"Typeface name":"Wingdings","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"11190","Unicode hex":"2BB6"},{"Typeface name":"Wingdings","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"11191","Unicode hex":"2BB7"},{"Typeface name":"Wingdings","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"128618","Unicode hex":"1F66A"},{"Typeface name":"Wingdings","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"128619","Unicode hex":"1F66B"},{"Typeface name":"Wingdings","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"128597","Unicode hex":"1F655"},{"Typeface name":"Wingdings","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"128596","Unicode hex":"1F654"},{"Typeface name":"Wingdings","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"128599","Unicode hex":"1F657"},{"Typeface name":"Wingdings","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"128598","Unicode hex":"1F656"},{"Typeface name":"Wingdings","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"128592","Unicode hex":"1F650"},{"Typeface name":"Wingdings","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"128593","Unicode hex":"1F651"},{"Typeface name":"Wingdings","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"128594","Unicode hex":"1F652"},{"Typeface name":"Wingdings","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"128595","Unicode hex":"1F653"},{"Typeface name":"Wingdings","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"9003","Unicode hex":"232B"},{"Typeface name":"Wingdings","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"8998","Unicode hex":"2326"},{"Typeface name":"Wingdings","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"11160","Unicode hex":"2B98"},{"Typeface name":"Wingdings","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"11162","Unicode hex":"2B9A"},{"Typeface name":"Wingdings","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"11161","Unicode hex":"2B99"},{"Typeface name":"Wingdings","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"11163","Unicode hex":"2B9B"},{"Typeface name":"Wingdings","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"11144","Unicode hex":"2B88"},{"Typeface name":"Wingdings","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"11146","Unicode hex":"2B8A"},{"Typeface name":"Wingdings","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"11145","Unicode hex":"2B89"},{"Typeface name":"Wingdings","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"11147","Unicode hex":"2B8B"},{"Typeface name":"Wingdings","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"129128","Unicode hex":"1F868"},{"Typeface name":"Wingdings","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"129130","Unicode hex":"1F86A"},{"Typeface name":"Wingdings","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"129129","Unicode hex":"1F869"},{"Typeface name":"Wingdings","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"129131","Unicode hex":"1F86B"},{"Typeface name":"Wingdings","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"129132","Unicode hex":"1F86C"},{"Typeface name":"Wingdings","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"129133","Unicode hex":"1F86D"},{"Typeface name":"Wingdings","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"129135","Unicode hex":"1F86F"},{"Typeface name":"Wingdings","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"129134","Unicode hex":"1F86E"},{"Typeface name":"Wingdings","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"129144","Unicode hex":"1F878"},{"Typeface name":"Wingdings","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"129146","Unicode hex":"1F87A"},{"Typeface name":"Wingdings","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"129145","Unicode hex":"1F879"},{"Typeface name":"Wingdings","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"129147","Unicode hex":"1F87B"},{"Typeface name":"Wingdings","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"129148","Unicode hex":"1F87C"},{"Typeface name":"Wingdings","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"129149","Unicode hex":"1F87D"},{"Typeface name":"Wingdings","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"129151","Unicode hex":"1F87F"},{"Typeface name":"Wingdings","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"129150","Unicode hex":"1F87E"},{"Typeface name":"Wingdings","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"8678","Unicode hex":"21E6"},{"Typeface name":"Wingdings","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"8680","Unicode hex":"21E8"},{"Typeface name":"Wingdings","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"8679","Unicode hex":"21E7"},{"Typeface name":"Wingdings","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"8681","Unicode hex":"21E9"},{"Typeface name":"Wingdings","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"11012","Unicode hex":"2B04"},{"Typeface name":"Wingdings","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"8691","Unicode hex":"21F3"},{"Typeface name":"Wingdings","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"11009","Unicode hex":"2B01"},{"Typeface name":"Wingdings","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"11008","Unicode hex":"2B00"},{"Typeface name":"Wingdings","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"11011","Unicode hex":"2B03"},{"Typeface name":"Wingdings","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"11010","Unicode hex":"2B02"},{"Typeface name":"Wingdings","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"129196","Unicode hex":"1F8AC"},{"Typeface name":"Wingdings","Dingbat dec":"250","Dingbat hex":"FA","Unicode dec":"129197","Unicode hex":"1F8AD"},{"Typeface name":"Wingdings","Dingbat dec":"251","Dingbat hex":"FB","Unicode dec":"128502","Unicode hex":"1F5F6"},{"Typeface name":"Wingdings","Dingbat dec":"252","Dingbat hex":"FC","Unicode dec":"10003","Unicode hex":"2713"},{"Typeface name":"Wingdings","Dingbat dec":"253","Dingbat hex":"FD","Unicode dec":"128503","Unicode hex":"1F5F7"},{"Typeface name":"Wingdings","Dingbat dec":"254","Dingbat hex":"FE","Unicode dec":"128505","Unicode hex":"1F5F9"},{"Typeface name":"Wingdings 2","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Wingdings 2","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"128394","Unicode hex":"1F58A"},{"Typeface name":"Wingdings 2","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"128395","Unicode hex":"1F58B"},{"Typeface name":"Wingdings 2","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"128396","Unicode hex":"1F58C"},{"Typeface name":"Wingdings 2","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"128397","Unicode hex":"1F58D"},{"Typeface name":"Wingdings 2","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"9988","Unicode hex":"2704"},{"Typeface name":"Wingdings 2","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"9984","Unicode hex":"2700"},{"Typeface name":"Wingdings 2","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"128382","Unicode hex":"1F57E"},{"Typeface name":"Wingdings 2","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"128381","Unicode hex":"1F57D"},{"Typeface name":"Wingdings 2","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"128453","Unicode hex":"1F5C5"},{"Typeface name":"Wingdings 2","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"128454","Unicode hex":"1F5C6"},{"Typeface name":"Wingdings 2","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"128455","Unicode hex":"1F5C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"128456","Unicode hex":"1F5C8"},{"Typeface name":"Wingdings 2","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"128457","Unicode hex":"1F5C9"},{"Typeface name":"Wingdings 2","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"128458","Unicode hex":"1F5CA"},{"Typeface name":"Wingdings 2","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"128459","Unicode hex":"1F5CB"},{"Typeface name":"Wingdings 2","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"128460","Unicode hex":"1F5CC"},{"Typeface name":"Wingdings 2","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"128461","Unicode hex":"1F5CD"},{"Typeface name":"Wingdings 2","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"128203","Unicode hex":"1F4CB"},{"Typeface name":"Wingdings 2","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"128465","Unicode hex":"1F5D1"},{"Typeface name":"Wingdings 2","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"128468","Unicode hex":"1F5D4"},{"Typeface name":"Wingdings 2","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"128437","Unicode hex":"1F5B5"},{"Typeface name":"Wingdings 2","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"128438","Unicode hex":"1F5B6"},{"Typeface name":"Wingdings 2","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"128439","Unicode hex":"1F5B7"},{"Typeface name":"Wingdings 2","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"128440","Unicode hex":"1F5B8"},{"Typeface name":"Wingdings 2","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"128429","Unicode hex":"1F5AD"},{"Typeface name":"Wingdings 2","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"128431","Unicode hex":"1F5AF"},{"Typeface name":"Wingdings 2","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"128433","Unicode hex":"1F5B1"},{"Typeface name":"Wingdings 2","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"128402","Unicode hex":"1F592"},{"Typeface name":"Wingdings 2","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"128403","Unicode hex":"1F593"},{"Typeface name":"Wingdings 2","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"128408","Unicode hex":"1F598"},{"Typeface name":"Wingdings 2","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"128409","Unicode hex":"1F599"},{"Typeface name":"Wingdings 2","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"128410","Unicode hex":"1F59A"},{"Typeface name":"Wingdings 2","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"128411","Unicode hex":"1F59B"},{"Typeface name":"Wingdings 2","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"128072","Unicode hex":"1F448"},{"Typeface name":"Wingdings 2","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"128073","Unicode hex":"1F449"},{"Typeface name":"Wingdings 2","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"128412","Unicode hex":"1F59C"},{"Typeface name":"Wingdings 2","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"128413","Unicode hex":"1F59D"},{"Typeface name":"Wingdings 2","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"128414","Unicode hex":"1F59E"},{"Typeface name":"Wingdings 2","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"128415","Unicode hex":"1F59F"},{"Typeface name":"Wingdings 2","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"128416","Unicode hex":"1F5A0"},{"Typeface name":"Wingdings 2","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"128417","Unicode hex":"1F5A1"},{"Typeface name":"Wingdings 2","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"128070","Unicode hex":"1F446"},{"Typeface name":"Wingdings 2","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"128071","Unicode hex":"1F447"},{"Typeface name":"Wingdings 2","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"128418","Unicode hex":"1F5A2"},{"Typeface name":"Wingdings 2","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"128419","Unicode hex":"1F5A3"},{"Typeface name":"Wingdings 2","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"128401","Unicode hex":"1F591"},{"Typeface name":"Wingdings 2","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"128500","Unicode hex":"1F5F4"},{"Typeface name":"Wingdings 2","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"128504","Unicode hex":"1F5F8"},{"Typeface name":"Wingdings 2","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"128501","Unicode hex":"1F5F5"},{"Typeface name":"Wingdings 2","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"9745","Unicode hex":"2611"},{"Typeface name":"Wingdings 2","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"11197","Unicode hex":"2BBD"},{"Typeface name":"Wingdings 2","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"9746","Unicode hex":"2612"},{"Typeface name":"Wingdings 2","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"11198","Unicode hex":"2BBE"},{"Typeface name":"Wingdings 2","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"11199","Unicode hex":"2BBF"},{"Typeface name":"Wingdings 2","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"128711","Unicode hex":"1F6C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"10680","Unicode hex":"29B8"},{"Typeface name":"Wingdings 2","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"128625","Unicode hex":"1F671"},{"Typeface name":"Wingdings 2","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"128628","Unicode hex":"1F674"},{"Typeface name":"Wingdings 2","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"128626","Unicode hex":"1F672"},{"Typeface name":"Wingdings 2","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"128627","Unicode hex":"1F673"},{"Typeface name":"Wingdings 2","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"8253","Unicode hex":"203D"},{"Typeface name":"Wingdings 2","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"128633","Unicode hex":"1F679"},{"Typeface name":"Wingdings 2","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"128634","Unicode hex":"1F67A"},{"Typeface name":"Wingdings 2","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"128635","Unicode hex":"1F67B"},{"Typeface name":"Wingdings 2","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"128614","Unicode hex":"1F666"},{"Typeface name":"Wingdings 2","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"128612","Unicode hex":"1F664"},{"Typeface name":"Wingdings 2","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"128613","Unicode hex":"1F665"},{"Typeface name":"Wingdings 2","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"128615","Unicode hex":"1F667"},{"Typeface name":"Wingdings 2","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"128602","Unicode hex":"1F65A"},{"Typeface name":"Wingdings 2","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"128600","Unicode hex":"1F658"},{"Typeface name":"Wingdings 2","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"128601","Unicode hex":"1F659"},{"Typeface name":"Wingdings 2","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"128603","Unicode hex":"1F65B"},{"Typeface name":"Wingdings 2","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"9450","Unicode hex":"24EA"},{"Typeface name":"Wingdings 2","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"9312","Unicode hex":"2460"},{"Typeface name":"Wingdings 2","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"9313","Unicode hex":"2461"},{"Typeface name":"Wingdings 2","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"9314","Unicode hex":"2462"},{"Typeface name":"Wingdings 2","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"9315","Unicode hex":"2463"},{"Typeface name":"Wingdings 2","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"9316","Unicode hex":"2464"},{"Typeface name":"Wingdings 2","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"9317","Unicode hex":"2465"},{"Typeface name":"Wingdings 2","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"9318","Unicode hex":"2466"},{"Typeface name":"Wingdings 2","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"9319","Unicode hex":"2467"},{"Typeface name":"Wingdings 2","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"9320","Unicode hex":"2468"},{"Typeface name":"Wingdings 2","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"9321","Unicode hex":"2469"},{"Typeface name":"Wingdings 2","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"9471","Unicode hex":"24FF"},{"Typeface name":"Wingdings 2","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"10102","Unicode hex":"2776"},{"Typeface name":"Wingdings 2","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"10103","Unicode hex":"2777"},{"Typeface name":"Wingdings 2","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"10104","Unicode hex":"2778"},{"Typeface name":"Wingdings 2","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"10105","Unicode hex":"2779"},{"Typeface name":"Wingdings 2","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"10106","Unicode hex":"277A"},{"Typeface name":"Wingdings 2","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"10107","Unicode hex":"277B"},{"Typeface name":"Wingdings 2","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"10108","Unicode hex":"277C"},{"Typeface name":"Wingdings 2","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"10109","Unicode hex":"277D"},{"Typeface name":"Wingdings 2","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"10110","Unicode hex":"277E"},{"Typeface name":"Wingdings 2","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"10111","Unicode hex":"277F"},{"Typeface name":"Wingdings 2","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"9737","Unicode hex":"2609"},{"Typeface name":"Wingdings 2","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"127765","Unicode hex":"1F315"},{"Typeface name":"Wingdings 2","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"9789","Unicode hex":"263D"},{"Typeface name":"Wingdings 2","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"9790","Unicode hex":"263E"},{"Typeface name":"Wingdings 2","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"11839","Unicode hex":"2E3F"},{"Typeface name":"Wingdings 2","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"10013","Unicode hex":"271D"},{"Typeface name":"Wingdings 2","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"128327","Unicode hex":"1F547"},{"Typeface name":"Wingdings 2","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"128348","Unicode hex":"1F55C"},{"Typeface name":"Wingdings 2","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"128349","Unicode hex":"1F55D"},{"Typeface name":"Wingdings 2","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"128350","Unicode hex":"1F55E"},{"Typeface name":"Wingdings 2","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"128351","Unicode hex":"1F55F"},{"Typeface name":"Wingdings 2","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"128352","Unicode hex":"1F560"},{"Typeface name":"Wingdings 2","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"128353","Unicode hex":"1F561"},{"Typeface name":"Wingdings 2","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"128354","Unicode hex":"1F562"},{"Typeface name":"Wingdings 2","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"128355","Unicode hex":"1F563"},{"Typeface name":"Wingdings 2","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"128356","Unicode hex":"1F564"},{"Typeface name":"Wingdings 2","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"128357","Unicode hex":"1F565"},{"Typeface name":"Wingdings 2","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"128358","Unicode hex":"1F566"},{"Typeface name":"Wingdings 2","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"128359","Unicode hex":"1F567"},{"Typeface name":"Wingdings 2","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"128616","Unicode hex":"1F668"},{"Typeface name":"Wingdings 2","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"128617","Unicode hex":"1F669"},{"Typeface name":"Wingdings 2","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"8901","Unicode hex":"22C5"},{"Typeface name":"Wingdings 2","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"128900","Unicode hex":"1F784"},{"Typeface name":"Wingdings 2","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"10625","Unicode hex":"2981"},{"Typeface name":"Wingdings 2","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"9679","Unicode hex":"25CF"},{"Typeface name":"Wingdings 2","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"9675","Unicode hex":"25CB"},{"Typeface name":"Wingdings 2","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"128901","Unicode hex":"1F785"},{"Typeface name":"Wingdings 2","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"128903","Unicode hex":"1F787"},{"Typeface name":"Wingdings 2","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"128905","Unicode hex":"1F789"},{"Typeface name":"Wingdings 2","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"8857","Unicode hex":"2299"},{"Typeface name":"Wingdings 2","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"10687","Unicode hex":"29BF"},{"Typeface name":"Wingdings 2","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"128908","Unicode hex":"1F78C"},{"Typeface name":"Wingdings 2","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"128909","Unicode hex":"1F78D"},{"Typeface name":"Wingdings 2","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"9726","Unicode hex":"25FE"},{"Typeface name":"Wingdings 2","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"9632","Unicode hex":"25A0"},{"Typeface name":"Wingdings 2","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"9633","Unicode hex":"25A1"},{"Typeface name":"Wingdings 2","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"128913","Unicode hex":"1F791"},{"Typeface name":"Wingdings 2","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"128914","Unicode hex":"1F792"},{"Typeface name":"Wingdings 2","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"128915","Unicode hex":"1F793"},{"Typeface name":"Wingdings 2","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"128916","Unicode hex":"1F794"},{"Typeface name":"Wingdings 2","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"9635","Unicode hex":"25A3"},{"Typeface name":"Wingdings 2","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"128917","Unicode hex":"1F795"},{"Typeface name":"Wingdings 2","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"128918","Unicode hex":"1F796"},{"Typeface name":"Wingdings 2","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"128919","Unicode hex":"1F797"},{"Typeface name":"Wingdings 2","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"128920","Unicode hex":"1F798"},{"Typeface name":"Wingdings 2","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"11049","Unicode hex":"2B29"},{"Typeface name":"Wingdings 2","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"11045","Unicode hex":"2B25"},{"Typeface name":"Wingdings 2","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"9671","Unicode hex":"25C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"128922","Unicode hex":"1F79A"},{"Typeface name":"Wingdings 2","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"9672","Unicode hex":"25C8"},{"Typeface name":"Wingdings 2","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"128923","Unicode hex":"1F79B"},{"Typeface name":"Wingdings 2","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"128924","Unicode hex":"1F79C"},{"Typeface name":"Wingdings 2","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"128925","Unicode hex":"1F79D"},{"Typeface name":"Wingdings 2","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"128926","Unicode hex":"1F79E"},{"Typeface name":"Wingdings 2","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"11050","Unicode hex":"2B2A"},{"Typeface name":"Wingdings 2","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"11047","Unicode hex":"2B27"},{"Typeface name":"Wingdings 2","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"9674","Unicode hex":"25CA"},{"Typeface name":"Wingdings 2","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"128928","Unicode hex":"1F7A0"},{"Typeface name":"Wingdings 2","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"9686","Unicode hex":"25D6"},{"Typeface name":"Wingdings 2","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"9687","Unicode hex":"25D7"},{"Typeface name":"Wingdings 2","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"11210","Unicode hex":"2BCA"},{"Typeface name":"Wingdings 2","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"11211","Unicode hex":"2BCB"},{"Typeface name":"Wingdings 2","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"11200","Unicode hex":"2BC0"},{"Typeface name":"Wingdings 2","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"11201","Unicode hex":"2BC1"},{"Typeface name":"Wingdings 2","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"11039","Unicode hex":"2B1F"},{"Typeface name":"Wingdings 2","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"11202","Unicode hex":"2BC2"},{"Typeface name":"Wingdings 2","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"11043","Unicode hex":"2B23"},{"Typeface name":"Wingdings 2","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"11042","Unicode hex":"2B22"},{"Typeface name":"Wingdings 2","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"11203","Unicode hex":"2BC3"},{"Typeface name":"Wingdings 2","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"11204","Unicode hex":"2BC4"},{"Typeface name":"Wingdings 2","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"128929","Unicode hex":"1F7A1"},{"Typeface name":"Wingdings 2","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"128930","Unicode hex":"1F7A2"},{"Typeface name":"Wingdings 2","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"128931","Unicode hex":"1F7A3"},{"Typeface name":"Wingdings 2","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"128932","Unicode hex":"1F7A4"},{"Typeface name":"Wingdings 2","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"128933","Unicode hex":"1F7A5"},{"Typeface name":"Wingdings 2","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"128934","Unicode hex":"1F7A6"},{"Typeface name":"Wingdings 2","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"128935","Unicode hex":"1F7A7"},{"Typeface name":"Wingdings 2","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"128936","Unicode hex":"1F7A8"},{"Typeface name":"Wingdings 2","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"128937","Unicode hex":"1F7A9"},{"Typeface name":"Wingdings 2","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"128938","Unicode hex":"1F7AA"},{"Typeface name":"Wingdings 2","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"128939","Unicode hex":"1F7AB"},{"Typeface name":"Wingdings 2","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"128940","Unicode hex":"1F7AC"},{"Typeface name":"Wingdings 2","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"128941","Unicode hex":"1F7AD"},{"Typeface name":"Wingdings 2","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"128942","Unicode hex":"1F7AE"},{"Typeface name":"Wingdings 2","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"128943","Unicode hex":"1F7AF"},{"Typeface name":"Wingdings 2","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"128944","Unicode hex":"1F7B0"},{"Typeface name":"Wingdings 2","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"128945","Unicode hex":"1F7B1"},{"Typeface name":"Wingdings 2","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"128946","Unicode hex":"1F7B2"},{"Typeface name":"Wingdings 2","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"128947","Unicode hex":"1F7B3"},{"Typeface name":"Wingdings 2","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"128948","Unicode hex":"1F7B4"},{"Typeface name":"Wingdings 2","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"128949","Unicode hex":"1F7B5"},{"Typeface name":"Wingdings 2","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"128950","Unicode hex":"1F7B6"},{"Typeface name":"Wingdings 2","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"128951","Unicode hex":"1F7B7"},{"Typeface name":"Wingdings 2","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"128952","Unicode hex":"1F7B8"},{"Typeface name":"Wingdings 2","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"128953","Unicode hex":"1F7B9"},{"Typeface name":"Wingdings 2","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"128954","Unicode hex":"1F7BA"},{"Typeface name":"Wingdings 2","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"128955","Unicode hex":"1F7BB"},{"Typeface name":"Wingdings 2","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"128956","Unicode hex":"1F7BC"},{"Typeface name":"Wingdings 2","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"128957","Unicode hex":"1F7BD"},{"Typeface name":"Wingdings 2","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"128958","Unicode hex":"1F7BE"},{"Typeface name":"Wingdings 2","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"128959","Unicode hex":"1F7BF"},{"Typeface name":"Wingdings 2","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"128960","Unicode hex":"1F7C0"},{"Typeface name":"Wingdings 2","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"128962","Unicode hex":"1F7C2"},{"Typeface name":"Wingdings 2","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"128964","Unicode hex":"1F7C4"},{"Typeface name":"Wingdings 2","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"128966","Unicode hex":"1F7C6"},{"Typeface name":"Wingdings 2","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"128969","Unicode hex":"1F7C9"},{"Typeface name":"Wingdings 2","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"128970","Unicode hex":"1F7CA"},{"Typeface name":"Wingdings 2","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"10038","Unicode hex":"2736"},{"Typeface name":"Wingdings 2","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"128972","Unicode hex":"1F7CC"},{"Typeface name":"Wingdings 2","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"128974","Unicode hex":"1F7CE"},{"Typeface name":"Wingdings 2","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"128976","Unicode hex":"1F7D0"},{"Typeface name":"Wingdings 2","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"128978","Unicode hex":"1F7D2"},{"Typeface name":"Wingdings 2","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"10041","Unicode hex":"2739"},{"Typeface name":"Wingdings 2","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"128963","Unicode hex":"1F7C3"},{"Typeface name":"Wingdings 2","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"128967","Unicode hex":"1F7C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"10031","Unicode hex":"272F"},{"Typeface name":"Wingdings 2","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"128973","Unicode hex":"1F7CD"},{"Typeface name":"Wingdings 2","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"128980","Unicode hex":"1F7D4"},{"Typeface name":"Wingdings 2","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"11212","Unicode hex":"2BCC"},{"Typeface name":"Wingdings 2","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"11213","Unicode hex":"2BCD"},{"Typeface name":"Wingdings 2","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"8251","Unicode hex":"203B"},{"Typeface name":"Wingdings 2","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"8258","Unicode hex":"2042"},{"Typeface name":"Wingdings 3","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Wingdings 3","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"11104","Unicode hex":"2B60"},{"Typeface name":"Wingdings 3","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"11106","Unicode hex":"2B62"},{"Typeface name":"Wingdings 3","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"11105","Unicode hex":"2B61"},{"Typeface name":"Wingdings 3","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"11107","Unicode hex":"2B63"},{"Typeface name":"Wingdings 3","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"11110","Unicode hex":"2B66"},{"Typeface name":"Wingdings 3","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"11111","Unicode hex":"2B67"},{"Typeface name":"Wingdings 3","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"11113","Unicode hex":"2B69"},{"Typeface name":"Wingdings 3","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"11112","Unicode hex":"2B68"},{"Typeface name":"Wingdings 3","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"11120","Unicode hex":"2B70"},{"Typeface name":"Wingdings 3","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"11122","Unicode hex":"2B72"},{"Typeface name":"Wingdings 3","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"11121","Unicode hex":"2B71"},{"Typeface name":"Wingdings 3","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"11123","Unicode hex":"2B73"},{"Typeface name":"Wingdings 3","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"11126","Unicode hex":"2B76"},{"Typeface name":"Wingdings 3","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"11128","Unicode hex":"2B78"},{"Typeface name":"Wingdings 3","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"11131","Unicode hex":"2B7B"},{"Typeface name":"Wingdings 3","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"11133","Unicode hex":"2B7D"},{"Typeface name":"Wingdings 3","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"11108","Unicode hex":"2B64"},{"Typeface name":"Wingdings 3","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"11109","Unicode hex":"2B65"},{"Typeface name":"Wingdings 3","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"11114","Unicode hex":"2B6A"},{"Typeface name":"Wingdings 3","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"11116","Unicode hex":"2B6C"},{"Typeface name":"Wingdings 3","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"11115","Unicode hex":"2B6B"},{"Typeface name":"Wingdings 3","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"11117","Unicode hex":"2B6D"},{"Typeface name":"Wingdings 3","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"11085","Unicode hex":"2B4D"},{"Typeface name":"Wingdings 3","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"11168","Unicode hex":"2BA0"},{"Typeface name":"Wingdings 3","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"11169","Unicode hex":"2BA1"},{"Typeface name":"Wingdings 3","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"11170","Unicode hex":"2BA2"},{"Typeface name":"Wingdings 3","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"11171","Unicode hex":"2BA3"},{"Typeface name":"Wingdings 3","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"11172","Unicode hex":"2BA4"},{"Typeface name":"Wingdings 3","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"11173","Unicode hex":"2BA5"},{"Typeface name":"Wingdings 3","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"11174","Unicode hex":"2BA6"},{"Typeface name":"Wingdings 3","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"11175","Unicode hex":"2BA7"},{"Typeface name":"Wingdings 3","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"11152","Unicode hex":"2B90"},{"Typeface name":"Wingdings 3","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"11153","Unicode hex":"2B91"},{"Typeface name":"Wingdings 3","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"11154","Unicode hex":"2B92"},{"Typeface name":"Wingdings 3","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"11155","Unicode hex":"2B93"},{"Typeface name":"Wingdings 3","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"11136","Unicode hex":"2B80"},{"Typeface name":"Wingdings 3","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"11139","Unicode hex":"2B83"},{"Typeface name":"Wingdings 3","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"11134","Unicode hex":"2B7E"},{"Typeface name":"Wingdings 3","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"11135","Unicode hex":"2B7F"},{"Typeface name":"Wingdings 3","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"11140","Unicode hex":"2B84"},{"Typeface name":"Wingdings 3","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"11142","Unicode hex":"2B86"},{"Typeface name":"Wingdings 3","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"11141","Unicode hex":"2B85"},{"Typeface name":"Wingdings 3","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"11143","Unicode hex":"2B87"},{"Typeface name":"Wingdings 3","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"11151","Unicode hex":"2B8F"},{"Typeface name":"Wingdings 3","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"11149","Unicode hex":"2B8D"},{"Typeface name":"Wingdings 3","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"11150","Unicode hex":"2B8E"},{"Typeface name":"Wingdings 3","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"11148","Unicode hex":"2B8C"},{"Typeface name":"Wingdings 3","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"11118","Unicode hex":"2B6E"},{"Typeface name":"Wingdings 3","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"11119","Unicode hex":"2B6F"},{"Typeface name":"Wingdings 3","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"9099","Unicode hex":"238B"},{"Typeface name":"Wingdings 3","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"8996","Unicode hex":"2324"},{"Typeface name":"Wingdings 3","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"8963","Unicode hex":"2303"},{"Typeface name":"Wingdings 3","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"8997","Unicode hex":"2325"},{"Typeface name":"Wingdings 3","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"9251","Unicode hex":"2423"},{"Typeface name":"Wingdings 3","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"9085","Unicode hex":"237D"},{"Typeface name":"Wingdings 3","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"8682","Unicode hex":"21EA"},{"Typeface name":"Wingdings 3","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"11192","Unicode hex":"2BB8"},{"Typeface name":"Wingdings 3","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"129184","Unicode hex":"1F8A0"},{"Typeface name":"Wingdings 3","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"129185","Unicode hex":"1F8A1"},{"Typeface name":"Wingdings 3","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"129186","Unicode hex":"1F8A2"},{"Typeface name":"Wingdings 3","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"129187","Unicode hex":"1F8A3"},{"Typeface name":"Wingdings 3","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"129188","Unicode hex":"1F8A4"},{"Typeface name":"Wingdings 3","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"129189","Unicode hex":"1F8A5"},{"Typeface name":"Wingdings 3","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"129190","Unicode hex":"1F8A6"},{"Typeface name":"Wingdings 3","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"129191","Unicode hex":"1F8A7"},{"Typeface name":"Wingdings 3","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"129192","Unicode hex":"1F8A8"},{"Typeface name":"Wingdings 3","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"129193","Unicode hex":"1F8A9"},{"Typeface name":"Wingdings 3","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"129194","Unicode hex":"1F8AA"},{"Typeface name":"Wingdings 3","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"129195","Unicode hex":"1F8AB"},{"Typeface name":"Wingdings 3","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"129104","Unicode hex":"1F850"},{"Typeface name":"Wingdings 3","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"129106","Unicode hex":"1F852"},{"Typeface name":"Wingdings 3","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"129105","Unicode hex":"1F851"},{"Typeface name":"Wingdings 3","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"129107","Unicode hex":"1F853"},{"Typeface name":"Wingdings 3","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"129108","Unicode hex":"1F854"},{"Typeface name":"Wingdings 3","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"129109","Unicode hex":"1F855"},{"Typeface name":"Wingdings 3","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"129111","Unicode hex":"1F857"},{"Typeface name":"Wingdings 3","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"129110","Unicode hex":"1F856"},{"Typeface name":"Wingdings 3","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"129112","Unicode hex":"1F858"},{"Typeface name":"Wingdings 3","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"129113","Unicode hex":"1F859"},{"Typeface name":"Wingdings 3","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"9650","Unicode hex":"25B2"},{"Typeface name":"Wingdings 3","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"9660","Unicode hex":"25BC"},{"Typeface name":"Wingdings 3","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"9651","Unicode hex":"25B3"},{"Typeface name":"Wingdings 3","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"9661","Unicode hex":"25BD"},{"Typeface name":"Wingdings 3","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"9664","Unicode hex":"25C0"},{"Typeface name":"Wingdings 3","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"9654","Unicode hex":"25B6"},{"Typeface name":"Wingdings 3","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"9665","Unicode hex":"25C1"},{"Typeface name":"Wingdings 3","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"9655","Unicode hex":"25B7"},{"Typeface name":"Wingdings 3","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"9699","Unicode hex":"25E3"},{"Typeface name":"Wingdings 3","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"9698","Unicode hex":"25E2"},{"Typeface name":"Wingdings 3","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"9700","Unicode hex":"25E4"},{"Typeface name":"Wingdings 3","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"9701","Unicode hex":"25E5"},{"Typeface name":"Wingdings 3","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"128896","Unicode hex":"1F780"},{"Typeface name":"Wingdings 3","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"128898","Unicode hex":"1F782"},{"Typeface name":"Wingdings 3","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"128897","Unicode hex":"1F781"},{"Typeface name":"Wingdings 3","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"128899","Unicode hex":"1F783"},{"Typeface name":"Wingdings 3","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"11205","Unicode hex":"2BC5"},{"Typeface name":"Wingdings 3","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"11206","Unicode hex":"2BC6"},{"Typeface name":"Wingdings 3","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"11207","Unicode hex":"2BC7"},{"Typeface name":"Wingdings 3","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"11208","Unicode hex":"2BC8"},{"Typeface name":"Wingdings 3","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"11164","Unicode hex":"2B9C"},{"Typeface name":"Wingdings 3","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"11166","Unicode hex":"2B9E"},{"Typeface name":"Wingdings 3","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"11165","Unicode hex":"2B9D"},{"Typeface name":"Wingdings 3","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"11167","Unicode hex":"2B9F"},{"Typeface name":"Wingdings 3","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"129040","Unicode hex":"1F810"},{"Typeface name":"Wingdings 3","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"129042","Unicode hex":"1F812"},{"Typeface name":"Wingdings 3","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"129041","Unicode hex":"1F811"},{"Typeface name":"Wingdings 3","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"129043","Unicode hex":"1F813"},{"Typeface name":"Wingdings 3","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"129044","Unicode hex":"1F814"},{"Typeface name":"Wingdings 3","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"129046","Unicode hex":"1F816"},{"Typeface name":"Wingdings 3","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"129045","Unicode hex":"1F815"},{"Typeface name":"Wingdings 3","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"129047","Unicode hex":"1F817"},{"Typeface name":"Wingdings 3","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"129048","Unicode hex":"1F818"},{"Typeface name":"Wingdings 3","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"129050","Unicode hex":"1F81A"},{"Typeface name":"Wingdings 3","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"129049","Unicode hex":"1F819"},{"Typeface name":"Wingdings 3","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"129051","Unicode hex":"1F81B"},{"Typeface name":"Wingdings 3","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"129052","Unicode hex":"1F81C"},{"Typeface name":"Wingdings 3","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"129054","Unicode hex":"1F81E"},{"Typeface name":"Wingdings 3","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"129053","Unicode hex":"1F81D"},{"Typeface name":"Wingdings 3","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"129055","Unicode hex":"1F81F"},{"Typeface name":"Wingdings 3","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"129024","Unicode hex":"1F800"},{"Typeface name":"Wingdings 3","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"129026","Unicode hex":"1F802"},{"Typeface name":"Wingdings 3","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"129025","Unicode hex":"1F801"},{"Typeface name":"Wingdings 3","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"129027","Unicode hex":"1F803"},{"Typeface name":"Wingdings 3","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"129028","Unicode hex":"1F804"},{"Typeface name":"Wingdings 3","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"129030","Unicode hex":"1F806"},{"Typeface name":"Wingdings 3","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"129029","Unicode hex":"1F805"},{"Typeface name":"Wingdings 3","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"129031","Unicode hex":"1F807"},{"Typeface name":"Wingdings 3","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"129032","Unicode hex":"1F808"},{"Typeface name":"Wingdings 3","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"129034","Unicode hex":"1F80A"},{"Typeface name":"Wingdings 3","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"129033","Unicode hex":"1F809"},{"Typeface name":"Wingdings 3","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"129035","Unicode hex":"1F80B"},{"Typeface name":"Wingdings 3","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"129056","Unicode hex":"1F820"},{"Typeface name":"Wingdings 3","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"129058","Unicode hex":"1F822"},{"Typeface name":"Wingdings 3","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"129060","Unicode hex":"1F824"},{"Typeface name":"Wingdings 3","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"129062","Unicode hex":"1F826"},{"Typeface name":"Wingdings 3","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"129064","Unicode hex":"1F828"},{"Typeface name":"Wingdings 3","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"129066","Unicode hex":"1F82A"},{"Typeface name":"Wingdings 3","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"129068","Unicode hex":"1F82C"},{"Typeface name":"Wingdings 3","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"129180","Unicode hex":"1F89C"},{"Typeface name":"Wingdings 3","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"129181","Unicode hex":"1F89D"},{"Typeface name":"Wingdings 3","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"129182","Unicode hex":"1F89E"},{"Typeface name":"Wingdings 3","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"129183","Unicode hex":"1F89F"},{"Typeface name":"Wingdings 3","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"129070","Unicode hex":"1F82E"},{"Typeface name":"Wingdings 3","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"129072","Unicode hex":"1F830"},{"Typeface name":"Wingdings 3","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"129074","Unicode hex":"1F832"},{"Typeface name":"Wingdings 3","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"129076","Unicode hex":"1F834"},{"Typeface name":"Wingdings 3","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"129078","Unicode hex":"1F836"},{"Typeface name":"Wingdings 3","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"129080","Unicode hex":"1F838"},{"Typeface name":"Wingdings 3","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"129082","Unicode hex":"1F83A"},{"Typeface name":"Wingdings 3","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"129081","Unicode hex":"1F839"},{"Typeface name":"Wingdings 3","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"129083","Unicode hex":"1F83B"},{"Typeface name":"Wingdings 3","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"129176","Unicode hex":"1F898"},{"Typeface name":"Wingdings 3","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"129178","Unicode hex":"1F89A"},{"Typeface name":"Wingdings 3","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"129177","Unicode hex":"1F899"},{"Typeface name":"Wingdings 3","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"129179","Unicode hex":"1F89B"},{"Typeface name":"Wingdings 3","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"129084","Unicode hex":"1F83C"},{"Typeface name":"Wingdings 3","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"129086","Unicode hex":"1F83E"},{"Typeface name":"Wingdings 3","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"129085","Unicode hex":"1F83D"},{"Typeface name":"Wingdings 3","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"129087","Unicode hex":"1F83F"},{"Typeface name":"Wingdings 3","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"129088","Unicode hex":"1F840"},{"Typeface name":"Wingdings 3","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"129090","Unicode hex":"1F842"},{"Typeface name":"Wingdings 3","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"129089","Unicode hex":"1F841"},{"Typeface name":"Wingdings 3","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"129091","Unicode hex":"1F843"},{"Typeface name":"Wingdings 3","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"129092","Unicode hex":"1F844"},{"Typeface name":"Wingdings 3","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"129094","Unicode hex":"1F846"},{"Typeface name":"Wingdings 3","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"129093","Unicode hex":"1F845"},{"Typeface name":"Wingdings 3","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"129095","Unicode hex":"1F847"},{"Typeface name":"Wingdings 3","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"11176","Unicode hex":"2BA8"},{"Typeface name":"Wingdings 3","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"11177","Unicode hex":"2BA9"},{"Typeface name":"Wingdings 3","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"11178","Unicode hex":"2BAA"},{"Typeface name":"Wingdings 3","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"11179","Unicode hex":"2BAB"},{"Typeface name":"Wingdings 3","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"11180","Unicode hex":"2BAC"},{"Typeface name":"Wingdings 3","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"11181","Unicode hex":"2BAD"},{"Typeface name":"Wingdings 3","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"11182","Unicode hex":"2BAE"},{"Typeface name":"Wingdings 3","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"11183","Unicode hex":"2BAF"},{"Typeface name":"Wingdings 3","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"129120","Unicode hex":"1F860"},{"Typeface name":"Wingdings 3","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"129122","Unicode hex":"1F862"},{"Typeface name":"Wingdings 3","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"129121","Unicode hex":"1F861"},{"Typeface name":"Wingdings 3","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"129123","Unicode hex":"1F863"},{"Typeface name":"Wingdings 3","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"129124","Unicode hex":"1F864"},{"Typeface name":"Wingdings 3","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"129125","Unicode hex":"1F865"},{"Typeface name":"Wingdings 3","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"129127","Unicode hex":"1F867"},{"Typeface name":"Wingdings 3","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"129126","Unicode hex":"1F866"},{"Typeface name":"Wingdings 3","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"129136","Unicode hex":"1F870"},{"Typeface name":"Wingdings 3","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"129138","Unicode hex":"1F872"},{"Typeface name":"Wingdings 3","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"129137","Unicode hex":"1F871"},{"Typeface name":"Wingdings 3","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"129139","Unicode hex":"1F873"},{"Typeface name":"Wingdings 3","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"129140","Unicode hex":"1F874"},{"Typeface name":"Wingdings 3","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"129141","Unicode hex":"1F875"},{"Typeface name":"Wingdings 3","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"129143","Unicode hex":"1F877"},{"Typeface name":"Wingdings 3","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"129142","Unicode hex":"1F876"},{"Typeface name":"Wingdings 3","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"129152","Unicode hex":"1F880"},{"Typeface name":"Wingdings 3","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"129154","Unicode hex":"1F882"},{"Typeface name":"Wingdings 3","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"129153","Unicode hex":"1F881"},{"Typeface name":"Wingdings 3","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"129155","Unicode hex":"1F883"},{"Typeface name":"Wingdings 3","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"129156","Unicode hex":"1F884"},{"Typeface name":"Wingdings 3","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"129157","Unicode hex":"1F885"},{"Typeface name":"Wingdings 3","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"129159","Unicode hex":"1F887"},{"Typeface name":"Wingdings 3","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"129158","Unicode hex":"1F886"},{"Typeface name":"Wingdings 3","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"129168","Unicode hex":"1F890"},{"Typeface name":"Wingdings 3","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"129170","Unicode hex":"1F892"},{"Typeface name":"Wingdings 3","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"129169","Unicode hex":"1F891"},{"Typeface name":"Wingdings 3","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"129171","Unicode hex":"1F893"},{"Typeface name":"Wingdings 3","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"129172","Unicode hex":"1F894"},{"Typeface name":"Wingdings 3","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"129174","Unicode hex":"1F896"},{"Typeface name":"Wingdings 3","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"129173","Unicode hex":"1F895"},{"Typeface name":"Wingdings 3","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"129175","Unicode hex":"1F897"}];dk.default=jG;var RG=ze&&ze.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Il,"__esModule",{value:!0});Il.hex=Il.dec=Il.codePoint=void 0;var FG=RG(dk),fL={},OG=String.fromCodePoint?String.fromCodePoint:IG;for(var zD=0,O5=FG.default;zD<O5.length;zD++){var WD=O5[zD],M5=parseInt(WD["Unicode dec"],10),MG={codePoint:M5,string:OG(M5)};fL[WD["Typeface name"].toUpperCase()+"_"+WD["Dingbat dec"]]=MG}function hk(n,e){return fL[n.toUpperCase()+"_"+e]}Il.codePoint=hk;function BG(n,e){return hk(n,parseInt(e,10))}Il.dec=BG;function LG(n,e){return hk(n,parseInt(e,16))}Il.hex=LG;function IG(n){if(n<=65535)return String.fromCharCode(n);var e=Math.floor((n-65536)/1024)+55296,t=(n-65536)%1024+56320;return String.fromCharCode(e,t)}var nu={},B5=mn;nu.paragraph=PG;nu.run=zG;nu._elements=pL;nu._elementsOfType=fk;nu.getDescendantsOfType=WG;nu.getDescendants=gL;function PG(n){return fk("paragraph",n)}function zG(n){return fk("run",n)}function fk(n,e){return pL(function(t){return t.type===n?e(t):t})}function pL(n){return function e(t){if(t.children){var i=B5.map(t.children,e);t=B5.extend(t,{children:i})}return n(t)}}function WG(n,e){return gL(n).filter(function(t){return t.type===e})}function gL(n){var e=[];return mL(n,function(t){e.push(t)}),e}function mL(n,e){n.children&&n.children.forEach(function(t){mL(t,e),e(t)})}var pk={};pk.uriToZipEntryName=qG;pk.replaceFragment=$G;function qG(n,e){return e.charAt(0)==="/"?e.substr(1):n+"/"+e}function $G(n,e){var t=n.indexOf("#");return t!==-1&&(n=n.substring(0,t)),n+"#"+e}uk.createBodyReader=VG;uk._readNumberingProperties=bL;var L5=Il,As=mn,Wt=nt,yL=ns.Result,Za=ns.warning,HG=gc,I5=nu,P5=pk;function VG(n){return{readXmlElement:function(e){return new z5(n).readXmlElement(e)},readXmlElements:function(e){return new z5(n).readXmlElements(e)}}}function z5(n){var e=[],t=[],i=[],r=n.relationships,s=n.contentTypes,a=n.docxFile,o=n.files,c=n.numbering,l=n.styles;function d(Y){var ae=Y.map(h);return W5(ae)}function h(Y){if(Y.type==="element"){var ae=j[Y.name];if(ae)return ae(Y);if(!Object.prototype.hasOwnProperty.call(XG,Y.name)){var C=Za("An unrecognised element was ignored: "+Y.name);return Qg([C])}}return kh()}function f(Y){return w(Y).map(function(ae){return{type:"paragraphProperties",styleId:ae.styleId,styleName:ae.name,alignment:Y.firstOrEmpty("w:jc").attributes["w:val"],numbering:bL(ae.styleId,Y.firstOrEmpty("w:numPr"),c),indent:g(Y.firstOrEmpty("w:ind"))}})}function g(Y){return{start:Y.attributes["w:start"]||Y.attributes["w:left"],end:Y.attributes["w:end"]||Y.attributes["w:right"],firstLine:Y.attributes["w:firstLine"],hanging:Y.attributes["w:hanging"]}}function v(Y){return _(Y).map(function(ae){var C=Y.firstOrEmpty("w:sz").attributes["w:val"],ie=/^[0-9]+$/.test(C)?parseInt(C,10)/2:null;return{type:"runProperties",styleId:ae.styleId,styleName:ae.name,verticalAlignment:Y.firstOrEmpty("w:vertAlign").attributes["w:val"],font:Y.firstOrEmpty("w:rFonts").attributes["w:ascii"],fontSize:ie,isBold:x(Y.first("w:b")),isUnderline:y(Y.first("w:u")),isItalic:x(Y.first("w:i")),isStrikethrough:x(Y.first("w:strike")),isAllCaps:x(Y.first("w:caps")),isSmallCaps:x(Y.first("w:smallCaps")),highlight:b(Y.firstOrEmpty("w:highlight").attributes["w:val"])}})}function y(Y){if(Y){var ae=Y.attributes["w:val"];return ae!==void 0&&ae!=="false"&&ae!=="0"&&ae!=="none"}else return!1}function x(Y){if(Y){var ae=Y.attributes["w:val"];return ae!=="false"&&ae!=="0"}else return!1}function m(Y){return Y!=="false"&&Y!=="0"}function b(Y){return!Y||Y==="none"?null:Y}function w(Y){return A(Y,"w:pStyle","Paragraph",l.findParagraphStyleById)}function _(Y){return A(Y,"w:rStyle","Run",l.findCharacterStyleById)}function D(Y){return A(Y,"w:tblStyle","Table",l.findTableStyleById)}function A(Y,ae,C,ie){var te=[],V=Y.first(ae),$=null,J=null;if(V&&($=V.attributes["w:val"],$)){var ue=ie($);ue?J=ue.name:te.push(le(C,$))}return jv({styleId:$,name:J},te)}function E(Y){var ae=Y.attributes["w:fldCharType"];if(ae==="begin")e.push({type:"begin",fldChar:Y}),t=[];else if(ae==="end"){var C=e.pop();if(C.type==="begin"&&(C=I(C)),C.type==="checkbox")return xr(Wt.checkbox({checked:C.checked}))}else if(ae==="separate"){var ie=e.pop(),te=I(ie);e.push(te)}return kh()}function F(){var Y=As.last(e.filter(function(ae){return ae.type==="hyperlink"}));return Y?Y.options:null}function I(Y){return z(t.join(""),Y.type==="begin"?Y.fldChar:HG.emptyElement)}function z(Y,ae){var C=/\s*HYPERLINK "(.*)"/.exec(Y);if(C)return{type:"hyperlink",options:{href:C[1]}};var ie=/\s*HYPERLINK\s+\\l\s+"(.*)"/.exec(Y);if(ie)return{type:"hyperlink",options:{anchor:ie[1]}};var te=/\s*FORMCHECKBOX\s*/.exec(Y);if(te){var V=ae.firstOrEmpty("w:ffData").firstOrEmpty("w:checkBox"),$=V.first("w:checked"),J=$==null?x(V.first("w:default")):x($);return{type:"checkbox",checked:J}}return{type:"unknown"}}function H(Y){return t.push(Y.text()),kh()}function k(Y){var ae=Y.attributes["w:font"],C=Y.attributes["w:char"],ie=L5.hex(ae,C);return ie==null&&/^F0..$/.test(C)&&(ie=L5.hex(ae,C.substring(2))),ie==null?Qg([Za("A w:sym element with an unsupported character was ignored: char "+C+" in font "+ae)]):xr(new Wt.Text(ie.string))}function W(Y){return function(ae){var C=ae.attributes["w:id"];return xr(new Wt.NoteReference({noteType:Y,noteId:C}))}}function S(Y){return xr(Wt.commentReference({commentId:Y.attributes["w:id"]}))}function G(Y){return d(Y.children)}var j={"w:p":function(Y){var ae=Y.firstOrEmpty("w:pPr"),C=!!ae.firstOrEmpty("w:rPr").first("w:del");if(C)return Y.children.forEach(function(te){i.push(te)}),kh();var ie=Y.children;return i.length>0&&(ie=i.concat(ie),i=[]),fi.map(f(ae),d(ie),function(te,V){return new Wt.Paragraph(V,te)}).insertExtra()},"w:r":function(Y){return fi.map(v(Y.firstOrEmpty("w:rPr")),d(Y.children),function(ae,C){var ie=F();return ie!==null&&(C=[new Wt.Hyperlink(C,ie)]),new Wt.Run(C,ae)})},"w:fldChar":E,"w:instrText":H,"w:t":function(Y){return xr(new Wt.Text(Y.text()))},"w:tab":function(Y){return xr(new Wt.Tab)},"w:noBreakHyphen":function(){return xr(new Wt.Text(""))},"w:softHyphen":function(Y){return xr(new Wt.Text(""))},"w:sym":k,"w:hyperlink":function(Y){var ae=Y.attributes["r:id"],C=Y.attributes["w:anchor"];return d(Y.children).map(function(ie){function te($){var J=Y.attributes["w:tgtFrame"]||null;return new Wt.Hyperlink(ie,As.extend({targetFrame:J},$))}if(ae){var V=r.findTargetByRelationshipId(ae);return C&&(V=P5.replaceFragment(V,C)),te({href:V})}else return C?te({anchor:C}):ie})},"w:tbl":M,"w:tr":N,"w:tc":B,"w:footnoteReference":W("footnote"),"w:endnoteReference":W("endnote"),"w:commentReference":S,"w:br":function(Y){var ae=Y.attributes["w:type"];return ae==null||ae==="textWrapping"?xr(Wt.lineBreak):ae==="page"?xr(Wt.pageBreak):ae==="column"?xr(Wt.columnBreak):Qg([Za("Unsupported break type: "+ae)])},"w:bookmarkStart":function(Y){var ae=Y.attributes["w:name"];return ae==="_GoBack"?kh():xr(new Wt.BookmarkStart({name:ae}))},"mc:AlternateContent":function(Y){return G(Y.firstOrEmpty("mc:Fallback"))},"w:sdt":function(Y){var ae=d(Y.firstOrEmpty("w:sdtContent").children);return ae.map(function(C){var ie=Y.firstOrEmpty("w:sdtPr").first("wordml:checkbox");if(ie){var te=ie.first("wordml:checked"),V=!!te&&m(te.attributes["wordml:val"]),$=Wt.checkbox({checked:V}),J=!1,ue=C.map(I5._elementsOfType(Wt.types.text,function(pe){return pe.value.length>0&&!J?(J=!0,$):pe}));return J?ue:$}else return C})},"w:ins":G,"w:object":G,"w:smartTag":G,"w:drawing":G,"w:pict":function(Y){return G(Y).toExtra()},"v:roundrect":G,"v:shape":G,"v:textbox":G,"w:txbxContent":G,"wp:inline":Q,"wp:anchor":Q,"v:imagedata":fe,"v:group":G,"v:rect":G};return{readXmlElement:h,readXmlElements:d};function M(Y){var ae=R(Y.firstOrEmpty("w:tblPr"));return d(Y.children).flatMap(P).flatMap(function(C){return ae.map(function(ie){return Wt.Table(C,ie)})})}function R(Y){return D(Y).map(function(ae){return{styleId:ae.styleId,styleName:ae.name}})}function N(Y){var ae=Y.firstOrEmpty("w:trPr"),C=!!ae.first("w:del");if(C)return kh();var ie=!!ae.first("w:tblHeader");return d(Y.children).map(function(te){return Wt.TableRow(te,{isHeader:ie})})}function B(Y){return d(Y.children).map(function(ae){var C=Y.firstOrEmpty("w:tcPr"),ie=C.firstOrEmpty("w:gridSpan").attributes["w:val"],te=ie?parseInt(ie,10):1,V=Wt.TableCell(ae,{colSpan:te});return V._vMerge=L(C),V})}function L(Y){var ae=Y.first("w:vMerge");if(ae){var C=ae.attributes["w:val"];return C==="continue"||!C}else return null}function P(Y){var ae=As.any(Y,function(te){return te.type!==Wt.types.tableRow});if(ae)return q(Y),jv(Y,[Za("unexpected non-row element in table, cell merging may be incorrect")]);var C=As.any(Y,function(te){return As.any(te.children,function(V){return V.type!==Wt.types.tableCell})});if(C)return q(Y),jv(Y,[Za("unexpected non-cell element in table row, cell merging may be incorrect")]);var ie={};return Y.forEach(function(te){var V=0;te.children.forEach(function($){$._vMerge&&ie[V]?ie[V].rowSpan++:(ie[V]=$,$._vMerge=!1),V+=$.colSpan})}),Y.forEach(function(te){te.children=te.children.filter(function(V){return!V._vMerge}),te.children.forEach(function(V){delete V._vMerge})}),xr(Y)}function q(Y){Y.forEach(function(ae){var C=I5.getDescendantsOfType(ae,Wt.types.tableCell);C.forEach(function(ie){delete ie._vMerge})})}function Q(Y){var ae=Y.getElementsByTagName("a:graphic").getElementsByTagName("a:graphicData").getElementsByTagName("pic:pic").getElementsByTagName("pic:blipFill").getElementsByTagName("a:blip");return W5(ae.map(se.bind(null,Y)))}function se(Y,ae){var C=Y.first("wp:docPr").attributes,ie=be(C.descr)?C.title:C.descr,te=ye(ae);return te===null?Qg([Za("Could not find image file for a:blip element")]):ce(te,ie)}function be(Y){return Y==null||/^\s*$/.test(Y)}function ye(Y){var ae=Y.attributes["r:embed"],C=Y.attributes["r:link"];if(ae)return xe(ae);if(C){var ie=r.findTargetByRelationshipId(C);return{path:ie,read:o.read.bind(o,ie)}}else return null}function fe(Y){var ae=Y.attributes["r:id"];return ae?ce(xe(ae),Y.attributes["o:title"]):Qg([Za("A v:imagedata element without a relationship ID was ignored")])}function xe(Y){var ae=P5.uriToZipEntryName("word",r.findTargetByRelationshipId(Y));return{path:ae,read:a.read.bind(a,ae)}}function ce(Y,ae){var C=s.findContentType(Y.path),ie=Wt.Image({readImage:Y.read,altText:ae,contentType:C}),te=GG[C]?[]:Za("Image of type "+C+" is unlikely to display in web browsers");return jv(ie,te)}function le(Y,ae){return Za(Y+" style with ID "+ae+" was referenced but not defined in the document")}}function bL(n,e,t){var i=e.firstOrEmpty("w:ilvl").attributes["w:val"],r=e.firstOrEmpty("w:numId").attributes["w:val"];if(i!==void 0&&r!==void 0)return t.findLevel(r,i);if(n!=null){var s=t.findLevelByParagraphStyleId(n);if(s!=null)return s}return r!==void 0?t.findLevel(r,"0"):null}var GG={"image/png":!0,"image/gif":!0,"image/jpeg":!0,"image/svg+xml":!0,"image/tiff":!0},XG={"office-word:wrap":!0,"v:shadow":!0,"v:shapetype":!0,"w:annotationRef":!0,"w:bookmarkEnd":!0,"w:sectPr":!0,"w:proofErr":!0,"w:lastRenderedPageBreak":!0,"w:commentRangeStart":!0,"w:commentRangeEnd":!0,"w:del":!0,"w:footnoteRef":!0,"w:endnoteRef":!0,"w:pPr":!0,"w:rPr":!0,"w:tblPr":!0,"w:tblGrid":!0,"w:trPr":!0,"w:tcPr":!0};function Qg(n){return new fi(null,null,n)}function kh(){return new fi(null)}function xr(n){return new fi(n)}function jv(n,e){return new fi(n,null,e)}function fi(n,e,t){this.value=n||[],this.extra=e||[],this._result=new yL({element:this.value,extra:e},t),this.messages=this._result.messages}fi.prototype.toExtra=function(){return new fi(null,ww(this.extra,this.value),this.messages)};fi.prototype.insertExtra=function(){var n=this.extra;return n&&n.length?new fi(ww(this.value,n),null,this.messages):this};fi.prototype.map=function(n){var e=this._result.map(function(t){return n(t.element)});return new fi(e.value,this.extra,e.messages)};fi.prototype.flatMap=function(n){var e=this._result.flatMap(function(t){return n(t.element)._result});return new fi(e.value.element,ww(this.extra,e.value.extra),e.messages)};fi.map=function(n,e,t){return new fi(t(n.value,e.value),ww(n.extra,e.extra),n.messages.concat(e.messages))};function W5(n){var e=yL.combine(As.pluck(n,"_result"));return new fi(As.flatten(As.pluck(e.value,"element")),As.filter(As.flatten(As.pluck(e.value,"extra")),YG),e.messages)}function ww(n,e){return As.flatten([n,e])}function YG(n){return n}var vL={};vL.DocumentXmlReader=JG;var KG=nt,QG=ns.Result;function JG(n){var e=n.bodyReader;function t(i){var r=i.first("w:body");if(r==null)throw new Error("Could not find the body element: are you sure this is a docx file?");var s=e.readXmlElements(r.children).map(function(a){return new KG.Document(a,{notes:n.notes,comments:n.comments})});return new QG(s.value,s.messages)}return{convertXmlToDocument:t}}var _w={};_w.readRelationships=ZG;_w.defaultValue=new gk([]);_w.Relationships=gk;function ZG(n){var e=[];return n.children.forEach(function(t){if(t.name==="relationships:Relationship"){var i={relationshipId:t.attributes.Id,target:t.attributes.Target,type:t.attributes.Type};e.push(i)}}),new gk(e)}function gk(n){var e={};n.forEach(function(i){e[i.relationshipId]=i.target});var t={};return n.forEach(function(i){t[i.type]||(t[i.type]=[]),t[i.type].push(i.target)}),{findTargetByRelationshipId:function(i){return e[i]},findTargetsByType:function(i){return t[i]||[]}}}var mk={};mk.readContentTypesFromXml=tX;var eX={png:"png",gif:"gif",jpeg:"jpeg",jpg:"jpeg",tif:"tiff",tiff:"tiff",bmp:"bmp"};mk.defaultContentTypes=xL({},{});function tX(n){var e={},t={};return n.children.forEach(function(i){if(i.name==="content-types:Default"&&(e[i.attributes.Extension]=i.attributes.ContentType),i.name==="content-types:Override"){var r=i.attributes.PartName;r.charAt(0)==="/"&&(r=r.substring(1)),t[r]=i.attributes.ContentType}}),xL(t,e)}function xL(n,e){return{findContentType:function(t){var i=n[t];if(i)return i;var r=t.split("."),s=r[r.length-1];if(e.hasOwnProperty(s))return e[s];var a=eX[s.toLowerCase()];return a?"image/"+a:null}}}var Dw={},Rv=mn;Dw.readNumberingXml=nX;Dw.Numbering=yk;Dw.defaultNumbering=new yk({},{});function yk(n,e,t){var i=Rv.flatten(Rv.values(e).map(function(o){return Rv.values(o.levels)})),r=Rv.indexBy(i.filter(function(o){return o.paragraphStyleId!=null}),"paragraphStyleId");function s(o,c){var l=n[o];if(l){var d=e[l.abstractNumId];if(d){if(d.numStyleLink==null)return e[l.abstractNumId].levels[c];var h=t.findNumberingStyleById(d.numStyleLink);return s(h.numId,c)}else return null}else return null}function a(o){return r[o]||null}return{findLevel:s,findLevelByParagraphStyleId:a}}function nX(n,e){if(!e||!e.styles)throw new Error("styles is missing");var t=iX(n),i=sX(n);return new yk(i,t,e.styles)}function iX(n){var e={};return n.getElementsByTagName("w:abstractNum").forEach(function(t){var i=t.attributes["w:abstractNumId"];e[i]=rX(t)}),e}function rX(n){var e={},t=null;n.getElementsByTagName("w:lvl").forEach(function(r){var s=r.attributes["w:ilvl"],a=r.firstOrEmpty("w:numFmt").attributes["w:val"],o=a!=="bullet",c=r.firstOrEmpty("w:pStyle").attributes["w:val"];s===void 0?t={isOrdered:o,level:"0",paragraphStyleId:c}:e[s]={isOrdered:o,level:s,paragraphStyleId:c}}),t!==null&&e[t.level]===void 0&&(e[t.level]=t);var i=n.firstOrEmpty("w:numStyleLink").attributes["w:val"];return{levels:e,numStyleLink:i}}function sX(n){var e={};return n.getElementsByTagName("w:num").forEach(function(t){var i=t.attributes["w:numId"],r=t.first("w:abstractNumId").attributes["w:val"];e[i]={abstractNumId:r}}),e}var Aw={};Aw.readStylesXml=aX;Aw.Styles=_y;Aw.defaultStyles=new _y({},{});function _y(n,e,t,i){return{findParagraphStyleById:function(r){return n[r]},findCharacterStyleById:function(r){return e[r]},findTableStyleById:function(r){return t[r]},findNumberingStyleById:function(r){return i[r]}}}_y.EMPTY=new _y({},{},{},{});function aX(n){var e={},t={},i={},r={},s={paragraph:e,character:t,table:i,numbering:r};return n.getElementsByTagName("w:style").forEach(function(a){var o=oX(a),c=s[o.type];c&&c[o.styleId]===void 0&&(c[o.styleId]=o)}),new _y(e,t,i,r)}function oX(n){var e=n.attributes["w:type"];if(e==="numbering")return lX(e,n);var t=wL(n),i=cX(n);return{type:e,styleId:t,name:i}}function cX(n){var e=n.first("w:name");return e?e.attributes["w:val"]:null}function lX(n,e){var t=wL(e),i=e.firstOrEmpty("w:pPr").firstOrEmpty("w:numPr").firstOrEmpty("w:numId").attributes["w:val"];return{type:n,numId:i,styleId:t}}function wL(n){return n.attributes["w:styleId"]}var bk={},uX=nt,dX=ns.Result;bk.createFootnotesReader=_L.bind(ze,"footnote");bk.createEndnotesReader=_L.bind(ze,"endnote");function _L(n,e){function t(s){return dX.combine(s.getElementsByTagName("w:"+n).filter(i).map(r))}function i(s){var a=s.attributes["w:type"];return a!=="continuationSeparator"&&a!=="separator"}function r(s){var a=s.attributes["w:id"];return e.readXmlElements(s.children).map(function(o){return uX.Note({noteType:n,noteId:a,body:o})})}return t}var DL={},hX=nt,fX=ns.Result;function pX(n){function e(i){return fX.combine(i.getElementsByTagName("w:comment").map(t))}function t(i){var r=i.attributes["w:id"];function s(a){return(i.attributes[a]||"").trim()||null}return n.readXmlElements(i.children).map(function(a){return hX.comment({commentId:r,body:a,authorName:s("w:author"),authorInitials:s("w:initials")})})}return e}DL.createCommentsReader=pX;var AL={},gX=Gn;AL.Files=mX;function mX(){function n(e){return gX.reject(new Error("could not open external image: '"+e+`'
cannot open linked files from a web browser`))}return{read:n}}GC.read=DX;GC._findPartPaths=SL;var yX=Gn,bX=nt,qD=ns.Result,V2=B0,EL=KC.readXmlFromZipFile,vX=uk.createBodyReader,xX=vL.DocumentXmlReader,hg=_w,q5=mk,$5=Dw,H5=Aw,V5=bk,wX=DL,_X=AL.Files;function DX(n,e,t){e=e||{},t=t||{};var i=new _X({externalFileAccess:t.externalFileAccess,relativeToFile:e.path});return yX.props({contentTypes:EX(n),partPaths:SL(n),docxFile:n,files:i}).also(function(r){return{styles:TX(n,r.partPaths.styles)}}).also(function(r){return{numbering:SX(n,r.partPaths.numbering,r.styles)}}).also(function(r){return{footnotes:Fv(r.partPaths.footnotes,r,function(s,a){return a?V5.createFootnotesReader(s)(a):new qD([])}),endnotes:Fv(r.partPaths.endnotes,r,function(s,a){return a?V5.createEndnotesReader(s)(a):new qD([])}),comments:Fv(r.partPaths.comments,r,function(s,a){return a?wX.createCommentsReader(s)(a):new qD([])})}}).also(function(r){return{notes:r.footnotes.flatMap(function(s){return r.endnotes.map(function(a){return new bX.Notes(s.concat(a))})})}}).then(function(r){return Fv(r.partPaths.mainDocument,r,function(s,a){return r.notes.flatMap(function(o){return r.comments.flatMap(function(c){var l=new xX({bodyReader:s,notes:o,comments:c});return l.convertXmlToDocument(a)})})})})}function SL(n){return CX(n).then(function(e){var t=G5({docxFile:n,relationships:e,relationshipType:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",basePath:"",fallbackPath:"word/document.xml"});if(!n.exists(t))throw new Error("Could not find main document part. Are you sure this is a valid .docx file?");return Ng({filename:TL(t),readElement:hg.readRelationships,defaultValue:hg.defaultValue})(n).then(function(i){function r(s){return G5({docxFile:n,relationships:i,relationshipType:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/"+s,basePath:V2.splitPath(t).dirname,fallbackPath:"word/"+s+".xml"})}return{mainDocument:t,comments:r("comments"),endnotes:r("endnotes"),footnotes:r("footnotes"),numbering:r("numbering"),styles:r("styles")}})})}function G5(n){var e=n.docxFile,t=n.relationships,i=n.relationshipType,r=n.basePath,s=n.fallbackPath,a=t.findTargetsByType(i),o=a.map(function(l){return AX(V2.joinPath(r,l),"/")}),c=o.filter(function(l){return e.exists(l)});return c.length===0?s:c[0]}function AX(n,e){return n.substring(0,e.length)===e?n.substring(e.length):n}function Ng(n){return function(e){return EL(e,n.filename).then(function(t){return t?n.readElement(t):n.defaultValue})}}function Fv(n,e,t){var i=Ng({filename:TL(n),readElement:hg.readRelationships,defaultValue:hg.defaultValue});return i(e.docxFile).then(function(r){var s=new vX({relationships:r,contentTypes:e.contentTypes,docxFile:e.docxFile,numbering:e.numbering,styles:e.styles,files:e.files});return EL(e.docxFile,n).then(function(a){return t(s,a)})})}function TL(n){var e=V2.splitPath(n);return V2.joinPath(e.dirname,"_rels",e.basename+".rels")}var EX=Ng({filename:"[Content_Types].xml",readElement:q5.readContentTypesFromXml,defaultValue:q5.defaultContentTypes});function SX(n,e,t){return Ng({filename:e,readElement:function(i){return $5.readNumberingXml(i,{styles:t})},defaultValue:$5.defaultNumbering})(n)}function TX(n,e){return Ng({filename:e,readElement:H5.readStylesXml,defaultValue:H5.defaultStyles})(n)}var CX=Ng({filename:"_rels/.rels",readElement:hg.readRelationships,defaultValue:hg.defaultValue}),vk={},kX=mn,UX=Gn,Dy=gc;vk.writeStyleMap=jX;vk.readStyleMap=OX;var NX="http://schemas.zwobble.org/mammoth/style-map",G2="mammoth/style-map",CL="/"+G2;function jX(n,e){return n.write(G2,e),RX(n).then(function(){return FX(n)})}function RX(n){var e="word/_rels/document.xml.rels",t="http://schemas.openxmlformats.org/package/2006/relationships",i="{"+t+"}Relationship";return n.read(e,"utf8").then(Dy.readString).then(function(r){var s=r.children;kL(s,i,"Id",{Id:"rMammothStyleMap",Type:NX,Target:CL});var a={"":t};return n.write(e,Dy.writeString(r,a))})}function FX(n){var e="[Content_Types].xml",t="http://schemas.openxmlformats.org/package/2006/content-types",i="{"+t+"}Override";return n.read(e,"utf8").then(Dy.readString).then(function(r){var s=r.children;kL(s,i,"PartName",{PartName:CL,ContentType:"text/prs.mammoth.style-map"});var a={"":t};return n.write(e,Dy.writeString(r,a))})}function kL(n,e,t,i){var r=kX.find(n,function(s){return s.name===e&&s.attributes[t]===i[t]});r?r.attributes=i:n.push(Dy.element(e,i))}function OX(n){return n.exists(G2)?n.read(G2,"utf8"):UX.resolve(null)}var xk={},ou={},eo={},_c={},X5;function UL(){if(X5)return _c;X5=1;var n=Sw();function e(c,l,d){return i(n.element(c,l,{fresh:!1}),d)}function t(c,l,d){var h=n.element(c,l,{fresh:!0});return i(h,d)}function i(c,l){return{type:"element",tag:c,children:l||[]}}function r(c){return{type:"text",value:c}}var s={type:"forceWrite"};_c.freshElement=t,_c.nonFreshElement=e,_c.elementWithTag=i,_c.text=r,_c.forceWrite=s;var a={br:!0,hr:!0,img:!0,input:!0};function o(c){return c.children.length===0&&a[c.tag.tagName]}return _c.isVoidElement=o,_c}var $D,Y5;function MX(){if(Y5)return $D;Y5=1;var n=mn,e=UL();function t(y){return i(l(y))}function i(y){var x=[];return y.map(r).forEach(function(m){c(x,m)}),x}function r(y){return s[y.type](y)}var s={element:a,text:o,forceWrite:o};function a(y){return e.elementWithTag(y.tag,i(y.children))}function o(y){return y}function c(y,x){var m=y[y.length-1];x.type==="element"&&!x.tag.fresh&&m&&m.type==="element"&&x.tag.matchesElement(m.tag)?(x.tag.separator&&c(m.children,e.text(x.tag.separator)),x.children.forEach(function(b){c(m.children,b)})):y.push(x)}function l(y){return d(y,function(x){return h[x.type](x)})}function d(y,x){return n.flatten(n.map(y,x),!0)}var h={element:g,text:v,forceWrite:f};function f(y){return[y]}function g(y){var x=l(y.children);return x.length===0&&!e.isVoidElement(y)?[]:[e.elementWithTag(y.tag,x)]}function v(y){return y.value.length===0?[]:[y]}return $D=t,$D}var K5;function Ew(){if(K5)return eo;K5=1;var n=UL();eo.freshElement=n.freshElement,eo.nonFreshElement=n.nonFreshElement,eo.elementWithTag=n.elementWithTag,eo.text=n.text,eo.forceWrite=n.forceWrite,eo.simplify=MX();function e(a,o){o.forEach(function(c){t(a,c)})}function t(a,o){i[o.type](a,o)}var i={element:r,text:s,forceWrite:function(){}};function r(a,o){n.isVoidElement(o)?a.selfClosing(o.tag.tagName,o.tag.attributes):(a.open(o.tag.tagName,o.tag.attributes),e(a,o.children),a.close(o.tag.tagName))}function s(a,o){a.text(o.value)}return eo.write=e,eo}var Q5;function Sw(){if(Q5)return ou;Q5=1;var n=mn,e=Ew();ou.topLevelElement=t,ou.elements=i,ou.element=s;function t(o,c){return i([s(o,c,{fresh:!0})])}function i(o){return new r(o.map(function(c){return n.isString(c)?s(c):c}))}function r(o){this._elements=o}r.prototype.wrap=function(c){for(var l=c(),d=this._elements.length-1;d>=0;d--)l=this._elements[d].wrapNodes(l);return l};function s(o,c,l){return l=l||{},new a(o,c,l)}function a(o,c,l){var d={};n.isArray(o)?(o.forEach(function(h){d[h]=!0}),o=o[0]):d[o]=!0,this.tagName=o,this.tagNames=d,this.attributes=c||{},this.fresh=l.fresh,this.separator=l.separator}return a.prototype.matchesElement=function(o){return this.tagNames[o.tagName]&&n.isEqual(this.attributes||{},o.attributes||{})},a.prototype.wrap=function(c){return this.wrapNodes(c())},a.prototype.wrapNodes=function(c){return[e.elementWithTag(this,c)]},ou.empty=i([]),ou.ignore={wrap:function(){return[]}},ou}var wk={};(function(n){var e=mn,t=Gn,i=Ew();n.imgElement=r;function r(s){return function(a,o){return t.when(s(a)).then(function(c){var l={};return a.altText&&(l.alt=a.altText),e.extend(l,c),[i.freshElement("img",l)]})}}n.inline=n.imgElement,n.dataUri=r(function(s){return s.readAsBase64String().then(function(a){return{src:"data:"+s.contentType+";base64,"+a}})})})(wk);var NL={},jL={},RL=mn;jL.writer=BX;function BX(n){return n=n||{},n.prettyPrint?LX():FL()}var Ov={div:!0,p:!0,ul:!0,li:!0};function LX(){var n=0,e="  ",t=[],i=!0,r=!1,s=FL();function a(v,y){Ov[v]&&f(),t.push(v),s.open(v,y),Ov[v]&&n++,i=!1}function o(v){Ov[v]&&(n--,f()),t.pop(),s.close(v)}function c(v){h();var y=g()?v:v.replace(`
`,`
`+e);s.text(y)}function l(v,y){f(),s.selfClosing(v,y)}function d(){return t.length===0||Ov[t[t.length-1]]}function h(){r||(f(),r=!0)}function f(){if(r=!1,!i&&d()&&!g()){s._append(`
`);for(var v=0;v<n;v++)s._append(e)}}function g(){return RL.some(t,function(v){return v==="pre"})}return{asString:s.asString,open:a,close:o,text:c,selfClosing:l}}function FL(){var n=[];function e(c,l){var d=r(l);n.push("<"+c+d+">")}function t(c){n.push("</"+c+">")}function i(c,l){var d=r(l);n.push("<"+c+d+" />")}function r(c){return RL.map(c,function(l,d){return" "+d+'="'+PX(l)+'"'}).join("")}function s(c){n.push(IX(c))}function a(c){n.push(c)}function o(){return n.join("")}return{asString:o,open:e,close:t,text:s,selfClosing:i,_append:a}}function IX(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function PX(n){return n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var OL={},zX=mn;function J5(n){return X2(n,n)}function X2(n,e){return function(){return{start:n,end:e}}}function WX(n){var e=n.href||"";return e?{start:"[",end:"]("+e+")",anchorPosition:"before"}:{}}function qX(n){var e=n.src||"",t=n.alt||"";return e||t?{start:"!["+t+"]("+e+")"}:{}}function Z5(n){return function(e,t){return{start:t?`
`:"",end:t?"":`
`,list:{isOrdered:n.isOrdered,indent:t?t.indent+1:0,count:0}}}}function $X(n,e,t){e=e||{indent:0,isOrdered:!1,count:0},e.count++,t.hasClosed=!1;var i=e.isOrdered?e.count+".":"-",r=BL("	",e.indent)+i+" ";return{start:r,end:function(){if(!t.hasClosed)return t.hasClosed=!0,`
`}}}var ML={p:X2("",`

`),br:X2("",`  
`),ul:Z5({isOrdered:!1}),ol:Z5({isOrdered:!0}),li:$X,strong:J5("__"),em:J5("*"),a:WX,img:qX};(function(){for(var n=1;n<=6;n++)ML["h"+n]=X2(BL("#",n)+" ",`

`)})();function BL(n,e){return new Array(e+1).join(n)}function HX(){var n=[],e=[],t=null,i={};function r(d,h){h=h||{};var f=ML[d]||function(){return{}},g=f(h,t,i);e.push({end:g.end,list:t}),g.list&&(t=g.list);var v=g.anchorPosition==="before";v&&s(h),n.push(g.start||""),v||s(h)}function s(d){d.id&&n.push('<a id="'+d.id+'"></a>')}function a(d){var h=e.pop();t=h.list;var f=zX.isFunction(h.end)?h.end():h.end;n.push(f||"")}function o(d,h){r(d,h),a()}function c(d){n.push(VX(d))}function l(){return n.join("")}return{asString:l,open:r,close:a,text:c,selfClosing:o}}OL.writer=HX;function VX(n){return n.replace(/\\/g,"\\\\").replace(/([\`\*_\{\}\[\]\(\)\#\+\-\.\!])/g,"\\$1")}var GX=jL,XX=OL;NL.writer=YX;function YX(n){return n=n||{},n.outputFormat==="markdown"?XX.writer():GX.writer(n)}var Sc=mn,e4=Gn,Bx=nt,ss=Sw(),zS=ns,KX=wk,it=Ew(),QX=NL;xk.DocumentConverter=JX;function JX(n){return{convertToHtml:function(e){var t=Sc.indexBy(e.type===Bx.types.document?e.comments:[],"commentId"),i=new ZX(n,t);return i.convertToHtml(e)}}}function ZX(n,e){var t=1,i=[],r=[];n=Sc.extend({ignoreEmptyParagraphs:!0},n);var s=n.idPrefix===void 0?"":n.idPrefix,a=n.ignoreEmptyParagraphs,o=ss.topLevelElement("p"),c=n.styleMap||[];function l(R){var N=[],B=h(R,N,{}),L=[];LL(B,function(q){q.type==="deferred"&&L.push(q)});var P={};return e4.mapSeries(L,function(q){return q.value().then(function(Q){P[q.id]=Q})}).then(function(){function q(se){return HD(se,function(be){return be.type==="deferred"?P[be.id]:be.children?[Sc.extend({},be,{children:q(be.children)})]:[be]})}var Q=QX.writer({prettyPrint:n.prettyPrint,outputFormat:n.outputFormat});return it.write(Q,it.simplify(q(B))),new zS.Result(Q.asString(),N)})}function d(R,N,B){return HD(R,function(L){return h(L,N,B)})}function h(R,N,B){if(!B)throw new Error("options not set");var L=M[R.type];return L?L(R,N,B):[]}function f(R,N,B){return g(R,N).wrap(function(){var L=d(R.children,N,B);return a?L:[it.forceWrite].concat(L)})}function g(R,N){var B=m(R);return B?B.to:(R.styleId&&N.push(t4("paragraph",R)),o)}function v(R,N,B){var L=function(){return d(R.children,N,B)},P=[];if(R.highlight!==null){var q=x({type:"highlight",color:R.highlight});q&&P.push(q)}R.isSmallCaps&&P.push(y("smallCaps")),R.isAllCaps&&P.push(y("allCaps")),R.isStrikethrough&&P.push(y("strikethrough","s")),R.isUnderline&&P.push(y("underline")),R.verticalAlignment===Bx.verticalAlignment.subscript&&P.push(ss.element("sub",{},{fresh:!1})),R.verticalAlignment===Bx.verticalAlignment.superscript&&P.push(ss.element("sup",{},{fresh:!1})),R.isItalic&&P.push(y("italic","em")),R.isBold&&P.push(y("bold","strong"));var Q=ss.empty,se=m(R);return se?Q=se.to:R.styleId&&N.push(t4("run",R)),P.push(Q),P.forEach(function(be){L=be.wrap.bind(be,L)}),L()}function y(R,N){var B=x({type:R});return B||(N?ss.element(N,{},{fresh:!1}):ss.empty)}function x(R,N){var B=m(R);return B?B.to:N}function m(R){for(var N=0;N<c.length;N++)if(c[N].from.matches(R))return c[N]}function b(R){return function(N,B){return e4.attempt(function(){return R(N,B)}).caught(function(L){return B.push(zS.error(L)),[]})}}function w(R){return D(R.noteType,R.noteId)}function _(R){return A(R.noteType,R.noteId)}function D(R,N){return E(R+"-"+N)}function A(R,N){return E(R+"-ref-"+N)}function E(R){return s+R}var F=ss.elements([ss.element("table",{},{fresh:!0})]);function I(R,N,B){return x(R,F).wrap(function(){return z(R,N,B)})}function z(R,N,B){var L=Sc.findIndex(R.children,function(se){return!se.type===Bx.types.tableRow||!se.isHeader});L===-1&&(L=R.children.length);var P;if(L===0)P=d(R.children,N,Sc.extend({},B,{isTableHeader:!1}));else{var q=d(R.children.slice(0,L),N,Sc.extend({},B,{isTableHeader:!0})),Q=d(R.children.slice(L),N,Sc.extend({},B,{isTableHeader:!1}));P=[it.freshElement("thead",{},q),it.freshElement("tbody",{},Q)]}return[it.forceWrite].concat(P)}function H(R,N,B){var L=d(R.children,N,B);return[it.freshElement("tr",{},[it.forceWrite].concat(L))]}function k(R,N,B){var L=B.isTableHeader?"th":"td",P=d(R.children,N,B),q={};return R.colSpan!==1&&(q.colspan=R.colSpan.toString()),R.rowSpan!==1&&(q.rowspan=R.rowSpan.toString()),[it.freshElement(L,q,[it.forceWrite].concat(P))]}function W(R,N,B){return x(R,ss.ignore).wrap(function(){var L=e[R.commentId],P=r.length+1,q="["+nY(L)+P+"]";return r.push({label:q,comment:L}),[it.freshElement("a",{href:"#"+D("comment",R.commentId),id:A("comment",R.commentId)},[it.text(q)])]})}function S(R,N,B){var L=R.label,P=R.comment,q=d(P.body,N,B).concat([it.nonFreshElement("p",{},[it.text(" "),it.freshElement("a",{href:"#"+A("comment",P.commentId)},[it.text("")])])]);return[it.freshElement("dt",{id:D("comment",P.commentId)},[it.text("Comment "+L)]),it.freshElement("dd",{},q)]}function G(R,N,B){return j(R).wrap(function(){return[]})}function j(R){var N=m(R);return N?N.to:R.breakType==="line"?ss.topLevelElement("br"):ss.empty}var M={document:function(R,N,B){var L=d(R.children,N,B),P=i.map(function(Q){return R.notes.resolve(Q)}),q=d(P,N,B);return L.concat([it.freshElement("ol",{},q),it.freshElement("dl",{},HD(r,function(Q){return S(Q,N,B)}))])},paragraph:f,run:v,text:function(R,N,B){return[it.text(R.value)]},tab:function(R,N,B){return[it.text("	")]},hyperlink:function(R,N,B){var L=R.anchor?"#"+E(R.anchor):R.href,P={href:L};R.targetFrame!=null&&(P.target=R.targetFrame);var q=d(R.children,N,B);return[it.nonFreshElement("a",P,q)]},checkbox:function(R){var N={type:"checkbox"};return R.checked&&(N.checked="checked"),[it.freshElement("input",N)]},bookmarkStart:function(R,N,B){var L=it.freshElement("a",{id:E(R.name)},[it.forceWrite]);return[L]},noteReference:function(R,N,B){i.push(R);var L=it.freshElement("a",{href:"#"+w(R),id:_(R)},[it.text("["+t+++"]")]);return[it.freshElement("sup",{},[L])]},note:function(R,N,B){var L=d(R.body,N,B),P=it.elementWithTag(ss.element("p",{},{fresh:!1}),[it.text(" "),it.freshElement("a",{href:"#"+_(R)},[it.text("")])]),q=L.concat([P]);return it.freshElement("li",{id:w(R)},q)},commentReference:W,comment:S,image:tY(b(n.convertImage||KX.dataUri)),table:I,tableRow:H,tableCell:k,break:G};return{convertToHtml:l}}var eY=1;function tY(n){return function(e,t,i){return[{type:"deferred",id:eY++,value:function(){return n(e,t,i)}}]}}function t4(n,e){return zS.warning("Unrecognised "+n+" style: '"+e.styleName+"' (Style ID: "+e.styleId+")")}function HD(n,e){return Sc.flatten(n.map(e),!0)}function LL(n,e){n.forEach(function(t){e(t),t.children&&LL(t.children,e)})}var nY=xk.commentAuthorLabel=function(e){return e.authorInitials||""},IL={},iY=nt;function PL(n){if(n.type==="text")return n.value;if(n.type===iY.types.tab)return"	";var e=n.type==="paragraph"?`

`:"";return(n.children||[]).map(PL).join("")+e}IL.convertElementToRawText=PL;var Tw={},aa={},zL={},WL={exports:{}},fg=WL.exports=function(n,e){this._tokens=n,this._startIndex=e||0};fg.prototype.head=function(){return this._tokens[this._startIndex]};fg.prototype.tail=function(n){return new fg(this._tokens,this._startIndex+1)};fg.prototype.toArray=function(){return this._tokens.slice(this._startIndex)};fg.prototype.end=function(){return this._tokens[this._tokens.length-1]};fg.prototype.to=function(n){var e=this.head().source,t=n.head()||n.end();return e.to(t.source)};var rY=WL.exports,sY=rY;zL.Parser=function(n){var e=function(t,i){return t(new sY(i))};return{parseTokens:e}};var _k={},qL={};(function(n){n.none=Object.create({value:function(){throw new Error("Called value on none")},isNone:function(){return!0},isSome:function(){return!1},map:function(){return n.none},flatMap:function(){return n.none},filter:function(){return n.none},toArray:function(){return[]},orElse:e,valueOrElse:e});function e(i){return typeof i=="function"?i():i}n.some=function(i){return new t(i)};var t=function(i){this._value=i};t.prototype.value=function(){return this._value},t.prototype.isNone=function(){return!1},t.prototype.isSome=function(){return!0},t.prototype.map=function(i){return new t(i(this._value))},t.prototype.flatMap=function(i){return i(this._value)},t.prototype.filter=function(i){return i(this._value)?this:n.none},t.prototype.toArray=function(){return[this._value]},t.prototype.orElse=function(i){return this},t.prototype.valueOrElse=function(i){return this._value},n.isOption=function(i){return i===n.none||i instanceof t},n.fromNullable=function(i){return i==null?n.none:new t(i)}})(qL);var Dk={failure:function(n,e){if(n.length<1)throw new Error("Failure must have errors");return new Si({status:"failure",remaining:e,errors:n})},error:function(n,e){if(n.length<1)throw new Error("Failure must have errors");return new Si({status:"error",remaining:e,errors:n})},success:function(n,e,t){return new Si({status:"success",value:n,source:t,remaining:e,errors:[]})},cut:function(n){return new Si({status:"cut",remaining:n,errors:[]})}},Si=function(n){this._value=n.value,this._status=n.status,this._hasValue=n.value!==void 0,this._remaining=n.remaining,this._source=n.source,this._errors=n.errors};Si.prototype.map=function(n){return this._hasValue?new Si({value:n(this._value,this._source),status:this._status,remaining:this._remaining,source:this._source,errors:this._errors}):this};Si.prototype.changeRemaining=function(n){return new Si({value:this._value,status:this._status,remaining:n,source:this._source,errors:this._errors})};Si.prototype.isSuccess=function(){return this._status==="success"||this._status==="cut"};Si.prototype.isFailure=function(){return this._status==="failure"};Si.prototype.isError=function(){return this._status==="error"};Si.prototype.isCut=function(){return this._status==="cut"};Si.prototype.value=function(){return this._value};Si.prototype.remaining=function(){return this._remaining};Si.prototype.source=function(){return this._source};Si.prototype.errors=function(){return this._errors};var Ak={};Ak.error=function(n){return new Cw(n)};var Cw=function(n){this.expected=n.expected,this.actual=n.actual,this._location=n.location};Cw.prototype.describe=function(){var n=this._location?this._location.describe()+`:
`:"";return n+"Expected "+this.expected+`
but got `+this.actual};Cw.prototype.lineNumber=function(){return this._location.lineNumber()};Cw.prototype.characterNumber=function(){return this._location.characterNumber()};var $L={};$L.fromArray=function(n){var e=0,t=function(){return e<n.length};return new ih({hasNext:t,next:function(){if(t())return n[e++];throw new Error("No more elements")}})};var ih=function(n){this._iterator=n};ih.prototype.map=function(n){var e=this._iterator;return new ih({hasNext:function(){return e.hasNext()},next:function(){return n(e.next())}})};ih.prototype.filter=function(n){var e=this._iterator,t=!1,i=!1,r,s=function(){if(!t)for(t=!0,i=!1;e.hasNext()&&!i;)r=e.next(),i=n(r)};return new ih({hasNext:function(){return s(),i},next:function(){s();var a=r;return t=!1,a}})};ih.prototype.first=function(){var n=this._iterator;return this._iterator.hasNext()?n.next():null};ih.prototype.toArray=function(){for(var n=[];this._iterator.hasNext();)n.push(this._iterator.next());return n};(function(n){var e=mn,t=qL,i=Dk,r=Ak,s=$L;n.token=function(f,g){var v=g!==void 0;return function(y){var x=y.head();if(x&&x.name===f&&(!v||x.value===g))return i.success(x.value,y.tail(),x.source);var m=d({name:f,value:g});return h(y,m)}},n.tokenOfType=function(f){return n.token(f)},n.firstOf=function(f,g){return e.isArray(g)||(g=Array.prototype.slice.call(arguments,1)),function(v){return s.fromArray(g).map(function(y){return y(v)}).filter(function(y){return y.isSuccess()||y.isError()}).first()||h(v,f)}},n.then=function(f,g){return function(v){var y=f(v);return y.map||console.log(y),y.map(g)}},n.sequence=function(){var f=Array.prototype.slice.call(arguments,0),g=function(y){var x=e.foldl(f,function(b,w){var _=b.result,D=b.hasCut;if(!_.isSuccess())return{result:_,hasCut:D};var A=w(_.remaining());if(A.isCut())return{result:_,hasCut:!0};if(A.isSuccess()){var E;w.isCaptured?E=_.value().withValue(w,A.value()):E=_.value();var F=A.remaining(),I=y.to(F);return{result:i.success(E,F,I),hasCut:D}}else return D?{result:i.error(A.errors(),A.remaining()),hasCut:D}:{result:A,hasCut:D}},{result:i.success(new a,y),hasCut:!1}).result,m=y.to(x.remaining());return x.map(function(b){return b.withValue(n.sequence.source,m)})};g.head=function(){var y=e.find(f,v);return n.then(g,n.sequence.extract(y))},g.map=function(y){return n.then(g,function(x){return y.apply(this,x.toArray())})};function v(y){return y.isCaptured}return g};var a=function(f,g){this._values=f||{},this._valuesArray=g||[]};a.prototype.withValue=function(f,g){if(f.captureName&&f.captureName in this._values)throw new Error('Cannot add second value for capture "'+f.captureName+'"');var v=e.clone(this._values);v[f.captureName]=g;var y=this._valuesArray.concat([g]);return new a(v,y)},a.prototype.get=function(f){if(f.captureName in this._values)return this._values[f.captureName];throw new Error('No value for capture "'+f.captureName+'"')},a.prototype.toArray=function(){return this._valuesArray},n.sequence.capture=function(f,g){var v=function(){return f.apply(this,arguments)};return v.captureName=g,v.isCaptured=!0,v},n.sequence.extract=function(f){return function(g){return g.get(f)}},n.sequence.applyValues=function(f){var g=Array.prototype.slice.call(arguments,1);return function(v){var y=g.map(function(x){return v.get(x)});return f.apply(this,y)}},n.sequence.source={captureName:"source"},n.sequence.cut=function(){return function(f){return i.cut(f)}},n.optional=function(f){return function(g){var v=f(g);return v.isSuccess()?v.map(t.some):v.isFailure()?i.success(t.none,g):v}},n.zeroOrMoreWithSeparator=function(f,g){return l(f,g,!1)},n.oneOrMoreWithSeparator=function(f,g){return l(f,g,!0)};var o=n.zeroOrMore=function(f){return function(g){for(var v=[],y;(y=f(g))&&y.isSuccess();)g=y.remaining(),v.push(y.value());return y.isError()?y:i.success(v,g)}};n.oneOrMore=function(f){return n.oneOrMoreWithSeparator(f,c)};function c(f){return i.success(null,f)}var l=function(f,g,v){return function(y){var x=f(y);if(x.isSuccess()){var m=n.sequence.capture(f,"main"),b=o(n.then(n.sequence(g,m),n.sequence.extract(m))),w=b(x.remaining());return i.success([x.value()].concat(w.value()),w.remaining())}else return v||x.isError()?x:i.success([],y)}};n.leftAssociative=function(f,g,v){var y;v?y=[{func:v,rule:g}]:y=g,y=y.map(function(m){return n.then(m.rule,function(b){return function(w,_){return m.func(w,b,_)}})});var x=n.firstOf.apply(null,["rules"].concat(y));return function(m){var b=m,w=f(m);if(!w.isSuccess())return w;for(var _=x(w.remaining());_.isSuccess();){var D=_.remaining(),A=b.to(_.remaining()),E=_.value();w=i.success(E(w.value(),A),D,A),_=x(w.remaining())}return _.isError()?_:w}},n.leftAssociative.firstOf=function(){return Array.prototype.slice.call(arguments,0)},n.nonConsuming=function(f){return function(g){return f(g).changeRemaining(g)}};var d=function(f){return f.value?f.name+' "'+f.value+'"':f.name};function h(f,g){var v,y=f.head();return y?v=r.error({expected:g,actual:d(y),location:y.source}):v=r.error({expected:g,actual:"end of tokens"}),i.failure([v],f)}})(_k);var HL={exports:{}};HL.exports=function(n,e){var t={asString:function(){return n},range:function(i,r){return new rh(n,e,i,r)}};return t};var rh=function(n,e,t,i){this._string=n,this._description=e,this._startIndex=t,this._endIndex=i};rh.prototype.to=function(n){return new rh(this._string,this._description,this._startIndex,n._endIndex)};rh.prototype.describe=function(){var n=this._position(),e=this._description?this._description+`
`:"";return e+"Line number: "+n.lineNumber+`
Character number: `+n.characterNumber};rh.prototype.lineNumber=function(){return this._position().lineNumber};rh.prototype.characterNumber=function(){return this._position().characterNumber};rh.prototype._position=function(){for(var n=this,e=0,t=function(){return n._string.indexOf(`
`,e)},i=1;t()!==-1&&t()<this._startIndex;)e=t()+1,i+=1;var r=this._startIndex-e+1;return{lineNumber:i,characterNumber:r}};var VL=HL.exports,GL=function(n,e,t){this.name=n,this.value=e,t&&(this.source=t)},XL={};(function(n){var e=_k,t=Dk;n.parser=function(s,a,o){var c={rule:f,leftAssociative:g,rightAssociative:v},l=new i(o.map(h)),d=e.firstOf(s,a);function h(m){return{name:m.name,rule:r(m.ruleBuilder.bind(null,c))}}function f(){return y(l)}function g(m){return y(l.untilExclusive(m))}function v(m){return y(l.untilInclusive(m))}function y(m){return x.bind(null,m)}function x(m,b){var w=d(b);return w.isSuccess()?m.apply(w):w}return c};function i(s){function a(h){return new i(s.slice(0,c().indexOf(h)))}function o(h){return new i(s.slice(0,c().indexOf(h)+1))}function c(){return s.map(function(h){return h.name})}function l(h){for(var f,g;;)if(f=d(h.remaining()),f.isSuccess())g=h.source().to(f.source()),h=t.success(f.value()(h.value(),g),f.remaining(),g);else return f.isFailure()?h:f}function d(h){return e.firstOf("infix",s.map(function(f){return f.rule}))(h)}return{apply:l,untilExclusive:a,untilInclusive:o}}n.infix=function(s,a){function o(c){return n.infix(s,function(l){var d=a(l);return function(h){var f=d(h);return f.map(function(g){return function(v,y){return c(v,g,y)}})}})}return{name:s,ruleBuilder:a,map:o}};var r=function(s){var a;return function(o){return a||(a=s()),a(o)}}})(XL);var YL={},VD=GL,aY=VL;YL.RegexTokeniser=oY;function oY(n){n=n.map(function(r){return{name:r.name,regex:new RegExp(r.regex.source,"g")}});function e(r,s){for(var a=new aY(r,s),o=0,c=[];o<r.length;){var l=t(r,o,a);o=l.endIndex,c.push(l.token)}return c.push(i(r,a)),c}function t(r,s,a){for(var o=0;o<n.length;o++){var c=n[o].regex;c.lastIndex=s;var l=c.exec(r);if(l){var h=s+l[0].length;if(l.index===s&&h>s){var d=l[1],f=new VD(n[o].name,d,a.range(s,h));return{token:f,endIndex:h}}}}var h=s+1,f=new VD("unrecognisedCharacter",r.substring(s,h),a.range(s,h));return{token:f,endIndex:h}}function i(r,s){return new VD("end",null,s.range(r.length,r.length))}return{tokenise:e}}aa.Parser=zL.Parser;aa.rules=_k;aa.errors=Ak;aa.results=Dk;aa.StringSource=VL;aa.Token=GL;aa.bottomUp=XL;aa.RegexTokeniser=YL.RegexTokeniser;aa.rule=function(n){var e;return function(t){return e||(e=n()),e(t)}};var gi={};gi.paragraph=cY;gi.run=lY;gi.table=uY;gi.bold=new oa("bold");gi.italic=new oa("italic");gi.underline=new oa("underline");gi.strikethrough=new oa("strikethrough");gi.allCaps=new oa("allCaps");gi.smallCaps=new oa("smallCaps");gi.highlight=dY;gi.commentReference=new oa("commentReference");gi.lineBreak=new kw({breakType:"line"});gi.pageBreak=new kw({breakType:"page"});gi.columnBreak=new kw({breakType:"column"});gi.equalTo=fY;gi.startsWith=pY;function cY(n){return new oa("paragraph",n)}function lY(n){return new oa("run",n)}function uY(n){return new oa("table",n)}function dY(n){return new KL(n)}function oa(n,e){e=e||{},this._elementType=n,this._styleId=e.styleId,this._styleName=e.styleName,e.list&&(this._listIndex=e.list.levelIndex,this._listIsOrdered=e.list.isOrdered)}oa.prototype.matches=function(n){return n.type===this._elementType&&(this._styleId===void 0||n.styleId===this._styleId)&&(this._styleName===void 0||n.styleName&&this._styleName.operator(this._styleName.operand,n.styleName))&&(this._listIndex===void 0||hY(n,this._listIndex,this._listIsOrdered))&&(this._breakType===void 0||this._breakType===n.breakType)};function KL(n){n=n||{},this._color=n.color}KL.prototype.matches=function(n){return n.type==="highlight"&&(this._color===void 0||n.color===this._color)};function kw(n){n=n||{},this._breakType=n.breakType}kw.prototype.matches=function(n){return n.type==="break"&&(this._breakType===void 0||n.breakType===this._breakType)};function hY(n,e,t){return n.numbering&&n.numbering.level==e&&n.numbering.isOrdered==t}function fY(n){return{operator:gY,operand:n}}function pY(n){return{operator:mY,operand:n}}function gY(n,e){return n.toUpperCase()===e.toUpperCase()}function mY(n,e){return e.toUpperCase().indexOf(n.toUpperCase())===0}var QL={},yY=aa,bY=yY.RegexTokeniser;QL.tokenise=vY;var n4="'((?:\\\\.|[^'])*)";function vY(n){var e="(?:[a-zA-Z\\-_]|\\\\.)",t=new bY([{name:"identifier",regex:new RegExp("("+e+"(?:"+e+"|[0-9])*)")},{name:"dot",regex:/\./},{name:"colon",regex:/:/},{name:"gt",regex:/>/},{name:"whitespace",regex:/\s+/},{name:"arrow",regex:/=>/},{name:"equals",regex:/=/},{name:"startsWith",regex:/\^=/},{name:"open-paren",regex:/\(/},{name:"close-paren",regex:/\)/},{name:"open-square-bracket",regex:/\[/},{name:"close-square-bracket",regex:/\]/},{name:"string",regex:new RegExp(n4+"'")},{name:"unterminated-string",regex:new RegExp(n4)},{name:"integer",regex:/([0-9]+)/},{name:"choice",regex:/\|/},{name:"bang",regex:/(!)/}]);return t.tokenise(n)}var xY=mn,me=aa,mi=gi,Lx=Sw(),wY=QL.tokenise,GD=ns;Tw.readHtmlPath=EY;Tw.readDocumentMatcher=AY;Tw.readStyle=_Y;function _Y(n){return Ek(RY,n)}function DY(){return me.rules.sequence(me.rules.sequence.capture(JL()),me.rules.tokenOfType("whitespace"),me.rules.tokenOfType("arrow"),me.rules.sequence.capture(me.rules.optional(me.rules.sequence(me.rules.tokenOfType("whitespace"),me.rules.sequence.capture(ZL())).head())),me.rules.tokenOfType("end")).map(function(n,e){return{from:n,to:e.valueOrElse(Lx.empty)}})}function AY(n){return Ek(JL(),n)}function JL(){var n=me.rules.sequence,e=function(A,E){return me.rules.then(me.rules.token("identifier",A),function(){return E})},t=e("p",mi.paragraph),i=e("r",mi.run),r=me.rules.firstOf("p or r or table",t,i),s=me.rules.sequence(me.rules.tokenOfType("dot"),me.rules.sequence.cut(),me.rules.sequence.capture(Uw)).map(function(A){return{styleId:A}}),a=me.rules.firstOf("style name matcher",me.rules.then(me.rules.sequence(me.rules.tokenOfType("equals"),me.rules.sequence.cut(),me.rules.sequence.capture(sf)).head(),function(A){return{styleName:mi.equalTo(A)}}),me.rules.then(me.rules.sequence(me.rules.tokenOfType("startsWith"),me.rules.sequence.cut(),me.rules.sequence.capture(sf)).head(),function(A){return{styleName:mi.startsWith(A)}})),o=me.rules.sequence(me.rules.tokenOfType("open-square-bracket"),me.rules.sequence.cut(),me.rules.token("identifier","style-name"),me.rules.sequence.capture(a),me.rules.tokenOfType("close-square-bracket")).head(),c=me.rules.firstOf("list type",e("ordered-list",{isOrdered:!0}),e("unordered-list",{isOrdered:!1})),l=n(me.rules.tokenOfType("colon"),n.capture(c),n.cut(),me.rules.tokenOfType("open-paren"),n.capture(SY),me.rules.tokenOfType("close-paren")).map(function(A,E){return{list:{isOrdered:A.isOrdered,levelIndex:E-1}}});function d(A){var E=me.rules.firstOf.apply(me.rules.firstOf,["matcher suffix"].concat(A)),F=me.rules.zeroOrMore(E);return me.rules.then(F,function(I){var z={};return I.forEach(function(H){xY.extend(z,H)}),z})}var h=n(n.capture(r),n.capture(d([s,o,l]))).map(function(A,E){return A(E)}),f=n(me.rules.token("identifier","table"),n.capture(d([s,o]))).map(function(A){return mi.table(A)}),g=e("b",mi.bold),v=e("i",mi.italic),y=e("u",mi.underline),x=e("strike",mi.strikethrough),m=e("all-caps",mi.allCaps),b=e("small-caps",mi.smallCaps),w=n(me.rules.token("identifier","highlight"),me.rules.sequence.capture(me.rules.optional(me.rules.sequence(me.rules.tokenOfType("open-square-bracket"),me.rules.sequence.cut(),me.rules.token("identifier","color"),me.rules.tokenOfType("equals"),me.rules.sequence.capture(sf),me.rules.tokenOfType("close-square-bracket")).head()))).map(function(A){return mi.highlight({color:A.valueOrElse(void 0)})}),_=e("comment-reference",mi.commentReference),D=n(me.rules.token("identifier","br"),n.cut(),me.rules.tokenOfType("open-square-bracket"),me.rules.token("identifier","type"),me.rules.tokenOfType("equals"),n.capture(sf),me.rules.tokenOfType("close-square-bracket")).map(function(A){switch(A){case"line":return mi.lineBreak;case"page":return mi.pageBreak;case"column":return mi.columnBreak}});return me.rules.firstOf("element type",h,f,g,v,y,x,m,b,w,_,D)}function EY(n){return Ek(ZL(),n)}function ZL(){var n=me.rules.sequence.capture,e=me.rules.tokenOfType("whitespace"),t=me.rules.then(me.rules.optional(me.rules.sequence(me.rules.tokenOfType("colon"),me.rules.token("identifier","fresh"))),function(a){return a.map(function(){return!0}).valueOrElse(!1)}),i=me.rules.then(me.rules.optional(me.rules.sequence(me.rules.tokenOfType("colon"),me.rules.token("identifier","separator"),me.rules.tokenOfType("open-paren"),n(sf),me.rules.tokenOfType("close-paren")).head()),function(a){return a.valueOrElse("")}),r=me.rules.oneOrMoreWithSeparator(Uw,me.rules.tokenOfType("choice")),s=me.rules.sequence(n(r),n(me.rules.zeroOrMore(UY)),n(t),n(i)).map(function(a,o,c,l){var d={},h={};return o.forEach(function(f){f.append&&d[f.name]?d[f.name]+=" "+f.value:d[f.name]=f.value}),c&&(h.fresh=!0),l&&(h.separator=l),Lx.element(a,d,h)});return me.rules.firstOf("html path",me.rules.then(me.rules.tokenOfType("bang"),function(){return Lx.ignore}),me.rules.then(me.rules.zeroOrMoreWithSeparator(s,me.rules.sequence(e,me.rules.tokenOfType("gt"),e)),Lx.elements))}var Uw=me.rules.then(me.rules.tokenOfType("identifier"),eI),SY=me.rules.tokenOfType("integer"),sf=me.rules.then(me.rules.tokenOfType("string"),eI),TY={n:`
`,r:"\r",t:"	"};function eI(n){return n.replace(/\\(.)/g,function(e,t){return TY[t]||t})}var CY=me.rules.sequence(me.rules.tokenOfType("open-square-bracket"),me.rules.sequence.cut(),me.rules.sequence.capture(Uw),me.rules.tokenOfType("equals"),me.rules.sequence.capture(sf),me.rules.tokenOfType("close-square-bracket")).map(function(n,e){return{name:n,value:e,append:!1}}),kY=me.rules.sequence(me.rules.tokenOfType("dot"),me.rules.sequence.cut(),me.rules.sequence.capture(Uw)).map(function(n){return{name:"class",value:n,append:!0}}),UY=me.rules.firstOf("attribute or class",CY,kY);function Ek(n,e){var t=wY(e),i=me.Parser(),r=i.parseTokens(n,t);return r.isSuccess()?GD.success(r.value()):new GD.Result(null,[GD.warning(NY(e,r))])}function NY(n,e){return"Did not understand this style mapping, so ignored it: "+n+`
`+e.errors().map(jY).join(`
`)}function jY(n){return"Error was at character number "+n.characterNumber()+": Expected "+n.expected+" but got "+n.actual}var RY=DY(),Nw={};Nw.readOptions=MY;var tI=mn,FY=Nw._defaultStyleMap=["p.Heading1 => h1:fresh","p.Heading2 => h2:fresh","p.Heading3 => h3:fresh","p.Heading4 => h4:fresh","p.Heading5 => h5:fresh","p.Heading6 => h6:fresh","p[style-name='Heading 1'] => h1:fresh","p[style-name='Heading 2'] => h2:fresh","p[style-name='Heading 3'] => h3:fresh","p[style-name='Heading 4'] => h4:fresh","p[style-name='Heading 5'] => h5:fresh","p[style-name='Heading 6'] => h6:fresh","p[style-name='heading 1'] => h1:fresh","p[style-name='heading 2'] => h2:fresh","p[style-name='heading 3'] => h3:fresh","p[style-name='heading 4'] => h4:fresh","p[style-name='heading 5'] => h5:fresh","p[style-name='heading 6'] => h6:fresh","p.Heading => h1:fresh","p[style-name='Heading'] => h1:fresh","r[style-name='Strong'] => strong","p[style-name='footnote text'] => p:fresh","r[style-name='footnote reference'] =>","p[style-name='endnote text'] => p:fresh","r[style-name='endnote reference'] =>","p[style-name='annotation text'] => p:fresh","r[style-name='annotation reference'] =>","p[style-name='Footnote'] => p:fresh","r[style-name='Footnote anchor'] =>","p[style-name='Endnote'] => p:fresh","r[style-name='Endnote anchor'] =>","p:unordered-list(1) => ul > li:fresh","p:unordered-list(2) => ul|ol > li > ul > li:fresh","p:unordered-list(3) => ul|ol > li > ul|ol > li > ul > li:fresh","p:unordered-list(4) => ul|ol > li > ul|ol > li > ul|ol > li > ul > li:fresh","p:unordered-list(5) => ul|ol > li > ul|ol > li > ul|ol > li > ul|ol > li > ul > li:fresh","p:ordered-list(1) => ol > li:fresh","p:ordered-list(2) => ul|ol > li > ol > li:fresh","p:ordered-list(3) => ul|ol > li > ul|ol > li > ol > li:fresh","p:ordered-list(4) => ul|ol > li > ul|ol > li > ul|ol > li > ol > li:fresh","p:ordered-list(5) => ul|ol > li > ul|ol > li > ul|ol > li > ul|ol > li > ol > li:fresh","r[style-name='Hyperlink'] =>","p[style-name='Normal'] => p:fresh","p.Body => p:fresh","p[style-name='Body'] => p:fresh"],OY=Nw._standardOptions={externalFileAccess:!1,transformDocument:BY,includeDefaultStyleMap:!0,includeEmbeddedStyleMap:!0};function MY(n){return n=n||{},tI.extend({},OY,n,{customStyleMap:i4(n.styleMap),readStyleMap:function(){var e=this.customStyleMap;return this.includeEmbeddedStyleMap&&(e=e.concat(i4(this.embeddedStyleMap))),this.includeDefaultStyleMap&&(e=e.concat(FY)),e}})}function i4(n){return n?tI.isString(n)?n.split(`
`).map(function(e){return e.trim()}).filter(function(e){return e!==""&&e.charAt(0)!=="#"}):n:[]}function BY(n){return n}var nI={},r4=Gn,LY=B0;nI.openZip=IY;function IY(n){return n.arrayBuffer?r4.resolve(LY.openArrayBuffer(n.arrayBuffer)):r4.reject(new Error("Could not find file in options"))}var iI={},PY=Sw(),zY=Ew();iI.element=WY;function WY(n){return function(e){return zY.elementWithTag(PY.element(n),[e])}}var qY=mn,rI=GC,Sk=vk,$Y=xk.DocumentConverter,HY=IL.convertElementToRawText,VY=Tw.readStyle,GY=Nw.readOptions,jw=nI,XY=ns.Result;sa.convertToHtml=YY;sa.convertToMarkdown=KY;sa.convert=Tk;sa.extractRawText=eK;sa.images=wk;sa.transforms=nu;sa.underline=iI;sa.embedStyleMap=tK;sa.readEmbeddedStyleMap=QY;function YY(n,e){return Tk(n,e)}function KY(n,e){var t=Object.create(e||{});return t.outputFormat="markdown",Tk(n,t)}function Tk(n,e){return e=GY(e),jw.openZip(n).tap(function(t){return Sk.readStyleMap(t).then(function(i){e.embeddedStyleMap=i})}).then(function(t){return rI.read(t,n,e).then(function(i){return i.map(e.transformDocument)}).then(function(i){return JY(i,e)})})}function QY(n){return jw.openZip(n).then(Sk.readStyleMap)}function JY(n,e){var t=ZY(e.readStyleMap()),i=qY.extend({},e,{styleMap:t.value}),r=new $Y(i);return n.flatMapThen(function(s){return t.flatMapThen(function(a){return r.convertToHtml(s)})})}function ZY(n){return XY.combine((n||[]).map(VY)).map(function(e){return e.filter(function(t){return!!t})})}function eK(n){return jw.openZip(n).then(rI.read).then(function(e){return e.map(HY)})}function tK(n,e){return jw.openZip(n).tap(function(t){return Sk.writeStyleMap(t,e)}).then(function(t){return t.toArrayBuffer()}).then(function(t){return{toArrayBuffer:function(){return t},toBuffer:function(){return Buffer.from(t)}}})}sa.styleMapping=function(){throw new Error(`Use a raw string instead of mammoth.styleMapping e.g. "p[style-name='Title'] => h1" instead of mammoth.styleMapping("p[style-name='Title'] => h1")`)};Fa.workerSrc=new URL("/focus-flow-desktop/assets/pdf.worker-CSHkrWs3.mjs",import.meta.url).toString();class nK{constructor(){this.supportedTypes={pdf:["application/pdf"],docx:["application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword"],txt:["text/plain"],image:["image/jpeg","image/png","image/gif","image/webp","image/jpg"]},this.maxFileSizeMB=25,this.maxChunkSize=8e3}async processFile(e,t={}){const{onProgress:i=()=>{}}=t;this.validateFile(e);const r=this.detectFileType(e);i({stage:"extracting",progress:10,message:"Extracting text..."});let s;switch(r){case"pdf":s=await this.extractFromPDF(e,i);break;case"docx":s=await this.extractFromDOCX(e,i);break;case"txt":s=await this.extractFromTXT(e,i);break;case"image":s=await this.extractFromImage(e,i);break;default:throw new Error(`Unsupported file type: ${e.type}`)}return{text:s.text,metadata:{...s.metadata,fileName:e.name,fileType:r,fileSize:e.size}}}async extractFromPDF(e,t){try{const i=await e.arrayBuffer(),r=await HF({data:i}).promise,s=r.numPages,a=[];for(let o=1;o<=s;o++){const d=(await(await r.getPage(o)).getTextContent()).items.map(f=>f.str).join(" ").replace(/\s+/g," ").trim();a.push({pageNumber:o,text:d});const h=10+o/s*40;t({stage:"extracting",progress:h,message:`Reading page ${o}/${s}...`})}return{text:a.map(o=>o.text).join(`

`),chunks:a,metadata:{pageCount:s,title:e.name.replace(".pdf","")}}}catch(i){throw console.error("PDF extraction error:",i),new Error(`Failed to extract PDF: ${i.message}`)}}async extractFromDOCX(e,t){try{const i=await e.arrayBuffer();t({stage:"extracting",progress:20,message:"Parsing document..."});const r=await sa.extractRawText({arrayBuffer:i});return t({stage:"extracting",progress:40,message:"Analyzing structure..."}),{text:r.value,metadata:{title:e.name.replace(/\.docx?$/,""),wordCount:r.value.split(/\s+/).length}}}catch(i){throw console.error("DOCX extraction error:",i),new Error(`Failed to extract DOCX: ${i.message}`)}}async extractFromTXT(e,t){try{t({stage:"extracting",progress:30,message:"Reading file..."});const i=await e.text();return{text:i,metadata:{title:e.name.replace(".txt",""),lineCount:i.split(`
`).length,wordCount:i.split(/\s+/).length}}}catch(i){throw console.error("TXT extraction error:",i),new Error(`Failed to read TXT: ${i.message}`)}}async extractFromImage(e,t){try{t({stage:"extracting",progress:20,message:"Processing image..."});const i=await this.fileToBase64(e);return t({stage:"extracting",progress:35,message:"Running OCR..."}),{text:(await $d.extractText(i)).text||"",metadata:{title:e.name.replace(/\.[^.]+$/,""),isImage:!0}}}catch(i){throw console.error("Image extraction error:",i),new Error(`Failed to extract from image: ${i.message}`)}}fileToBase64(e){return new Promise((t,i)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=i,r.readAsDataURL(e)})}detectFileType(e){const t=e.type.toLowerCase();for(const[r,s]of Object.entries(this.supportedTypes))if(s.some(a=>t.includes(a)||t===a))return r;const i=e.name.split(".").pop().toLowerCase();return i==="pdf"?"pdf":i==="docx"||i==="doc"?"docx":i==="txt"?"txt":["jpg","jpeg","png","gif","webp"].includes(i)?"image":null}validateFile(e){if(!e)throw new Error("No file provided");const t=e.size/(1024*1024);if(t>this.maxFileSizeMB)throw new Error(`File too large: ${t.toFixed(1)}MB (max ${this.maxFileSizeMB}MB)`);if(!this.detectFileType(e))throw new Error(`Unsupported file type: ${e.type||e.name}`)}splitIntoChunks(e,t=this.maxChunkSize){const i=[],r=e.split(/\n\n+/);let s="";for(const a of r)(s+a).length>t&&s?(i.push(s.trim()),s=a):s+=(s?`

`:"")+a;return s.trim()&&i.push(s.trim()),i}}const iK=new nK;class rK{constructor(){this.maxContentLength=8e3}async generateQuiz(e,t={}){const{title:i,subject:r,multipleChoice:s=10,trueFalse:a=5,shortAnswer:o=3}=t,c=Qe.useDeepResearch,l=Qe.useUltraThink;Qe.useDeepResearch=!1,Qe.useUltraThink=!0;try{const d=this._buildQuizPrompt(e,{multipleChoice:s,trueFalse:a,shortAnswer:o}),h=await Qe.sendMessage(d);return this._parseQuizResponse(h,{title:i,subject:r})}catch(d){throw console.error("Quiz generation error:",d),new Error(`Failed to generate quiz: ${d.message}`)}finally{Qe.useDeepResearch=c,Qe.useUltraThink=l}}async generateAndSaveQuiz(e,t={}){try{const i=await this.generateQuiz(e,t),r=await xs.createQuiz({title:i.title,description:i.description||"",subject:i.subject,questionCount:i.questions.length,sourceFileId:t.sourceFileId||null});return await xs.createBulkQuestions(r.id,i.questions),await xs.getQuizById(r.id)}catch(i){throw console.error("Error saving quiz:",i),i}}async generateFlashcards(e,t={}){const{title:i,subject:r,cardCount:s=30}=t,a=Qe.useDeepResearch,o=Qe.useUltraThink;Qe.useDeepResearch=!1,Qe.useUltraThink=!0;try{const c=this._buildFlashcardsPrompt(e,{cardCount:s}),l=await Qe.sendMessage(c);return this._parseFlashcardsResponse(l,{title:i,subject:r})}catch(c){throw console.error("Flashcard generation error:",c),new Error(`Failed to generate flashcards: ${c.message}`)}finally{Qe.useDeepResearch=a,Qe.useUltraThink=o}}async generateAndSaveFlashcards(e,t={}){try{const i=await this.generateFlashcards(e,t),r=await bi.createDeck({title:i.title,description:i.description||"",subject:i.subject}),s=i.flashcards.map(a=>({deckId:r.id,front:a.front,back:a.back,hint:a.hint||null,difficulty:a.difficulty||"medium"}));for(const a of s)await bi.createCard(a);return{deck:r,cardCount:s.length}}catch(i){throw console.error("Error saving flashcards:",i),i}}async generateNotes(e,t={}){const{title:i,subject:r}=t,s=Qe.useDeepResearch,a=Qe.useUltraThink;Qe.useDeepResearch=!0,Qe.useUltraThink=!1;try{const o=this._buildNotesPrompt(e),c=await Qe.sendMessage(o);return this._parseNotesResponse(c,{title:i,subject:r})}catch(o){throw console.error("Notes generation error:",o),new Error(`Failed to generate notes: ${o.message}`)}finally{Qe.useDeepResearch=s,Qe.useUltraThink=a}}async generateAndSaveNotes(e,t={}){var i;try{const r=await this.generateNotes(e,t);return await no.createNote({title:r.title,content:r.content,subject:r.subject,tags:((i=r.keyTerms)==null?void 0:i.map(a=>a.term))||[]})}catch(r){throw console.error("Error saving notes:",r),r}}_buildQuizPrompt(e,t){return`You must respond with ONLY a valid JSON object. No explanations, no markdown, no code blocks.

CONTENT:
"""
${e.substring(0,this.maxContentLength)}
"""

Generate EXACTLY ${t.multipleChoice} multiple choice, ${t.trueFalse} true/false, and ${t.shortAnswer} short answer questions.

Return this JSON structure (your response must START with { and END with }):
{"title":"Quiz title","subject":"Subject","description":"Brief description","questions":[{"type":"multiple_choice","question":"Question text","options":["A","B","C","D"],"correctAnswer":"0","explanation":"Why correct","difficulty":"medium"},{"type":"true_false","question":"Statement","correctAnswer":"true","explanation":"Explanation","difficulty":"easy"},{"type":"short_answer","question":"Question","correctAnswer":"Expected answer","explanation":"Good answer criteria","difficulty":"hard"}]}

Rules:
- correctAnswer for multiple_choice: "0", "1", "2", or "3" (index)
- correctAnswer for true_false: "true" or "false"
- difficulty: "easy", "medium", or "hard"

IMPORTANT: Response must be valid JSON starting with { and ending with }. No other text.`}_buildFlashcardsPrompt(e,t){return`You must respond with ONLY a valid JSON object. No explanations, no markdown, no code blocks.

CONTENT:
"""
${e.substring(0,this.maxContentLength)}
"""

Generate ${t.cardCount} flashcards.

Return this JSON structure (your response must START with { and END with }):
{"title":"Deck title","subject":"Subject","description":"Brief description","flashcards":[{"front":"Question or term","back":"Answer or definition","hint":"Memory aid","difficulty":"easy"},{"front":"Question 2","back":"Answer 2","hint":"Hint 2","difficulty":"medium"}]}

Guidelines:
- Front: Clear question or term
- Back: Complete answer (2-4 sentences)
- Hints for harder concepts
- difficulty: "easy", "medium", or "hard"
- Mix: 30% easy, 50% medium, 20% hard

IMPORTANT: Response must be valid JSON starting with { and ending with }. No other text.`}_buildNotesPrompt(e){return`You must respond with ONLY a valid JSON object. No explanations, no markdown, no code blocks.

SOURCE CONTENT:
"""
${e.substring(0,this.maxContentLength)}
"""

Return this exact JSON structure:
{"title":"Notes title","subject":"Subject area","summary":"Brief overview","content":"Full notes text here with sections separated by double newlines","keyTerms":[{"term":"Term1","definition":"Definition1"}],"keyPoints":["Point 1","Point 2"]}

Instructions for content field:
- Write 20-40 comprehensive paragraphs
- Use double newlines between sections
- Use ALL CAPS for section headers
- Clear educational writing

IMPORTANT: Your response must START with { and END with }. Nothing else.`}_parseQuizResponse(e,t={}){try{const i=this._extractJSON(e);return{title:i.title||t.title||"Generated Quiz",subject:i.subject||t.subject||"General",description:i.description||"",questions:(i.questions||[]).map((r,s)=>({type:this._normalizeQuestionType(r.type),question:r.question||"",options:r.options||[],correctAnswer:String(r.correctAnswer||""),explanation:r.explanation||"",difficulty:r.difficulty||"medium"}))}}catch(i){throw console.error("Quiz parse error:",i),new Error(`Failed to parse quiz: ${i.message}`)}}_parseFlashcardsResponse(e,t={}){try{const i=this._extractJSON(e);return{title:i.title||t.title||"Generated Flashcards",subject:i.subject||t.subject||"General",description:i.description||"",flashcards:(i.flashcards||[]).map(r=>({front:r.front||"",back:r.back||"",hint:r.hint||null,difficulty:r.difficulty||"medium"}))}}catch(i){throw console.error("Flashcard parse error:",i),new Error(`Failed to parse flashcards: ${i.message}`)}}_parseNotesResponse(e,t={}){try{const i=this._extractJSON(e);return{title:i.title||t.title||"Generated Notes",subject:i.subject||t.subject||"General",summary:i.summary||"",content:i.content||"",keyTerms:i.keyTerms||[],keyPoints:i.keyPoints||[]}}catch(i){throw console.error("Notes parse error:",i),new Error(`Failed to parse notes: ${i.message}`)}}_extractJSON(e){if(!e||typeof e!="string")throw new Error("Invalid response: not a string");let t=e.replace(/```json\s*/g,"").replace(/```\s*/g,"");const i=t.indexOf("{"),r=t.lastIndexOf("}");i!==-1&&r!==-1&&r>i&&(t=t.substring(i,r+1)),t=this._sanitizeJSON(t);try{const a=JSON.parse(t);if(typeof a=="object"&&a!==null)return a}catch(a){console.error("JSON parse error:",a),console.error("Attempted to parse:",t.substring(0,500))}const s=[/\{[\s\S]*\}/,/(\{[^}]+\})/];for(const a of s){const o=e.match(a);if(o)try{const c=this._sanitizeJSON(o[0]),l=JSON.parse(c);if(typeof l=="object"&&l!==null)return l}catch{continue}}throw new Error("No valid JSON found in response")}_sanitizeJSON(e){let t="",i=!1;for(let r=0;r<e.length;r++){const s=e[r],a=r>0?e[r-1]:"";if(s==='"'&&a!=="\\"){i=!i,t+=s;continue}if(!i){t+=s;continue}if(s==="\\"){t+=s,r+1<e.length&&(r++,t+=e[r]);continue}switch(s){case`
`:t+="\\n";break;case"\r":t+="\\r";break;case"	":t+="\\t";break;case"\f":t+="\\f";break;case"\b":t+="\\b";break;default:s.charCodeAt(0)<32||s.charCodeAt(0)===127?t+=" ":t+=s}}return t}_normalizeQuestionType(e){const t=(e||"").toLowerCase().replace(/[_\s-]/g,"");return["multiplechoice","mc"].includes(t)?"multiple_choice":["truefalse","tf"].includes(t)?"true_false":["shortanswer","short"].includes(t)?"short_answer":"multiple_choice"}}const sK=new rK,aK=({onComplete:n,onBack:e,onStartQuiz:t})=>{const{loadQuizzes:i,getQuizById:r}=Sg(),[s,a]=ee.useState("upload"),[o,c]=ee.useState(null),[l,d]=ee.useState(""),[h,f]=ee.useState({}),[g,v]=ee.useState(!1),[y,x]=ee.useState({title:"",subject:"",multipleChoice:10,trueFalse:5,shortAnswer:3}),[m,b]=ee.useState({message:"",percent:0}),[w,_]=ee.useState(null),D=R=>{R.preventDefault(),R.stopPropagation(),R.type==="dragenter"||R.type==="dragover"?v(!0):R.type==="dragleave"&&v(!1)},A=async R=>{R.preventDefault(),R.stopPropagation(),v(!1),R.dataTransfer.files&&R.dataTransfer.files[0]&&await F(R.dataTransfer.files[0])},E=async R=>{R.target.files&&R.target.files[0]&&await F(R.target.files[0])},F=async R=>{try{c(R),b({message:"Extracting text from file...",percent:20});const N=await iK.processFile(R,{onProgress:L=>b({message:L.message||"Processing...",percent:L.progress||30})});d(N.text),f(N.metadata);const B=R.name.replace(/\.[^.]+$/,"");x(L=>({...L,title:B})),a("preview")}catch(N){console.error("File processing error:",N),Ne.error(N.message||"Failed to process file"),c(null)}},I=async()=>{a("generating"),b({message:"Preparing content...",percent:10});try{b({message:"Generating quiz questions with AI...",percent:30});const R=await sK.generateAndSaveQuiz(l,{title:y.title||"Generated Quiz",subject:y.subject||"General",multipleChoice:y.multipleChoice,trueFalse:y.trueFalse,shortAnswer:y.shortAnswer});b({message:"Quiz created successfully!",percent:100}),_(R),await i(),a("complete"),Ne.success("Quiz created successfully!")}catch(R){console.error("Quiz generation error:",R),Ne.error(R.message||"Failed to generate quiz"),a("options")}},z=async()=>{if(w&&t){const R=await r(w.id);t(R)}},H=()=>p.jsxs("div",{className:"animate-fade-in",children:[p.jsxs("div",{onDragEnter:D,onDragLeave:D,onDragOver:D,onDrop:A,className:`relative border-2 border-dashed rounded-2xl p-12 text-center transition-all ${g?"border-success bg-success/10":"border-border hover:border-success/50 bg-surface-elevated"}`,children:[p.jsx("input",{type:"file",accept:".pdf,.docx,.doc,.txt,.jpg,.jpeg,.png,.gif,.webp",onChange:E,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),p.jsxs("div",{className:"space-y-6",children:[p.jsx("div",{className:"w-20 h-20 mx-auto rounded-2xl bg-success/15 flex items-center justify-center",children:p.jsx("svg",{className:"w-10 h-10 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-2",children:"Drop your file here or click to browse"}),p.jsx("p",{className:"text-text-muted",children:"Upload study materials to generate a custom quiz"})]}),p.jsx("div",{className:"flex items-center justify-center gap-6 pt-2",children:[{icon:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z",label:"PDF"},{icon:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",label:"DOCX"},{icon:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",label:"TXT"},{icon:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z",label:"Images"}].map(R=>p.jsxs("div",{className:"flex items-center gap-2 text-text-muted",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:R.icon})}),p.jsx("span",{className:"text-sm",children:R.label})]},R.label))})]})]}),p.jsx("div",{className:"mt-6 p-4 bg-surface-elevated rounded-xl border border-border",children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("div",{className:"w-8 h-8 rounded-lg bg-success/15 flex items-center justify-center flex-shrink-0",children:p.jsx("svg",{className:"w-4 h-4 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),p.jsxs("div",{children:[p.jsx("h4",{className:"font-medium text-text-primary",children:"Tips for best results"}),p.jsxs("ul",{className:"mt-2 text-sm text-text-muted space-y-1",children:[p.jsx("li",{children:"Upload lecture notes, textbook chapters, or study guides"}),p.jsx("li",{children:"Clear, well-organized content generates better questions"}),p.jsx("li",{children:"Max file size: 25 MB"})]})]})]})})]}),k=()=>p.jsxs("div",{className:"animate-fade-in space-y-6",children:[p.jsx("div",{className:"bg-surface-elevated rounded-xl p-5 border border-border",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-14 h-14 rounded-xl bg-success/15 flex items-center justify-center",children:p.jsx("svg",{className:"w-7 h-7 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:o==null?void 0:o.name}),p.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-text-muted",children:[h.pageCount&&p.jsxs("span",{children:[h.pageCount," pages"]}),h.wordCount&&p.jsxs("span",{children:[h.wordCount," words"]}),p.jsxs("span",{children:[((o==null?void 0:o.size)/1024).toFixed(0)," KB"]})]})]}),p.jsx("div",{className:"w-10 h-10 rounded-full bg-success/15 flex items-center justify-center",children:p.jsx("svg",{className:"w-5 h-5 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("label",{className:"text-sm font-semibold text-text-primary",children:"Extracted Content"}),p.jsxs("span",{className:"text-xs text-text-muted",children:[l.length.toLocaleString()," characters"]})]}),p.jsx("textarea",{value:l,onChange:R=>d(R.target.value),className:"w-full h-72 p-4 bg-surface-base border border-border rounded-xl text-text-primary font-mono text-sm resize-none focus:outline-none focus:border-success/50 focus:ring-1 focus:ring-success/20 transition-all",placeholder:"Extracted text will appear here..."}),p.jsx("p",{className:"text-xs text-text-muted",children:"You can edit the text before generating your quiz"})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsxs("button",{onClick:()=>a("options"),disabled:!l.trim(),className:"flex-1 py-3 px-6 bg-success hover:bg-success/90 text-white font-medium rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:["Continue",p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),p.jsx("button",{onClick:()=>{c(null),d(""),a("upload")},className:"px-6 py-3 bg-surface-elevated border border-border text-text-primary font-medium rounded-xl hover:bg-surface-overlay transition-all",children:"Cancel"})]})]}),W=()=>p.jsxs("div",{className:"animate-fade-in space-y-6",children:[p.jsxs("div",{className:"space-y-4",children:[p.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Quiz Details"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Quiz Title"}),p.jsx("input",{type:"text",value:y.title,onChange:R=>x(N=>({...N,title:R.target.value})),placeholder:"Enter quiz title...",className:"w-full px-4 py-3 bg-surface-base border border-border rounded-xl text-text-primary focus:outline-none focus:border-success/50 focus:ring-1 focus:ring-success/20 transition-all"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Subject"}),p.jsx("input",{type:"text",value:y.subject,onChange:R=>x(N=>({...N,subject:R.target.value})),placeholder:"e.g., Chemistry, History...",className:"w-full px-4 py-3 bg-surface-base border border-border rounded-xl text-text-primary focus:outline-none focus:border-success/50 focus:ring-1 focus:ring-success/20 transition-all"})]})]})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Question Types"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"p-5 bg-surface-elevated rounded-xl border border-border hover:border-success/30 transition-colors",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[p.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/15 flex items-center justify-center",children:p.jsx("svg",{className:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),p.jsxs("div",{children:[p.jsx("h4",{className:"font-medium text-text-primary",children:"Multiple Choice"}),p.jsx("p",{className:"text-xs text-text-muted",children:"4 options each"})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("input",{type:"number",min:"0",max:"50",value:y.multipleChoice,onChange:R=>x(N=>({...N,multipleChoice:parseInt(R.target.value)||0})),className:"w-20 px-3 py-2 bg-surface-base border border-border rounded-lg text-text-primary text-center focus:outline-none focus:border-success/50"}),p.jsx("span",{className:"text-sm text-text-muted",children:"questions"})]})]}),p.jsxs("div",{className:"p-5 bg-surface-elevated rounded-xl border border-border hover:border-success/30 transition-colors",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[p.jsx("div",{className:"w-10 h-10 rounded-lg bg-accent-cool/15 flex items-center justify-center",children:p.jsx("svg",{className:"w-5 h-5 text-accent-cool",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),p.jsxs("div",{children:[p.jsx("h4",{className:"font-medium text-text-primary",children:"True / False"}),p.jsx("p",{className:"text-xs text-text-muted",children:"Statement based"})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("input",{type:"number",min:"0",max:"50",value:y.trueFalse,onChange:R=>x(N=>({...N,trueFalse:parseInt(R.target.value)||0})),className:"w-20 px-3 py-2 bg-surface-base border border-border rounded-lg text-text-primary text-center focus:outline-none focus:border-success/50"}),p.jsx("span",{className:"text-sm text-text-muted",children:"questions"})]})]}),p.jsxs("div",{className:"p-5 bg-surface-elevated rounded-xl border border-border hover:border-success/30 transition-colors",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[p.jsx("div",{className:"w-10 h-10 rounded-lg bg-warning/15 flex items-center justify-center",children:p.jsx("svg",{className:"w-5 h-5 text-warning",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),p.jsxs("div",{children:[p.jsx("h4",{className:"font-medium text-text-primary",children:"Short Answer"}),p.jsx("p",{className:"text-xs text-text-muted",children:"Written response"})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("input",{type:"number",min:"0",max:"50",value:y.shortAnswer,onChange:R=>x(N=>({...N,shortAnswer:parseInt(R.target.value)||0})),className:"w-20 px-3 py-2 bg-surface-base border border-border rounded-lg text-text-primary text-center focus:outline-none focus:border-success/50"}),p.jsx("span",{className:"text-sm text-text-muted",children:"questions"})]})]})]})]}),p.jsx("div",{className:"p-4 bg-success/10 border border-success/30 rounded-xl",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("svg",{className:"w-5 h-5 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),p.jsx("span",{className:"font-medium text-success",children:"Total Questions"})]}),p.jsx("span",{className:"text-2xl font-bold text-success",children:y.multipleChoice+y.trueFalse+y.shortAnswer})]})}),p.jsx("div",{className:"p-4 bg-primary/10 border border-primary/30 rounded-xl",children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("svg",{className:"w-5 h-5 text-primary mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-medium text-primary",children:"AI-Powered Generation"}),p.jsx("p",{className:"text-sm text-text-muted mt-1",children:"Using UltraThink mode for high-quality, contextually relevant questions. Generation takes 15-30 seconds."})]})]})}),p.jsxs("div",{className:"flex gap-3",children:[p.jsxs("button",{onClick:I,disabled:y.multipleChoice+y.trueFalse+y.shortAnswer===0,className:"flex-1 py-3 px-6 bg-success hover:bg-success/90 text-white font-medium rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Generate Quiz"]}),p.jsx("button",{onClick:()=>a("preview"),className:"px-6 py-3 bg-surface-elevated border border-border text-text-primary font-medium rounded-xl hover:bg-surface-overlay transition-all",children:"Back"})]})]}),S=()=>p.jsxs("div",{className:"animate-fade-in text-center py-12",children:[p.jsxs("div",{className:"w-24 h-24 mx-auto mb-8 relative",children:[p.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-success/20"}),p.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-transparent border-t-success animate-spin"}),p.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:p.jsx("svg",{className:"w-10 h-10 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})})]}),p.jsx("h3",{className:"text-2xl font-semibold text-text-primary mb-3",children:"Creating Your Quiz"}),p.jsx("p",{className:"text-text-muted mb-8 max-w-md mx-auto",children:m.message||"Analyzing content and generating questions..."}),p.jsxs("div",{className:"max-w-md mx-auto",children:[p.jsx("div",{className:"h-2 bg-surface-elevated rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-gradient-to-r from-success to-accent-cool transition-all duration-500 ease-out",style:{width:`${m.percent}%`}})}),p.jsx("p",{className:"text-sm text-text-muted mt-3",children:"This may take 15-30 seconds"})]})]}),G=()=>{var R,N,B;return p.jsxs("div",{className:"animate-fade-in space-y-8",children:[p.jsxs("div",{className:"text-center py-6",children:[p.jsx("div",{className:"w-20 h-20 mx-auto rounded-full bg-success/20 flex items-center justify-center mb-6",children:p.jsx("svg",{className:"w-10 h-10 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),p.jsx("h3",{className:"text-2xl font-semibold text-text-primary mb-2",children:"Quiz Created!"}),p.jsx("p",{className:"text-text-muted",children:"Your quiz is ready to take"})]}),w&&p.jsxs("div",{className:"bg-surface-elevated rounded-2xl border border-border overflow-hidden",children:[p.jsx("div",{className:"p-5 bg-gradient-to-r from-success/10 to-transparent border-b border-border",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 rounded-xl bg-success/15 flex items-center justify-center",children:p.jsx("svg",{className:"w-6 h-6 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-lg font-semibold text-text-primary",children:w.title}),p.jsx("p",{className:"text-sm text-text-muted",children:w.subject})]})]})}),p.jsx("div",{className:"p-5",children:p.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[p.jsxs("div",{className:"text-center p-4 bg-surface-base rounded-xl",children:[p.jsx("div",{className:"text-2xl font-bold text-primary",children:((R=w.questions)==null?void 0:R.filter(L=>L.questionType==="multiple_choice").length)||0}),p.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Multiple Choice"})]}),p.jsxs("div",{className:"text-center p-4 bg-surface-base rounded-xl",children:[p.jsx("div",{className:"text-2xl font-bold text-accent-cool",children:((N=w.questions)==null?void 0:N.filter(L=>L.questionType==="true_false").length)||0}),p.jsx("div",{className:"text-xs text-text-muted mt-1",children:"True/False"})]}),p.jsxs("div",{className:"text-center p-4 bg-surface-base rounded-xl",children:[p.jsx("div",{className:"text-2xl font-bold text-warning",children:((B=w.questions)==null?void 0:B.filter(L=>L.questionType==="short_answer").length)||0}),p.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Short Answer"})]})]})})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsxs("button",{onClick:z,className:"flex-1 py-3 px-6 bg-success hover:bg-success/90 text-white font-medium rounded-xl transition-all flex items-center justify-center gap-2",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})}),"Take Quiz Now"]}),p.jsxs("button",{onClick:()=>{c(null),d(""),_(null),a("upload"),x({title:"",subject:"",multipleChoice:10,trueFalse:5,shortAnswer:3})},className:"px-6 py-3 bg-surface-elevated border border-border text-text-primary font-medium rounded-xl hover:bg-surface-overlay transition-all flex items-center gap-2",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create Another"]})]}),p.jsx("button",{onClick:()=>n&&n(),className:"w-full py-3 text-text-muted hover:text-text-primary transition-colors text-sm font-medium",children:"Return to Study Hub"})]})},j=[{key:"upload",label:"Upload"},{key:"preview",label:"Preview"},{key:"options",label:"Configure"},{key:"generating",label:"Generate"},{key:"complete",label:"Done"}],M=j.findIndex(R=>R.key===s);return p.jsx("div",{className:"min-h-screen bg-surface-base p-6 lg:p-8",children:p.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("button",{onClick:e,className:"w-10 h-10 rounded-xl bg-surface-elevated border border-border flex items-center justify-center hover:bg-surface-overlay transition-colors group",children:p.jsx("svg",{className:"w-5 h-5 text-text-muted group-hover:text-text-primary group-hover:-translate-x-0.5 transition-all",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-semibold text-text-primary",children:"Create Quiz"}),p.jsx("p",{className:"text-text-muted",children:"Upload study materials to generate a custom quiz"})]})]}),p.jsx("div",{className:"flex items-center gap-2",children:j.map((R,N)=>{const B=N===M,L=N<M;return p.jsx("div",{className:"flex items-center flex-1",children:p.jsxs("div",{className:"flex-1 flex items-center",children:[p.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold transition-all ${B?"bg-success text-white":L?"bg-success/20 text-success":"bg-surface-elevated text-text-muted border border-border"}`,children:L?p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):N+1}),N<j.length-1&&p.jsx("div",{className:`flex-1 h-0.5 mx-2 rounded-full transition-colors ${L?"bg-success":"bg-border"}`})]})},R.key)})}),p.jsxs("div",{className:"bg-surface-elevated rounded-2xl border border-border p-6 lg:p-8",children:[s==="upload"&&H(),s==="preview"&&k(),s==="options"&&W(),s==="generating"&&S(),s==="complete"&&G()]})]})})},oK=()=>{const{notes:n,notesLoading:e,decks:t,flashcardsLoading:i,quizzes:r,quizzesLoading:s,getDueCards:a,getCardsByDeck:o,getNotesStats:c,getFlashcardsStats:l,refreshNotes:d,deleteNote:h,deleteDeck:f,loadFlashcards:g,getQuizById:v,loadQuizzes:y}=Sg(),[x,m]=ee.useState("notes"),[b,w]=ee.useState(null),[_,D]=ee.useState(null),[A,E]=ee.useState(null),[F,I]=ee.useState([]),[z,H]=ee.useState({notes:0,decks:0,due:0}),[k,W]=ee.useState(!1);ee.useEffect(()=>{(async()=>{const B=await c(),L=await l(),P=await a();H({notes:B.totalNotes,decks:L.totalDecks,due:P.length}),I(P)})()},[n,t]);const S=async N=>{const B=t.find(P=>P.id===N);if(!B)return;const L=await o(N);w({deckId:N,cards:L,title:B.title})},G=()=>{F.length>0&&w({cards:F,title:"Daily Review"})},j=async N=>{await Qd("Delete Note","Are you sure you want to delete this note?")&&(await h(N),E(null),await d())},M=async N=>{await Qd("Delete Deck",`Delete "${N.title}" and all its cards?`)&&(await f(N.id),await g())},R=async N=>{const B=await v(N.id);D(B)};return b?p.jsx(eq,{deckId:b.deckId,cards:b.cards,onComplete:()=>w(null),onExit:()=>w(null)}):_?p.jsx(tq,{quiz:_,onComplete:()=>{D(null),y()},onExit:()=>D(null)}):k?p.jsx(aK,{onComplete:()=>{W(!1),y()},onBack:()=>W(!1),onStartQuiz:N=>{W(!1),D(N)}}):A?p.jsx("div",{className:"min-h-screen bg-surface-base p-6 lg:p-8",children:p.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[p.jsxs("button",{onClick:()=>E(null),className:"flex items-center gap-2 text-text-muted hover:text-text-primary transition-colors group",children:[p.jsx("svg",{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),p.jsx("span",{className:"font-medium",children:"Back to Study Hub"})]}),p.jsxs("div",{className:"bg-surface-elevated rounded-2xl border border-border overflow-hidden",children:[p.jsx("div",{className:"p-6 lg:p-8 border-b border-border",children:p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{children:[p.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-accent-cool/15 text-accent-cool",children:A.subject}),p.jsx("h1",{className:"text-2xl lg:text-3xl font-semibold text-text-primary mt-3",children:A.title}),p.jsxs("p",{className:"text-sm text-text-muted mt-2",children:["Last updated ",new Date(A.updatedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),p.jsx("button",{onClick:()=>j(A.id),className:"p-3 rounded-xl text-text-muted hover:text-error hover:bg-error/10 transition-all",title:"Delete note",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})}),p.jsx("div",{className:"p-6 lg:p-8",children:p.jsx("div",{className:"prose prose-invert max-w-none",children:p.jsx("div",{className:"text-text-primary whitespace-pre-wrap leading-relaxed",children:A.content})})})]})]})}):p.jsx("div",{className:"min-h-screen bg-surface-base",children:p.jsxs("div",{className:"max-w-6xl mx-auto p-6 lg:p-8 space-y-8",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-3xl font-semibold text-text-primary",children:"Study Hub"}),p.jsx("p",{className:"text-text-muted mt-1",children:"Your notes, flashcards, and quizzes"})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("button",{onClick:()=>W(!0),className:"group relative px-5 py-3 bg-gradient-to-r from-success to-emerald-500 text-white rounded-xl font-medium transition-all hover:shadow-lg hover:shadow-success/25 hover:-translate-y-0.5",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-7 h-7 rounded-full bg-white/20 flex items-center justify-center",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),p.jsx("span",{children:"Create Quiz"}),p.jsx("svg",{className:"w-5 h-5 group-hover:translate-x-0.5 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})}),F.length>0&&p.jsx("button",{onClick:G,className:"group relative px-5 py-3 bg-gradient-to-r from-primary to-primary-hover text-text-inverse rounded-xl font-medium transition-all hover:shadow-lg hover:shadow-primary/25 hover:-translate-y-0.5",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-7 h-7 rounded-full bg-white/20 text-sm font-bold flex items-center justify-center",children:F.length}),p.jsx("span",{children:"Review Due Cards"}),p.jsx("svg",{className:"w-5 h-5 group-hover:translate-x-0.5 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsx("div",{className:"bg-surface-elevated rounded-2xl p-5 border border-border group hover:border-primary/30 transition-colors",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/15 flex items-center justify-center",children:p.jsx("svg",{className:"w-6 h-6 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),p.jsxs("div",{children:[p.jsx("div",{className:"text-3xl font-bold text-text-primary",children:z.notes}),p.jsx("div",{className:"text-sm text-text-muted",children:"Notes Created"})]})]})}),p.jsx("div",{className:"bg-surface-elevated rounded-2xl p-5 border border-border group hover:border-accent-cool/30 transition-colors",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 rounded-xl bg-accent-cool/15 flex items-center justify-center",children:p.jsx("svg",{className:"w-6 h-6 text-accent-cool",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),p.jsxs("div",{children:[p.jsx("div",{className:"text-3xl font-bold text-text-primary",children:z.decks}),p.jsx("div",{className:"text-sm text-text-muted",children:"Flashcard Decks"})]})]})}),p.jsx("div",{className:"bg-surface-elevated rounded-2xl p-5 border border-border group hover:border-warning/30 transition-colors",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 rounded-xl bg-warning/15 flex items-center justify-center",children:p.jsx("svg",{className:"w-6 h-6 text-warning",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),p.jsxs("div",{children:[p.jsx("div",{className:"text-3xl font-bold text-text-primary",children:z.due}),p.jsx("div",{className:"text-sm text-text-muted",children:"Cards Due Today"})]})]})})]}),p.jsxs("div",{className:"bg-surface-elevated rounded-xl p-1.5 border border-border inline-flex",children:[p.jsx("button",{onClick:()=>m("notes"),className:`px-6 py-2.5 rounded-lg font-medium transition-all ${x==="notes"?"bg-primary text-text-inverse shadow-sm":"text-text-muted hover:text-text-primary"}`,children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Notes"]})}),p.jsx("button",{onClick:()=>m("flashcards"),className:`px-6 py-2.5 rounded-lg font-medium transition-all ${x==="flashcards"?"bg-primary text-text-inverse shadow-sm":"text-text-muted hover:text-text-primary"}`,children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"Flashcards"]})}),p.jsx("button",{onClick:()=>m("quizzes"),className:`px-6 py-2.5 rounded-lg font-medium transition-all ${x==="quizzes"?"bg-primary text-text-inverse shadow-sm":"text-text-muted hover:text-text-primary"}`,children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),"Quizzes"]})})]}),x==="notes"&&p.jsx("div",{className:"animate-fade-in",children:e?p.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[p.jsx("div",{className:"w-10 h-10 border-2 border-primary/30 border-t-primary rounded-full animate-spin"}),p.jsx("p",{className:"text-text-muted mt-4",children:"Loading notes..."})]}):n.length===0?p.jsxs("div",{className:"bg-surface-elevated rounded-2xl border border-border p-12 text-center",children:[p.jsx("div",{className:"w-16 h-16 rounded-2xl bg-primary/10 flex items-center justify-center mx-auto mb-4",children:p.jsx("svg",{className:"w-8 h-8 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),p.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-2",children:"No notes yet"}),p.jsx("p",{className:"text-text-muted max-w-sm mx-auto",children:"Scan documents or take pictures to automatically generate study notes"})]}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map((N,B)=>p.jsxs("button",{onClick:()=>E(N),className:"group text-left bg-surface-elevated rounded-2xl p-5 border border-border hover:border-primary/30 transition-all hover:-translate-y-0.5 animate-fade-up",style:{animationDelay:`${B*50}ms`},children:[p.jsxs("div",{className:"flex items-start gap-4",children:[p.jsx("div",{className:"w-11 h-11 rounded-xl bg-primary/15 group-hover:bg-primary/25 flex items-center justify-center flex-shrink-0 transition-colors",children:p.jsx("svg",{className:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h3",{className:"font-semibold text-text-primary truncate group-hover:text-primary transition-colors",children:N.title}),p.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[p.jsx("span",{className:"text-xs font-medium text-accent-cool",children:N.subject}),p.jsx("span",{className:"w-1 h-1 rounded-full bg-border"}),p.jsx("span",{className:"text-xs text-text-muted",children:new Date(N.updatedAt).toLocaleDateString()})]})]})]}),p.jsx("div",{className:"mt-4 flex items-center justify-end",children:p.jsxs("span",{className:"text-xs text-text-muted group-hover:text-primary transition-colors flex items-center gap-1",children:["Read more",p.jsx("svg",{className:"w-4 h-4 group-hover:translate-x-0.5 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]},N.id))})}),x==="flashcards"&&p.jsx("div",{className:"animate-fade-in space-y-8",children:i?p.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[p.jsx("div",{className:"w-10 h-10 border-2 border-accent-cool/30 border-t-accent-cool rounded-full animate-spin"}),p.jsx("p",{className:"text-text-muted mt-4",children:"Loading flashcards..."})]}):t.length===0?p.jsxs("div",{className:"bg-surface-elevated rounded-2xl border border-border p-12 text-center",children:[p.jsx("div",{className:"w-16 h-16 rounded-2xl bg-accent-cool/10 flex items-center justify-center mx-auto mb-4",children:p.jsx("svg",{className:"w-8 h-8 text-accent-cool",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),p.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-2",children:"No flashcard decks yet"}),p.jsx("p",{className:"text-text-muted max-w-sm mx-auto",children:"Scan documents to automatically generate flashcards for efficient studying"})]}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((N,B)=>{var L,P;return p.jsxs("div",{className:"group bg-surface-elevated rounded-2xl border border-border hover:border-accent-cool/30 transition-all animate-fade-up overflow-hidden",style:{animationDelay:`${B*50}ms`},children:[p.jsx("div",{className:"relative h-24 bg-gradient-to-br from-accent-cool/10 to-primary/10 overflow-hidden",children:p.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:p.jsxs("div",{className:"relative w-20 h-14",children:[p.jsx("div",{className:"absolute inset-0 bg-surface-overlay rounded-lg transform rotate-6 translate-x-1"}),p.jsx("div",{className:"absolute inset-0 bg-surface-overlay rounded-lg transform -rotate-3 -translate-x-0.5"}),p.jsx("div",{className:"absolute inset-0 bg-surface-elevated rounded-lg border border-border flex items-center justify-center",children:p.jsx("span",{className:"text-lg font-bold text-accent-cool",children:((L=N.cardIds)==null?void 0:L.length)||0})})]})})}),p.jsxs("div",{className:"p-5",children:[p.jsxs("div",{className:"flex items-start justify-between mb-4",children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h3",{className:"font-semibold text-text-primary truncate",children:N.title}),p.jsxs("p",{className:"text-sm text-text-muted mt-1",children:[((P=N.cardIds)==null?void 0:P.length)||0," cards",N.dueCount>0&&p.jsxs("span",{className:"text-warning ml-2 font-medium",children:["(",N.dueCount," due)"]})]})]}),p.jsx("button",{onClick:q=>{q.stopPropagation(),M(N)},className:"p-2 rounded-lg text-text-muted hover:text-error hover:bg-error/10 transition-all opacity-0 group-hover:opacity-100",title:"Delete deck",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),p.jsxs("button",{onClick:()=>S(N.id),className:"w-full py-2.5 bg-primary hover:bg-primary-hover text-text-inverse text-sm font-medium rounded-xl transition-all flex items-center justify-center gap-2 group/btn",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})}),"Study Now",p.jsx("svg",{className:"w-4 h-4 group-hover/btn:translate-x-0.5 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]},N.id)})})}),x==="quizzes"&&p.jsx("div",{className:"animate-fade-in",children:s?p.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[p.jsx("div",{className:"w-10 h-10 border-2 border-success/30 border-t-success rounded-full animate-spin"}),p.jsx("p",{className:"text-text-muted mt-4",children:"Loading quizzes..."})]}):r.length===0?p.jsxs("div",{className:"bg-surface-elevated rounded-2xl border border-border p-12 text-center",children:[p.jsx("div",{className:"w-16 h-16 rounded-2xl bg-success/10 flex items-center justify-center mx-auto mb-4",children:p.jsx("svg",{className:"w-8 h-8 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),p.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-2",children:"No quizzes yet"}),p.jsx("p",{className:"text-text-muted max-w-sm mx-auto mb-6",children:"Create your first quiz by uploading study materials"}),p.jsxs("button",{onClick:()=>W(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-success hover:bg-success/90 text-white font-medium rounded-xl transition-all",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create Your First Quiz"]})]}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map((N,B)=>p.jsxs("button",{onClick:()=>R(N),className:"group text-left bg-surface-elevated rounded-2xl p-5 border border-border hover:border-success/30 transition-all hover:-translate-y-0.5 animate-fade-up",style:{animationDelay:`${B*50}ms`},children:[p.jsxs("div",{className:"flex items-start gap-4",children:[p.jsx("div",{className:"w-11 h-11 rounded-xl bg-success/15 group-hover:bg-success/25 flex items-center justify-center flex-shrink-0 transition-colors",children:p.jsx("svg",{className:"w-5 h-5 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h3",{className:"font-semibold text-text-primary truncate group-hover:text-success transition-colors",children:N.title}),p.jsxs("div",{className:"flex items-center gap-2 mt-1.5 flex-wrap",children:[p.jsx("span",{className:"text-xs font-medium text-success",children:N.subject}),p.jsx("span",{className:"w-1 h-1 rounded-full bg-border"}),p.jsxs("span",{className:"text-xs text-text-muted",children:[N.questionCount," questions"]}),N.bestScore&&p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"w-1 h-1 rounded-full bg-border"}),p.jsxs("span",{className:"text-xs text-text-muted",children:["Best: ",Math.round(N.bestScore),"%"]})]})]})]})]}),p.jsx("div",{className:"mt-4 flex items-center justify-end",children:p.jsxs("span",{className:"text-xs text-text-muted group-hover:text-success transition-colors flex items-center gap-1",children:["Start quiz",p.jsx("svg",{className:"w-4 h-4 group-hover:translate-x-0.5 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})})]})})]},N.id))})})]})})};function cK(){var z,H;const[n,e]=ee.useState(null),[t,i]=ee.useState(null),[r,s]=ee.useState(!1),[a,o]=ee.useState(""),[c,l]=ee.useState(""),[d,h]=ee.useState(""),[f,g]=ee.useState(!1),[v,y]=ee.useState(!1),[x,m]=ee.useState(!1),[b,w]=ee.useState(!1);ee.useEffect(()=>{_()},[]);const _=async()=>{var S;const{user:k}=await ge.getCurrentUser();e(k),await ge.refreshUserProfile();const W=ge.getUserProfile();i(W),o((W==null?void 0:W.full_name)||((S=k==null?void 0:k.email)==null?void 0:S.split("@")[0])||""),l((W==null?void 0:W.canvas_url)||""),h((W==null?void 0:W.canvas_token)||"")},D=async()=>{if(a.trim()){y(!0);try{await ge.updateUserProfile({full_name:a.trim()}),Ne.success("Name updated"),s(!1),await _()}catch{Ne.error("Failed to update name")}finally{y(!1)}}},A=async()=>{if(!c.trim()||!d.trim()){Ne.error("Both URL and token are required");return}y(!0);try{await ge.updateUserProfile({canvas_url:c.trim(),canvas_token:d.trim()}),Ne.success("Canvas settings saved"),g(!1),await _()}catch{Ne.error("Failed to save Canvas settings")}finally{y(!1)}},E=async()=>{m(!0);try{if(!await ar.initializeFromProfile())throw new Error("Failed to initialize");const W=await ar.getCurrentUser();W&&Ne.success(`Connected as ${W.name||"Canvas User"}`)}catch{Ne.error("Connection failed. Check your credentials.")}finally{m(!1)}},F=async()=>{w(!0);try{const k=await ar.syncToDatabase();if(k.success)Ne.success(k.synced>0?`Synced ${k.synced} assignments from Canvas`:"All assignments up to date");else throw new Error("Sync failed")}catch{Ne.error("Failed to sync Canvas assignments")}finally{w(!1)}},I=async()=>{await ge.signOut(),window.location.reload()};return p.jsxs("div",{className:"min-h-screen p-6 md:p-8 lg:p-10 max-w-2xl mx-auto",children:[p.jsxs("header",{className:"mb-10 animate-fade-up",children:[p.jsx("h1",{className:"text-3xl font-semibold text-text-primary tracking-tight",children:"Account"}),p.jsx("p",{className:"text-text-secondary mt-1",children:"Manage your profile and settings"})]}),p.jsxs("div",{className:"space-y-6 animate-fade-up stagger-1",children:[p.jsxs("div",{className:"bg-surface-elevated rounded-2xl p-6",children:[p.jsx("h2",{className:"text-sm font-medium text-text-muted uppercase tracking-wider mb-5",children:"Profile"}),p.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[p.jsx("div",{className:"w-16 h-16 rounded-2xl bg-accent-warm/15 flex items-center justify-center text-accent-warm text-xl font-semibold",children:(((z=t==null?void 0:t.full_name)==null?void 0:z[0])||((H=n==null?void 0:n.email)==null?void 0:H[0])||"U").toUpperCase()}),p.jsxs("div",{children:[p.jsx("p",{className:"font-medium text-text-primary text-lg",children:(t==null?void 0:t.full_name)||"No name set"}),p.jsx("p",{className:"text-sm text-text-muted",children:n==null?void 0:n.email})]})]}),r?p.jsxs("div",{className:"space-y-4",children:[p.jsx("input",{type:"text",value:a,onChange:k=>o(k.target.value),className:"input",placeholder:"Your name",autoFocus:!0}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:()=>s(!1),className:"flex-1 py-3 bg-surface-overlay text-text-secondary rounded-xl hover:bg-surface-overlay/80 transition-colors font-medium",children:"Cancel"}),p.jsx("button",{onClick:D,disabled:v,className:"flex-1 py-3 bg-primary text-text-inverse rounded-xl hover:bg-primary-hover transition-colors font-medium disabled:opacity-50",children:v?"Saving...":"Save"})]})]}):p.jsx("button",{onClick:()=>s(!0),className:"w-full py-3 bg-surface-base text-text-secondary rounded-xl hover:bg-surface-overlay hover:text-text-primary transition-all font-medium",children:"Edit Name"})]}),p.jsxs("div",{className:"bg-surface-elevated rounded-2xl p-6 animate-fade-up stagger-2",children:[p.jsx("h2",{className:"text-sm font-medium text-text-muted uppercase tracking-wider mb-5",children:"Canvas Integration"}),f?p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm text-text-secondary mb-2 block",children:"Canvas URL"}),p.jsx("input",{type:"url",value:c,onChange:k=>l(k.target.value),className:"input",placeholder:"https://school.instructure.com"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm text-text-secondary mb-2 block",children:"API Token"}),p.jsx("input",{type:"password",value:d,onChange:k=>h(k.target.value),className:"input",placeholder:"Your Canvas API token"}),p.jsx("p",{className:"text-xs text-text-muted mt-2",children:"Find your token in Canvas: Account  Settings  New Access Token"})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:()=>g(!1),className:"flex-1 py-3 bg-surface-overlay text-text-secondary rounded-xl hover:bg-surface-overlay/80 transition-colors font-medium",children:"Cancel"}),p.jsx("button",{onClick:A,disabled:v,className:"flex-1 py-3 bg-primary text-text-inverse rounded-xl hover:bg-primary-hover transition-colors font-medium disabled:opacity-50",children:v?"Saving...":"Save"})]})]}):p.jsxs("div",{className:"space-y-4",children:[t!=null&&t.canvas_url?p.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface-base rounded-xl",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-success"}),p.jsx("span",{className:"text-sm text-text-secondary",children:"Connected to Canvas"})]}),p.jsx("span",{className:"text-xs text-text-muted truncate max-w-[150px]",children:t.canvas_url})]}):p.jsxs("div",{className:"flex items-center gap-3 p-4 bg-surface-base rounded-xl",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-text-muted"}),p.jsx("span",{className:"text-sm text-text-muted",children:"Not configured"})]}),(t==null?void 0:t.canvas_url)&&p.jsx("button",{onClick:F,disabled:b,className:"w-full py-3 bg-primary text-text-inverse rounded-xl hover:bg-primary-hover transition-colors font-medium disabled:opacity-50 flex items-center justify-center gap-2",children:b?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Syncing..."]}):p.jsxs(p.Fragment,{children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Sync Assignments"]})}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:()=>g(!0),className:"flex-1 py-3 bg-surface-base text-text-secondary rounded-xl hover:bg-surface-overlay hover:text-text-primary transition-all font-medium",children:t!=null&&t.canvas_url?"Edit Settings":"Set Up Canvas"}),(t==null?void 0:t.canvas_url)&&p.jsx("button",{onClick:E,disabled:x,className:"flex-1 py-3 bg-surface-base text-text-secondary rounded-xl hover:bg-surface-overlay hover:text-text-primary transition-all font-medium disabled:opacity-50",children:x?"Testing...":"Test"})]})]})]}),p.jsx("button",{onClick:I,className:"w-full py-3.5 bg-error/10 text-error rounded-2xl hover:bg-error/15 transition-colors font-medium animate-fade-up stagger-3",children:"Sign Out"})]})]})}const lK=()=>{const[n,e]=ee.useState([]),[t,i]=ee.useState([]),[r,s]=ee.useState([]),[a,o]=ee.useState(!0),[c,l]=ee.useState(null),[d,h]=ee.useState(!1),[f,g]=ee.useState("courses"),[v,y]=ee.useState(null),[x,m]=ee.useState(null),[b,w]=ee.useState(null),[_,D]=ee.useState([]),[A,E]=ee.useState(null),[F,I]=ee.useState(!1);ee.useEffect(()=>{z()},[]);const z=async()=>{var B,L;o(!0),l(null);try{if(!await ar.isConnected()){l("Canvas not connected. Please configure Canvas in Account settings."),o(!1);return}const[q,Q,se,be]=await Promise.all([ar.getSyncedCourses().catch(()=>[]),ar.getSyncedAssignments().catch(()=>[]),ar.getSyncedGrades().catch(()=>[]),ar.getBlockedCoursesWithDetails().catch(()=>[])]);e(q||[]),i(Q||[]),s(se||[]),D(be||[]);const ye=((B=q==null?void 0:q[0])==null?void 0:B.syncedAt)||((L=se==null?void 0:se[0])==null?void 0:L.syncedAt);ye&&y(new Date(ye))}catch(P){console.error("Failed to load Canvas data:",P),l(P.message||"Failed to load Canvas data")}finally{o(!1)}},H=async()=>{h(!0);try{const B=await ar.syncToDatabase();if(B.success)Ne.success(`Synced ${B.courses} courses, ${B.assignments} assignments, ${B.grades} grades`),y(new Date),await z();else throw new Error(B.message||"Sync failed")}catch(B){Ne.error(`Sync failed: ${B.message}`)}finally{h(!1)}},k=async B=>{if(await Qd("Delete Course","Remove this course from your local data?")){w(B);try{await ar.deleteCourse(B),e(n.filter(P=>P.id!==B)),Ne.success("Course removed")}catch(P){Ne.error(`Failed to delete: ${P.message}`)}finally{w(null)}}},W=async B=>{w(B);try{await ar.deleteAssignment(B),i(t.filter(L=>L.id!==B)),Ne.success("Assignment removed")}catch(L){Ne.error(`Failed to delete: ${L.message}`)}finally{w(null)}},S=async B=>{E(B);try{await ar.unblockCourse(B),D(_.filter(L=>L.canvas_course_id!==B)),Ne.success("Course recovered! Sync to restore data.")}catch(L){Ne.error(`Failed to recover: ${L.message}`)}finally{E(null)}},G=async()=>{if(await Qd("Clean Up Assignments","Delete all completed assignments and those older than 2 weeks?")){I(!0);try{const L=await ar.cleanupAssignments();L.deleted>0?(Ne.success(`Cleaned up ${L.deleted} assignments`),await z()):Ne.info("No assignments to clean up")}catch(L){Ne.error(`Cleanup failed: ${L.message}`)}finally{I(!1)}}},j=B=>B?new Date(B).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"No due date",M=B=>{if(!B)return null;const L=new Date,P=new Date(B),q=Math.ceil((P-L)/(1e3*60*60*24));return q<0?{text:"Overdue",color:"text-error"}:q===0?{text:"Due today",color:"text-accent-warm"}:q===1?{text:"Tomorrow",color:"text-accent-warm"}:q<=3?{text:`${q} days`,color:"text-accent-warm"}:{text:`${q} days`,color:"text-text-secondary"}},R=B=>{const L=new Date;return L.setDate(L.getDate()-14),B.filter(P=>!P.dueDate||new Date(P.dueDate)>=L)},N=R(t).filter(B=>!B.submitted&&!B.graded);return a?p.jsx("div",{className:"min-h-screen p-6 md:p-8 lg:p-10 max-w-5xl mx-auto",children:p.jsx("div",{className:"flex items-center justify-center py-20",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"w-8 h-8 mx-auto mb-4 border-2 border-primary/30 border-t-primary rounded-full animate-spin"}),p.jsx("p",{className:"text-text-muted text-sm",children:"Loading Canvas data..."})]})})}):c?p.jsx("div",{className:"min-h-screen p-6 md:p-8 lg:p-10 max-w-5xl mx-auto",children:p.jsx("div",{className:"flex items-center justify-center py-20",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"w-14 h-14 mx-auto mb-4 rounded-2xl bg-surface-elevated flex items-center justify-center",children:p.jsx("svg",{className:"w-7 h-7 text-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),p.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Canvas Not Connected"}),p.jsx("p",{className:"text-sm text-text-muted mb-4",children:c}),p.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-white font-medium rounded-xl hover:bg-primary-hover transition-colors",children:"Retry"})]})})}):p.jsxs("div",{className:"min-h-screen p-6 md:p-8 lg:p-10 max-w-5xl mx-auto",children:[p.jsx("header",{className:"mb-8 animate-fade-up",children:p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-3xl font-semibold text-text-primary tracking-tight",children:"Canvas"}),p.jsxs("p",{className:"text-text-secondary mt-1",children:[n.length," courses  ",N.length," incomplete"]}),v&&p.jsxs("p",{className:"text-xs text-text-muted mt-1",children:["Last synced ",v.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("button",{onClick:G,disabled:F||d,className:"flex items-center gap-2 px-3 py-2 rounded-xl text-sm font-medium bg-surface-elevated text-text-muted hover:text-text-secondary border border-border transition-all disabled:opacity-50",children:[F?p.jsx("div",{className:"w-4 h-4 border-2 border-text-muted/30 border-t-text-muted rounded-full animate-spin"}):p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),p.jsx("span",{children:"Clean Up"})]}),p.jsxs("button",{onClick:H,disabled:d||F,className:"flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium bg-primary text-white hover:bg-primary-hover transition-all disabled:opacity-50",children:[d?p.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),p.jsx("span",{children:"Sync"})]})]})]})}),p.jsx("div",{className:"flex gap-1 p-1 bg-surface-elevated rounded-xl mb-6 animate-fade-up",children:["courses","assignments","grades","deleted"].map(B=>p.jsxs("button",{onClick:()=>{g(B),m(null)},className:`flex-1 py-2.5 px-4 rounded-lg text-sm font-medium transition-all capitalize ${f===B?"bg-primary text-white":"text-text-muted hover:text-text-secondary"}`,children:[B,B==="deleted"&&_.length>0?` (${_.length})`:""]},B))}),p.jsxs("div",{className:"space-y-3 animate-fade-up",children:[f==="courses"&&!x&&p.jsx(p.Fragment,{children:n.length===0?p.jsx(Jg,{icon:"",message:"No courses found. Try syncing with Canvas."}):n.map(B=>{var q;const P=R(t).filter(Q=>Q.courseId===B.id).filter(Q=>!Q.submitted&&!Q.graded).length;return p.jsx("div",{className:"bg-surface-elevated rounded-xl p-4 border border-border hover:border-primary/30 transition-all group",children:p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h3",{className:"font-medium text-text-primary truncate",children:B.course_code||B.name}),B.course_code&&B.course_code!==B.name&&p.jsx("p",{className:"text-xs text-text-muted truncate mt-0.5",children:B.name}),((q=B.term)==null?void 0:q.name)&&p.jsx("p",{className:"text-xs text-text-muted mt-1",children:B.term.name})]}),p.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[p.jsxs("button",{onClick:()=>m(B),className:"px-3 py-1.5 rounded-lg bg-primary/10 text-primary text-xs font-medium hover:bg-primary/20 transition-colors",children:[P," due"]}),p.jsx("button",{onClick:()=>k(B.id),disabled:b===B.id,className:"p-1.5 rounded-lg text-text-muted hover:text-error hover:bg-error/10 transition-colors opacity-0 group-hover:opacity-100",children:b===B.id?p.jsx("div",{className:"w-4 h-4 border-2 border-text-muted/30 border-t-text-muted rounded-full animate-spin"}):p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]})]})},B.id)})}),f==="courses"&&x&&p.jsxs(p.Fragment,{children:[p.jsxs("button",{onClick:()=>m(null),className:"flex items-center gap-2 text-text-muted hover:text-text-primary transition-colors mb-4",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),p.jsx("span",{className:"text-sm",children:"Back to courses"})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("h2",{className:"text-xl font-semibold text-text-primary",children:x.course_code||x.name}),p.jsxs("p",{className:"text-sm text-text-muted",children:[R(t).filter(B=>B.courseId===x.id&&!B.submitted&&!B.graded).length," incomplete assignments"]})]}),R(t).filter(B=>B.courseId===x.id&&!B.submitted&&!B.graded).length===0?p.jsx(Jg,{icon:"",message:"All caught up! No incomplete assignments."}):R(t).filter(B=>B.courseId===x.id&&!B.submitted&&!B.graded).map(B=>p.jsx(s4,{assignment:B,onDelete:W,deleting:b,formatDate:j,getDaysUntilDue:M},B.id))]}),f==="assignments"&&p.jsx(p.Fragment,{children:N.length===0?p.jsx(Jg,{icon:"",message:"All caught up! No incomplete assignments."}):N.map(B=>p.jsx(s4,{assignment:B,onDelete:W,deleting:b,formatDate:j,getDaysUntilDue:M,showCourse:!0},B.id))}),f==="grades"&&p.jsx(p.Fragment,{children:r.length===0?p.jsx(Jg,{icon:"",message:"No grades available yet."}):r.map(B=>{const L=B.currentScore||0,P=L>=90?"text-success":L>=80?"text-primary":L>=70?"text-accent-warm":"text-error",q=L>=90?"bg-success":L>=80?"bg-primary":L>=70?"bg-accent-warm":"bg-error";return p.jsxs("div",{className:"bg-surface-elevated rounded-xl p-4 border border-border",children:[p.jsxs("div",{className:"flex items-start justify-between mb-3",children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h3",{className:"font-medium text-text-primary truncate",children:B.courseCode||B.courseName}),B.courseCode&&B.courseCode!==B.courseName&&p.jsx("p",{className:"text-xs text-text-muted truncate mt-0.5",children:B.courseName})]}),p.jsx("div",{className:"text-right ml-4",children:p.jsx("div",{className:`text-2xl font-bold ${P}`,children:B.currentGrade||(L?`${L.toFixed(0)}%`:"N/A")})})]}),L>0&&p.jsx("div",{className:"h-1.5 bg-surface-base rounded-full overflow-hidden",children:p.jsx("div",{className:`h-full rounded-full ${q} transition-all`,style:{width:`${Math.min(L,100)}%`}})})]},B.courseId)})}),f==="deleted"&&p.jsxs(p.Fragment,{children:[p.jsx("p",{className:"text-sm text-text-muted mb-4",children:"Deleted courses stay hidden even after syncing. Recover them to restore."}),_.length===0?p.jsx(Jg,{icon:"",message:"No deleted courses."}):_.map(B=>p.jsx("div",{className:"bg-surface-elevated rounded-xl p-4 border border-border",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsxs("h3",{className:"font-medium text-text-primary",children:["Course ID: ",B.canvas_course_id]}),p.jsxs("p",{className:"text-xs text-text-muted mt-0.5",children:["Deleted ",new Date(B.blocked_at).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),p.jsxs("button",{onClick:()=>S(B.canvas_course_id),disabled:A===B.canvas_course_id,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-success/10 text-success text-xs font-medium hover:bg-success/20 transition-colors disabled:opacity-50",children:[A===B.canvas_course_id?p.jsx("div",{className:"w-3 h-3 border-2 border-success/30 border-t-success rounded-full animate-spin"}):p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),p.jsx("span",{children:"Recover"})]})]})},B.id))]})]})]})},Jg=({icon:n,message:e})=>p.jsxs("div",{className:"text-center py-12 bg-surface-elevated rounded-xl border border-border",children:[p.jsx("div",{className:"text-4xl mb-3",children:n}),p.jsx("p",{className:"text-text-muted",children:e})]}),s4=({assignment:n,onDelete:e,deleting:t,formatDate:i,getDaysUntilDue:r,showCourse:s})=>{const a=r(n.dueDate);return p.jsxs("div",{className:"bg-surface-elevated rounded-xl p-4 border border-border hover:border-primary/30 transition-all group",children:[s&&p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),p.jsx("span",{className:"text-xs font-medium text-text-muted",children:n.subject})]}),p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h3",{className:"font-medium text-text-primary",children:n.title}),p.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-text-muted",children:[n.dueDate&&p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),i(n.dueDate),a&&p.jsxs("span",{className:`font-medium ${a.color}`,children:["(",a.text,")"]})]}),n.points&&p.jsxs("span",{children:[n.points," pts"]})]})]}),p.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n.htmlUrl&&p.jsx("a",{href:n.htmlUrl,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1.5 rounded-lg bg-primary/10 text-primary text-xs font-medium hover:bg-primary/20 transition-colors",children:"Open"}),p.jsx("button",{onClick:()=>e(n.id),disabled:t===n.id,className:"p-1.5 rounded-lg text-text-muted hover:text-error hover:bg-error/10 transition-colors opacity-0 group-hover:opacity-100",children:t===n.id?p.jsx("div",{className:"w-4 h-4 border-2 border-text-muted/30 border-t-text-muted rounded-full animate-spin"}):p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]})]})]})},uK=({onAuthSuccess:n})=>{const[e,t]=ee.useState(!1),[i,r]=ee.useState(""),[s,a]=ee.useState(""),[o,c]=ee.useState(""),[l,d]=ee.useState(!1),[h,f]=ee.useState(!1),[g,v]=ee.useState(null),y=async x=>{if(x.preventDefault(),f(!0),v(null),!(i!=null&&i.trim())){v("Email is required"),f(!1);return}if(!s||s.length<6){v("Password must be at least 6 characters"),f(!1);return}if(e&&!o.trim()){v("Please enter your name"),f(!1);return}try{let m;e?m=await ge.signUp(i.trim(),s,{full_name:o.trim()}):m=await ge.signIn(i.trim(),s),m.error?v(m.error.message||"Authentication failed"):n&&n(m.user)}catch(m){v(m.message||"Authentication failed")}finally{f(!1)}};return p.jsx("div",{className:"min-h-screen bg-surface-base flex items-center justify-center p-6",children:p.jsxs("div",{className:"w-full max-w-md bg-surface-elevated rounded-xl border border-border p-8",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("div",{className:"w-14 h-14 mx-auto mb-4 rounded-xl bg-primary flex items-center justify-center",children:p.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),p.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Focus Flow"}),p.jsx("p",{className:"text-text-muted mt-1",children:"AI-powered study companion"})]}),g&&p.jsx("div",{className:"mb-4 p-3 bg-error/10 border border-error/30 rounded-lg text-error text-sm",children:g}),p.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1.5",children:"Name"}),p.jsx("input",{type:"text",value:o,onChange:x=>c(x.target.value),placeholder:"Your name",className:"w-full px-4 py-2.5 bg-surface-base border border-border rounded-lg text-text-primary placeholder:text-text-muted focus:outline-none focus:border-primary"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1.5",children:"Email"}),p.jsx("input",{type:"email",value:i,onChange:x=>r(x.target.value),placeholder:"you@example.com",autoComplete:"email",className:"w-full px-4 py-2.5 bg-surface-base border border-border rounded-lg text-text-primary placeholder:text-text-muted focus:outline-none focus:border-primary"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1.5",children:"Password"}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:l?"text":"password",value:s,onChange:x=>a(x.target.value),placeholder:"",minLength:6,autoComplete:e?"new-password":"current-password",className:"w-full px-4 py-2.5 pr-10 bg-surface-base border border-border rounded-lg text-text-primary placeholder:text-text-muted focus:outline-none focus:border-primary"}),p.jsx("button",{type:"button",onClick:()=>d(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l?p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})})})]})]}),p.jsx("button",{type:"submit",disabled:h,className:"w-full py-3 bg-primary text-white font-medium rounded-lg hover:bg-primary-hover transition-colors disabled:opacity-50",children:h?p.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mx-auto"}):e?"Create Account":"Sign In"})]}),p.jsx("div",{className:"mt-6 text-center",children:p.jsx("button",{onClick:()=>{t(!e),v(null)},className:"text-text-secondary hover:text-primary transition-colors",children:e?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})})};function dK(){var k,W,S,G,j;const[n,e]=ee.useState("dashboard"),[t,i]=ee.useState(!1),[r,s]=ee.useState(null),[a,o]=ee.useState(null),[c,l]=ee.useState(!0),[d,h]=ee.useState(0),[f,g]=ee.useState(!0),[v,y]=ee.useState(!1),[x,m]=ee.useState(null),[b,w]=ee.useState(0),[_,D]=ee.useState(!1),[A,E]=ee.useState(!1);ee.useEffect(()=>{(async()=>{const{user:N}=await ge.getCurrentUser();if(s(N),l(!1),N){await ge.refreshUserProfile();const B=ge.getUserProfile();o(B)}})();const R=ge.onAuthStateChange(async(N,B)=>{if(s((B==null?void 0:B.user)||null),B!=null&&B.user){await ge.refreshUserProfile();const L=ge.getUserProfile();o(L)}else o(null)});return()=>R.unsubscribe()},[]),ee.useEffect(()=>{const M=localStorage.getItem("sidebarLocked");if(M!==null){const R=JSON.parse(M);y(R),R&&g(!1)}},[]),ee.useEffect(()=>{localStorage.setItem("sidebarLocked",JSON.stringify(v)),v&&g(!1)},[v]),ee.useEffect(()=>{let M=null;return _&&!A&&(M=setInterval(()=>{w(R=>R+1)},1e3)),()=>clearInterval(M)},[_,A]);const F=M=>{const R=Math.floor(M/60),N=M%60;return`${R}:${String(N).padStart(2,"0")}`},I={focusTask:x,setFocusTask:m,focusTime:b,setFocusTime:w,focusActive:_,setFocusActive:D,focusPaused:A,setFocusPaused:E},z=[{id:"dashboard",label:"Home",icon:"home"},{id:"planner",label:"Plan",icon:"calendar"},{id:"canvas",label:"Canvas",icon:"graduation"},{id:"study",label:"Study",icon:"book"},{id:"tutor",label:"AI",icon:"sparkles"},{id:"account",label:"Account",icon:"user"}],H=(M,R)=>{const N="w-5 h-5",B=R?2:1.5;return{home:p.jsx("svg",{className:N,fill:R?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:B,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),calendar:p.jsx("svg",{className:N,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:B,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),book:p.jsx("svg",{className:N,fill:R?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:B,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),sparkles:p.jsx("svg",{className:N,fill:R?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:B,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),user:p.jsx("svg",{className:N,fill:R?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:B,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),camera:p.jsxs("svg",{className:N,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:B,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:B,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),graduation:p.jsx("svg",{className:N,fill:R?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:B,d:"M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222"})})}[M]||null};return c?p.jsx("div",{className:"min-h-screen bg-surface-base flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"w-10 h-10 mx-auto mb-4 border-2 border-border border-t-primary rounded-full animate-spin"}),p.jsx("p",{className:"text-text-muted text-sm",children:"Loading..."})]})}):r?p.jsxs(KW,{children:[p.jsxs("div",{className:"min-h-screen bg-surface-base flex",children:[t&&p.jsx(QW,{onClose:()=>{i(!1),h(M=>M+1)},onCapture:M=>console.log("Captured:",M)}),p.jsxs("aside",{className:`hidden md:flex md:flex-col ${f?"w-18":"w-60"} bg-surface-base fixed left-0 top-0 bottom-0 z-40 transition-all duration-300 ease-gentle`,onMouseEnter:()=>!v&&g(!1),onMouseLeave:()=>!v&&g(!0),children:[p.jsxs("div",{className:"h-18 flex items-center justify-center",children:[p.jsx("div",{className:`flex items-center gap-3 transition-all duration-300 ${f?"opacity-0 scale-90":"opacity-100 scale-100"}`,children:!f&&p.jsx("span",{className:"text-xl font-semibold text-text-primary tracking-tight",children:"Focus Flow"})}),f&&p.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center",children:p.jsx("span",{className:"text-primary font-semibold text-sm",children:"FF"})})]}),r&&p.jsx("div",{className:`px-3 py-4 ${f?"flex justify-center":""}`,children:p.jsxs("div",{className:`flex items-center ${f?"justify-center":"gap-3 px-2"}`,children:[p.jsx("div",{className:"w-9 h-9 rounded-xl bg-accent-warm/15 flex items-center justify-center text-accent-warm font-medium text-sm flex-shrink-0",children:((W=(k=a==null?void 0:a.full_name)==null?void 0:k[0])==null?void 0:W.toUpperCase())||((G=(S=r.email)==null?void 0:S[0])==null?void 0:G.toUpperCase())||"U"}),!f&&p.jsxs("div",{className:"min-w-0 transition-opacity duration-200",children:[p.jsx("p",{className:"text-sm font-medium text-text-primary truncate",children:(a==null?void 0:a.full_name)||((j=r.email)==null?void 0:j.split("@")[0])}),p.jsx("p",{className:"text-xs text-text-muted truncate",children:r.email})]})]})}),p.jsxs("nav",{className:"flex-1 px-3 py-2 space-y-1",children:[p.jsxs("button",{onClick:()=>e("scan"),className:`w-full ${f?"p-3 justify-center":"px-3 py-3"} rounded-xl ${n==="scan"?"bg-primary/20 text-primary":"bg-primary/10 hover:bg-primary/15 text-primary"} flex items-center gap-3 transition-all duration-200 group`,title:"Scan",children:[p.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:H("camera",n==="scan")}),!f&&p.jsx("span",{className:"text-sm font-medium",children:"Scan"})]}),p.jsx("div",{className:"h-4"}),z.map(M=>{const R=n===M.id;return p.jsxs("button",{onClick:()=>e(M.id),className:`w-full ${f?"p-3 justify-center":"px-3 py-3"} rounded-xl flex items-center gap-3 transition-all duration-200 ${R?"bg-surface-elevated text-text-primary":"text-text-muted hover:bg-surface-elevated/50 hover:text-text-secondary"}`,title:f?M.label:void 0,children:[p.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:H(M.icon,R)}),!f&&p.jsx("span",{className:`text-sm ${R?"font-medium":""}`,children:M.label})]},M.id)})]}),p.jsx("div",{className:"px-3 pb-4",children:p.jsxs("button",{onClick:()=>y(!v),className:`w-full ${f?"p-3 justify-center":"px-3 py-2.5"} rounded-xl flex items-center gap-3 transition-all duration-200 ${v?"bg-primary/10 text-primary":"text-text-muted hover:bg-surface-elevated/50 hover:text-text-secondary"}`,title:v?"Unlock sidebar":"Lock sidebar open",children:[p.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:v?p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}):p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"})})}),!f&&p.jsx("span",{className:"text-sm",children:v?"Locked":"Lock open"})]})})]}),p.jsx("main",{className:`flex-1 ${f?"md:ml-18":"md:ml-60"} transition-all duration-300 ease-gentle`,children:p.jsxs("div",{className:"h-screen overflow-y-auto overflow-x-hidden pb-20 md:pb-0",children:[n==="dashboard"&&p.jsx("div",{className:"animate-fade-in",children:p.jsx(LW,{onOpenScanner:()=>i(!0),focusTimerProps:I},d)},"dashboard"),n==="scan"&&p.jsx("div",{className:"animate-fade-in",children:p.jsx(JW,{})},"scan"),n==="planner"&&p.jsx("div",{className:"animate-fade-in",children:p.jsx(qW,{})},"planner"),n==="canvas"&&p.jsx("div",{className:"animate-fade-in",children:p.jsx(lK,{})},"canvas"),n==="study"&&p.jsx("div",{className:"animate-fade-in",children:p.jsx(oK,{})},"study"),n==="tutor"&&p.jsx("div",{className:"animate-fade-in h-[calc(100vh-5rem)] md:h-screen",children:p.jsx(PW,{})},"tutor"),n==="account"&&p.jsx("div",{className:"animate-fade-in",children:p.jsx(cK,{})},"account")]})}),p.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-surface-elevated/95 backdrop-blur-lg border-t border-border z-50 safe-area-pb",children:p.jsxs("div",{className:"grid grid-cols-7 h-16",children:[z.slice(0,3).map(M=>{const R=n===M.id;return p.jsxs("button",{onClick:()=>e(M.id),className:`flex flex-col items-center justify-center gap-0.5 transition-colors ${R?"text-primary":"text-text-muted"}`,children:[H(M.icon,R),p.jsx("span",{className:"text-[9px] font-medium",children:M.label})]},M.id)}),p.jsx("button",{onClick:()=>e("scan"),className:"flex items-center justify-center",children:p.jsx("div",{className:`w-12 h-12 -mt-4 rounded-xl flex items-center justify-center shadow-lg active:scale-95 transition-transform ${n==="scan"?"bg-primary text-white shadow-primary/30":"bg-primary text-white shadow-primary/20"}`,children:H("camera",!0)})}),z.slice(3).map(M=>{const R=n===M.id;return p.jsxs("button",{onClick:()=>e(M.id),className:`flex flex-col items-center justify-center gap-0.5 transition-colors ${R?"text-primary":"text-text-muted"}`,children:[H(M.icon,R),p.jsx("span",{className:"text-[9px] font-medium",children:M.label})]},M.id)})]})})]}),x&&n!=="dashboard"&&p.jsx("div",{className:"fixed bottom-24 md:bottom-6 right-4 md:right-6 z-50 animate-scale-in",children:p.jsxs("div",{className:"bg-surface-elevated border border-primary/30 rounded-2xl shadow-lg shadow-primary/10 p-4 min-w-[200px]",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:`w-10 h-10 rounded-xl bg-primary/20 flex items-center justify-center ${_&&!A?"animate-pulse":""}`,children:p.jsx("svg",{className:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"text-xs text-primary font-medium uppercase tracking-wider",children:_&&!A?"Focusing":"Paused"}),p.jsx("p",{className:"text-sm font-medium text-text-primary truncate",children:x.title})]}),p.jsx("span",{className:"text-2xl font-mono font-bold text-primary tabular-nums",children:F(b)})]}),p.jsxs("div",{className:"flex gap-2 mt-3",children:[_&&!A?p.jsx("button",{onClick:()=>E(!0),className:"flex-1 py-2 px-3 bg-surface-overlay hover:bg-surface-base rounded-lg text-sm font-medium text-text-secondary transition-colors",children:"Pause"}):p.jsx("button",{onClick:()=>E(!1),className:"flex-1 py-2 px-3 bg-primary/20 hover:bg-primary/30 rounded-lg text-sm font-medium text-primary transition-colors",children:"Resume"}),p.jsx("button",{onClick:()=>e("dashboard"),className:"flex-1 py-2 px-3 bg-primary hover:bg-primary-hover rounded-lg text-sm font-medium text-white transition-colors",children:"View"})]})]})}),p.jsx(MW,{}),p.jsx(BW,{})]}):p.jsx(uK,{onAuthSuccess:M=>s(M)})}iP.createRoot(document.getElementById("root")).render(p.jsx(ee.StrictMode,{children:p.jsx(dK,{})}));
